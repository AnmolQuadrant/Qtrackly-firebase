(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var m0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function MA(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var g0={exports:{}},Pa={},x0={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function OA(){if(xv)return st;xv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function x(_){return _===null||typeof _!="object"?null:(_=y&&_[y]||_["@@iterator"],typeof _=="function"?_:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function S(_,F,Y){this.props=_,this.context=F,this.refs=E,this.updater=Y||C}S.prototype.isReactComponent={},S.prototype.setState=function(_,F){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,F,"setState")},S.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function A(){}A.prototype=S.prototype;function b(_,F,Y){this.props=_,this.context=F,this.refs=E,this.updater=Y||C}var k=b.prototype=new A;k.constructor=b,w(k,S.prototype),k.isPureReactComponent=!0;var I=Array.isArray,R=Object.prototype.hasOwnProperty,D={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function M(_,F,Y){var W,ce={},pe=null,Ee=null;if(F!=null)for(W in F.ref!==void 0&&(Ee=F.ref),F.key!==void 0&&(pe=""+F.key),F)R.call(F,W)&&!j.hasOwnProperty(W)&&(ce[W]=F[W]);var Z=arguments.length-2;if(Z===1)ce.children=Y;else if(1<Z){for(var se=Array(Z),we=0;we<Z;we++)se[we]=arguments[we+2];ce.children=se}if(_&&_.defaultProps)for(W in Z=_.defaultProps,Z)ce[W]===void 0&&(ce[W]=Z[W]);return{$$typeof:n,type:_,key:pe,ref:Ee,props:ce,_owner:D.current}}function U(_,F){return{$$typeof:n,type:_.type,key:F,ref:_.ref,props:_.props,_owner:_._owner}}function P(_){return typeof _=="object"&&_!==null&&_.$$typeof===n}function L(_){var F={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(Y){return F[Y]})}var $=/\/+/g;function z(_,F){return typeof _=="object"&&_!==null&&_.key!=null?L(""+_.key):F.toString(36)}function ne(_,F,Y,W,ce){var pe=typeof _;(pe==="undefined"||pe==="boolean")&&(_=null);var Ee=!1;if(_===null)Ee=!0;else switch(pe){case"string":case"number":Ee=!0;break;case"object":switch(_.$$typeof){case n:case e:Ee=!0}}if(Ee)return Ee=_,ce=ce(Ee),_=W===""?"."+z(Ee,0):W,I(ce)?(Y="",_!=null&&(Y=_.replace($,"$&/")+"/"),ne(ce,F,Y,"",function(we){return we})):ce!=null&&(P(ce)&&(ce=U(ce,Y+(!ce.key||Ee&&Ee.key===ce.key?"":(""+ce.key).replace($,"$&/")+"/")+_)),F.push(ce)),1;if(Ee=0,W=W===""?".":W+":",I(_))for(var Z=0;Z<_.length;Z++){pe=_[Z];var se=W+z(pe,Z);Ee+=ne(pe,F,Y,se,ce)}else if(se=x(_),typeof se=="function")for(_=se.call(_),Z=0;!(pe=_.next()).done;)pe=pe.value,se=W+z(pe,Z++),Ee+=ne(pe,F,Y,se,ce);else if(pe==="object")throw F=String(_),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return Ee}function oe(_,F,Y){if(_==null)return _;var W=[],ce=0;return ne(_,W,"","",function(pe){return F.call(Y,pe,ce++)}),W}function he(_){if(_._status===-1){var F=_._result;F=F(),F.then(function(Y){(_._status===0||_._status===-1)&&(_._status=1,_._result=Y)},function(Y){(_._status===0||_._status===-1)&&(_._status=2,_._result=Y)}),_._status===-1&&(_._status=0,_._result=F)}if(_._status===1)return _._result.default;throw _._result}var K={current:null},B={transition:null},Q={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:B,ReactCurrentOwner:D};function ee(){throw Error("act(...) is not supported in production builds of React.")}return st.Children={map:oe,forEach:function(_,F,Y){oe(_,function(){F.apply(this,arguments)},Y)},count:function(_){var F=0;return oe(_,function(){F++}),F},toArray:function(_){return oe(_,function(F){return F})||[]},only:function(_){if(!P(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},st.Component=S,st.Fragment=t,st.Profiler=o,st.PureComponent=b,st.StrictMode=r,st.Suspense=h,st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,st.act=ee,st.cloneElement=function(_,F,Y){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var W=w({},_.props),ce=_.key,pe=_.ref,Ee=_._owner;if(F!=null){if(F.ref!==void 0&&(pe=F.ref,Ee=D.current),F.key!==void 0&&(ce=""+F.key),_.type&&_.type.defaultProps)var Z=_.type.defaultProps;for(se in F)R.call(F,se)&&!j.hasOwnProperty(se)&&(W[se]=F[se]===void 0&&Z!==void 0?Z[se]:F[se])}var se=arguments.length-2;if(se===1)W.children=Y;else if(1<se){Z=Array(se);for(var we=0;we<se;we++)Z[we]=arguments[we+2];W.children=Z}return{$$typeof:n,type:_.type,key:ce,ref:pe,props:W,_owner:Ee}},st.createContext=function(_){return _={$$typeof:l,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:a,_context:_},_.Consumer=_},st.createElement=M,st.createFactory=function(_){var F=M.bind(null,_);return F.type=_,F},st.createRef=function(){return{current:null}},st.forwardRef=function(_){return{$$typeof:d,render:_}},st.isValidElement=P,st.lazy=function(_){return{$$typeof:p,_payload:{_status:-1,_result:_},_init:he}},st.memo=function(_,F){return{$$typeof:f,type:_,compare:F===void 0?null:F}},st.startTransition=function(_){var F=B.transition;B.transition={};try{_()}finally{B.transition=F}},st.unstable_act=ee,st.useCallback=function(_,F){return K.current.useCallback(_,F)},st.useContext=function(_){return K.current.useContext(_)},st.useDebugValue=function(){},st.useDeferredValue=function(_){return K.current.useDeferredValue(_)},st.useEffect=function(_,F){return K.current.useEffect(_,F)},st.useId=function(){return K.current.useId()},st.useImperativeHandle=function(_,F,Y){return K.current.useImperativeHandle(_,F,Y)},st.useInsertionEffect=function(_,F){return K.current.useInsertionEffect(_,F)},st.useLayoutEffect=function(_,F){return K.current.useLayoutEffect(_,F)},st.useMemo=function(_,F){return K.current.useMemo(_,F)},st.useReducer=function(_,F,Y){return K.current.useReducer(_,F,Y)},st.useRef=function(_){return K.current.useRef(_)},st.useState=function(_){return K.current.useState(_)},st.useSyncExternalStore=function(_,F,Y){return K.current.useSyncExternalStore(_,F,Y)},st.useTransition=function(){return K.current.useTransition()},st.version="18.3.1",st}var yv;function Yp(){return yv||(yv=1,x0.exports=OA()),x0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function FA(){if(vv)return Pa;vv=1;var n=Yp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,h,f){var p,y={},x=null,C=null;f!==void 0&&(x=""+f),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(C=h.ref);for(p in h)r.call(h,p)&&!a.hasOwnProperty(p)&&(y[p]=h[p]);if(d&&d.defaultProps)for(p in h=d.defaultProps,h)y[p]===void 0&&(y[p]=h[p]);return{$$typeof:e,type:d,key:x,ref:C,props:y,_owner:o.current}}return Pa.Fragment=t,Pa.jsx=l,Pa.jsxs=l,Pa}var wv;function BA(){return wv||(wv=1,g0.exports=FA()),g0.exports}var c=BA(),T=Yp();const LA=DC(T);var Uc={},y0={exports:{}},er={},v0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function HA(){return Cv||(Cv=1,function(n){function e(B,Q){var ee=B.length;B.push(Q);e:for(;0<ee;){var _=ee-1>>>1,F=B[_];if(0<o(F,Q))B[_]=Q,B[ee]=F,ee=_;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],ee=B.pop();if(ee!==Q){B[0]=ee;e:for(var _=0,F=B.length,Y=F>>>1;_<Y;){var W=2*(_+1)-1,ce=B[W],pe=W+1,Ee=B[pe];if(0>o(ce,ee))pe<F&&0>o(Ee,ce)?(B[_]=Ee,B[pe]=ee,_=pe):(B[_]=ce,B[W]=ee,_=W);else if(pe<F&&0>o(Ee,ee))B[_]=Ee,B[pe]=ee,_=pe;else break e}}return Q}function o(B,Q){var ee=B.sortIndex-Q.sortIndex;return ee!==0?ee:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var h=[],f=[],p=1,y=null,x=3,C=!1,w=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var Q=t(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=B)r(f),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=t(f)}}function I(B){if(E=!1,k(B),!w)if(t(h)!==null)w=!0,he(R);else{var Q=t(f);Q!==null&&K(I,Q.startTime-B)}}function R(B,Q){w=!1,E&&(E=!1,A(M),M=-1),C=!0;var ee=x;try{for(k(Q),y=t(h);y!==null&&(!(y.expirationTime>Q)||B&&!L());){var _=y.callback;if(typeof _=="function"){y.callback=null,x=y.priorityLevel;var F=_(y.expirationTime<=Q);Q=n.unstable_now(),typeof F=="function"?y.callback=F:y===t(h)&&r(h),k(Q)}else r(h);y=t(h)}if(y!==null)var Y=!0;else{var W=t(f);W!==null&&K(I,W.startTime-Q),Y=!1}return Y}finally{y=null,x=ee,C=!1}}var D=!1,j=null,M=-1,U=5,P=-1;function L(){return!(n.unstable_now()-P<U)}function $(){if(j!==null){var B=n.unstable_now();P=B;var Q=!0;try{Q=j(!0,B)}finally{Q?z():(D=!1,j=null)}}else D=!1}var z;if(typeof b=="function")z=function(){b($)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,oe=ne.port2;ne.port1.onmessage=$,z=function(){oe.postMessage(null)}}else z=function(){S($,0)};function he(B){j=B,D||(D=!0,z())}function K(B,Q){M=S(function(){B(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){w||C||(w=!0,he(R))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var ee=x;x=Q;try{return B()}finally{x=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=x;x=B;try{return Q()}finally{x=ee}},n.unstable_scheduleCallback=function(B,Q,ee){var _=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?_+ee:_):ee=_,B){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ee+F,B={id:p++,callback:Q,priorityLevel:B,startTime:ee,expirationTime:F,sortIndex:-1},ee>_?(B.sortIndex=ee,e(f,B),t(h)===null&&B===t(f)&&(E?(A(M),M=-1):E=!0,K(I,ee-_))):(B.sortIndex=F,e(h,B),w||C||(w=!0,he(R))),B},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(B){var Q=x;return function(){var ee=x;x=Q;try{return B.apply(this,arguments)}finally{x=ee}}}}(w0)),w0}var bv;function UA(){return bv||(bv=1,v0.exports=HA()),v0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function $A(){if(Ev)return er;Ev=1;var n=Yp(),e=UA();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){l(s,i),l(s+"Capture",i)}function l(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function x(s){return h.call(y,s)?!0:h.call(p,s)?!1:f.test(s)?y[s]=!0:(p[s]=!0,!1)}function C(s,i,u,m){if(u!==null&&u.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function w(s,i,u,m){if(i===null||typeof i>"u"||C(s,i,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function E(s,i,u,m,g,v,N){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=i,this.sanitizeURL=v,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new E(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];S[i]=new E(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new E(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new E(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new E(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new E(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new E(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new E(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new E(s,5,!1,s.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function b(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(A,b);S[i]=new E(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(A,b);S[i]=new E(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(A,b);S[i]=new E(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new E(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new E(s,1,!1,s.toLowerCase(),null,!0,!0)});function k(s,i,u,m){var g=S.hasOwnProperty(i)?S[i]:null;(g!==null?g.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,u,g,m)&&(u=null),m||g===null?x(i)&&(u===null?s.removeAttribute(i):s.setAttribute(i,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(i=g.attributeName,m=g.attributeNamespace,u===null?s.removeAttribute(i):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,m?s.setAttributeNS(m,i,u):s.setAttribute(i,u))))}var I=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),D=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),L=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),B=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Object.assign,_;function F(s){if(_===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);_=i&&i[1]||""}return`
`+_+s}var Y=!1;function W(s,i){if(!s||Y)return"";Y=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(te){var m=te}Reflect.construct(s,[],i)}else{try{i.call()}catch(te){m=te}s.call(i.prototype)}else{try{throw Error()}catch(te){m=te}s()}}catch(te){if(te&&m&&typeof te.stack=="string"){for(var g=te.stack.split(`
`),v=m.stack.split(`
`),N=g.length-1,O=v.length-1;1<=N&&0<=O&&g[N]!==v[O];)O--;for(;1<=N&&0<=O;N--,O--)if(g[N]!==v[O]){if(N!==1||O!==1)do if(N--,O--,0>O||g[N]!==v[O]){var H=`
`+g[N].replace(" at new "," at ");return s.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",s.displayName)),H}while(1<=N&&0<=O);break}}}finally{Y=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?F(s):""}function ce(s){switch(s.tag){case 5:return F(s.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return s=W(s.type,!1),s;case 11:return s=W(s.type.render,!1),s;case 1:return s=W(s.type,!0),s;default:return""}}function pe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case D:return"Portal";case U:return"Profiler";case M:return"StrictMode";case z:return"Suspense";case ne:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case P:return(s._context.displayName||"Context")+".Provider";case $:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case oe:return i=s.displayName||null,i!==null?i:pe(s.type)||"Memo";case he:i=s._payload,s=s._init;try{return pe(s(i))}catch{}}return null}function Ee(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(i);case 8:return i===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Z(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function se(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function we(s){var i=se(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),m=""+s[i];if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(N){m=""+N,v.call(this,N)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function ke(s){s._valueTracker||(s._valueTracker=we(s))}function Le(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var u=i.getValue(),m="";return s&&(m=se(s)?s.checked?"true":"false":s.value),s=m,s!==u?(i.setValue(s),!0):!1}function Te(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ze(s,i){var u=i.checked;return ee({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function it(s,i){var u=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;u=Z(i.value!=null?i.value:u),s._wrapperState={initialChecked:m,initialValue:u,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function bt(s,i){i=i.checked,i!=null&&k(s,"checked",i,!1)}function mt(s,i){bt(s,i);var u=Z(i.value),m=i.type;if(u!=null)m==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?$t(s,i.type,u):i.hasOwnProperty("defaultValue")&&$t(s,i.type,Z(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function Ln(s,i,u){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,u||i===s.value||(s.value=i),s.defaultValue=i}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function $t(s,i,u){(i!=="number"||Te(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Et=Array.isArray;function At(s,i,u,m){if(s=s.options,i){i={};for(var g=0;g<u.length;g++)i["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=i.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&m&&(s[u].defaultSelected=!0)}else{for(u=""+Z(u),i=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,m&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function zt(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Dt(s,i){var u=i.value;if(u==null){if(u=i.children,i=i.defaultValue,u!=null){if(i!=null)throw Error(t(92));if(Et(u)){if(1<u.length)throw Error(t(93));u=u[0]}i=u}i==null&&(i=""),u=i}s._wrapperState={initialValue:Z(u)}}function _n(s,i){var u=Z(i.value),m=Z(i.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),i.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),m!=null&&(s.defaultValue=""+m)}function gr(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function dn(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hn(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?dn(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Pt,Vt=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,u,m,g){MSApp.execUnsafeLocalFunction(function(){return s(i,u,m,g)})}:s}(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Pt=Pt||document.createElement("div"),Pt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Pt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function Ce(s,i){if(i){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=i;return}}s.textContent=i}var G={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];Object.keys(G).forEach(function(s){ge.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),G[i]=G[s]})});function Be(s,i,u){return i==null||typeof i=="boolean"||i===""?"":u||typeof i!="number"||i===0||G.hasOwnProperty(s)&&G[s]?(""+i).trim():i+"px"}function Ue(s,i){s=s.style;for(var u in i)if(i.hasOwnProperty(u)){var m=u.indexOf("--")===0,g=Be(u,i[u],m);u==="float"&&(u="cssFloat"),m?s.setProperty(u,g):s[u]=g}}var qe=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pe(s,i){if(i){if(qe[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ut(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function We(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var lt=null,rt=null,yt=null;function Xt(s){if(s=ya(s)){if(typeof lt!="function")throw Error(t(280));var i=s.stateNode;i&&(i=nc(i),lt(s.stateNode,s.type,i))}}function _t(s){rt?yt?yt.push(s):yt=[s]:rt=s}function fn(){if(rt){var s=rt,i=yt;if(yt=rt=null,Xt(s),i)for(s=0;s<i.length;s++)Xt(i[s])}}function Kt(s,i){return s(i)}function Cn(){}var Hn=!1;function Gr(s,i,u){if(Hn)return s(i,u);Hn=!0;try{return Kt(s,i,u)}finally{Hn=!1,(rt!==null||yt!==null)&&(Cn(),fn())}}function Gn(s,i){var u=s.stateNode;if(u===null)return null;var m=nc(u);if(m===null)return null;u=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,i,typeof u));return u}var or=!1;if(d)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){or=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch{or=!1}function ir(s,i,u,m,g,v,N,O,H){var te=Array.prototype.slice.call(arguments,3);try{i.apply(u,te)}catch(me){this.onError(me)}}var Yr=!1,Is=null,Wo=!1,Zi=null,Ih={onError:function(s){Yr=!0,Is=s}};function jl(s,i,u,m,g,v,N,O,H){Yr=!1,Is=null,ir.apply(Ih,arguments)}function Rh(s,i,u,m,g,v,N,O,H){if(jl.apply(this,arguments),Yr){if(Yr){var te=Is;Yr=!1,Is=null}else throw Error(t(198));Wo||(Wo=!0,Zi=te)}}function xr(s){var i=s,u=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,i.flags&4098&&(u=i.return),s=i.return;while(s)}return i.tag===3?u:null}function Ml(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Ol(s){if(xr(s)!==s)throw Error(t(188))}function Dh(s){var i=s.alternate;if(!i){if(i=xr(s),i===null)throw Error(t(188));return i!==s?null:s}for(var u=s,m=i;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(m=g.return,m!==null){u=m;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Ol(g),s;if(v===m)return Ol(g),i;v=v.sibling}throw Error(t(188))}if(u.return!==m.return)u=g,m=v;else{for(var N=!1,O=g.child;O;){if(O===u){N=!0,u=g,m=v;break}if(O===m){N=!0,m=g,u=v;break}O=O.sibling}if(!N){for(O=v.child;O;){if(O===u){N=!0,u=v,m=g;break}if(O===m){N=!0,m=v,u=g;break}O=O.sibling}if(!N)throw Error(t(189))}}if(u.alternate!==m)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:i}function Ph(s){return s=Dh(s),s!==null?Fl(s):null}function Fl(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=Fl(s);if(i!==null)return i;s=s.sibling}return null}var ie=e.unstable_scheduleCallback,ue=e.unstable_cancelCallback,Ae=e.unstable_shouldYield,je=e.unstable_requestPaint,Ne=e.unstable_now,xe=e.unstable_getCurrentPriorityLevel,Se=e.unstable_ImmediatePriority,pt=e.unstable_UserBlockingPriority,Ge=e.unstable_NormalPriority,vt=e.unstable_LowPriority,St=e.unstable_IdlePriority,Un=null,Zt=null;function jh(s){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Un,s,void 0,(s.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:eT,Xk=Math.log,Zk=Math.LN2;function eT(s){return s>>>=0,s===0?32:31-(Xk(s)/Zk|0)|0}var Bl=64,Ll=4194304;function ea(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Hl(s,i){var u=s.pendingLanes;if(u===0)return 0;var m=0,g=s.suspendedLanes,v=s.pingedLanes,N=u&268435455;if(N!==0){var O=N&~g;O!==0?m=ea(O):(v&=N,v!==0&&(m=ea(v)))}else N=u&~g,N!==0?m=ea(N):v!==0&&(m=ea(v));if(m===0)return 0;if(i!==0&&i!==m&&!(i&g)&&(g=m&-m,v=i&-i,g>=v||g===16&&(v&4194240)!==0))return i;if(m&4&&(m|=u&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=m;0<i;)u=31-_r(i),g=1<<u,m|=s[u],i&=~g;return m}function tT(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nT(s,i){for(var u=s.suspendedLanes,m=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var N=31-_r(v),O=1<<N,H=g[N];H===-1?(!(O&u)||O&m)&&(g[N]=tT(O,i)):H<=i&&(s.expiredLanes|=O),v&=~O}}function Mh(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Gg(){var s=Bl;return Bl<<=1,!(Bl&4194240)&&(Bl=64),s}function Oh(s){for(var i=[],u=0;31>u;u++)i.push(s);return i}function ta(s,i,u){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-_r(i),s[i]=u}function rT(s,i){var u=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-_r(u),v=1<<g;i[g]=0,m[g]=-1,s[g]=-1,u&=~v}}function Fh(s,i){var u=s.entangledLanes|=i;for(s=s.entanglements;u;){var m=31-_r(u),g=1<<m;g&i|s[m]&i&&(s[m]|=i),u&=~g}}var gt=0;function Yg(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Qg,Bh,Jg,Xg,Zg,Lh=!1,Ul=[],Rs=null,Ds=null,Ps=null,na=new Map,ra=new Map,js=[],sT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ex(s,i){switch(s){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":na.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(i.pointerId)}}function sa(s,i,u,m,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:u,eventSystemFlags:m,nativeEvent:v,targetContainers:[g]},i!==null&&(i=ya(i),i!==null&&Bh(i)),s):(s.eventSystemFlags|=m,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function oT(s,i,u,m,g){switch(i){case"focusin":return Rs=sa(Rs,s,i,u,m,g),!0;case"dragenter":return Ds=sa(Ds,s,i,u,m,g),!0;case"mouseover":return Ps=sa(Ps,s,i,u,m,g),!0;case"pointerover":var v=g.pointerId;return na.set(v,sa(na.get(v)||null,s,i,u,m,g)),!0;case"gotpointercapture":return v=g.pointerId,ra.set(v,sa(ra.get(v)||null,s,i,u,m,g)),!0}return!1}function tx(s){var i=ho(s.target);if(i!==null){var u=xr(i);if(u!==null){if(i=u.tag,i===13){if(i=Ml(u),i!==null){s.blockedOn=i,Zg(s.priority,function(){Jg(u)});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $l(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var u=Uh(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);He=m,u.target.dispatchEvent(m),He=null}else return i=ya(u),i!==null&&Bh(i),s.blockedOn=u,!1;i.shift()}return!0}function nx(s,i,u){$l(s)&&u.delete(i)}function iT(){Lh=!1,Rs!==null&&$l(Rs)&&(Rs=null),Ds!==null&&$l(Ds)&&(Ds=null),Ps!==null&&$l(Ps)&&(Ps=null),na.forEach(nx),ra.forEach(nx)}function oa(s,i){s.blockedOn===i&&(s.blockedOn=null,Lh||(Lh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iT)))}function ia(s){function i(g){return oa(g,s)}if(0<Ul.length){oa(Ul[0],s);for(var u=1;u<Ul.length;u++){var m=Ul[u];m.blockedOn===s&&(m.blockedOn=null)}}for(Rs!==null&&oa(Rs,s),Ds!==null&&oa(Ds,s),Ps!==null&&oa(Ps,s),na.forEach(i),ra.forEach(i),u=0;u<js.length;u++)m=js[u],m.blockedOn===s&&(m.blockedOn=null);for(;0<js.length&&(u=js[0],u.blockedOn===null);)tx(u),u.blockedOn===null&&js.shift()}var Go=I.ReactCurrentBatchConfig,zl=!0;function aT(s,i,u,m){var g=gt,v=Go.transition;Go.transition=null;try{gt=1,Hh(s,i,u,m)}finally{gt=g,Go.transition=v}}function lT(s,i,u,m){var g=gt,v=Go.transition;Go.transition=null;try{gt=4,Hh(s,i,u,m)}finally{gt=g,Go.transition=v}}function Hh(s,i,u,m){if(zl){var g=Uh(s,i,u,m);if(g===null)sf(s,i,m,Vl,u),ex(s,m);else if(oT(g,s,i,u,m))m.stopPropagation();else if(ex(s,m),i&4&&-1<sT.indexOf(s)){for(;g!==null;){var v=ya(g);if(v!==null&&Qg(v),v=Uh(s,i,u,m),v===null&&sf(s,i,m,Vl,u),v===g)break;g=v}g!==null&&m.stopPropagation()}else sf(s,i,m,null,u)}}var Vl=null;function Uh(s,i,u,m){if(Vl=null,s=We(m),s=ho(s),s!==null)if(i=xr(s),i===null)s=null;else if(u=i.tag,u===13){if(s=Ml(i),s!==null)return s;s=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return Vl=s,null}function rx(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xe()){case Se:return 1;case pt:return 4;case Ge:case vt:return 16;case St:return 536870912;default:return 16}default:return 16}}var Ms=null,$h=null,Kl=null;function sx(){if(Kl)return Kl;var s,i=$h,u=i.length,m,g="value"in Ms?Ms.value:Ms.textContent,v=g.length;for(s=0;s<u&&i[s]===g[s];s++);var N=u-s;for(m=1;m<=N&&i[u-m]===g[v-m];m++);return Kl=g.slice(s,1<m?1-m:void 0)}function ql(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Wl(){return!0}function ox(){return!1}function ar(s){function i(u,m,g,v,N){this._reactName=u,this._targetInst=g,this.type=m,this.nativeEvent=v,this.target=N,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(u=s[O],this[O]=u?u(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Wl:ox,this.isPropagationStopped=ox,this}return ee(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Wl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Wl)},persist:function(){},isPersistent:Wl}),i}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zh=ar(Yo),aa=ee({},Yo,{view:0,detail:0}),cT=ar(aa),Vh,Kh,la,Gl=ee({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==la&&(la&&s.type==="mousemove"?(Vh=s.screenX-la.screenX,Kh=s.screenY-la.screenY):Kh=Vh=0,la=s),Vh)},movementY:function(s){return"movementY"in s?s.movementY:Kh}}),ix=ar(Gl),uT=ee({},Gl,{dataTransfer:0}),dT=ar(uT),hT=ee({},aa,{relatedTarget:0}),qh=ar(hT),fT=ee({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),pT=ar(fT),mT=ee({},Yo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),gT=ar(mT),xT=ee({},Yo,{data:0}),ax=ar(xT),yT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CT(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=wT[s])?!!i[s]:!1}function Wh(){return CT}var bT=ee({},aa,{key:function(s){if(s.key){var i=yT[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=ql(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?vT[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wh,charCode:function(s){return s.type==="keypress"?ql(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ql(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ET=ar(bT),ST=ee({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lx=ar(ST),kT=ee({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wh}),TT=ar(kT),AT=ee({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_T=ar(AT),NT=ee({},Gl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),IT=ar(NT),RT=[9,13,27,32],Gh=d&&"CompositionEvent"in window,ca=null;d&&"documentMode"in document&&(ca=document.documentMode);var DT=d&&"TextEvent"in window&&!ca,cx=d&&(!Gh||ca&&8<ca&&11>=ca),ux=" ",dx=!1;function hx(s,i){switch(s){case"keyup":return RT.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fx(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Qo=!1;function PT(s,i){switch(s){case"compositionend":return fx(i);case"keypress":return i.which!==32?null:(dx=!0,ux);case"textInput":return s=i.data,s===ux&&dx?null:s;default:return null}}function jT(s,i){if(Qo)return s==="compositionend"||!Gh&&hx(s,i)?(s=sx(),Kl=$h=Ms=null,Qo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return cx&&i.locale!=="ko"?null:i.data;default:return null}}var MT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function px(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!MT[s.type]:i==="textarea"}function mx(s,i,u,m){_t(m),i=Zl(i,"onChange"),0<i.length&&(u=new zh("onChange","change",null,u,m),s.push({event:u,listeners:i}))}var ua=null,da=null;function OT(s){Px(s,0)}function Yl(s){var i=ti(s);if(Le(i))return s}function FT(s,i){if(s==="change")return i}var gx=!1;if(d){var Yh;if(d){var Qh="oninput"in document;if(!Qh){var xx=document.createElement("div");xx.setAttribute("oninput","return;"),Qh=typeof xx.oninput=="function"}Yh=Qh}else Yh=!1;gx=Yh&&(!document.documentMode||9<document.documentMode)}function yx(){ua&&(ua.detachEvent("onpropertychange",vx),da=ua=null)}function vx(s){if(s.propertyName==="value"&&Yl(da)){var i=[];mx(i,da,s,We(s)),Gr(OT,i)}}function BT(s,i,u){s==="focusin"?(yx(),ua=i,da=u,ua.attachEvent("onpropertychange",vx)):s==="focusout"&&yx()}function LT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Yl(da)}function HT(s,i){if(s==="click")return Yl(i)}function UT(s,i){if(s==="input"||s==="change")return Yl(i)}function $T(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Nr=typeof Object.is=="function"?Object.is:$T;function ha(s,i){if(Nr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var u=Object.keys(s),m=Object.keys(i);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var g=u[m];if(!h.call(i,g)||!Nr(s[g],i[g]))return!1}return!0}function wx(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Cx(s,i){var u=wx(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=i&&m>=i)return{node:u,offset:i-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=wx(u)}}function bx(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?bx(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Ex(){for(var s=window,i=Te();i instanceof s.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)s=i.contentWindow;else break;i=Te(s.document)}return i}function Jh(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function zT(s){var i=Ex(),u=s.focusedElem,m=s.selectionRange;if(i!==u&&u&&u.ownerDocument&&bx(u.ownerDocument.documentElement,u)){if(m!==null&&Jh(u)){if(i=m.start,s=m.end,s===void 0&&(s=i),"selectionStart"in u)u.selectionStart=i,u.selectionEnd=Math.min(s,u.value.length);else if(s=(i=u.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,v=Math.min(m.start,g);m=m.end===void 0?v:Math.min(m.end,g),!s.extend&&v>m&&(g=m,m=v,v=g),g=Cx(u,v);var N=Cx(u,m);g&&N&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==N.node||s.focusOffset!==N.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),s.removeAllRanges(),v>m?(s.addRange(i),s.extend(N.node,N.offset)):(i.setEnd(N.node,N.offset),s.addRange(i)))}}for(i=[],s=u;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<i.length;u++)s=i[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var VT=d&&"documentMode"in document&&11>=document.documentMode,Jo=null,Xh=null,fa=null,Zh=!1;function Sx(s,i,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Zh||Jo==null||Jo!==Te(m)||(m=Jo,"selectionStart"in m&&Jh(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),fa&&ha(fa,m)||(fa=m,m=Zl(Xh,"onSelect"),0<m.length&&(i=new zh("onSelect","select",null,i,u),s.push({event:i,listeners:m}),i.target=Jo)))}function Ql(s,i){var u={};return u[s.toLowerCase()]=i.toLowerCase(),u["Webkit"+s]="webkit"+i,u["Moz"+s]="moz"+i,u}var Xo={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},ef={},kx={};d&&(kx=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Jl(s){if(ef[s])return ef[s];if(!Xo[s])return s;var i=Xo[s],u;for(u in i)if(i.hasOwnProperty(u)&&u in kx)return ef[s]=i[u];return s}var Tx=Jl("animationend"),Ax=Jl("animationiteration"),_x=Jl("animationstart"),Nx=Jl("transitionend"),Ix=new Map,Rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(s,i){Ix.set(s,i),a(i,[s])}for(var tf=0;tf<Rx.length;tf++){var nf=Rx[tf],KT=nf.toLowerCase(),qT=nf[0].toUpperCase()+nf.slice(1);Os(KT,"on"+qT)}Os(Tx,"onAnimationEnd"),Os(Ax,"onAnimationIteration"),Os(_x,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Nx,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function Dx(s,i,u){var m=s.type||"unknown-event";s.currentTarget=u,Rh(m,i,void 0,s),s.currentTarget=null}function Px(s,i){i=(i&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],g=m.event;m=m.listeners;e:{var v=void 0;if(i)for(var N=m.length-1;0<=N;N--){var O=m[N],H=O.instance,te=O.currentTarget;if(O=O.listener,H!==v&&g.isPropagationStopped())break e;Dx(g,O,te),v=H}else for(N=0;N<m.length;N++){if(O=m[N],H=O.instance,te=O.currentTarget,O=O.listener,H!==v&&g.isPropagationStopped())break e;Dx(g,O,te),v=H}}}if(Wo)throw s=Zi,Wo=!1,Zi=null,s}function Nt(s,i){var u=i[df];u===void 0&&(u=i[df]=new Set);var m=s+"__bubble";u.has(m)||(jx(i,s,2,!1),u.add(m))}function rf(s,i,u){var m=0;i&&(m|=4),jx(u,s,m,i)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function ma(s){if(!s[Xl]){s[Xl]=!0,r.forEach(function(u){u!=="selectionchange"&&(WT.has(u)||rf(u,!1,s),rf(u,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Xl]||(i[Xl]=!0,rf("selectionchange",!1,i))}}function jx(s,i,u,m){switch(rx(i)){case 1:var g=aT;break;case 4:g=lT;break;default:g=Hh}u=g.bind(null,i,u,s),g=void 0,!or||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),m?g!==void 0?s.addEventListener(i,u,{capture:!0,passive:g}):s.addEventListener(i,u,!0):g!==void 0?s.addEventListener(i,u,{passive:g}):s.addEventListener(i,u,!1)}function sf(s,i,u,m,g){var v=m;if(!(i&1)&&!(i&2)&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var O=m.stateNode.containerInfo;if(O===g||O.nodeType===8&&O.parentNode===g)break;if(N===4)for(N=m.return;N!==null;){var H=N.tag;if((H===3||H===4)&&(H=N.stateNode.containerInfo,H===g||H.nodeType===8&&H.parentNode===g))return;N=N.return}for(;O!==null;){if(N=ho(O),N===null)return;if(H=N.tag,H===5||H===6){m=v=N;continue e}O=O.parentNode}}m=m.return}Gr(function(){var te=v,me=We(u),ye=[];e:{var fe=Ix.get(s);if(fe!==void 0){var _e=zh,Me=s;switch(s){case"keypress":if(ql(u)===0)break e;case"keydown":case"keyup":_e=ET;break;case"focusin":Me="focus",_e=qh;break;case"focusout":Me="blur",_e=qh;break;case"beforeblur":case"afterblur":_e=qh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=dT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=TT;break;case Tx:case Ax:case _x:_e=pT;break;case Nx:_e=_T;break;case"scroll":_e=cT;break;case"wheel":_e=IT;break;case"copy":case"cut":case"paste":_e=gT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=lx}var Oe=(i&4)!==0,Yt=!Oe&&s==="scroll",J=Oe?fe!==null?fe+"Capture":null:fe;Oe=[];for(var V=te,X;V!==null;){X=V;var be=X.stateNode;if(X.tag===5&&be!==null&&(X=be,J!==null&&(be=Gn(V,J),be!=null&&Oe.push(ga(V,be,X)))),Yt)break;V=V.return}0<Oe.length&&(fe=new _e(fe,Me,null,u,me),ye.push({event:fe,listeners:Oe}))}}if(!(i&7)){e:{if(fe=s==="mouseover"||s==="pointerover",_e=s==="mouseout"||s==="pointerout",fe&&u!==He&&(Me=u.relatedTarget||u.fromElement)&&(ho(Me)||Me[us]))break e;if((_e||fe)&&(fe=me.window===me?me:(fe=me.ownerDocument)?fe.defaultView||fe.parentWindow:window,_e?(Me=u.relatedTarget||u.toElement,_e=te,Me=Me?ho(Me):null,Me!==null&&(Yt=xr(Me),Me!==Yt||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(_e=null,Me=te),_e!==Me)){if(Oe=ix,be="onMouseLeave",J="onMouseEnter",V="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=lx,be="onPointerLeave",J="onPointerEnter",V="pointer"),Yt=_e==null?fe:ti(_e),X=Me==null?fe:ti(Me),fe=new Oe(be,V+"leave",_e,u,me),fe.target=Yt,fe.relatedTarget=X,be=null,ho(me)===te&&(Oe=new Oe(J,V+"enter",Me,u,me),Oe.target=X,Oe.relatedTarget=Yt,be=Oe),Yt=be,_e&&Me)t:{for(Oe=_e,J=Me,V=0,X=Oe;X;X=Zo(X))V++;for(X=0,be=J;be;be=Zo(be))X++;for(;0<V-X;)Oe=Zo(Oe),V--;for(;0<X-V;)J=Zo(J),X--;for(;V--;){if(Oe===J||J!==null&&Oe===J.alternate)break t;Oe=Zo(Oe),J=Zo(J)}Oe=null}else Oe=null;_e!==null&&Mx(ye,fe,_e,Oe,!1),Me!==null&&Yt!==null&&Mx(ye,Yt,Me,Oe,!0)}}e:{if(fe=te?ti(te):window,_e=fe.nodeName&&fe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&fe.type==="file")var Fe=FT;else if(px(fe))if(gx)Fe=UT;else{Fe=LT;var Ve=BT}else(_e=fe.nodeName)&&_e.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Fe=HT);if(Fe&&(Fe=Fe(s,te))){mx(ye,Fe,u,me);break e}Ve&&Ve(s,fe,te),s==="focusout"&&(Ve=fe._wrapperState)&&Ve.controlled&&fe.type==="number"&&$t(fe,"number",fe.value)}switch(Ve=te?ti(te):window,s){case"focusin":(px(Ve)||Ve.contentEditable==="true")&&(Jo=Ve,Xh=te,fa=null);break;case"focusout":fa=Xh=Jo=null;break;case"mousedown":Zh=!0;break;case"contextmenu":case"mouseup":case"dragend":Zh=!1,Sx(ye,u,me);break;case"selectionchange":if(VT)break;case"keydown":case"keyup":Sx(ye,u,me)}var Ke;if(Gh)e:{switch(s){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Qo?hx(s,u)&&(Qe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Qe="onCompositionStart");Qe&&(cx&&u.locale!=="ko"&&(Qo||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Qo&&(Ke=sx()):(Ms=me,$h="value"in Ms?Ms.value:Ms.textContent,Qo=!0)),Ve=Zl(te,Qe),0<Ve.length&&(Qe=new ax(Qe,s,null,u,me),ye.push({event:Qe,listeners:Ve}),Ke?Qe.data=Ke:(Ke=fx(u),Ke!==null&&(Qe.data=Ke)))),(Ke=DT?PT(s,u):jT(s,u))&&(te=Zl(te,"onBeforeInput"),0<te.length&&(me=new ax("onBeforeInput","beforeinput",null,u,me),ye.push({event:me,listeners:te}),me.data=Ke))}Px(ye,i)})}function ga(s,i,u){return{instance:s,listener:i,currentTarget:u}}function Zl(s,i){for(var u=i+"Capture",m=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Gn(s,u),v!=null&&m.unshift(ga(s,v,g)),v=Gn(s,i),v!=null&&m.push(ga(s,v,g))),s=s.return}return m}function Zo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Mx(s,i,u,m,g){for(var v=i._reactName,N=[];u!==null&&u!==m;){var O=u,H=O.alternate,te=O.stateNode;if(H!==null&&H===m)break;O.tag===5&&te!==null&&(O=te,g?(H=Gn(u,v),H!=null&&N.unshift(ga(u,H,O))):g||(H=Gn(u,v),H!=null&&N.push(ga(u,H,O)))),u=u.return}N.length!==0&&s.push({event:i,listeners:N})}var GT=/\r\n?/g,YT=/\u0000|\uFFFD/g;function Ox(s){return(typeof s=="string"?s:""+s).replace(GT,`
`).replace(YT,"")}function ec(s,i,u){if(i=Ox(i),Ox(s)!==i&&u)throw Error(t(425))}function tc(){}var of=null,af=null;function lf(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var cf=typeof setTimeout=="function"?setTimeout:void 0,QT=typeof clearTimeout=="function"?clearTimeout:void 0,Fx=typeof Promise=="function"?Promise:void 0,JT=typeof queueMicrotask=="function"?queueMicrotask:typeof Fx<"u"?function(s){return Fx.resolve(null).then(s).catch(XT)}:cf;function XT(s){setTimeout(function(){throw s})}function uf(s,i){var u=i,m=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(m===0){s.removeChild(g),ia(i);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=g}while(u);ia(i)}function Fs(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function Bx(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return s;i--}else u==="/$"&&i++}s=s.previousSibling}return null}var ei=Math.random().toString(36).slice(2),Qr="__reactFiber$"+ei,xa="__reactProps$"+ei,us="__reactContainer$"+ei,df="__reactEvents$"+ei,ZT="__reactListeners$"+ei,eA="__reactHandles$"+ei;function ho(s){var i=s[Qr];if(i)return i;for(var u=s.parentNode;u;){if(i=u[us]||u[Qr]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(s=Bx(s);s!==null;){if(u=s[Qr])return u;s=Bx(s)}return i}s=u,u=s.parentNode}return null}function ya(s){return s=s[Qr]||s[us],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ti(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function nc(s){return s[xa]||null}var hf=[],ni=-1;function Bs(s){return{current:s}}function It(s){0>ni||(s.current=hf[ni],hf[ni]=null,ni--)}function kt(s,i){ni++,hf[ni]=s.current,s.current=i}var Ls={},Nn=Bs(Ls),Yn=Bs(!1),fo=Ls;function ri(s,i){var u=s.type.contextTypes;if(!u)return Ls;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=i[v];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=g),g}function Qn(s){return s=s.childContextTypes,s!=null}function rc(){It(Yn),It(Nn)}function Lx(s,i,u){if(Nn.current!==Ls)throw Error(t(168));kt(Nn,i),kt(Yn,u)}function Hx(s,i,u){var m=s.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var g in m)if(!(g in i))throw Error(t(108,Ee(s)||"Unknown",g));return ee({},u,m)}function sc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ls,fo=Nn.current,kt(Nn,s),kt(Yn,Yn.current),!0}function Ux(s,i,u){var m=s.stateNode;if(!m)throw Error(t(169));u?(s=Hx(s,i,fo),m.__reactInternalMemoizedMergedChildContext=s,It(Yn),It(Nn),kt(Nn,s)):It(Yn),kt(Yn,u)}var ds=null,oc=!1,ff=!1;function $x(s){ds===null?ds=[s]:ds.push(s)}function tA(s){oc=!0,$x(s)}function Hs(){if(!ff&&ds!==null){ff=!0;var s=0,i=gt;try{var u=ds;for(gt=1;s<u.length;s++){var m=u[s];do m=m(!0);while(m!==null)}ds=null,oc=!1}catch(g){throw ds!==null&&(ds=ds.slice(s+1)),ie(Se,Hs),g}finally{gt=i,ff=!1}}return null}var si=[],oi=0,ic=null,ac=0,yr=[],vr=0,po=null,hs=1,fs="";function mo(s,i){si[oi++]=ac,si[oi++]=ic,ic=s,ac=i}function zx(s,i,u){yr[vr++]=hs,yr[vr++]=fs,yr[vr++]=po,po=s;var m=hs;s=fs;var g=32-_r(m)-1;m&=~(1<<g),u+=1;var v=32-_r(i)+g;if(30<v){var N=g-g%5;v=(m&(1<<N)-1).toString(32),m>>=N,g-=N,hs=1<<32-_r(i)+g|u<<g|m,fs=v+s}else hs=1<<v|u<<g|m,fs=s}function pf(s){s.return!==null&&(mo(s,1),zx(s,1,0))}function mf(s){for(;s===ic;)ic=si[--oi],si[oi]=null,ac=si[--oi],si[oi]=null;for(;s===po;)po=yr[--vr],yr[vr]=null,fs=yr[--vr],yr[vr]=null,hs=yr[--vr],yr[vr]=null}var lr=null,cr=null,jt=!1,Ir=null;function Vx(s,i){var u=Er(5,null,null,0);u.elementType="DELETED",u.stateNode=i,u.return=s,i=s.deletions,i===null?(s.deletions=[u],s.flags|=16):i.push(u)}function Kx(s,i){switch(s.tag){case 5:var u=s.type;return i=i.nodeType!==1||u.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,lr=s,cr=Fs(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,lr=s,cr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(u=po!==null?{id:hs,overflow:fs}:null,s.memoizedState={dehydrated:i,treeContext:u,retryLane:1073741824},u=Er(18,null,null,0),u.stateNode=i,u.return=s,s.child=u,lr=s,cr=null,!0):!1;default:return!1}}function gf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function xf(s){if(jt){var i=cr;if(i){var u=i;if(!Kx(s,i)){if(gf(s))throw Error(t(418));i=Fs(u.nextSibling);var m=lr;i&&Kx(s,i)?Vx(m,u):(s.flags=s.flags&-4097|2,jt=!1,lr=s)}}else{if(gf(s))throw Error(t(418));s.flags=s.flags&-4097|2,jt=!1,lr=s}}}function qx(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;lr=s}function lc(s){if(s!==lr)return!1;if(!jt)return qx(s),jt=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!lf(s.type,s.memoizedProps)),i&&(i=cr)){if(gf(s))throw Wx(),Error(t(418));for(;i;)Vx(s,i),i=Fs(i.nextSibling)}if(qx(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(i===0){cr=Fs(s.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++}s=s.nextSibling}cr=null}}else cr=lr?Fs(s.stateNode.nextSibling):null;return!0}function Wx(){for(var s=cr;s;)s=Fs(s.nextSibling)}function ii(){cr=lr=null,jt=!1}function yf(s){Ir===null?Ir=[s]:Ir.push(s)}var nA=I.ReactCurrentBatchConfig;function va(s,i,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var m=u.stateNode}if(!m)throw Error(t(147,s));var g=m,v=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(N){var O=g.refs;N===null?delete O[v]:O[v]=N},i._stringRef=v,i)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function cc(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function Gx(s){var i=s._init;return i(s._payload)}function Yx(s){function i(J,V){if(s){var X=J.deletions;X===null?(J.deletions=[V],J.flags|=16):X.push(V)}}function u(J,V){if(!s)return null;for(;V!==null;)i(J,V),V=V.sibling;return null}function m(J,V){for(J=new Map;V!==null;)V.key!==null?J.set(V.key,V):J.set(V.index,V),V=V.sibling;return J}function g(J,V){return J=Gs(J,V),J.index=0,J.sibling=null,J}function v(J,V,X){return J.index=X,s?(X=J.alternate,X!==null?(X=X.index,X<V?(J.flags|=2,V):X):(J.flags|=2,V)):(J.flags|=1048576,V)}function N(J){return s&&J.alternate===null&&(J.flags|=2),J}function O(J,V,X,be){return V===null||V.tag!==6?(V=c0(X,J.mode,be),V.return=J,V):(V=g(V,X),V.return=J,V)}function H(J,V,X,be){var Fe=X.type;return Fe===j?me(J,V,X.props.children,be,X.key):V!==null&&(V.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===he&&Gx(Fe)===V.type)?(be=g(V,X.props),be.ref=va(J,V,X),be.return=J,be):(be=Pc(X.type,X.key,X.props,null,J.mode,be),be.ref=va(J,V,X),be.return=J,be)}function te(J,V,X,be){return V===null||V.tag!==4||V.stateNode.containerInfo!==X.containerInfo||V.stateNode.implementation!==X.implementation?(V=u0(X,J.mode,be),V.return=J,V):(V=g(V,X.children||[]),V.return=J,V)}function me(J,V,X,be,Fe){return V===null||V.tag!==7?(V=Eo(X,J.mode,be,Fe),V.return=J,V):(V=g(V,X),V.return=J,V)}function ye(J,V,X){if(typeof V=="string"&&V!==""||typeof V=="number")return V=c0(""+V,J.mode,X),V.return=J,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case R:return X=Pc(V.type,V.key,V.props,null,J.mode,X),X.ref=va(J,null,V),X.return=J,X;case D:return V=u0(V,J.mode,X),V.return=J,V;case he:var be=V._init;return ye(J,be(V._payload),X)}if(Et(V)||Q(V))return V=Eo(V,J.mode,X,null),V.return=J,V;cc(J,V)}return null}function fe(J,V,X,be){var Fe=V!==null?V.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Fe!==null?null:O(J,V,""+X,be);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case R:return X.key===Fe?H(J,V,X,be):null;case D:return X.key===Fe?te(J,V,X,be):null;case he:return Fe=X._init,fe(J,V,Fe(X._payload),be)}if(Et(X)||Q(X))return Fe!==null?null:me(J,V,X,be,null);cc(J,X)}return null}function _e(J,V,X,be,Fe){if(typeof be=="string"&&be!==""||typeof be=="number")return J=J.get(X)||null,O(V,J,""+be,Fe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case R:return J=J.get(be.key===null?X:be.key)||null,H(V,J,be,Fe);case D:return J=J.get(be.key===null?X:be.key)||null,te(V,J,be,Fe);case he:var Ve=be._init;return _e(J,V,X,Ve(be._payload),Fe)}if(Et(be)||Q(be))return J=J.get(X)||null,me(V,J,be,Fe,null);cc(V,be)}return null}function Me(J,V,X,be){for(var Fe=null,Ve=null,Ke=V,Qe=V=0,gn=null;Ke!==null&&Qe<X.length;Qe++){Ke.index>Qe?(gn=Ke,Ke=null):gn=Ke.sibling;var ft=fe(J,Ke,X[Qe],be);if(ft===null){Ke===null&&(Ke=gn);break}s&&Ke&&ft.alternate===null&&i(J,Ke),V=v(ft,V,Qe),Ve===null?Fe=ft:Ve.sibling=ft,Ve=ft,Ke=gn}if(Qe===X.length)return u(J,Ke),jt&&mo(J,Qe),Fe;if(Ke===null){for(;Qe<X.length;Qe++)Ke=ye(J,X[Qe],be),Ke!==null&&(V=v(Ke,V,Qe),Ve===null?Fe=Ke:Ve.sibling=Ke,Ve=Ke);return jt&&mo(J,Qe),Fe}for(Ke=m(J,Ke);Qe<X.length;Qe++)gn=_e(Ke,J,Qe,X[Qe],be),gn!==null&&(s&&gn.alternate!==null&&Ke.delete(gn.key===null?Qe:gn.key),V=v(gn,V,Qe),Ve===null?Fe=gn:Ve.sibling=gn,Ve=gn);return s&&Ke.forEach(function(Ys){return i(J,Ys)}),jt&&mo(J,Qe),Fe}function Oe(J,V,X,be){var Fe=Q(X);if(typeof Fe!="function")throw Error(t(150));if(X=Fe.call(X),X==null)throw Error(t(151));for(var Ve=Fe=null,Ke=V,Qe=V=0,gn=null,ft=X.next();Ke!==null&&!ft.done;Qe++,ft=X.next()){Ke.index>Qe?(gn=Ke,Ke=null):gn=Ke.sibling;var Ys=fe(J,Ke,ft.value,be);if(Ys===null){Ke===null&&(Ke=gn);break}s&&Ke&&Ys.alternate===null&&i(J,Ke),V=v(Ys,V,Qe),Ve===null?Fe=Ys:Ve.sibling=Ys,Ve=Ys,Ke=gn}if(ft.done)return u(J,Ke),jt&&mo(J,Qe),Fe;if(Ke===null){for(;!ft.done;Qe++,ft=X.next())ft=ye(J,ft.value,be),ft!==null&&(V=v(ft,V,Qe),Ve===null?Fe=ft:Ve.sibling=ft,Ve=ft);return jt&&mo(J,Qe),Fe}for(Ke=m(J,Ke);!ft.done;Qe++,ft=X.next())ft=_e(Ke,J,Qe,ft.value,be),ft!==null&&(s&&ft.alternate!==null&&Ke.delete(ft.key===null?Qe:ft.key),V=v(ft,V,Qe),Ve===null?Fe=ft:Ve.sibling=ft,Ve=ft);return s&&Ke.forEach(function(jA){return i(J,jA)}),jt&&mo(J,Qe),Fe}function Yt(J,V,X,be){if(typeof X=="object"&&X!==null&&X.type===j&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case R:e:{for(var Fe=X.key,Ve=V;Ve!==null;){if(Ve.key===Fe){if(Fe=X.type,Fe===j){if(Ve.tag===7){u(J,Ve.sibling),V=g(Ve,X.props.children),V.return=J,J=V;break e}}else if(Ve.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===he&&Gx(Fe)===Ve.type){u(J,Ve.sibling),V=g(Ve,X.props),V.ref=va(J,Ve,X),V.return=J,J=V;break e}u(J,Ve);break}else i(J,Ve);Ve=Ve.sibling}X.type===j?(V=Eo(X.props.children,J.mode,be,X.key),V.return=J,J=V):(be=Pc(X.type,X.key,X.props,null,J.mode,be),be.ref=va(J,V,X),be.return=J,J=be)}return N(J);case D:e:{for(Ve=X.key;V!==null;){if(V.key===Ve)if(V.tag===4&&V.stateNode.containerInfo===X.containerInfo&&V.stateNode.implementation===X.implementation){u(J,V.sibling),V=g(V,X.children||[]),V.return=J,J=V;break e}else{u(J,V);break}else i(J,V);V=V.sibling}V=u0(X,J.mode,be),V.return=J,J=V}return N(J);case he:return Ve=X._init,Yt(J,V,Ve(X._payload),be)}if(Et(X))return Me(J,V,X,be);if(Q(X))return Oe(J,V,X,be);cc(J,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,V!==null&&V.tag===6?(u(J,V.sibling),V=g(V,X),V.return=J,J=V):(u(J,V),V=c0(X,J.mode,be),V.return=J,J=V),N(J)):u(J,V)}return Yt}var ai=Yx(!0),Qx=Yx(!1),uc=Bs(null),dc=null,li=null,vf=null;function wf(){vf=li=dc=null}function Cf(s){var i=uc.current;It(uc),s._currentValue=i}function bf(s,i,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),s===u)break;s=s.return}}function ci(s,i){dc=s,vf=li=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&i&&(Jn=!0),s.firstContext=null)}function wr(s){var i=s._currentValue;if(vf!==s)if(s={context:s,memoizedValue:i,next:null},li===null){if(dc===null)throw Error(t(308));li=s,dc.dependencies={lanes:0,firstContext:s}}else li=li.next=s;return i}var go=null;function Ef(s){go===null?go=[s]:go.push(s)}function Jx(s,i,u,m){var g=i.interleaved;return g===null?(u.next=u,Ef(i)):(u.next=g.next,g.next=u),i.interleaved=u,ps(s,m)}function ps(s,i){s.lanes|=i;var u=s.alternate;for(u!==null&&(u.lanes|=i),u=s,s=s.return;s!==null;)s.childLanes|=i,u=s.alternate,u!==null&&(u.childLanes|=i),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Us=!1;function Sf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xx(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ms(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function $s(s,i,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,dt&2){var g=m.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),m.pending=i,ps(s,u)}return g=m.interleaved,g===null?(i.next=i,Ef(m)):(i.next=g.next,g.next=i),m.interleaved=i,ps(s,u)}function hc(s,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194240)!==0)){var m=i.lanes;m&=s.pendingLanes,u|=m,i.lanes=u,Fh(s,u)}}function Zx(s,i){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var N={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=N:v=v.next=N,u=u.next}while(u!==null);v===null?g=v=i:v=v.next=i}else g=v=i;u={baseState:m.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:m.shared,effects:m.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=i:s.next=i,u.lastBaseUpdate=i}function fc(s,i,u,m){var g=s.updateQueue;Us=!1;var v=g.firstBaseUpdate,N=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var H=O,te=H.next;H.next=null,N===null?v=te:N.next=te,N=H;var me=s.alternate;me!==null&&(me=me.updateQueue,O=me.lastBaseUpdate,O!==N&&(O===null?me.firstBaseUpdate=te:O.next=te,me.lastBaseUpdate=H))}if(v!==null){var ye=g.baseState;N=0,me=te=H=null,O=v;do{var fe=O.lane,_e=O.eventTime;if((m&fe)===fe){me!==null&&(me=me.next={eventTime:_e,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Me=s,Oe=O;switch(fe=i,_e=u,Oe.tag){case 1:if(Me=Oe.payload,typeof Me=="function"){ye=Me.call(_e,ye,fe);break e}ye=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Oe.payload,fe=typeof Me=="function"?Me.call(_e,ye,fe):Me,fe==null)break e;ye=ee({},ye,fe);break e;case 2:Us=!0}}O.callback!==null&&O.lane!==0&&(s.flags|=64,fe=g.effects,fe===null?g.effects=[O]:fe.push(O))}else _e={eventTime:_e,lane:fe,tag:O.tag,payload:O.payload,callback:O.callback,next:null},me===null?(te=me=_e,H=ye):me=me.next=_e,N|=fe;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;fe=O,O=fe.next,fe.next=null,g.lastBaseUpdate=fe,g.shared.pending=null}}while(!0);if(me===null&&(H=ye),g.baseState=H,g.firstBaseUpdate=te,g.lastBaseUpdate=me,i=g.shared.interleaved,i!==null){g=i;do N|=g.lane,g=g.next;while(g!==i)}else v===null&&(g.shared.lanes=0);vo|=N,s.lanes=N,s.memoizedState=ye}}function ey(s,i,u){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var m=s[i],g=m.callback;if(g!==null){if(m.callback=null,m=u,typeof g!="function")throw Error(t(191,g));g.call(m)}}}var wa={},Jr=Bs(wa),Ca=Bs(wa),ba=Bs(wa);function xo(s){if(s===wa)throw Error(t(174));return s}function kf(s,i){switch(kt(ba,i),kt(Ca,s),kt(Jr,wa),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:hn(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=hn(i,s)}It(Jr),kt(Jr,i)}function ui(){It(Jr),It(Ca),It(ba)}function ty(s){xo(ba.current);var i=xo(Jr.current),u=hn(i,s.type);i!==u&&(kt(Ca,s),kt(Jr,u))}function Tf(s){Ca.current===s&&(It(Jr),It(Ca))}var Ft=Bs(0);function pc(s){for(var i=s;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Af=[];function _f(){for(var s=0;s<Af.length;s++)Af[s]._workInProgressVersionPrimary=null;Af.length=0}var mc=I.ReactCurrentDispatcher,Nf=I.ReactCurrentBatchConfig,yo=0,Bt=null,ln=null,pn=null,gc=!1,Ea=!1,Sa=0,rA=0;function In(){throw Error(t(321))}function If(s,i){if(i===null)return!1;for(var u=0;u<i.length&&u<s.length;u++)if(!Nr(s[u],i[u]))return!1;return!0}function Rf(s,i,u,m,g,v){if(yo=v,Bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,mc.current=s===null||s.memoizedState===null?aA:lA,s=u(m,g),Ea){v=0;do{if(Ea=!1,Sa=0,25<=v)throw Error(t(301));v+=1,pn=ln=null,i.updateQueue=null,mc.current=cA,s=u(m,g)}while(Ea)}if(mc.current=vc,i=ln!==null&&ln.next!==null,yo=0,pn=ln=Bt=null,gc=!1,i)throw Error(t(300));return s}function Df(){var s=Sa!==0;return Sa=0,s}function Xr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Bt.memoizedState=pn=s:pn=pn.next=s,pn}function Cr(){if(ln===null){var s=Bt.alternate;s=s!==null?s.memoizedState:null}else s=ln.next;var i=pn===null?Bt.memoizedState:pn.next;if(i!==null)pn=i,ln=s;else{if(s===null)throw Error(t(310));ln=s,s={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},pn===null?Bt.memoizedState=pn=s:pn=pn.next=s}return pn}function ka(s,i){return typeof i=="function"?i(s):i}function Pf(s){var i=Cr(),u=i.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=ln,g=m.baseQueue,v=u.pending;if(v!==null){if(g!==null){var N=g.next;g.next=v.next,v.next=N}m.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,m=m.baseState;var O=N=null,H=null,te=v;do{var me=te.lane;if((yo&me)===me)H!==null&&(H=H.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),m=te.hasEagerState?te.eagerState:s(m,te.action);else{var ye={lane:me,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};H===null?(O=H=ye,N=m):H=H.next=ye,Bt.lanes|=me,vo|=me}te=te.next}while(te!==null&&te!==v);H===null?N=m:H.next=O,Nr(m,i.memoizedState)||(Jn=!0),i.memoizedState=m,i.baseState=N,i.baseQueue=H,u.lastRenderedState=m}if(s=u.interleaved,s!==null){g=s;do v=g.lane,Bt.lanes|=v,vo|=v,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[i.memoizedState,u.dispatch]}function jf(s){var i=Cr(),u=i.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=u.dispatch,g=u.pending,v=i.memoizedState;if(g!==null){u.pending=null;var N=g=g.next;do v=s(v,N.action),N=N.next;while(N!==g);Nr(v,i.memoizedState)||(Jn=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),u.lastRenderedState=v}return[v,m]}function ny(){}function ry(s,i){var u=Bt,m=Cr(),g=i(),v=!Nr(m.memoizedState,g);if(v&&(m.memoizedState=g,Jn=!0),m=m.queue,Mf(iy.bind(null,u,m,s),[s]),m.getSnapshot!==i||v||pn!==null&&pn.memoizedState.tag&1){if(u.flags|=2048,Ta(9,oy.bind(null,u,m,g,i),void 0,null),mn===null)throw Error(t(349));yo&30||sy(u,i,g)}return g}function sy(s,i,u){s.flags|=16384,s={getSnapshot:i,value:u},i=Bt.updateQueue,i===null?(i={lastEffect:null,stores:null},Bt.updateQueue=i,i.stores=[s]):(u=i.stores,u===null?i.stores=[s]:u.push(s))}function oy(s,i,u,m){i.value=u,i.getSnapshot=m,ay(i)&&ly(s)}function iy(s,i,u){return u(function(){ay(i)&&ly(s)})}function ay(s){var i=s.getSnapshot;s=s.value;try{var u=i();return!Nr(s,u)}catch{return!0}}function ly(s){var i=ps(s,1);i!==null&&jr(i,s,1,-1)}function cy(s){var i=Xr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:s},i.queue=s,s=s.dispatch=iA.bind(null,Bt,s),[i.memoizedState,s]}function Ta(s,i,u,m){return s={tag:s,create:i,destroy:u,deps:m,next:null},i=Bt.updateQueue,i===null?(i={lastEffect:null,stores:null},Bt.updateQueue=i,i.lastEffect=s.next=s):(u=i.lastEffect,u===null?i.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,i.lastEffect=s)),s}function uy(){return Cr().memoizedState}function xc(s,i,u,m){var g=Xr();Bt.flags|=s,g.memoizedState=Ta(1|i,u,void 0,m===void 0?null:m)}function yc(s,i,u,m){var g=Cr();m=m===void 0?null:m;var v=void 0;if(ln!==null){var N=ln.memoizedState;if(v=N.destroy,m!==null&&If(m,N.deps)){g.memoizedState=Ta(i,u,v,m);return}}Bt.flags|=s,g.memoizedState=Ta(1|i,u,v,m)}function dy(s,i){return xc(8390656,8,s,i)}function Mf(s,i){return yc(2048,8,s,i)}function hy(s,i){return yc(4,2,s,i)}function fy(s,i){return yc(4,4,s,i)}function py(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function my(s,i,u){return u=u!=null?u.concat([s]):null,yc(4,4,py.bind(null,i,s),u)}function Of(){}function gy(s,i){var u=Cr();i=i===void 0?null:i;var m=u.memoizedState;return m!==null&&i!==null&&If(i,m[1])?m[0]:(u.memoizedState=[s,i],s)}function xy(s,i){var u=Cr();i=i===void 0?null:i;var m=u.memoizedState;return m!==null&&i!==null&&If(i,m[1])?m[0]:(s=s(),u.memoizedState=[s,i],s)}function yy(s,i,u){return yo&21?(Nr(u,i)||(u=Gg(),Bt.lanes|=u,vo|=u,s.baseState=!0),i):(s.baseState&&(s.baseState=!1,Jn=!0),s.memoizedState=u)}function sA(s,i){var u=gt;gt=u!==0&&4>u?u:4,s(!0);var m=Nf.transition;Nf.transition={};try{s(!1),i()}finally{gt=u,Nf.transition=m}}function vy(){return Cr().memoizedState}function oA(s,i,u){var m=qs(s);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},wy(s))Cy(i,u);else if(u=Jx(s,i,u,m),u!==null){var g=zn();jr(u,s,m,g),by(u,i,m)}}function iA(s,i,u){var m=qs(s),g={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(wy(s))Cy(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var N=i.lastRenderedState,O=v(N,u);if(g.hasEagerState=!0,g.eagerState=O,Nr(O,N)){var H=i.interleaved;H===null?(g.next=g,Ef(i)):(g.next=H.next,H.next=g),i.interleaved=g;return}}catch{}finally{}u=Jx(s,i,g,m),u!==null&&(g=zn(),jr(u,s,m,g),by(u,i,m))}}function wy(s){var i=s.alternate;return s===Bt||i!==null&&i===Bt}function Cy(s,i){Ea=gc=!0;var u=s.pending;u===null?i.next=i:(i.next=u.next,u.next=i),s.pending=i}function by(s,i,u){if(u&4194240){var m=i.lanes;m&=s.pendingLanes,u|=m,i.lanes=u,Fh(s,u)}}var vc={readContext:wr,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},aA={readContext:wr,useCallback:function(s,i){return Xr().memoizedState=[s,i===void 0?null:i],s},useContext:wr,useEffect:dy,useImperativeHandle:function(s,i,u){return u=u!=null?u.concat([s]):null,xc(4194308,4,py.bind(null,i,s),u)},useLayoutEffect:function(s,i){return xc(4194308,4,s,i)},useInsertionEffect:function(s,i){return xc(4,2,s,i)},useMemo:function(s,i){var u=Xr();return i=i===void 0?null:i,s=s(),u.memoizedState=[s,i],s},useReducer:function(s,i,u){var m=Xr();return i=u!==void 0?u(i):i,m.memoizedState=m.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},m.queue=s,s=s.dispatch=oA.bind(null,Bt,s),[m.memoizedState,s]},useRef:function(s){var i=Xr();return s={current:s},i.memoizedState=s},useState:cy,useDebugValue:Of,useDeferredValue:function(s){return Xr().memoizedState=s},useTransition:function(){var s=cy(!1),i=s[0];return s=sA.bind(null,s[1]),Xr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,u){var m=Bt,g=Xr();if(jt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=i(),mn===null)throw Error(t(349));yo&30||sy(m,i,u)}g.memoizedState=u;var v={value:u,getSnapshot:i};return g.queue=v,dy(iy.bind(null,m,v,s),[s]),m.flags|=2048,Ta(9,oy.bind(null,m,v,u,i),void 0,null),u},useId:function(){var s=Xr(),i=mn.identifierPrefix;if(jt){var u=fs,m=hs;u=(m&~(1<<32-_r(m)-1)).toString(32)+u,i=":"+i+"R"+u,u=Sa++,0<u&&(i+="H"+u.toString(32)),i+=":"}else u=rA++,i=":"+i+"r"+u.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},lA={readContext:wr,useCallback:gy,useContext:wr,useEffect:Mf,useImperativeHandle:my,useInsertionEffect:hy,useLayoutEffect:fy,useMemo:xy,useReducer:Pf,useRef:uy,useState:function(){return Pf(ka)},useDebugValue:Of,useDeferredValue:function(s){var i=Cr();return yy(i,ln.memoizedState,s)},useTransition:function(){var s=Pf(ka)[0],i=Cr().memoizedState;return[s,i]},useMutableSource:ny,useSyncExternalStore:ry,useId:vy,unstable_isNewReconciler:!1},cA={readContext:wr,useCallback:gy,useContext:wr,useEffect:Mf,useImperativeHandle:my,useInsertionEffect:hy,useLayoutEffect:fy,useMemo:xy,useReducer:jf,useRef:uy,useState:function(){return jf(ka)},useDebugValue:Of,useDeferredValue:function(s){var i=Cr();return ln===null?i.memoizedState=s:yy(i,ln.memoizedState,s)},useTransition:function(){var s=jf(ka)[0],i=Cr().memoizedState;return[s,i]},useMutableSource:ny,useSyncExternalStore:ry,useId:vy,unstable_isNewReconciler:!1};function Rr(s,i){if(s&&s.defaultProps){i=ee({},i),s=s.defaultProps;for(var u in s)i[u]===void 0&&(i[u]=s[u]);return i}return i}function Ff(s,i,u,m){i=s.memoizedState,u=u(m,i),u=u==null?i:ee({},i,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var wc={isMounted:function(s){return(s=s._reactInternals)?xr(s)===s:!1},enqueueSetState:function(s,i,u){s=s._reactInternals;var m=zn(),g=qs(s),v=ms(m,g);v.payload=i,u!=null&&(v.callback=u),i=$s(s,v,g),i!==null&&(jr(i,s,g,m),hc(i,s,g))},enqueueReplaceState:function(s,i,u){s=s._reactInternals;var m=zn(),g=qs(s),v=ms(m,g);v.tag=1,v.payload=i,u!=null&&(v.callback=u),i=$s(s,v,g),i!==null&&(jr(i,s,g,m),hc(i,s,g))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var u=zn(),m=qs(s),g=ms(u,m);g.tag=2,i!=null&&(g.callback=i),i=$s(s,g,m),i!==null&&(jr(i,s,m,u),hc(i,s,m))}};function Ey(s,i,u,m,g,v,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,v,N):i.prototype&&i.prototype.isPureReactComponent?!ha(u,m)||!ha(g,v):!0}function Sy(s,i,u){var m=!1,g=Ls,v=i.contextType;return typeof v=="object"&&v!==null?v=wr(v):(g=Qn(i)?fo:Nn.current,m=i.contextTypes,v=(m=m!=null)?ri(s,g):Ls),i=new i(u,v),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wc,s.stateNode=i,i._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),i}function ky(s,i,u,m){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,m),i.state!==s&&wc.enqueueReplaceState(i,i.state,null)}function Bf(s,i,u,m){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},Sf(s);var v=i.contextType;typeof v=="object"&&v!==null?g.context=wr(v):(v=Qn(i)?fo:Nn.current,g.context=ri(s,v)),g.state=s.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Ff(s,i,v,u),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&wc.enqueueReplaceState(g,g.state,null),fc(s,u,g,m),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function di(s,i){try{var u="",m=i;do u+=ce(m),m=m.return;while(m);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:i,stack:g,digest:null}}function Lf(s,i,u){return{value:s,source:null,stack:u??null,digest:i??null}}function Hf(s,i){try{console.error(i.value)}catch(u){setTimeout(function(){throw u})}}var uA=typeof WeakMap=="function"?WeakMap:Map;function Ty(s,i,u){u=ms(-1,u),u.tag=3,u.payload={element:null};var m=i.value;return u.callback=function(){Ac||(Ac=!0,t0=m),Hf(s,i)},u}function Ay(s,i,u){u=ms(-1,u),u.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var g=i.value;u.payload=function(){return m(g)},u.callback=function(){Hf(s,i)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Hf(s,i),typeof m!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var N=i.stack;this.componentDidCatch(i.value,{componentStack:N!==null?N:""})}),u}function _y(s,i,u){var m=s.pingCache;if(m===null){m=s.pingCache=new uA;var g=new Set;m.set(i,g)}else g=m.get(i),g===void 0&&(g=new Set,m.set(i,g));g.has(u)||(g.add(u),s=SA.bind(null,s,i,u),i.then(s,s))}function Ny(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Iy(s,i,u,m,g){return s.mode&1?(s.flags|=65536,s.lanes=g,s):(s===i?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(i=ms(-1,1),i.tag=2,$s(u,i,1))),u.lanes|=1),s)}var dA=I.ReactCurrentOwner,Jn=!1;function $n(s,i,u,m){i.child=s===null?Qx(i,null,u,m):ai(i,s.child,u,m)}function Ry(s,i,u,m,g){u=u.render;var v=i.ref;return ci(i,g),m=Rf(s,i,u,m,v,g),u=Df(),s!==null&&!Jn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,gs(s,i,g)):(jt&&u&&pf(i),i.flags|=1,$n(s,i,m,g),i.child)}function Dy(s,i,u,m,g){if(s===null){var v=u.type;return typeof v=="function"&&!l0(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(i.tag=15,i.type=v,Py(s,i,v,m,g)):(s=Pc(u.type,null,m,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,!(s.lanes&g)){var N=v.memoizedProps;if(u=u.compare,u=u!==null?u:ha,u(N,m)&&s.ref===i.ref)return gs(s,i,g)}return i.flags|=1,s=Gs(v,m),s.ref=i.ref,s.return=i,i.child=s}function Py(s,i,u,m,g){if(s!==null){var v=s.memoizedProps;if(ha(v,m)&&s.ref===i.ref)if(Jn=!1,i.pendingProps=m=v,(s.lanes&g)!==0)s.flags&131072&&(Jn=!0);else return i.lanes=s.lanes,gs(s,i,g)}return Uf(s,i,u,m,g)}function jy(s,i,u){var m=i.pendingProps,g=m.children,v=s!==null?s.memoizedState:null;if(m.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(fi,ur),ur|=u;else{if(!(u&1073741824))return s=v!==null?v.baseLanes|u:u,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,kt(fi,ur),ur|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=v!==null?v.baseLanes:u,kt(fi,ur),ur|=m}else v!==null?(m=v.baseLanes|u,i.memoizedState=null):m=u,kt(fi,ur),ur|=m;return $n(s,i,g,u),i.child}function My(s,i){var u=i.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(i.flags|=512,i.flags|=2097152)}function Uf(s,i,u,m,g){var v=Qn(u)?fo:Nn.current;return v=ri(i,v),ci(i,g),u=Rf(s,i,u,m,v,g),m=Df(),s!==null&&!Jn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,gs(s,i,g)):(jt&&m&&pf(i),i.flags|=1,$n(s,i,u,g),i.child)}function Oy(s,i,u,m,g){if(Qn(u)){var v=!0;sc(i)}else v=!1;if(ci(i,g),i.stateNode===null)bc(s,i),Sy(i,u,m),Bf(i,u,m,g),m=!0;else if(s===null){var N=i.stateNode,O=i.memoizedProps;N.props=O;var H=N.context,te=u.contextType;typeof te=="object"&&te!==null?te=wr(te):(te=Qn(u)?fo:Nn.current,te=ri(i,te));var me=u.getDerivedStateFromProps,ye=typeof me=="function"||typeof N.getSnapshotBeforeUpdate=="function";ye||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(O!==m||H!==te)&&ky(i,N,m,te),Us=!1;var fe=i.memoizedState;N.state=fe,fc(i,m,N,g),H=i.memoizedState,O!==m||fe!==H||Yn.current||Us?(typeof me=="function"&&(Ff(i,u,me,m),H=i.memoizedState),(O=Us||Ey(i,u,O,m,fe,H,te))?(ye||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(i.flags|=4194308)):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=H),N.props=m,N.state=H,N.context=te,m=O):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{N=i.stateNode,Xx(s,i),O=i.memoizedProps,te=i.type===i.elementType?O:Rr(i.type,O),N.props=te,ye=i.pendingProps,fe=N.context,H=u.contextType,typeof H=="object"&&H!==null?H=wr(H):(H=Qn(u)?fo:Nn.current,H=ri(i,H));var _e=u.getDerivedStateFromProps;(me=typeof _e=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(O!==ye||fe!==H)&&ky(i,N,m,H),Us=!1,fe=i.memoizedState,N.state=fe,fc(i,m,N,g);var Me=i.memoizedState;O!==ye||fe!==Me||Yn.current||Us?(typeof _e=="function"&&(Ff(i,u,_e,m),Me=i.memoizedState),(te=Us||Ey(i,u,te,m,fe,Me,H)||!1)?(me||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,Me,H),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,Me,H)),typeof N.componentDidUpdate=="function"&&(i.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof N.componentDidUpdate!="function"||O===s.memoizedProps&&fe===s.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&fe===s.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=Me),N.props=m,N.state=Me,N.context=H,m=te):(typeof N.componentDidUpdate!="function"||O===s.memoizedProps&&fe===s.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&fe===s.memoizedState||(i.flags|=1024),m=!1)}return $f(s,i,u,m,v,g)}function $f(s,i,u,m,g,v){My(s,i);var N=(i.flags&128)!==0;if(!m&&!N)return g&&Ux(i,u,!1),gs(s,i,v);m=i.stateNode,dA.current=i;var O=N&&typeof u.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,s!==null&&N?(i.child=ai(i,s.child,null,v),i.child=ai(i,null,O,v)):$n(s,i,O,v),i.memoizedState=m.state,g&&Ux(i,u,!0),i.child}function Fy(s){var i=s.stateNode;i.pendingContext?Lx(s,i.pendingContext,i.pendingContext!==i.context):i.context&&Lx(s,i.context,!1),kf(s,i.containerInfo)}function By(s,i,u,m,g){return ii(),yf(g),i.flags|=256,$n(s,i,u,m),i.child}var zf={dehydrated:null,treeContext:null,retryLane:0};function Vf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ly(s,i,u){var m=i.pendingProps,g=Ft.current,v=!1,N=(i.flags&128)!==0,O;if((O=N)||(O=s!==null&&s.memoizedState===null?!1:(g&2)!==0),O?(v=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),kt(Ft,g&1),s===null)return xf(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(i.mode&1?s.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(N=m.children,s=m.fallback,v?(m=i.mode,v=i.child,N={mode:"hidden",children:N},!(m&1)&&v!==null?(v.childLanes=0,v.pendingProps=N):v=jc(N,m,0,null),s=Eo(s,m,u,null),v.return=i,s.return=i,v.sibling=s,i.child=v,i.child.memoizedState=Vf(u),i.memoizedState=zf,s):Kf(i,N));if(g=s.memoizedState,g!==null&&(O=g.dehydrated,O!==null))return hA(s,i,N,m,O,g,u);if(v){v=m.fallback,N=i.mode,g=s.child,O=g.sibling;var H={mode:"hidden",children:m.children};return!(N&1)&&i.child!==g?(m=i.child,m.childLanes=0,m.pendingProps=H,i.deletions=null):(m=Gs(g,H),m.subtreeFlags=g.subtreeFlags&14680064),O!==null?v=Gs(O,v):(v=Eo(v,N,u,null),v.flags|=2),v.return=i,m.return=i,m.sibling=v,i.child=m,m=v,v=i.child,N=s.child.memoizedState,N=N===null?Vf(u):{baseLanes:N.baseLanes|u,cachePool:null,transitions:N.transitions},v.memoizedState=N,v.childLanes=s.childLanes&~u,i.memoizedState=zf,m}return v=s.child,s=v.sibling,m=Gs(v,{mode:"visible",children:m.children}),!(i.mode&1)&&(m.lanes=u),m.return=i,m.sibling=null,s!==null&&(u=i.deletions,u===null?(i.deletions=[s],i.flags|=16):u.push(s)),i.child=m,i.memoizedState=null,m}function Kf(s,i){return i=jc({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function Cc(s,i,u,m){return m!==null&&yf(m),ai(i,s.child,null,u),s=Kf(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function hA(s,i,u,m,g,v,N){if(u)return i.flags&256?(i.flags&=-257,m=Lf(Error(t(422))),Cc(s,i,N,m)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(v=m.fallback,g=i.mode,m=jc({mode:"visible",children:m.children},g,0,null),v=Eo(v,g,N,null),v.flags|=2,m.return=i,v.return=i,m.sibling=v,i.child=m,i.mode&1&&ai(i,s.child,null,N),i.child.memoizedState=Vf(N),i.memoizedState=zf,v);if(!(i.mode&1))return Cc(s,i,N,null);if(g.data==="$!"){if(m=g.nextSibling&&g.nextSibling.dataset,m)var O=m.dgst;return m=O,v=Error(t(419)),m=Lf(v,m,void 0),Cc(s,i,N,m)}if(O=(N&s.childLanes)!==0,Jn||O){if(m=mn,m!==null){switch(N&-N){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(m.suspendedLanes|N)?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,ps(s,g),jr(m,s,g,-1))}return a0(),m=Lf(Error(t(421))),Cc(s,i,N,m)}return g.data==="$?"?(i.flags|=128,i.child=s.child,i=kA.bind(null,s),g._reactRetry=i,null):(s=v.treeContext,cr=Fs(g.nextSibling),lr=i,jt=!0,Ir=null,s!==null&&(yr[vr++]=hs,yr[vr++]=fs,yr[vr++]=po,hs=s.id,fs=s.overflow,po=i),i=Kf(i,m.children),i.flags|=4096,i)}function Hy(s,i,u){s.lanes|=i;var m=s.alternate;m!==null&&(m.lanes|=i),bf(s.return,i,u)}function qf(s,i,u,m,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=m,v.tail=u,v.tailMode=g)}function Uy(s,i,u){var m=i.pendingProps,g=m.revealOrder,v=m.tail;if($n(s,i,m.children,u),m=Ft.current,m&2)m=m&1|2,i.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Hy(s,u,i);else if(s.tag===19)Hy(s,u,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(kt(Ft,m),!(i.mode&1))i.memoizedState=null;else switch(g){case"forwards":for(u=i.child,g=null;u!==null;)s=u.alternate,s!==null&&pc(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=i.child,i.child=null):(g=u.sibling,u.sibling=null),qf(i,!1,g,u,v);break;case"backwards":for(u=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&pc(s)===null){i.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}qf(i,!0,u,null,v);break;case"together":qf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function bc(s,i){!(i.mode&1)&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function gs(s,i,u){if(s!==null&&(i.dependencies=s.dependencies),vo|=i.lanes,!(u&i.childLanes))return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,u=Gs(s,s.pendingProps),i.child=u,u.return=i;s.sibling!==null;)s=s.sibling,u=u.sibling=Gs(s,s.pendingProps),u.return=i;u.sibling=null}return i.child}function fA(s,i,u){switch(i.tag){case 3:Fy(i),ii();break;case 5:ty(i);break;case 1:Qn(i.type)&&sc(i);break;case 4:kf(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,g=i.memoizedProps.value;kt(uc,m._currentValue),m._currentValue=g;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(kt(Ft,Ft.current&1),i.flags|=128,null):u&i.child.childLanes?Ly(s,i,u):(kt(Ft,Ft.current&1),s=gs(s,i,u),s!==null?s.sibling:null);kt(Ft,Ft.current&1);break;case 19:if(m=(u&i.childLanes)!==0,s.flags&128){if(m)return Uy(s,i,u);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),kt(Ft,Ft.current),m)break;return null;case 22:case 23:return i.lanes=0,jy(s,i,u)}return gs(s,i,u)}var $y,Wf,zy,Vy;$y=function(s,i){for(var u=i.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Wf=function(){},zy=function(s,i,u,m){var g=s.memoizedProps;if(g!==m){s=i.stateNode,xo(Jr.current);var v=null;switch(u){case"input":g=ze(s,g),m=ze(s,m),v=[];break;case"select":g=ee({},g,{value:void 0}),m=ee({},m,{value:void 0}),v=[];break;case"textarea":g=zt(s,g),m=zt(s,m),v=[];break;default:typeof g.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=tc)}Pe(u,m);var N;u=null;for(te in g)if(!m.hasOwnProperty(te)&&g.hasOwnProperty(te)&&g[te]!=null)if(te==="style"){var O=g[te];for(N in O)O.hasOwnProperty(N)&&(u||(u={}),u[N]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(o.hasOwnProperty(te)?v||(v=[]):(v=v||[]).push(te,null));for(te in m){var H=m[te];if(O=g!=null?g[te]:void 0,m.hasOwnProperty(te)&&H!==O&&(H!=null||O!=null))if(te==="style")if(O){for(N in O)!O.hasOwnProperty(N)||H&&H.hasOwnProperty(N)||(u||(u={}),u[N]="");for(N in H)H.hasOwnProperty(N)&&O[N]!==H[N]&&(u||(u={}),u[N]=H[N])}else u||(v||(v=[]),v.push(te,u)),u=H;else te==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,O=O?O.__html:void 0,H!=null&&O!==H&&(v=v||[]).push(te,H)):te==="children"?typeof H!="string"&&typeof H!="number"||(v=v||[]).push(te,""+H):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(o.hasOwnProperty(te)?(H!=null&&te==="onScroll"&&Nt("scroll",s),v||O===H||(v=[])):(v=v||[]).push(te,H))}u&&(v=v||[]).push("style",u);var te=v;(i.updateQueue=te)&&(i.flags|=4)}},Vy=function(s,i,u,m){u!==m&&(i.flags|=4)};function Aa(s,i){if(!jt)switch(s.tailMode){case"hidden":i=s.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Rn(s){var i=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(i)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,m|=g.subtreeFlags&14680064,m|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,m|=g.subtreeFlags,m|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=m,s.childLanes=u,i}function pA(s,i,u){var m=i.pendingProps;switch(mf(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(i),null;case 1:return Qn(i.type)&&rc(),Rn(i),null;case 3:return m=i.stateNode,ui(),It(Yn),It(Nn),_f(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(lc(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Ir!==null&&(s0(Ir),Ir=null))),Wf(s,i),Rn(i),null;case 5:Tf(i);var g=xo(ba.current);if(u=i.type,s!==null&&i.stateNode!=null)zy(s,i,u,m,g),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(t(166));return Rn(i),null}if(s=xo(Jr.current),lc(i)){m=i.stateNode,u=i.type;var v=i.memoizedProps;switch(m[Qr]=i,m[xa]=v,s=(i.mode&1)!==0,u){case"dialog":Nt("cancel",m),Nt("close",m);break;case"iframe":case"object":case"embed":Nt("load",m);break;case"video":case"audio":for(g=0;g<pa.length;g++)Nt(pa[g],m);break;case"source":Nt("error",m);break;case"img":case"image":case"link":Nt("error",m),Nt("load",m);break;case"details":Nt("toggle",m);break;case"input":it(m,v),Nt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!v.multiple},Nt("invalid",m);break;case"textarea":Dt(m,v),Nt("invalid",m)}Pe(u,v),g=null;for(var N in v)if(v.hasOwnProperty(N)){var O=v[N];N==="children"?typeof O=="string"?m.textContent!==O&&(v.suppressHydrationWarning!==!0&&ec(m.textContent,O,s),g=["children",O]):typeof O=="number"&&m.textContent!==""+O&&(v.suppressHydrationWarning!==!0&&ec(m.textContent,O,s),g=["children",""+O]):o.hasOwnProperty(N)&&O!=null&&N==="onScroll"&&Nt("scroll",m)}switch(u){case"input":ke(m),Ln(m,v,!0);break;case"textarea":ke(m),gr(m);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(m.onclick=tc)}m=g,i.updateQueue=m,m!==null&&(i.flags|=4)}else{N=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=dn(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=N.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=N.createElement(u,{is:m.is}):(s=N.createElement(u),u==="select"&&(N=s,m.multiple?N.multiple=!0:m.size&&(N.size=m.size))):s=N.createElementNS(s,u),s[Qr]=i,s[xa]=m,$y(s,i,!1,!1),i.stateNode=s;e:{switch(N=ut(u,m),u){case"dialog":Nt("cancel",s),Nt("close",s),g=m;break;case"iframe":case"object":case"embed":Nt("load",s),g=m;break;case"video":case"audio":for(g=0;g<pa.length;g++)Nt(pa[g],s);g=m;break;case"source":Nt("error",s),g=m;break;case"img":case"image":case"link":Nt("error",s),Nt("load",s),g=m;break;case"details":Nt("toggle",s),g=m;break;case"input":it(s,m),g=ze(s,m),Nt("invalid",s);break;case"option":g=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},g=ee({},m,{value:void 0}),Nt("invalid",s);break;case"textarea":Dt(s,m),g=zt(s,m),Nt("invalid",s);break;default:g=m}Pe(u,g),O=g;for(v in O)if(O.hasOwnProperty(v)){var H=O[v];v==="style"?Ue(s,H):v==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&Vt(s,H)):v==="children"?typeof H=="string"?(u!=="textarea"||H!=="")&&Ce(s,H):typeof H=="number"&&Ce(s,""+H):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?H!=null&&v==="onScroll"&&Nt("scroll",s):H!=null&&k(s,v,H,N))}switch(u){case"input":ke(s),Ln(s,m,!1);break;case"textarea":ke(s),gr(s);break;case"option":m.value!=null&&s.setAttribute("value",""+Z(m.value));break;case"select":s.multiple=!!m.multiple,v=m.value,v!=null?At(s,!!m.multiple,v,!1):m.defaultValue!=null&&At(s,!!m.multiple,m.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=tc)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Rn(i),null;case 6:if(s&&i.stateNode!=null)Vy(s,i,s.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(t(166));if(u=xo(ba.current),xo(Jr.current),lc(i)){if(m=i.stateNode,u=i.memoizedProps,m[Qr]=i,(v=m.nodeValue!==u)&&(s=lr,s!==null))switch(s.tag){case 3:ec(m.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ec(m.nodeValue,u,(s.mode&1)!==0)}v&&(i.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[Qr]=i,i.stateNode=m}return Rn(i),null;case 13:if(It(Ft),m=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(jt&&cr!==null&&i.mode&1&&!(i.flags&128))Wx(),ii(),i.flags|=98560,v=!1;else if(v=lc(i),m!==null&&m.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Qr]=i}else ii(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Rn(i),v=!1}else Ir!==null&&(s0(Ir),Ir=null),v=!0;if(!v)return i.flags&65536?i:null}return i.flags&128?(i.lanes=u,i):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(i.child.flags|=8192,i.mode&1&&(s===null||Ft.current&1?cn===0&&(cn=3):a0())),i.updateQueue!==null&&(i.flags|=4),Rn(i),null);case 4:return ui(),Wf(s,i),s===null&&ma(i.stateNode.containerInfo),Rn(i),null;case 10:return Cf(i.type._context),Rn(i),null;case 17:return Qn(i.type)&&rc(),Rn(i),null;case 19:if(It(Ft),v=i.memoizedState,v===null)return Rn(i),null;if(m=(i.flags&128)!==0,N=v.rendering,N===null)if(m)Aa(v,!1);else{if(cn!==0||s!==null&&s.flags&128)for(s=i.child;s!==null;){if(N=pc(s),N!==null){for(i.flags|=128,Aa(v,!1),m=N.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=u,u=i.child;u!==null;)v=u,s=m,v.flags&=14680066,N=v.alternate,N===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=N.childLanes,v.lanes=N.lanes,v.child=N.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=N.memoizedProps,v.memoizedState=N.memoizedState,v.updateQueue=N.updateQueue,v.type=N.type,s=N.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return kt(Ft,Ft.current&1|2),i.child}s=s.sibling}v.tail!==null&&Ne()>pi&&(i.flags|=128,m=!0,Aa(v,!1),i.lanes=4194304)}else{if(!m)if(s=pc(N),s!==null){if(i.flags|=128,m=!0,u=s.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),Aa(v,!0),v.tail===null&&v.tailMode==="hidden"&&!N.alternate&&!jt)return Rn(i),null}else 2*Ne()-v.renderingStartTime>pi&&u!==1073741824&&(i.flags|=128,m=!0,Aa(v,!1),i.lanes=4194304);v.isBackwards?(N.sibling=i.child,i.child=N):(u=v.last,u!==null?u.sibling=N:i.child=N,v.last=N)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=Ne(),i.sibling=null,u=Ft.current,kt(Ft,m?u&1|2:u&1),i):(Rn(i),null);case 22:case 23:return i0(),m=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(i.flags|=8192),m&&i.mode&1?ur&1073741824&&(Rn(i),i.subtreeFlags&6&&(i.flags|=8192)):Rn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function mA(s,i){switch(mf(i),i.tag){case 1:return Qn(i.type)&&rc(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ui(),It(Yn),It(Nn),_f(),s=i.flags,s&65536&&!(s&128)?(i.flags=s&-65537|128,i):null;case 5:return Tf(i),null;case 13:if(It(Ft),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));ii()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return It(Ft),null;case 4:return ui(),null;case 10:return Cf(i.type._context),null;case 22:case 23:return i0(),null;case 24:return null;default:return null}}var Ec=!1,Dn=!1,gA=typeof WeakSet=="function"?WeakSet:Set,Re=null;function hi(s,i){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){qt(s,i,m)}else u.current=null}function Gf(s,i,u){try{u()}catch(m){qt(s,i,m)}}var Ky=!1;function xA(s,i){if(of=zl,s=Ex(),Jh(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var g=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var N=0,O=-1,H=-1,te=0,me=0,ye=s,fe=null;t:for(;;){for(var _e;ye!==u||g!==0&&ye.nodeType!==3||(O=N+g),ye!==v||m!==0&&ye.nodeType!==3||(H=N+m),ye.nodeType===3&&(N+=ye.nodeValue.length),(_e=ye.firstChild)!==null;)fe=ye,ye=_e;for(;;){if(ye===s)break t;if(fe===u&&++te===g&&(O=N),fe===v&&++me===m&&(H=N),(_e=ye.nextSibling)!==null)break;ye=fe,fe=ye.parentNode}ye=_e}u=O===-1||H===-1?null:{start:O,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(af={focusedElem:s,selectionRange:u},zl=!1,Re=i;Re!==null;)if(i=Re,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Re=s;else for(;Re!==null;){i=Re;try{var Me=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var Oe=Me.memoizedProps,Yt=Me.memoizedState,J=i.stateNode,V=J.getSnapshotBeforeUpdate(i.elementType===i.type?Oe:Rr(i.type,Oe),Yt);J.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var X=i.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(be){qt(i,i.return,be)}if(s=i.sibling,s!==null){s.return=i.return,Re=s;break}Re=i.return}return Me=Ky,Ky=!1,Me}function _a(s,i,u){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var g=m=m.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&Gf(i,u,v)}g=g.next}while(g!==m)}}function Sc(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var u=i=i.next;do{if((u.tag&s)===s){var m=u.create;u.destroy=m()}u=u.next}while(u!==i)}}function Yf(s){var i=s.ref;if(i!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof i=="function"?i(s):i.current=s}}function qy(s){var i=s.alternate;i!==null&&(s.alternate=null,qy(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[Qr],delete i[xa],delete i[df],delete i[ZT],delete i[eA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Wy(s){return s.tag===5||s.tag===3||s.tag===4}function Gy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Wy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qf(s,i,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,i?u.nodeType===8?u.parentNode.insertBefore(s,i):u.insertBefore(s,i):(u.nodeType===8?(i=u.parentNode,i.insertBefore(s,u)):(i=u,i.appendChild(s)),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=tc));else if(m!==4&&(s=s.child,s!==null))for(Qf(s,i,u),s=s.sibling;s!==null;)Qf(s,i,u),s=s.sibling}function Jf(s,i,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,i?u.insertBefore(s,i):u.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(Jf(s,i,u),s=s.sibling;s!==null;)Jf(s,i,u),s=s.sibling}var bn=null,Dr=!1;function zs(s,i,u){for(u=u.child;u!==null;)Yy(s,i,u),u=u.sibling}function Yy(s,i,u){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Un,u)}catch{}switch(u.tag){case 5:Dn||hi(u,i);case 6:var m=bn,g=Dr;bn=null,zs(s,i,u),bn=m,Dr=g,bn!==null&&(Dr?(s=bn,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):bn.removeChild(u.stateNode));break;case 18:bn!==null&&(Dr?(s=bn,u=u.stateNode,s.nodeType===8?uf(s.parentNode,u):s.nodeType===1&&uf(s,u),ia(s)):uf(bn,u.stateNode));break;case 4:m=bn,g=Dr,bn=u.stateNode.containerInfo,Dr=!0,zs(s,i,u),bn=m,Dr=g;break;case 0:case 11:case 14:case 15:if(!Dn&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){g=m=m.next;do{var v=g,N=v.destroy;v=v.tag,N!==void 0&&(v&2||v&4)&&Gf(u,i,N),g=g.next}while(g!==m)}zs(s,i,u);break;case 1:if(!Dn&&(hi(u,i),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(O){qt(u,i,O)}zs(s,i,u);break;case 21:zs(s,i,u);break;case 22:u.mode&1?(Dn=(m=Dn)||u.memoizedState!==null,zs(s,i,u),Dn=m):zs(s,i,u);break;default:zs(s,i,u)}}function Qy(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new gA),i.forEach(function(m){var g=TA.bind(null,s,m);u.has(m)||(u.add(m),m.then(g,g))})}}function Pr(s,i){var u=i.deletions;if(u!==null)for(var m=0;m<u.length;m++){var g=u[m];try{var v=s,N=i,O=N;e:for(;O!==null;){switch(O.tag){case 5:bn=O.stateNode,Dr=!1;break e;case 3:bn=O.stateNode.containerInfo,Dr=!0;break e;case 4:bn=O.stateNode.containerInfo,Dr=!0;break e}O=O.return}if(bn===null)throw Error(t(160));Yy(v,N,g),bn=null,Dr=!1;var H=g.alternate;H!==null&&(H.return=null),g.return=null}catch(te){qt(g,i,te)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Jy(i,s),i=i.sibling}function Jy(s,i){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Pr(i,s),Zr(s),m&4){try{_a(3,s,s.return),Sc(3,s)}catch(Oe){qt(s,s.return,Oe)}try{_a(5,s,s.return)}catch(Oe){qt(s,s.return,Oe)}}break;case 1:Pr(i,s),Zr(s),m&512&&u!==null&&hi(u,u.return);break;case 5:if(Pr(i,s),Zr(s),m&512&&u!==null&&hi(u,u.return),s.flags&32){var g=s.stateNode;try{Ce(g,"")}catch(Oe){qt(s,s.return,Oe)}}if(m&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,N=u!==null?u.memoizedProps:v,O=s.type,H=s.updateQueue;if(s.updateQueue=null,H!==null)try{O==="input"&&v.type==="radio"&&v.name!=null&&bt(g,v),ut(O,N);var te=ut(O,v);for(N=0;N<H.length;N+=2){var me=H[N],ye=H[N+1];me==="style"?Ue(g,ye):me==="dangerouslySetInnerHTML"?Vt(g,ye):me==="children"?Ce(g,ye):k(g,me,ye,te)}switch(O){case"input":mt(g,v);break;case"textarea":_n(g,v);break;case"select":var fe=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var _e=v.value;_e!=null?At(g,!!v.multiple,_e,!1):fe!==!!v.multiple&&(v.defaultValue!=null?At(g,!!v.multiple,v.defaultValue,!0):At(g,!!v.multiple,v.multiple?[]:"",!1))}g[xa]=v}catch(Oe){qt(s,s.return,Oe)}}break;case 6:if(Pr(i,s),Zr(s),m&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(Oe){qt(s,s.return,Oe)}}break;case 3:if(Pr(i,s),Zr(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{ia(i.containerInfo)}catch(Oe){qt(s,s.return,Oe)}break;case 4:Pr(i,s),Zr(s);break;case 13:Pr(i,s),Zr(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(e0=Ne())),m&4&&Qy(s);break;case 22:if(me=u!==null&&u.memoizedState!==null,s.mode&1?(Dn=(te=Dn)||me,Pr(i,s),Dn=te):Pr(i,s),Zr(s),m&8192){if(te=s.memoizedState!==null,(s.stateNode.isHidden=te)&&!me&&s.mode&1)for(Re=s,me=s.child;me!==null;){for(ye=Re=me;Re!==null;){switch(fe=Re,_e=fe.child,fe.tag){case 0:case 11:case 14:case 15:_a(4,fe,fe.return);break;case 1:hi(fe,fe.return);var Me=fe.stateNode;if(typeof Me.componentWillUnmount=="function"){m=fe,u=fe.return;try{i=m,Me.props=i.memoizedProps,Me.state=i.memoizedState,Me.componentWillUnmount()}catch(Oe){qt(m,u,Oe)}}break;case 5:hi(fe,fe.return);break;case 22:if(fe.memoizedState!==null){ev(ye);continue}}_e!==null?(_e.return=fe,Re=_e):ev(ye)}me=me.sibling}e:for(me=null,ye=s;;){if(ye.tag===5){if(me===null){me=ye;try{g=ye.stateNode,te?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(O=ye.stateNode,H=ye.memoizedProps.style,N=H!=null&&H.hasOwnProperty("display")?H.display:null,O.style.display=Be("display",N))}catch(Oe){qt(s,s.return,Oe)}}}else if(ye.tag===6){if(me===null)try{ye.stateNode.nodeValue=te?"":ye.memoizedProps}catch(Oe){qt(s,s.return,Oe)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===s)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===s)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===s)break e;me===ye&&(me=null),ye=ye.return}me===ye&&(me=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Pr(i,s),Zr(s),m&4&&Qy(s);break;case 21:break;default:Pr(i,s),Zr(s)}}function Zr(s){var i=s.flags;if(i&2){try{e:{for(var u=s.return;u!==null;){if(Wy(u)){var m=u;break e}u=u.return}throw Error(t(160))}switch(m.tag){case 5:var g=m.stateNode;m.flags&32&&(Ce(g,""),m.flags&=-33);var v=Gy(s);Jf(s,v,g);break;case 3:case 4:var N=m.stateNode.containerInfo,O=Gy(s);Qf(s,O,N);break;default:throw Error(t(161))}}catch(H){qt(s,s.return,H)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function yA(s,i,u){Re=s,Xy(s)}function Xy(s,i,u){for(var m=(s.mode&1)!==0;Re!==null;){var g=Re,v=g.child;if(g.tag===22&&m){var N=g.memoizedState!==null||Ec;if(!N){var O=g.alternate,H=O!==null&&O.memoizedState!==null||Dn;O=Ec;var te=Dn;if(Ec=N,(Dn=H)&&!te)for(Re=g;Re!==null;)N=Re,H=N.child,N.tag===22&&N.memoizedState!==null?tv(g):H!==null?(H.return=N,Re=H):tv(g);for(;v!==null;)Re=v,Xy(v),v=v.sibling;Re=g,Ec=O,Dn=te}Zy(s)}else g.subtreeFlags&8772&&v!==null?(v.return=g,Re=v):Zy(s)}}function Zy(s){for(;Re!==null;){var i=Re;if(i.flags&8772){var u=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Dn||Sc(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!Dn)if(u===null)m.componentDidMount();else{var g=i.elementType===i.type?u.memoizedProps:Rr(i.type,u.memoizedProps);m.componentDidUpdate(g,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&ey(i,v,m);break;case 3:var N=i.updateQueue;if(N!==null){if(u=null,i.child!==null)switch(i.child.tag){case 5:u=i.child.stateNode;break;case 1:u=i.child.stateNode}ey(i,N,u)}break;case 5:var O=i.stateNode;if(u===null&&i.flags&4){u=O;var H=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&u.focus();break;case"img":H.src&&(u.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var te=i.alternate;if(te!==null){var me=te.memoizedState;if(me!==null){var ye=me.dehydrated;ye!==null&&ia(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dn||i.flags&512&&Yf(i)}catch(fe){qt(i,i.return,fe)}}if(i===s){Re=null;break}if(u=i.sibling,u!==null){u.return=i.return,Re=u;break}Re=i.return}}function ev(s){for(;Re!==null;){var i=Re;if(i===s){Re=null;break}var u=i.sibling;if(u!==null){u.return=i.return,Re=u;break}Re=i.return}}function tv(s){for(;Re!==null;){var i=Re;try{switch(i.tag){case 0:case 11:case 15:var u=i.return;try{Sc(4,i)}catch(H){qt(i,u,H)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var g=i.return;try{m.componentDidMount()}catch(H){qt(i,g,H)}}var v=i.return;try{Yf(i)}catch(H){qt(i,v,H)}break;case 5:var N=i.return;try{Yf(i)}catch(H){qt(i,N,H)}}}catch(H){qt(i,i.return,H)}if(i===s){Re=null;break}var O=i.sibling;if(O!==null){O.return=i.return,Re=O;break}Re=i.return}}var vA=Math.ceil,kc=I.ReactCurrentDispatcher,Xf=I.ReactCurrentOwner,br=I.ReactCurrentBatchConfig,dt=0,mn=null,en=null,En=0,ur=0,fi=Bs(0),cn=0,Na=null,vo=0,Tc=0,Zf=0,Ia=null,Xn=null,e0=0,pi=1/0,xs=null,Ac=!1,t0=null,Vs=null,_c=!1,Ks=null,Nc=0,Ra=0,n0=null,Ic=-1,Rc=0;function zn(){return dt&6?Ne():Ic!==-1?Ic:Ic=Ne()}function qs(s){return s.mode&1?dt&2&&En!==0?En&-En:nA.transition!==null?(Rc===0&&(Rc=Gg()),Rc):(s=gt,s!==0||(s=window.event,s=s===void 0?16:rx(s.type)),s):1}function jr(s,i,u,m){if(50<Ra)throw Ra=0,n0=null,Error(t(185));ta(s,u,m),(!(dt&2)||s!==mn)&&(s===mn&&(!(dt&2)&&(Tc|=u),cn===4&&Ws(s,En)),Zn(s,m),u===1&&dt===0&&!(i.mode&1)&&(pi=Ne()+500,oc&&Hs()))}function Zn(s,i){var u=s.callbackNode;nT(s,i);var m=Hl(s,s===mn?En:0);if(m===0)u!==null&&ue(u),s.callbackNode=null,s.callbackPriority=0;else if(i=m&-m,s.callbackPriority!==i){if(u!=null&&ue(u),i===1)s.tag===0?tA(rv.bind(null,s)):$x(rv.bind(null,s)),JT(function(){!(dt&6)&&Hs()}),u=null;else{switch(Yg(m)){case 1:u=Se;break;case 4:u=pt;break;case 16:u=Ge;break;case 536870912:u=St;break;default:u=Ge}u=dv(u,nv.bind(null,s))}s.callbackPriority=i,s.callbackNode=u}}function nv(s,i){if(Ic=-1,Rc=0,dt&6)throw Error(t(327));var u=s.callbackNode;if(mi()&&s.callbackNode!==u)return null;var m=Hl(s,s===mn?En:0);if(m===0)return null;if(m&30||m&s.expiredLanes||i)i=Dc(s,m);else{i=m;var g=dt;dt|=2;var v=ov();(mn!==s||En!==i)&&(xs=null,pi=Ne()+500,Co(s,i));do try{bA();break}catch(O){sv(s,O)}while(!0);wf(),kc.current=v,dt=g,en!==null?i=0:(mn=null,En=0,i=cn)}if(i!==0){if(i===2&&(g=Mh(s),g!==0&&(m=g,i=r0(s,g))),i===1)throw u=Na,Co(s,0),Ws(s,m),Zn(s,Ne()),u;if(i===6)Ws(s,m);else{if(g=s.current.alternate,!(m&30)&&!wA(g)&&(i=Dc(s,m),i===2&&(v=Mh(s),v!==0&&(m=v,i=r0(s,v))),i===1))throw u=Na,Co(s,0),Ws(s,m),Zn(s,Ne()),u;switch(s.finishedWork=g,s.finishedLanes=m,i){case 0:case 1:throw Error(t(345));case 2:bo(s,Xn,xs);break;case 3:if(Ws(s,m),(m&130023424)===m&&(i=e0+500-Ne(),10<i)){if(Hl(s,0)!==0)break;if(g=s.suspendedLanes,(g&m)!==m){zn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=cf(bo.bind(null,s,Xn,xs),i);break}bo(s,Xn,xs);break;case 4:if(Ws(s,m),(m&4194240)===m)break;for(i=s.eventTimes,g=-1;0<m;){var N=31-_r(m);v=1<<N,N=i[N],N>g&&(g=N),m&=~v}if(m=g,m=Ne()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*vA(m/1960))-m,10<m){s.timeoutHandle=cf(bo.bind(null,s,Xn,xs),m);break}bo(s,Xn,xs);break;case 5:bo(s,Xn,xs);break;default:throw Error(t(329))}}}return Zn(s,Ne()),s.callbackNode===u?nv.bind(null,s):null}function r0(s,i){var u=Ia;return s.current.memoizedState.isDehydrated&&(Co(s,i).flags|=256),s=Dc(s,i),s!==2&&(i=Xn,Xn=u,i!==null&&s0(i)),s}function s0(s){Xn===null?Xn=s:Xn.push.apply(Xn,s)}function wA(s){for(var i=s;;){if(i.flags&16384){var u=i.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var g=u[m],v=g.getSnapshot;g=g.value;try{if(!Nr(v(),g))return!1}catch{return!1}}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ws(s,i){for(i&=~Zf,i&=~Tc,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var u=31-_r(i),m=1<<u;s[u]=-1,i&=~m}}function rv(s){if(dt&6)throw Error(t(327));mi();var i=Hl(s,0);if(!(i&1))return Zn(s,Ne()),null;var u=Dc(s,i);if(s.tag!==0&&u===2){var m=Mh(s);m!==0&&(i=m,u=r0(s,m))}if(u===1)throw u=Na,Co(s,0),Ws(s,i),Zn(s,Ne()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,bo(s,Xn,xs),Zn(s,Ne()),null}function o0(s,i){var u=dt;dt|=1;try{return s(i)}finally{dt=u,dt===0&&(pi=Ne()+500,oc&&Hs())}}function wo(s){Ks!==null&&Ks.tag===0&&!(dt&6)&&mi();var i=dt;dt|=1;var u=br.transition,m=gt;try{if(br.transition=null,gt=1,s)return s()}finally{gt=m,br.transition=u,dt=i,!(dt&6)&&Hs()}}function i0(){ur=fi.current,It(fi)}function Co(s,i){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,QT(u)),en!==null)for(u=en.return;u!==null;){var m=u;switch(mf(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&rc();break;case 3:ui(),It(Yn),It(Nn),_f();break;case 5:Tf(m);break;case 4:ui();break;case 13:It(Ft);break;case 19:It(Ft);break;case 10:Cf(m.type._context);break;case 22:case 23:i0()}u=u.return}if(mn=s,en=s=Gs(s.current,null),En=ur=i,cn=0,Na=null,Zf=Tc=vo=0,Xn=Ia=null,go!==null){for(i=0;i<go.length;i++)if(u=go[i],m=u.interleaved,m!==null){u.interleaved=null;var g=m.next,v=u.pending;if(v!==null){var N=v.next;v.next=g,m.next=N}u.pending=m}go=null}return s}function sv(s,i){do{var u=en;try{if(wf(),mc.current=vc,gc){for(var m=Bt.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}gc=!1}if(yo=0,pn=ln=Bt=null,Ea=!1,Sa=0,Xf.current=null,u===null||u.return===null){cn=1,Na=i,en=null;break}e:{var v=s,N=u.return,O=u,H=i;if(i=En,O.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var te=H,me=O,ye=me.tag;if(!(me.mode&1)&&(ye===0||ye===11||ye===15)){var fe=me.alternate;fe?(me.updateQueue=fe.updateQueue,me.memoizedState=fe.memoizedState,me.lanes=fe.lanes):(me.updateQueue=null,me.memoizedState=null)}var _e=Ny(N);if(_e!==null){_e.flags&=-257,Iy(_e,N,O,v,i),_e.mode&1&&_y(v,te,i),i=_e,H=te;var Me=i.updateQueue;if(Me===null){var Oe=new Set;Oe.add(H),i.updateQueue=Oe}else Me.add(H);break e}else{if(!(i&1)){_y(v,te,i),a0();break e}H=Error(t(426))}}else if(jt&&O.mode&1){var Yt=Ny(N);if(Yt!==null){!(Yt.flags&65536)&&(Yt.flags|=256),Iy(Yt,N,O,v,i),yf(di(H,O));break e}}v=H=di(H,O),cn!==4&&(cn=2),Ia===null?Ia=[v]:Ia.push(v),v=N;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var J=Ty(v,H,i);Zx(v,J);break e;case 1:O=H;var V=v.type,X=v.stateNode;if(!(v.flags&128)&&(typeof V.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Vs===null||!Vs.has(X)))){v.flags|=65536,i&=-i,v.lanes|=i;var be=Ay(v,O,i);Zx(v,be);break e}}v=v.return}while(v!==null)}av(u)}catch(Fe){i=Fe,en===u&&u!==null&&(en=u=u.return);continue}break}while(!0)}function ov(){var s=kc.current;return kc.current=vc,s===null?vc:s}function a0(){(cn===0||cn===3||cn===2)&&(cn=4),mn===null||!(vo&268435455)&&!(Tc&268435455)||Ws(mn,En)}function Dc(s,i){var u=dt;dt|=2;var m=ov();(mn!==s||En!==i)&&(xs=null,Co(s,i));do try{CA();break}catch(g){sv(s,g)}while(!0);if(wf(),dt=u,kc.current=m,en!==null)throw Error(t(261));return mn=null,En=0,cn}function CA(){for(;en!==null;)iv(en)}function bA(){for(;en!==null&&!Ae();)iv(en)}function iv(s){var i=uv(s.alternate,s,ur);s.memoizedProps=s.pendingProps,i===null?av(s):en=i,Xf.current=null}function av(s){var i=s;do{var u=i.alternate;if(s=i.return,i.flags&32768){if(u=mA(u,i),u!==null){u.flags&=32767,en=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{cn=6,en=null;return}}else if(u=pA(u,i,ur),u!==null){en=u;return}if(i=i.sibling,i!==null){en=i;return}en=i=s}while(i!==null);cn===0&&(cn=5)}function bo(s,i,u){var m=gt,g=br.transition;try{br.transition=null,gt=1,EA(s,i,u,m)}finally{br.transition=g,gt=m}return null}function EA(s,i,u,m){do mi();while(Ks!==null);if(dt&6)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(rT(s,v),s===mn&&(en=mn=null,En=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||_c||(_c=!0,dv(Ge,function(){return mi(),null})),v=(u.flags&15990)!==0,u.subtreeFlags&15990||v){v=br.transition,br.transition=null;var N=gt;gt=1;var O=dt;dt|=4,Xf.current=null,xA(s,u),Jy(u,s),zT(af),zl=!!of,af=of=null,s.current=u,yA(u),je(),dt=O,gt=N,br.transition=v}else s.current=u;if(_c&&(_c=!1,Ks=s,Nc=g),v=s.pendingLanes,v===0&&(Vs=null),jh(u.stateNode),Zn(s,Ne()),i!==null)for(m=s.onRecoverableError,u=0;u<i.length;u++)g=i[u],m(g.value,{componentStack:g.stack,digest:g.digest});if(Ac)throw Ac=!1,s=t0,t0=null,s;return Nc&1&&s.tag!==0&&mi(),v=s.pendingLanes,v&1?s===n0?Ra++:(Ra=0,n0=s):Ra=0,Hs(),null}function mi(){if(Ks!==null){var s=Yg(Nc),i=br.transition,u=gt;try{if(br.transition=null,gt=16>s?16:s,Ks===null)var m=!1;else{if(s=Ks,Ks=null,Nc=0,dt&6)throw Error(t(331));var g=dt;for(dt|=4,Re=s.current;Re!==null;){var v=Re,N=v.child;if(Re.flags&16){var O=v.deletions;if(O!==null){for(var H=0;H<O.length;H++){var te=O[H];for(Re=te;Re!==null;){var me=Re;switch(me.tag){case 0:case 11:case 15:_a(8,me,v)}var ye=me.child;if(ye!==null)ye.return=me,Re=ye;else for(;Re!==null;){me=Re;var fe=me.sibling,_e=me.return;if(qy(me),me===te){Re=null;break}if(fe!==null){fe.return=_e,Re=fe;break}Re=_e}}}var Me=v.alternate;if(Me!==null){var Oe=Me.child;if(Oe!==null){Me.child=null;do{var Yt=Oe.sibling;Oe.sibling=null,Oe=Yt}while(Oe!==null)}}Re=v}}if(v.subtreeFlags&2064&&N!==null)N.return=v,Re=N;else e:for(;Re!==null;){if(v=Re,v.flags&2048)switch(v.tag){case 0:case 11:case 15:_a(9,v,v.return)}var J=v.sibling;if(J!==null){J.return=v.return,Re=J;break e}Re=v.return}}var V=s.current;for(Re=V;Re!==null;){N=Re;var X=N.child;if(N.subtreeFlags&2064&&X!==null)X.return=N,Re=X;else e:for(N=V;Re!==null;){if(O=Re,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:Sc(9,O)}}catch(Fe){qt(O,O.return,Fe)}if(O===N){Re=null;break e}var be=O.sibling;if(be!==null){be.return=O.return,Re=be;break e}Re=O.return}}if(dt=g,Hs(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Un,s)}catch{}m=!0}return m}finally{gt=u,br.transition=i}}return!1}function lv(s,i,u){i=di(u,i),i=Ty(s,i,1),s=$s(s,i,1),i=zn(),s!==null&&(ta(s,1,i),Zn(s,i))}function qt(s,i,u){if(s.tag===3)lv(s,s,u);else for(;i!==null;){if(i.tag===3){lv(i,s,u);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Vs===null||!Vs.has(m))){s=di(u,s),s=Ay(i,s,1),i=$s(i,s,1),s=zn(),i!==null&&(ta(i,1,s),Zn(i,s));break}}i=i.return}}function SA(s,i,u){var m=s.pingCache;m!==null&&m.delete(i),i=zn(),s.pingedLanes|=s.suspendedLanes&u,mn===s&&(En&u)===u&&(cn===4||cn===3&&(En&130023424)===En&&500>Ne()-e0?Co(s,0):Zf|=u),Zn(s,i)}function cv(s,i){i===0&&(s.mode&1?(i=Ll,Ll<<=1,!(Ll&130023424)&&(Ll=4194304)):i=1);var u=zn();s=ps(s,i),s!==null&&(ta(s,i,u),Zn(s,u))}function kA(s){var i=s.memoizedState,u=0;i!==null&&(u=i.retryLane),cv(s,u)}function TA(s,i){var u=0;switch(s.tag){case 13:var m=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(i),cv(s,u)}var uv;uv=function(s,i,u){if(s!==null)if(s.memoizedProps!==i.pendingProps||Yn.current)Jn=!0;else{if(!(s.lanes&u)&&!(i.flags&128))return Jn=!1,fA(s,i,u);Jn=!!(s.flags&131072)}else Jn=!1,jt&&i.flags&1048576&&zx(i,ac,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;bc(s,i),s=i.pendingProps;var g=ri(i,Nn.current);ci(i,u),g=Rf(null,i,m,s,g,u);var v=Df();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Qn(m)?(v=!0,sc(i)):v=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Sf(i),g.updater=wc,i.stateNode=g,g._reactInternals=i,Bf(i,m,s,u),i=$f(null,i,m,!0,v,u)):(i.tag=0,jt&&v&&pf(i),$n(null,i,g,u),i=i.child),i;case 16:m=i.elementType;e:{switch(bc(s,i),s=i.pendingProps,g=m._init,m=g(m._payload),i.type=m,g=i.tag=_A(m),s=Rr(m,s),g){case 0:i=Uf(null,i,m,s,u);break e;case 1:i=Oy(null,i,m,s,u);break e;case 11:i=Ry(null,i,m,s,u);break e;case 14:i=Dy(null,i,m,Rr(m.type,s),u);break e}throw Error(t(306,m,""))}return i;case 0:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Rr(m,g),Uf(s,i,m,g,u);case 1:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Rr(m,g),Oy(s,i,m,g,u);case 3:e:{if(Fy(i),s===null)throw Error(t(387));m=i.pendingProps,v=i.memoizedState,g=v.element,Xx(s,i),fc(i,m,null,u);var N=i.memoizedState;if(m=N.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){g=di(Error(t(423)),i),i=By(s,i,m,u,g);break e}else if(m!==g){g=di(Error(t(424)),i),i=By(s,i,m,u,g);break e}else for(cr=Fs(i.stateNode.containerInfo.firstChild),lr=i,jt=!0,Ir=null,u=Qx(i,null,m,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ii(),m===g){i=gs(s,i,u);break e}$n(s,i,m,u)}i=i.child}return i;case 5:return ty(i),s===null&&xf(i),m=i.type,g=i.pendingProps,v=s!==null?s.memoizedProps:null,N=g.children,lf(m,g)?N=null:v!==null&&lf(m,v)&&(i.flags|=32),My(s,i),$n(s,i,N,u),i.child;case 6:return s===null&&xf(i),null;case 13:return Ly(s,i,u);case 4:return kf(i,i.stateNode.containerInfo),m=i.pendingProps,s===null?i.child=ai(i,null,m,u):$n(s,i,m,u),i.child;case 11:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Rr(m,g),Ry(s,i,m,g,u);case 7:return $n(s,i,i.pendingProps,u),i.child;case 8:return $n(s,i,i.pendingProps.children,u),i.child;case 12:return $n(s,i,i.pendingProps.children,u),i.child;case 10:e:{if(m=i.type._context,g=i.pendingProps,v=i.memoizedProps,N=g.value,kt(uc,m._currentValue),m._currentValue=N,v!==null)if(Nr(v.value,N)){if(v.children===g.children&&!Yn.current){i=gs(s,i,u);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var O=v.dependencies;if(O!==null){N=v.child;for(var H=O.firstContext;H!==null;){if(H.context===m){if(v.tag===1){H=ms(-1,u&-u),H.tag=2;var te=v.updateQueue;if(te!==null){te=te.shared;var me=te.pending;me===null?H.next=H:(H.next=me.next,me.next=H),te.pending=H}}v.lanes|=u,H=v.alternate,H!==null&&(H.lanes|=u),bf(v.return,u,i),O.lanes|=u;break}H=H.next}}else if(v.tag===10)N=v.type===i.type?null:v.child;else if(v.tag===18){if(N=v.return,N===null)throw Error(t(341));N.lanes|=u,O=N.alternate,O!==null&&(O.lanes|=u),bf(N,u,i),N=v.sibling}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===i){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}$n(s,i,g.children,u),i=i.child}return i;case 9:return g=i.type,m=i.pendingProps.children,ci(i,u),g=wr(g),m=m(g),i.flags|=1,$n(s,i,m,u),i.child;case 14:return m=i.type,g=Rr(m,i.pendingProps),g=Rr(m.type,g),Dy(s,i,m,g,u);case 15:return Py(s,i,i.type,i.pendingProps,u);case 17:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Rr(m,g),bc(s,i),i.tag=1,Qn(m)?(s=!0,sc(i)):s=!1,ci(i,u),Sy(i,m,g),Bf(i,m,g,u),$f(null,i,m,!0,s,u);case 19:return Uy(s,i,u);case 22:return jy(s,i,u)}throw Error(t(156,i.tag))};function dv(s,i){return ie(s,i)}function AA(s,i,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(s,i,u,m){return new AA(s,i,u,m)}function l0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function _A(s){if(typeof s=="function")return l0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===$)return 11;if(s===oe)return 14}return 2}function Gs(s,i){var u=s.alternate;return u===null?(u=Er(s.tag,i,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=i,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,i=s.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Pc(s,i,u,m,g,v){var N=2;if(m=s,typeof s=="function")l0(s)&&(N=1);else if(typeof s=="string")N=5;else e:switch(s){case j:return Eo(u.children,g,v,i);case M:N=8,g|=8;break;case U:return s=Er(12,u,i,g|2),s.elementType=U,s.lanes=v,s;case z:return s=Er(13,u,i,g),s.elementType=z,s.lanes=v,s;case ne:return s=Er(19,u,i,g),s.elementType=ne,s.lanes=v,s;case K:return jc(u,g,v,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:N=10;break e;case L:N=9;break e;case $:N=11;break e;case oe:N=14;break e;case he:N=16,m=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=Er(N,u,i,g),i.elementType=s,i.type=m,i.lanes=v,i}function Eo(s,i,u,m){return s=Er(7,s,m,i),s.lanes=u,s}function jc(s,i,u,m){return s=Er(22,s,m,i),s.elementType=K,s.lanes=u,s.stateNode={isHidden:!1},s}function c0(s,i,u){return s=Er(6,s,null,i),s.lanes=u,s}function u0(s,i,u){return i=Er(4,s.children!==null?s.children:[],s.key,i),i.lanes=u,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function NA(s,i,u,m,g){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oh(0),this.expirationTimes=Oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.identifierPrefix=m,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function d0(s,i,u,m,g,v,N,O,H){return s=new NA(s,i,u,O,H),i===1?(i=1,v===!0&&(i|=8)):i=0,v=Er(3,null,null,i),s.current=v,v.stateNode=s,v.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sf(v),s}function IA(s,i,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:m==null?null:""+m,children:s,containerInfo:i,implementation:u}}function hv(s){if(!s)return Ls;s=s._reactInternals;e:{if(xr(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Qn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Qn(u))return Hx(s,u,i)}return i}function fv(s,i,u,m,g,v,N,O,H){return s=d0(u,m,!0,s,g,v,N,O,H),s.context=hv(null),u=s.current,m=zn(),g=qs(u),v=ms(m,g),v.callback=i??null,$s(u,v,g),s.current.lanes=g,ta(s,g,m),Zn(s,m),s}function Mc(s,i,u,m){var g=i.current,v=zn(),N=qs(g);return u=hv(u),i.context===null?i.context=u:i.pendingContext=u,i=ms(v,N),i.payload={element:s},m=m===void 0?null:m,m!==null&&(i.callback=m),s=$s(g,i,N),s!==null&&(jr(s,g,N,v),hc(s,g,N)),N}function Oc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function pv(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<i?u:i}}function h0(s,i){pv(s,i),(s=s.alternate)&&pv(s,i)}var mv=typeof reportError=="function"?reportError:function(s){console.error(s)};function f0(s){this._internalRoot=s}Fc.prototype.render=f0.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));Mc(s,i,null,null)},Fc.prototype.unmount=f0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;wo(function(){Mc(null,s,null,null)}),i[us]=null}};function Fc(s){this._internalRoot=s}Fc.prototype.unstable_scheduleHydration=function(s){if(s){var i=Xg();s={blockedOn:null,target:s,priority:i};for(var u=0;u<js.length&&i!==0&&i<js[u].priority;u++);js.splice(u,0,s),u===0&&tx(s)}};function p0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Bc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function gv(){}function RA(s,i,u,m,g){if(g){if(typeof m=="function"){var v=m;m=function(){var te=Oc(N);v.call(te)}}var N=fv(i,m,s,0,null,!1,!1,"",gv);return s._reactRootContainer=N,s[us]=N.current,ma(s.nodeType===8?s.parentNode:s),wo(),N}for(;g=s.lastChild;)s.removeChild(g);if(typeof m=="function"){var O=m;m=function(){var te=Oc(H);O.call(te)}}var H=d0(s,0,!1,null,null,!1,!1,"",gv);return s._reactRootContainer=H,s[us]=H.current,ma(s.nodeType===8?s.parentNode:s),wo(function(){Mc(i,H,u,m)}),H}function Lc(s,i,u,m,g){var v=u._reactRootContainer;if(v){var N=v;if(typeof g=="function"){var O=g;g=function(){var H=Oc(N);O.call(H)}}Mc(i,N,s,g)}else N=RA(u,i,s,g,m);return Oc(N)}Qg=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var u=ea(i.pendingLanes);u!==0&&(Fh(i,u|1),Zn(i,Ne()),!(dt&6)&&(pi=Ne()+500,Hs()))}break;case 13:wo(function(){var m=ps(s,1);if(m!==null){var g=zn();jr(m,s,1,g)}}),h0(s,1)}},Bh=function(s){if(s.tag===13){var i=ps(s,134217728);if(i!==null){var u=zn();jr(i,s,134217728,u)}h0(s,134217728)}},Jg=function(s){if(s.tag===13){var i=qs(s),u=ps(s,i);if(u!==null){var m=zn();jr(u,s,i,m)}h0(s,i)}},Xg=function(){return gt},Zg=function(s,i){var u=gt;try{return gt=s,i()}finally{gt=u}},lt=function(s,i,u){switch(i){case"input":if(mt(s,u),i=u.name,u.type==="radio"&&i!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<u.length;i++){var m=u[i];if(m!==s&&m.form===s.form){var g=nc(m);if(!g)throw Error(t(90));Le(m),mt(m,g)}}}break;case"textarea":_n(s,u);break;case"select":i=u.value,i!=null&&At(s,!!u.multiple,i,!1)}},Kt=o0,Cn=wo;var DA={usingClientEntryPoint:!1,Events:[ya,ti,nc,_t,fn,o0]},Da={findFiberByHostInstance:ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PA={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ph(s),s===null?null:s.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Un=Hc.inject(PA),Zt=Hc}catch{}}return er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DA,er.createPortal=function(s,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p0(i))throw Error(t(200));return IA(s,i,null,u)},er.createRoot=function(s,i){if(!p0(s))throw Error(t(299));var u=!1,m="",g=mv;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=d0(s,1,!1,null,null,u,!1,m,g),s[us]=i.current,ma(s.nodeType===8?s.parentNode:s),new f0(i)},er.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Ph(i),s=s===null?null:s.stateNode,s},er.flushSync=function(s){return wo(s)},er.hydrate=function(s,i,u){if(!Bc(i))throw Error(t(200));return Lc(null,s,i,!0,u)},er.hydrateRoot=function(s,i,u){if(!p0(s))throw Error(t(405));var m=u!=null&&u.hydratedSources||null,g=!1,v="",N=mv;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(N=u.onRecoverableError)),i=fv(i,null,s,1,u??null,g,!1,v,N),s[us]=i.current,ma(s),m)for(s=0;s<m.length;s++)u=m[s],g=u._getVersion,g=g(u._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[u,g]:i.mutableSourceEagerHydrationData.push(u,g);return new Fc(i)},er.render=function(s,i,u){if(!Bc(i))throw Error(t(200));return Lc(null,s,i,!1,u)},er.unmountComponentAtNode=function(s){if(!Bc(s))throw Error(t(40));return s._reactRootContainer?(wo(function(){Lc(null,null,s,!1,function(){s._reactRootContainer=null,s[us]=null})}),!0):!1},er.unstable_batchedUpdates=o0,er.unstable_renderSubtreeIntoContainer=function(s,i,u,m){if(!Bc(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Lc(s,i,u,!1,m)},er.version="18.3.1-next-f1338f8080-20240426",er}var Sv;function zA(){if(Sv)return y0.exports;Sv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),y0.exports=$A(),y0.exports}var kv;function VA(){if(kv)return Uc;kv=1;var n=zA();return Uc.createRoot=n.createRoot,Uc.hydrateRoot=n.hydrateRoot,Uc}var KA=VA(),ja={},Tv;function qA(){if(Tv)return ja;Tv=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.parse=l,ja.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,C){const w=new a,E=x.length;if(E<2)return w;const S=(C==null?void 0:C.decode)||p;let A=0;do{const b=x.indexOf("=",A);if(b===-1)break;const k=x.indexOf(";",A),I=k===-1?E:k;if(b>I){A=x.lastIndexOf(";",b-1)+1;continue}const R=d(x,A,b),D=h(x,b,R),j=x.slice(R,D);if(w[j]===void 0){let M=d(x,b+1,I),U=h(x,I,M);const P=S(x.slice(M,U));w[j]=P}A=I+1}while(A<E);return w}function d(x,C,w){do{const E=x.charCodeAt(C);if(E!==32&&E!==9)return C}while(++C<w);return w}function h(x,C,w){for(;C>w;){const E=x.charCodeAt(--C);if(E!==32&&E!==9)return C+1}return w}function f(x,C,w){const E=(w==null?void 0:w.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const S=E(C);if(!e.test(S))throw new TypeError(`argument val is invalid: ${C}`);let A=x+"="+S;if(!w)return A;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);A+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);A+="; Domain="+w.domain}if(w.path){if(!r.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);A+="; Path="+w.path}if(w.expires){if(!y(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);A+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(A+="; HttpOnly"),w.secure&&(A+="; Secure"),w.partitioned&&(A+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return A}function p(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function y(x){return o.call(x)==="[object Date]"}return ja}qA();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Av="popstate";function WA(n={}){function e(r,o){let{pathname:a,search:l,hash:d}=r.location;return J0("",{pathname:a,search:l,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:el(o)}return YA(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ur(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GA(){return Math.random().toString(36).substring(2,10)}function _v(n,e){return{usr:n.state,key:n.key,idx:e}}function J0(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Li(e):e,state:t,key:e&&e.key||r||GA()}}function el({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Li(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function YA(n,e,t,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,l=o.history,d="POP",h=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function y(){d="POP";let S=p(),A=S==null?null:S-f;f=S,h&&h({action:d,location:E.location,delta:A})}function x(S,A){d="PUSH";let b=J0(E.location,S,A);f=p()+1;let k=_v(b,f),I=E.createHref(b);try{l.pushState(k,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;o.location.assign(I)}a&&h&&h({action:d,location:E.location,delta:1})}function C(S,A){d="REPLACE";let b=J0(E.location,S,A);f=p();let k=_v(b,f),I=E.createHref(b);l.replaceState(k,"",I),a&&h&&h({action:d,location:E.location,delta:0})}function w(S){let A=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof S=="string"?S:el(S);return b=b.replace(/ $/,"%20"),Ot(A,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,A)}let E={get action(){return d},get location(){return n(o,l)},listen(S){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Av,y),h=S,()=>{o.removeEventListener(Av,y),h=null}},createHref(S){return e(o,S)},createURL:w,encodeLocation(S){let A=w(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:C,go(S){return l.go(S)}};return E}function PC(n,e,t="/"){return QA(n,e,t,!1)}function QA(n,e,t,r){let o=typeof e=="string"?Li(e):e,a=so(o.pathname||"/",t);if(a==null)return null;let l=jC(n);JA(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let f=l_(a);d=i_(l[h],f,r)}return d}function jC(n,e=[],t=[],r=""){let o=(a,l,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(Ot(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let f=Es([r,h.relativePath]),p=t.concat(h);a.children&&a.children.length>0&&(Ot(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),jC(a.children,e,p,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:s_(f,a.index),routesMeta:p})};return n.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,l);else for(let h of MC(a.path))o(a,l,h)}),e}function MC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let l=MC(r.join("/")),d=[];return d.push(...l.map(h=>h===""?a:[a,h].join("/"))),o&&d.push(...l),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function JA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:o_(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var XA=/^:[\w-]+$/,ZA=3,e_=2,t_=1,n_=10,r_=-2,Nv=n=>n==="*";function s_(n,e){let t=n.split("/"),r=t.length;return t.some(Nv)&&(r+=r_),e&&(r+=e_),t.filter(o=>!Nv(o)).reduce((o,a)=>o+(XA.test(a)?ZA:a===""?t_:n_),r)}function o_(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function i_(n,e,t=!1){let{routesMeta:r}=n,o={},a="/",l=[];for(let d=0;d<r.length;++d){let h=r[d],f=d===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",y=nd({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),x=h.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=nd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(o,y.params),l.push({params:o,pathname:Es([a,y.pathname]),pathnameBase:h_(Es([a,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(a=Es([a,y.pathnameBase]))}return l}function nd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=a_(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],l=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:y},x)=>{if(p==="*"){let w=d[x]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const C=d[x];return y&&!C?f[p]=void 0:f[p]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function a_(n,e=!1,t=!0){Ur(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function l_(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ur(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function so(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function c_(n,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Li(n):n;return{pathname:t?t.startsWith("/")?t:u_(t,e):e,search:f_(r),hash:p_(o)}}function u_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function C0(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function d_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Qp(n){let e=d_(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Jp(n,e,t,r=!1){let o;typeof n=="string"?o=Li(n):(o={...n},Ot(!o.pathname||!o.pathname.includes("?"),C0("?","pathname","search",o)),Ot(!o.pathname||!o.pathname.includes("#"),C0("#","pathname","hash",o)),Ot(!o.search||!o.search.includes("#"),C0("#","search","hash",o)));let a=n===""||o.pathname==="",l=a?"/":o.pathname,d;if(l==null)d=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),y-=1;o.pathname=x.join("/")}d=y>=0?e[y]:"/"}let h=c_(o,d),f=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var Es=n=>n.join("/").replace(/\/\/+/g,"/"),h_=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),f_=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,p_=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function m_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var OC=["POST","PUT","PATCH","DELETE"];new Set(OC);var g_=["GET",...OC];new Set(g_);var Hi=T.createContext(null);Hi.displayName="DataRouter";var Xd=T.createContext(null);Xd.displayName="DataRouterState";var FC=T.createContext({isTransitioning:!1});FC.displayName="ViewTransition";var x_=T.createContext(new Map);x_.displayName="Fetchers";var y_=T.createContext(null);y_.displayName="Await";var Kr=T.createContext(null);Kr.displayName="Navigation";var bl=T.createContext(null);bl.displayName="Location";var qr=T.createContext({outlet:null,matches:[],isDataRoute:!1});qr.displayName="Route";var Xp=T.createContext(null);Xp.displayName="RouteError";function v_(n,{relative:e}={}){Ot(Ui(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=T.useContext(Kr),{hash:o,pathname:a,search:l}=El(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:Es([t,a])),r.createHref({pathname:d,search:l,hash:o})}function Ui(){return T.useContext(bl)!=null}function cs(){return Ot(Ui(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(bl).location}var BC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LC(n){T.useContext(Kr).static||T.useLayoutEffect(n)}function lo(){let{isDataRoute:n}=T.useContext(qr);return n?j_():w_()}function w_(){Ot(Ui(),"useNavigate() may be used only in the context of a <Router> component.");let n=T.useContext(Hi),{basename:e,navigator:t}=T.useContext(Kr),{matches:r}=T.useContext(qr),{pathname:o}=cs(),a=JSON.stringify(Qp(r)),l=T.useRef(!1);return LC(()=>{l.current=!0}),T.useCallback((h,f={})=>{if(Ur(l.current,BC),!l.current)return;if(typeof h=="number"){t.go(h);return}let p=Jp(h,JSON.parse(a),o,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Es([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,a,o,n])}var C_=T.createContext(null);function b_(n){let e=T.useContext(qr).outlet;return e&&T.createElement(C_.Provider,{value:n},e)}function El(n,{relative:e}={}){let{matches:t}=T.useContext(qr),{pathname:r}=cs(),o=JSON.stringify(Qp(t));return T.useMemo(()=>Jp(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function E_(n,e){return HC(n,e)}function HC(n,e,t,r){var A;Ot(Ui(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=T.useContext(Kr),{matches:a}=T.useContext(qr),l=a[a.length-1],d=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let b=p&&p.path||"";UC(h,!p||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let y=cs(),x;if(e){let b=typeof e=="string"?Li(e):e;Ot(f==="/"||((A=b.pathname)==null?void 0:A.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${b.pathname}" was given in the \`location\` prop.`),x=b}else x=y;let C=x.pathname||"/",w=C;if(f!=="/"){let b=f.replace(/^\//,"").split("/");w="/"+C.replace(/^\//,"").split("/").slice(b.length).join("/")}let E=PC(n,{pathname:w});Ur(p||E!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ur(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=__(E&&E.map(b=>Object.assign({},b,{params:Object.assign({},d,b.params),pathname:Es([f,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?f:Es([f,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,t,r);return e&&S?T.createElement(bl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},S):S}function S_(){let n=P_(),e=m_(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),t?T.createElement("pre",{style:o},t):null,l)}var k_=T.createElement(S_,null),T_=class extends T.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?T.createElement(qr.Provider,{value:this.props.routeContext},T.createElement(Xp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function A_({routeContext:n,match:e,children:t}){let r=T.useContext(Hi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(qr.Provider,{value:n},t)}function __(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t==null?void 0:t.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Ot(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,d=-1;if(t)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:y}=t,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){l=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let y,x=!1,C=null,w=null;t&&(y=a&&f.route.id?a[f.route.id]:void 0,C=f.route.errorElement||k_,l&&(d<0&&p===0?(UC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,w=null):d===p&&(x=!0,w=f.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,p+1)),S=()=>{let A;return y?A=C:x?A=w:f.route.Component?A=T.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=h,T.createElement(A_,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:A})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?T.createElement(T_,{location:t.location,revalidation:t.revalidation,component:C,error:y,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function Zp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N_(n){let e=T.useContext(Hi);return Ot(e,Zp(n)),e}function I_(n){let e=T.useContext(Xd);return Ot(e,Zp(n)),e}function R_(n){let e=T.useContext(qr);return Ot(e,Zp(n)),e}function em(n){let e=R_(n),t=e.matches[e.matches.length-1];return Ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function D_(){return em("useRouteId")}function P_(){var r;let n=T.useContext(Xp),e=I_("useRouteError"),t=em("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function j_(){let{router:n}=N_("useNavigate"),e=em("useNavigate"),t=T.useRef(!1);return LC(()=>{t.current=!0}),T.useCallback(async(o,a={})=>{Ur(t.current,BC),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var Iv={};function UC(n,e,t){!e&&!Iv[n]&&(Iv[n]=!0,Ur(!1,t))}T.memo(M_);function M_({routes:n,future:e,state:t}){return HC(n,void 0,t,e)}function Rv({to:n,replace:e,state:t,relative:r}){Ot(Ui(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=T.useContext(Kr);Ur(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(qr),{pathname:l}=cs(),d=lo(),h=Jp(n,Qp(a),l,r==="path"),f=JSON.stringify(h);return T.useEffect(()=>{d(JSON.parse(f),{replace:e,state:t,relative:r})},[d,f,r,e,t]),null}function O_(n){return b_(n.context)}function dr(n){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function F_({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:a=!1}){Ot(!Ui(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:l,navigator:o,static:a,future:{}}),[l,o,a]);typeof t=="string"&&(t=Li(t));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:x="default"}=t,C=T.useMemo(()=>{let w=so(h,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:y,key:x},navigationType:r}},[l,h,f,p,y,x,r]);return Ur(C!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:T.createElement(Kr.Provider,{value:d},T.createElement(bl.Provider,{children:e,value:C}))}function B_({children:n,location:e}){return E_(X0(n),e)}function X0(n,e=[]){let t=[];return T.Children.forEach(n,(r,o)=>{if(!T.isValidElement(r))return;let a=[...e,o];if(r.type===T.Fragment){t.push.apply(t,X0(r.props.children,a));return}Ot(r.type===dr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=X0(r.props.children,a)),t.push(l)}),t}var lu="get",cu="application/x-www-form-urlencoded";function Zd(n){return n!=null&&typeof n.tagName=="string"}function L_(n){return Zd(n)&&n.tagName.toLowerCase()==="button"}function H_(n){return Zd(n)&&n.tagName.toLowerCase()==="form"}function U_(n){return Zd(n)&&n.tagName.toLowerCase()==="input"}function $_(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function z_(n,e){return n.button===0&&(!e||e==="_self")&&!$_(n)}var $c=null;function V_(){if($c===null)try{new FormData(document.createElement("form"),0),$c=!1}catch{$c=!0}return $c}var K_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b0(n){return n!=null&&!K_.has(n)?(Ur(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cu}"`),null):n}function q_(n,e){let t,r,o,a,l;if(H_(n)){let d=n.getAttribute("action");r=d?so(d,e):null,t=n.getAttribute("method")||lu,o=b0(n.getAttribute("enctype"))||cu,a=new FormData(n)}else if(L_(n)||U_(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(r=h?so(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||lu,o=b0(n.getAttribute("formenctype"))||b0(d.getAttribute("enctype"))||cu,a=new FormData(d,n),!V_()){let{name:f,type:p,value:y}=n;if(p==="image"){let x=f?`${f}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else f&&a.append(f,y)}}else{if(Zd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=lu,r=null,o=cu,l=n}return a&&o==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:a,body:l}}function tm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function W_(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function G_(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Y_(n,e,t){let r=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let l=await W_(a,t);return l.links?l.links():[]}return[]}));return Z_(r.flat(1).filter(G_).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Dv(n,e,t,r,o,a){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,d=(h,f)=>{var p;return t[f].pathname!==h.pathname||((p=t[f].route.path)==null?void 0:p.endsWith("*"))&&t[f].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,f)=>l(h,f)||d(h,f)):a==="data"?e.filter((h,f)=>{var y;let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let x=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function Q_(n,e){return J_(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function J_(n){return[...new Set(n)]}function X_(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Z_(n,e){let t=new Set;return new Set(e),n.reduce((r,o)=>{let a=JSON.stringify(X_(o));return t.has(a)||(t.add(a),r.push({key:a,link:o})),r},[])}function e2(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function t2(){let n=T.useContext(Hi);return tm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function n2(){let n=T.useContext(Xd);return tm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var nm=T.createContext(void 0);nm.displayName="FrameworkContext";function $C(){let n=T.useContext(nm);return tm(n,"You must render this element inside a <HydratedRouter> element"),n}function r2(n,e){let t=T.useContext(nm),[r,o]=T.useState(!1),[a,l]=T.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=e,x=T.useRef(null);T.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let E=A=>{A.forEach(b=>{l(b.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[n]),T.useEffect(()=>{if(r){let E=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(E)}}},[r]);let C=()=>{o(!0)},w=()=>{o(!1),l(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:Ma(d,C),onBlur:Ma(h,w),onMouseEnter:Ma(f,C),onMouseLeave:Ma(p,w),onTouchStart:Ma(y,C)}]:[!1,x,{}]}function Ma(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function s2({page:n,...e}){let{router:t}=t2(),r=T.useMemo(()=>PC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?T.createElement(i2,{page:n,matches:r,...e}):null}function o2(n){let{manifest:e,routeModules:t}=$C(),[r,o]=T.useState([]);return T.useEffect(()=>{let a=!1;return Y_(n,e,t).then(l=>{a||o(l)}),()=>{a=!0}},[n,e,t]),r}function i2({page:n,matches:e,...t}){let r=cs(),{manifest:o,routeModules:a}=$C(),{loaderData:l,matches:d}=n2(),h=T.useMemo(()=>Dv(n,e,d,o,r,"data"),[n,e,d,o,r]),f=T.useMemo(()=>Dv(n,e,d,o,r,"assets"),[n,e,d,o,r]),p=T.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,w=!1;if(e.forEach(S=>{var b;let A=o.routes[S.route.id];!A||!A.hasLoader||(!h.some(k=>k.route.id===S.route.id)&&S.route.id in l&&((b=a[S.route.id])!=null&&b.shouldRevalidate)||A.hasClientLoader?w=!0:C.add(S.route.id))}),C.size===0)return[];let E=e2(n);return w&&C.size>0&&E.searchParams.set("_routes",e.filter(S=>C.has(S.route.id)).map(S=>S.route.id).join(",")),[E.pathname+E.search]},[l,r,o,h,e,n,a]),y=T.useMemo(()=>Q_(f,o),[f,o]),x=o2(f);return T.createElement(T.Fragment,null,p.map(C=>T.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),y.map(C=>T.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),x.map(({key:C,link:w})=>T.createElement("link",{key:C,...w})))}function a2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zC&&(window.__reactRouterVersion="7.1.1")}catch{}function l2({basename:n,children:e,window:t}){let r=T.useRef();r.current==null&&(r.current=WA({window:t,v5Compat:!0}));let o=r.current,[a,l]=T.useState({action:o.action,location:o.location}),d=T.useCallback(h=>{T.startTransition(()=>l(h))},[l]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.createElement(F_,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:o})}var VC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rm=T.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:a,replace:l,state:d,target:h,to:f,preventScrollReset:p,viewTransition:y,...x},C){let{basename:w}=T.useContext(Kr),E=typeof f=="string"&&VC.test(f),S,A=!1;if(typeof f=="string"&&E&&(S=f,zC))try{let U=new URL(window.location.href),P=f.startsWith("//")?new URL(U.protocol+f):new URL(f),L=so(P.pathname,w);P.origin===U.origin&&L!=null?f=L+P.search+P.hash:A=!0}catch{Ur(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=v_(f,{relative:o}),[k,I,R]=r2(r,x),D=h2(f,{replace:l,state:d,target:h,preventScrollReset:p,relative:o,viewTransition:y});function j(U){e&&e(U),U.defaultPrevented||D(U)}let M=T.createElement("a",{...x,...R,href:S||b,onClick:A||a?e:j,ref:a2(C,I),target:h,"data-discover":!E&&t==="render"?"true":void 0});return k&&!E?T.createElement(T.Fragment,null,M,T.createElement(s2,{page:b})):M});rm.displayName="Link";var c2=T.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:a,to:l,viewTransition:d,children:h,...f},p){let y=El(l,{relative:f.relative}),x=cs(),C=T.useContext(Xd),{navigator:w,basename:E}=T.useContext(Kr),S=C!=null&&x2(y)&&d===!0,A=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,b=x.pathname,k=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(b=b.toLowerCase(),k=k?k.toLowerCase():null,A=A.toLowerCase()),k&&E&&(k=so(k,E)||k);const I=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let R=b===A||!o&&b.startsWith(A)&&b.charAt(I)==="/",D=k!=null&&(k===A||!o&&k.startsWith(A)&&k.charAt(A.length)==="/"),j={isActive:R,isPending:D,isTransitioning:S},M=R?e:void 0,U;typeof r=="function"?U=r(j):U=[r,R?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(j):a;return T.createElement(rm,{...f,"aria-current":M,className:U,ref:p,style:P,to:l,viewTransition:d},typeof h=="function"?h(j):h)});c2.displayName="NavLink";var u2=T.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:a,method:l=lu,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:y,...x},C)=>{let w=m2(),E=g2(d,{relative:f}),S=l.toLowerCase()==="get"?"get":"post",A=typeof d=="string"&&VC.test(d),b=k=>{if(h&&h(k),k.defaultPrevented)return;k.preventDefault();let I=k.nativeEvent.submitter,R=(I==null?void 0:I.getAttribute("formmethod"))||l;w(I||k.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:o,state:a,relative:f,preventScrollReset:p,viewTransition:y})};return T.createElement("form",{ref:C,method:S,action:E,onSubmit:r?h:b,...x,"data-discover":!A&&n==="render"?"true":void 0})});u2.displayName="Form";function d2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KC(n){let e=T.useContext(Hi);return Ot(e,d2(n)),e}function h2(n,{target:e,replace:t,state:r,preventScrollReset:o,relative:a,viewTransition:l}={}){let d=lo(),h=cs(),f=El(n,{relative:a});return T.useCallback(p=>{if(z_(p,e)){p.preventDefault();let y=t!==void 0?t:el(h)===el(f);d(n,{replace:y,state:r,preventScrollReset:o,relative:a,viewTransition:l})}},[h,d,f,t,r,e,n,o,a,l])}var f2=0,p2=()=>`__${String(++f2)}__`;function m2(){let{router:n}=KC("useSubmit"),{basename:e}=T.useContext(Kr),t=D_();return T.useCallback(async(r,o={})=>{let{action:a,method:l,encType:d,formData:h,body:f}=q_(r,e);if(o.navigate===!1){let p=o.fetcherKey||p2();await n.fetch(p,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||l,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||l,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function g2(n,{relative:e}={}){let{basename:t}=T.useContext(Kr),r=T.useContext(qr);Ot(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...El(n||".",{relative:e})},l=cs();if(n==null){a.search=l.search;let d=new URLSearchParams(a.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(y=>y).forEach(y=>d.append("index",y));let p=d.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Es([t,a.pathname])),el(a)}function x2(n,e={}){let t=T.useContext(FC);Ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=KC("useViewTransitionState"),o=El(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=so(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=so(t.nextLocation.pathname,r)||t.nextLocation.pathname;return nd(o.pathname,l)!=null||nd(o.pathname,a)!=null}new TextEncoder;/*! @azure/msal-common v15.6.0 2025-05-06 */const le={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},zc={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Sl=[le.OPENID_SCOPE,le.PROFILE_SCOPE,le.OFFLINE_ACCESS_SCOPE],Pv=[...Sl,le.EMAIL_SCOPE],Kn={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},jv={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},to={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Vc={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Tn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Mv={PLAIN:"plain",S256:"S256"},qC={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},eh={QUERY:"query",FRAGMENT:"fragment"},y2={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},WC={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Kc={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},jn={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},tt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},sm="appmetadata",v2="client_info",za="1",rd={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},hr={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Sn={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},wt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Va={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Ov={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},qc={httpSuccess:200,httpBadRequest:400},gi={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},E0={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ko={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},w2={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},C2=300;/*! @azure/msal-common v15.6.0 2025-05-06 */const om="unexpected_error",b2="post_request_failed";/*! @azure/msal-common v15.6.0 2025-05-06 */const Fv={[om]:"Unexpected error in authentication.",[b2]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Tt extends Error{constructor(e,t,r){const o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,Tt.prototype),this.errorCode=e||le.EMPTY_STRING,this.errorMessage=t||le.EMPTY_STRING,this.subError=r||le.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function GC(n,e){return new Tt(n,e?`${Fv[n]} ${e}`:Fv[n])}/*! @azure/msal-common v15.6.0 2025-05-06 */const im="client_info_decoding_error",YC="client_info_empty_error",am="token_parsing_error",QC="null_or_empty_token",ws="endpoints_resolution_error",JC="network_error",XC="openid_config_error",ZC="hash_not_deserialized",Ni="invalid_state",eb="state_mismatch",Z0="state_not_found",tb="nonce_mismatch",lm="auth_time_not_found",nb="max_age_transpired",E2="multiple_matching_tokens",S2="multiple_matching_accounts",rb="multiple_matching_appMetadata",sb="request_cannot_be_made",ob="cannot_remove_empty_scope",ib="cannot_append_scopeset",ep="empty_input_scopeset",k2="device_code_polling_cancelled",T2="device_code_expired",A2="device_code_unknown_error",cm="no_account_in_silent_request",ab="invalid_cache_record",um="invalid_cache_environment",tp="no_account_found",np="no_crypto_object",rp="unexpected_credential_type",_2="invalid_assertion",N2="invalid_client_credential",no="token_refresh_required",I2="user_timeout_reached",lb="token_claims_cnf_required_for_signedjwt",cb="authorization_code_missing_from_server_response",ub="binding_key_not_removed",db="end_session_endpoint_not_supported",dm="key_id_missing",R2="no_network_connectivity",D2="user_canceled",P2="missing_tenant_id_error",ot="method_not_implemented",j2="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.6.0 2025-05-06 */const Bv={[im]:"The client info could not be parsed/decoded correctly",[YC]:"The client info was empty",[am]:"Token cannot be parsed",[QC]:"The token is null or empty",[ws]:"Endpoints cannot be resolved",[JC]:"Network request failed",[XC]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ZC]:"The hash parameters could not be deserialized",[Ni]:"State was not the expected format",[eb]:"State mismatch error",[Z0]:"State not found",[tb]:"Nonce mismatch error",[lm]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[nb]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[E2]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[S2]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[rb]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[sb]:"Token request cannot be made without authorization code or refresh token.",[ob]:"Cannot remove null or empty scope from ScopeSet",[ib]:"Cannot append ScopeSet",[ep]:"Empty input ScopeSet cannot be processed",[k2]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[T2]:"Device code is expired.",[A2]:"Device code stopped polling for unknown reasons.",[cm]:"Please pass an account object, silent flow is not supported without account information",[ab]:"Cache record object was null or undefined.",[um]:"Invalid environment when attempting to create cache entry",[tp]:"No account found in cache for given key.",[np]:"No crypto object detected.",[rp]:"Unexpected credential type.",[_2]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[N2]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[no]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[I2]:"User defined timeout for device code polling reached",[lb]:"Cannot generate a POP jwt if the token_claims are not populated",[cb]:"Server response does not contain an authorization code to proceed",[ub]:"Could not remove the credential's binding key from storage.",[db]:"The provided authority does not support logout",[dm]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[R2]:"No network connectivity. Check your internet connection.",[D2]:"User cancelled the flow.",[P2]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ot]:"This method has not been implemented",[j2]:"The nested app auth bridge is disabled"};class hm extends Tt{constructor(e,t){super(e,t?`${Bv[e]}: ${t}`:Bv[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,hm.prototype)}}function ve(n,e){return new hm(n,e)}/*! @azure/msal-common v15.6.0 2025-05-06 */const sd={createNewGuid:()=>{throw ve(ot)},base64Decode:()=>{throw ve(ot)},base64Encode:()=>{throw ve(ot)},base64UrlEncode:()=>{throw ve(ot)},encodeKid:()=>{throw ve(ot)},async getPublicKeyThumbprint(){throw ve(ot)},async removeTokenBindingKey(){throw ve(ot)},async clearKeystore(){throw ve(ot)},async signJwt(){throw ve(ot)},async hashString(){throw ve(ot)}};/*! @azure/msal-common v15.6.0 2025-05-06 */var Mt;(function(n){n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace"})(Mt||(Mt={}));class Ts{constructor(e,t,r){this.level=Mt.Info;const o=()=>{},a=e||Ts.createDefaultLoggerOptions();this.localCallback=a.loggerCallback||o,this.piiLoggingEnabled=a.piiLoggingEnabled||!1,this.level=typeof a.logLevel=="number"?a.logLevel:Mt.Info,this.correlationId=a.correlationId||le.EMPTY_STRING,this.packageName=t||le.EMPTY_STRING,this.packageVersion=r||le.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Mt.Info}}clone(e,t,r){return new Ts({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const a=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Mt[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,a,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Mt.Error,containsPii:!1,correlationId:t||le.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Mt.Error,containsPii:!0,correlationId:t||le.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Mt.Warning,containsPii:!1,correlationId:t||le.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Mt.Warning,containsPii:!0,correlationId:t||le.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Mt.Info,containsPii:!1,correlationId:t||le.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Mt.Info,containsPii:!0,correlationId:t||le.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Mt.Verbose,containsPii:!1,correlationId:t||le.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Mt.Verbose,containsPii:!0,correlationId:t||le.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Mt.Trace,containsPii:!1,correlationId:t||le.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Mt.Trace,containsPii:!0,correlationId:t||le.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.6.0 2025-05-06 */const hb="@azure/msal-common",fm="15.6.0";/*! @azure/msal-common v15.6.0 2025-05-06 */const pm={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v15.6.0 2025-05-06 */function $i(n,e){const t=M2(n);try{const r=e(t);return JSON.parse(r)}catch{throw ve(am)}}function M2(n){if(!n)throw ve(QC);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw ve(am);return t[2]}function fb(n,e){if(e===0||Date.now()-3e5>n+e)throw ve(nb)}/*! @azure/msal-common v15.6.0 2025-05-06 */function mr(){return Math.round(new Date().getTime()/1e3)}function Lv(n){return n.getTime()/1e3}function ki(n){return n?new Date(Number(n)*1e3):new Date}function sp(n,e){const t=Number(n)||0;return mr()+e>t}function O2(n){return Number(n)>mr()}/*! @azure/msal-common v15.6.0 2025-05-06 */function Ka(n){return[H2(n),U2(n),$2(n),z2(n),V2(n)].join(jn.CACHE_KEY_SEPARATOR).toLowerCase()}function th(n,e,t,r,o){return{credentialType:tt.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function nh(n,e,t,r,o,a,l,d,h,f,p,y,x,C,w){var S,A;const E={homeAccountId:n,credentialType:tt.ACCESS_TOKEN,secret:t,cachedAt:mr().toString(),expiresOn:l.toString(),extendedExpiresOn:d.toString(),environment:e,clientId:r,realm:o,target:a,tokenType:p||wt.BEARER};if(y&&(E.userAssertionHash=y),f&&(E.refreshOn=f.toString()),C&&(E.requestedClaims=C,E.requestedClaimsHash=w),((S=E.tokenType)==null?void 0:S.toLowerCase())!==wt.BEARER.toLowerCase())switch(E.credentialType=tt.ACCESS_TOKEN_WITH_AUTH_SCHEME,E.tokenType){case wt.POP:const b=$i(t,h);if(!((A=b==null?void 0:b.cnf)!=null&&A.kid))throw ve(lb);E.keyId=b.cnf.kid;break;case wt.SSH:E.keyId=x}return E}function pb(n,e,t,r,o,a,l){const d={credentialType:tt.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return a&&(d.userAssertionHash=a),o&&(d.familyId=o),l&&(d.expiresOn=l.toString()),d}function mm(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function F2(n){return n?mm(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===tt.ACCESS_TOKEN||n.credentialType===tt.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function B2(n){return n?mm(n)&&n.hasOwnProperty("realm")&&n.credentialType===tt.ID_TOKEN:!1}function L2(n){return n?mm(n)&&n.credentialType===tt.REFRESH_TOKEN:!1}function H2(n){return[n.homeAccountId,n.environment].join(jn.CACHE_KEY_SEPARATOR).toLowerCase()}function U2(n){const e=n.credentialType===tt.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(jn.CACHE_KEY_SEPARATOR).toLowerCase()}function $2(n){return(n.target||"").toLowerCase()}function z2(n){return(n.requestedClaimsHash||"").toLowerCase()}function V2(n){return n.tokenType&&n.tokenType.toLowerCase()!==wt.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function K2(n,e){const t=n.indexOf(Sn.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function q2(n,e){let t=!1;n&&(t=n.indexOf(Va.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function W2({environment:n,clientId:e}){return[sm,n,e].join(jn.CACHE_KEY_SEPARATOR).toLowerCase()}function G2(n,e){return e?n.indexOf(sm)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function Y2(n,e){return e?n.indexOf(rd.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Hv(){return mr()+rd.REFRESH_TIME_SECONDS}function Wc(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function S0(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function Uv(n){return n.expiresAt<=mr()}/*! @azure/msal-common v15.6.0 2025-05-06 */const mb="redirect_uri_empty",Q2="claims_request_parsing_error",gb="authority_uri_insecure",La="url_parse_error",xb="empty_url_error",yb="empty_input_scopes_error",vb="invalid_prompt_value",rh="invalid_claims",wb="token_request_empty",Cb="logout_request_empty",bb="invalid_code_challenge_method",sh="pkce_params_missing",gm="invalid_cloud_discovery_metadata",Eb="invalid_authority_metadata",Sb="untrusted_authority",oh="missing_ssh_jwk",kb="missing_ssh_kid",J2="missing_nonce_authentication_header",X2="invalid_authentication_header",Tb="cannot_set_OIDCOptions",Ab="cannot_allow_platform_broker",_b="authority_mismatch";/*! @azure/msal-common v15.6.0 2025-05-06 */const Z2={[mb]:"A redirect URI is required for all calls, and none has been set.",[Q2]:"Could not parse the given claims request object.",[gb]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[La]:"URL could not be parsed into appropriate segments.",[xb]:"URL was empty or null.",[yb]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[vb]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[rh]:"Given claims parameter must be a stringified JSON object.",[wb]:"Token request was empty and not found in cache.",[Cb]:"The logout request was null or undefined.",[bb]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[sh]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[gm]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Eb]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Sb]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[oh]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[kb]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[J2]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[X2]:"Invalid authentication header provided",[Tb]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ab]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[_b]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class xm extends Tt{constructor(e){super(e,Z2[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,xm.prototype)}}function xt(n){return new xm(n)}/*! @azure/msal-common v15.6.0 2025-05-06 */class os{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),o=a=>decodeURIComponent(a.replace(/\+/g," "));return r.forEach(a=>{if(a.trim()){const[l,d]=a.split(/=(.+)/g,2);l&&d&&(t[o(l)]=o(d))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}/*! @azure/msal-common v15.6.0 2025-05-06 */class Jt{constructor(e){const t=e?os.trimArrayEntries([...e]):[],r=t?os.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw xt(yb);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||le.EMPTY_STRING).split(" ");return new Jt(r)}static createSearchScopes(e){const t=new Jt(e);return t.containsOnlyOIDCScopes()?t.removeScope(le.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new Jt(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Pv.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw ve(ib)}}removeScope(e){if(!e)throw ve(ob);this.scopes.delete(e.trim())}removeOIDCScopes(){Pv.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw ve(ep);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw ve(ep);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):le.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.6.0 2025-05-06 */function od(n,e){if(!n)throw ve(YC);try{const t=e(n);return JSON.parse(t)}catch{throw ve(im)}}function Ti(n){if(!n)throw ve(im);const e=n.split(jn.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?le.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.6.0 2025-05-06 */function $v(n,e){return!!n&&!!e&&n===e.split(".")[1]}function ym(n,e,t,r){if(r){const{oid:o,sub:a,tid:l,name:d,tfp:h,acr:f}=r,p=l||h||f||"";return{tenantId:p,localAccountId:o||a||"",name:d,isHomeTenant:$v(p,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:$v(t,n)}}function vm(n,e,t,r){let o=n;if(e){const{isHomeTenant:a,...l}=e;o={...n,...l}}if(t){const{isHomeTenant:a,...l}=ym(n.homeAccountId,n.localAccountId,n.tenantId,t);return o={...o,...l,idTokenClaims:t,idToken:r},o}return o}/*! @azure/msal-common v15.6.0 2025-05-06 */const Or={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.6.0 2025-05-06 */function Nb(n){return n&&(n.tid||n.tfp||n.acr)||null}/*! @azure/msal-common v15.6.0 2025-05-06 */const pr={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.6.0 2025-05-06 */class Wn{generateAccountId(){return[this.homeAccountId,this.environment].join(jn.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return Wn.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(jn.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){var f,p,y,x,C,w;const o=new Wn;t.authorityType===Or.Adfs?o.authorityType=Kc.ADFS_ACCOUNT_TYPE:t.protocolMode===pr.OIDC?o.authorityType=Kc.GENERIC_ACCOUNT_TYPE:o.authorityType=Kc.MSSTS_ACCOUNT_TYPE;let a;e.clientInfo&&r&&(a=od(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const l=e.environment||t&&t.getPreferredCache();if(!l)throw ve(um);o.environment=l,o.realm=(a==null?void 0:a.utid)||Nb(e.idTokenClaims)||"",o.localAccountId=(a==null?void 0:a.uid)||((f=e.idTokenClaims)==null?void 0:f.oid)||((p=e.idTokenClaims)==null?void 0:p.sub)||"";const d=((y=e.idTokenClaims)==null?void 0:y.preferred_username)||((x=e.idTokenClaims)==null?void 0:x.upn),h=(C=e.idTokenClaims)!=null&&C.emails?e.idTokenClaims.emails[0]:null;if(o.username=d||h||"",o.name=((w=e.idTokenClaims)==null?void 0:w.name)||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const E=ym(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[E]}return o}static createFromAccountInfo(e,t,r){var a;const o=new Wn;return o.authorityType=e.authorityType||Kc.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(((a=e.tenantProfiles)==null?void 0:a.values())||[]),o}static generateHomeAccountId(e,t,r,o,a){if(!(t===Or.Adfs||t===Or.Dsts)){if(e)try{const l=od(e,o.base64Decode);if(l.uid&&l.utid)return`${l.uid}.${l.utid}`}catch{}r.warning("No client info in response")}return(a==null?void 0:a.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){const a=e.idTokenClaims||{},l=t.idTokenClaims||{};o=a.iat===l.iat&&a.nonce===l.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}/*! @azure/msal-common v15.6.0 2025-05-06 */function Ib(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function id(n){if(!n||n.indexOf("=")<0)return null;try{const e=Ib(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw ve(ZC)}return null}function tl(n,e=!0,t){const r=new Array;return n.forEach((o,a)=>{!e&&t&&a in t?r.push(`${a}=${o}`):r.push(`${a}=${encodeURIComponent(o)}`)}),r.join("&")}/*! @azure/msal-common v15.6.0 2025-05-06 */class ct{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw xt(xb);e.includes("#")||(this._urlString=ct.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return os.endsWith(t,"?")?t=t.slice(0,-1):os.endsWith(t,"?/")&&(t=t.slice(0,-2)),os.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw xt(La)}if(!e.HostNameAndPort||!e.PathSegments)throw xt(La);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw xt(gb)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return ct.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===to.COMMON||r[0]===to.ORGANIZATIONS)&&(r[0]=e),ct.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw xt(La);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=r.AbsolutePath.split("/");return o=o.filter(a=>a&&a.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw xt(La);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===le.FORWARD_SLASH){const o=new ct(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new ct(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!id(e)}}/*! @azure/msal-common v15.6.0 2025-05-06 */const Rb={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},zv=Rb.endpointMetadata,wm=Rb.instanceDiscoveryMetadata,Db=new Set;wm.metadata.forEach(n=>{n.aliases.forEach(e=>{Db.add(e)})});function eN(n,e){var o;let t;const r=n.canonicalAuthority;if(r){const a=new ct(r).getUrlComponents().HostNameAndPort;t=Vv(a,(o=n.cloudDiscoveryMetadata)==null?void 0:o.metadata,hr.CONFIG,e)||Vv(a,wm.metadata,hr.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function Vv(n,e,t,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){const o=ad(e,n);if(o)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function tN(n){return ad(wm.metadata,n)}function ad(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.6.0 2025-05-06 */const Pb="cache_quota_exceeded",Cm="cache_error_unknown";/*! @azure/msal-common v15.6.0 2025-05-06 */const k0={[Pb]:"Exceeded cache storage capacity.",[Cm]:"Unexpected error occurred when using cache storage."};class Ai extends Error{constructor(e,t){const r=t||(k0[e]?k0[e]:k0[Cm]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Ai.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}/*! @azure/msal-common v15.6.0 2025-05-06 */class op{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(hb,fm),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t==null?void 0:t.tenantId,t))}getTenantedAccountInfoByFilter(e,t,r,o){let a=null,l;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const d=this.getIdToken(e,t,r.tenantId);return d&&(l=$i(d.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(l,o))?null:(a=vm(e,r,l,d==null?void 0:d.secret),a)}getTenantProfilesFromAccountEntity(e,t,r){const o=e.getAccountInfo();let a=o.tenantProfiles||new Map;const l=this.getTokenKeys();if(t){const h=a.get(t);if(h)a=new Map([[t,h]]);else return[]}const d=[];return a.forEach(h=>{const f=this.getTenantedAccountInfoByFilter(o,l,h,r);f&&d.push(f)}),d}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,r){var o,a,l,d;if(!e)throw ve(ab);try{e.account&&await this.setAccount(e.account,t),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(h){throw(o=this.commonLogger)==null||o.error("CacheManager.saveCacheRecord: failed"),h instanceof Error?((a=this.commonLogger)==null||a.errorPii(`CacheManager.saveCacheRecord: ${h.message}`,t),h.name==="QuotaExceededError"||h.name==="NS_ERROR_DOM_QUOTA_REACHED"||h.message.includes("exceeded the quota")?((l=this.commonLogger)==null||l.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new Ai(Pb)):new Ai(h.name,h.message)):((d=this.commonLogger)==null||d.errorPii(`CacheManager.saveCacheRecord: ${h}`,t),new Ai(Cm))}}async saveAccessToken(e,t){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),a=Jt.fromString(e.target),l=[];o.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,r,!1))return;const h=this.getAccessTokenCredential(d);h&&this.credentialMatchesFilter(h,r)&&Jt.fromString(h.target).intersectingScopeSets(a)&&l.push(this.removeAccessToken(d))}),await Promise.all(l),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),r=[];return t.forEach(o=>{var h;if(!this.isAccountKey(o,e.homeAccountId))return;const a=this.getAccount(o,this.commonLogger);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;const l={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},d=(h=a.tenantProfiles)==null?void 0:h.filter(f=>this.tenantProfileMatchesFilter(f,l));d&&d.length===0||r.push(a)}),r}isAccountKey(e,t,r){return!(e.split(jn.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(jn.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(t.indexOf(tt.ID_TOKEN.toLowerCase())===-1&&t.indexOf(tt.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(tt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(tt.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(tt.REFRESH_TOKEN.toLowerCase())>-1){const r=`${tt.REFRESH_TOKEN}${jn.CACHE_KEY_SEPARATOR}${this.clientId}${jn.CACHE_KEY_SEPARATOR}`,o=`${tt.REFRESH_TOKEN}${jn.CACHE_KEY_SEPARATOR}${za}${jn.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===tt.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===wt.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;const a=this.getAppMetadata(o);a&&(e.environment&&!this.matchEnvironment(a,e.environment)||e.clientId&&!this.matchClientId(a,e.clientId)||(r[o]=a))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;const a=this.getAuthorityMetadata(o);a&&a.aliases.indexOf(e)!==-1&&(r=a)}),r}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach(r=>{t.push(this.removeAccount(r))}),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),r=e.generateAccountId(),o=[];t.idToken.forEach(a=>{a.indexOf(r)===0&&this.removeIdToken(a)}),t.accessToken.forEach(a=>{a.indexOf(r)===0&&o.push(this.removeAccessToken(a))}),t.refreshToken.forEach(a=>{a.indexOf(r)===0&&this.removeRefreshToken(a)}),await Promise.all(o)}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===tt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===wt.POP){const o=t.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw ve(ub)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){const t=Wn.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,o,a){this.commonLogger.trace("CacheManager - getIdToken called");const l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:tt.ID_TOKEN,clientId:this.clientId,realm:r},d=this.getIdTokensByFilter(l,t),h=d.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(h>1){let f=d;if(!r){const p=new Map;d.forEach((x,C)=>{x.realm===e.tenantId&&p.set(C,x)});const y=p.size;if(y<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),d.values().next().value;if(y===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),p.values().next().value;f=p}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),f.forEach((p,y)=>{this.removeIdToken(y)}),o&&a&&o.addFields({multiMatchedID:d.size},a),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),d.values().next().value}getIdTokensByFilter(e,t){const r=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;const l=this.getIdTokenCredential(a);l&&this.credentialMatchesFilter(l,e)&&o.set(a,l)}),o}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,o,a,l){this.commonLogger.trace("CacheManager - getAccessToken called");const d=Jt.createSearchScopes(t.scopes),h=t.authenticationScheme||wt.BEARER,f=h.toLowerCase()!==wt.BEARER.toLowerCase()?tt.ACCESS_TOKEN_WITH_AUTH_SCHEME:tt.ACCESS_TOKEN,p={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:f,clientId:this.clientId,realm:o||e.tenantId,target:d,tokenType:h,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},y=r&&r.accessToken||this.getTokenKeys().accessToken,x=[];y.forEach(w=>{if(this.accessTokenKeyMatchesFilter(w,p,!0)){const E=this.getAccessTokenCredential(w);E&&this.credentialMatchesFilter(E,p)&&x.push(E)}});const C=x.length;return C<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):C>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),x.forEach(w=>{this.removeAccessToken(Ka(w))}),a&&l&&a.addFields({multiMatchedAT:x.length},l),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),x[0])}accessTokenKeyMatchesFilter(e,t,r){const o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){const a=t.target.asArray();for(let l=0;l<a.length;l++){if(r&&!o.includes(a[l].toLowerCase()))return!1;if(!r&&o.includes(a[l].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),r=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;const a=this.getAccessTokenCredential(o);a&&this.credentialMatchesFilter(a,e)&&r.push(a)}),r}getRefreshToken(e,t,r,o,a){this.commonLogger.trace("CacheManager - getRefreshToken called");const l=t?za:void 0,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:tt.REFRESH_TOKEN,clientId:this.clientId,familyId:l},h=r&&r.refreshToken||this.getTokenKeys().refreshToken,f=[];h.forEach(y=>{if(this.refreshTokenKeyMatchesFilter(y,d)){const x=this.getRefreshTokenCredential(y);x&&this.credentialMatchesFilter(x,d)&&f.push(x)}});const p=f.length;return p<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(p>1&&o&&a&&o.addFields({multiMatchedRT:p},a),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),f[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(l=>r[l]),a=o.length;if(a<1)return null;if(a>1)throw ve(rb);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===za)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){const r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var r;return t.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,t){return!!(e&&typeof e=="string"&&(t==null?void 0:t.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const o=eN(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==tt.ACCESS_TOKEN&&e.credentialType!==tt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Jt.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(sm)!==-1}isAuthorityMetadata(e){return e.indexOf(rd.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${rd.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class nN extends op{async setAccount(){throw ve(ot)}getAccount(){throw ve(ot)}async setIdTokenCredential(){throw ve(ot)}getIdTokenCredential(){throw ve(ot)}async setAccessTokenCredential(){throw ve(ot)}getAccessTokenCredential(){throw ve(ot)}async setRefreshTokenCredential(){throw ve(ot)}getRefreshTokenCredential(){throw ve(ot)}setAppMetadata(){throw ve(ot)}getAppMetadata(){throw ve(ot)}setServerTelemetry(){throw ve(ot)}getServerTelemetry(){throw ve(ot)}setAuthorityMetadata(){throw ve(ot)}getAuthorityMetadata(){throw ve(ot)}getAuthorityMetadataKeys(){throw ve(ot)}setThrottlingCache(){throw ve(ot)}getThrottlingCache(){throw ve(ot)}removeItem(){throw ve(ot)}getKeys(){throw ve(ot)}getAccountKeys(){throw ve(ot)}getTokenKeys(){throw ve(ot)}}/*! @azure/msal-common v15.6.0 2025-05-06 */const jb={tokenRenewalOffsetSeconds:C2,preventCorsPreflight:!1},rN={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Mt.Info,correlationId:le.EMPTY_STRING},sN={claimsBasedCachingEnabled:!1},oN={async sendGetRequestAsync(){throw ve(ot)},async sendPostRequestAsync(){throw ve(ot)}},iN={sku:le.SKU,version:fm,cpu:le.EMPTY_STRING,os:le.EMPTY_STRING},aN={clientSecret:le.EMPTY_STRING,clientAssertion:void 0},lN={azureCloudInstance:pm.None,tenant:`${le.DEFAULT_COMMON_TENANT}`},cN={application:{appName:"",appVersion:""}};function uN({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:a,cryptoInterface:l,clientCredentials:d,libraryInfo:h,telemetry:f,serverTelemetryManager:p,persistencePlugin:y,serializableCache:x}){const C={...rN,...t};return{authOptions:dN(n),systemOptions:{...jb,...e},loggerOptions:C,cacheOptions:{...sN,...r},storageInterface:o||new nN(n.clientId,sd,new Ts(C)),networkInterface:a||oN,cryptoInterface:l||sd,clientCredentials:d||aN,libraryInfo:{...iN,...h},telemetry:{...cN,...f},serverTelemetryManager:p||null,persistencePlugin:y||null,serializableCache:x||null}}function dN(n){return{clientCapabilities:[],azureCloudOptions:lN,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...n}}function Mb(n){return n.authOptions.authority.options.protocolMode===pr.OIDC}/*! @azure/msal-common v15.6.0 2025-05-06 */const Br={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.6.0 2025-05-06 */const Bo="client_id",Ob="redirect_uri",hN="response_type",fN="response_mode",pN="grant_type",mN="claims",gN="scope",xN="refresh_token",yN="state",vN="nonce",wN="prompt",CN="code",bN="code_challenge",EN="code_challenge_method",SN="code_verifier",kN="client-request-id",TN="x-client-SKU",AN="x-client-VER",_N="x-client-OS",NN="x-client-CPU",IN="x-client-current-telemetry",RN="x-client-last-telemetry",DN="x-ms-lib-capability",PN="x-app-name",jN="x-app-ver",MN="post_logout_redirect_uri",ON="id_token_hint",FN="client_secret",BN="client_assertion",LN="client_assertion_type",Fb="token_type",Bb="req_cnf",Kv="return_spa_code",HN="nativebroker",UN="logout_hint",$N="sid",zN="login_hint",VN="domain_hint",KN="x-client-xtra-sku",ld="brk_client_id",cd="brk_redirect_uri",ip="instance_aware",qN="ear_jwk",WN="ear_jwe_crypto";/*! @azure/msal-common v15.6.0 2025-05-06 */function ih(n,e,t){if(!e)return;const r=n.get(Bo);r&&n.has(ld)&&(t==null||t.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(Ob)},e))}function Lb(n,e){n.set(hN,e)}function GN(n,e){n.set(fN,e||y2.QUERY)}function YN(n){n.set(HN,"1")}function bm(n,e,t=!0,r=Sl){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=t?[...e||[],...r]:e||[],a=new Jt(o);n.set(gN,a.printScopes())}function Em(n,e){n.set(Bo,e)}function Sm(n,e){n.set(Ob,e)}function QN(n,e){n.set(MN,e)}function JN(n,e){n.set(ON,e)}function XN(n,e){n.set(VN,e)}function Gc(n,e){n.set(zN,e)}function ud(n,e){n.set(Kn.CCS_HEADER,`UPN:${e}`)}function qa(n,e){n.set(Kn.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function qv(n,e){n.set($N,e)}function km(n,e,t){const r=oI(e,t);try{JSON.parse(r)}catch{throw xt(rh)}n.set(mN,r)}function Tm(n,e){n.set(kN,e)}function Am(n,e){n.set(TN,e.sku),n.set(AN,e.version),e.os&&n.set(_N,e.os),e.cpu&&n.set(NN,e.cpu)}function _m(n,e){e!=null&&e.appName&&n.set(PN,e.appName),e!=null&&e.appVersion&&n.set(jN,e.appVersion)}function ZN(n,e){n.set(wN,e)}function Hb(n,e){e&&n.set(yN,e)}function eI(n,e){n.set(vN,e)}function tI(n,e,t){if(e&&t)n.set(bN,e),n.set(EN,t);else throw xt(sh)}function nI(n,e){n.set(CN,e)}function rI(n,e){n.set(xN,e)}function sI(n,e){n.set(SN,e)}function Ub(n,e){n.set(FN,e)}function $b(n,e){e&&n.set(BN,e)}function zb(n,e){e&&n.set(LN,e)}function Vb(n,e){n.set(pN,e)}function Nm(n){n.set(v2,"1")}function Kb(n){n.has(ip)||n.set(ip,"true")}function Do(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function oI(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw xt(rh)}return e&&e.length>0&&(t.hasOwnProperty(Vc.ACCESS_TOKEN)||(t[Vc.ACCESS_TOKEN]={}),t[Vc.ACCESS_TOKEN][Vc.XMS_CC]={values:e}),JSON.stringify(t)}function Im(n,e){e&&(n.set(Fb,wt.POP),n.set(Bb,e))}function qb(n,e){e&&(n.set(Fb,wt.SSH),n.set(Bb,e))}function Wb(n,e){n.set(IN,e.generateCurrentRequestHeaderValue()),n.set(RN,e.generateLastRequestHeaderValue())}function Gb(n){n.set(DN,Va.X_MS_LIB_CAPABILITY_VALUE)}function iI(n,e){n.set(UN,e)}function ah(n,e,t){n.has(ld)||n.set(ld,e),n.has(cd)||n.set(cd,t)}function aI(n,e){n.set(qN,encodeURIComponent(e)),n.set(WN,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}/*! @azure/msal-common v15.6.0 2025-05-06 */function lI(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.6.0 2025-05-06 */function cI(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}/*! @azure/msal-common v15.6.0 2025-05-06 */function uI(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}/*! @azure/msal-common v15.6.0 2025-05-06 */const q={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},dI={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v15.6.0 2025-05-06 */const $r=(n,e,t,r,o)=>(...a)=>{t.trace(`Executing function ${e}`);const l=r==null?void 0:r.startMeasurement(e,o);if(o){const d=e+"CallCount";r==null||r.incrementFields({[d]:1},o)}try{const d=n(...a);return l==null||l.end({success:!0}),t.trace(`Returning result from ${e}`),d}catch(d){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(d))}catch{t.trace("Unable to print error message.")}throw l==null||l.end({success:!1},d),d}},de=(n,e,t,r,o)=>(...a)=>{t.trace(`Executing function ${e}`);const l=r==null?void 0:r.startMeasurement(e,o);if(o){const d=e+"CallCount";r==null||r.incrementFields({[d]:1},o)}return r==null||r.setPreQueueTime(e,o),n(...a).then(d=>(t.trace(`Returning result from ${e}`),l==null||l.end({success:!0}),d)).catch(d=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(d))}catch{t.trace("Unable to print error message.")}throw l==null||l.end({success:!1},d),d})};/*! @azure/msal-common v15.6.0 2025-05-06 */class lh{constructor(e,t,r,o){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=o}async detectRegion(e,t){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(q.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=gi.ENVIRONMENT_VARIABLE;else{const a=lh.IMDS_OPTIONS;try{const l=await de(this.getRegionFromIMDS.bind(this),q.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(le.IMDS_VERSION,a);if(l.status===qc.httpSuccess&&(r=l.body,t.region_source=gi.IMDS),l.status===qc.httpBadRequest){const d=await de(this.getCurrentVersion.bind(this),q.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(a);if(!d)return t.region_source=gi.FAILED_AUTO_DETECTION,null;const h=await de(this.getRegionFromIMDS.bind(this),q.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,a);h.status===qc.httpSuccess&&(r=h.body,t.region_source=gi.IMDS)}}catch{return t.region_source=gi.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=gi.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(q.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${le.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,le.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;(t=this.performanceClient)==null||t.addQueueMeasurement(q.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${le.IMDS_ENDPOINT}?format=json`,e);return r.status===qc.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}lh.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.6.0 2025-05-06 */class Pn{constructor(e,t,r,o,a,l,d,h){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=a,this.performanceClient=d,this.correlationId=l,this.managedIdentity=h||!1,this.regionDiscovery=new lh(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(le.CIAM_AUTH_URL))return Or.Ciam;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case le.ADFS:return Or.Adfs;case le.DSTS:return Or.Dsts}return Or.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new ct(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ve(ws)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ve(ws)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ve(ws)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ve(db);return this.replacePath(this.metadata.end_session_endpoint)}else throw ve(ws)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ve(ws)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ve(ws)}canReplaceTenant(e){return e.PathSegments.length===1&&!Pn.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Or.Default&&this.protocolMode!==pr.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const o=new ct(this.metadata.canonical_authority).getUrlComponents(),a=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((d,h)=>{let f=a[h];if(h===0&&this.canReplaceTenant(o)){const p=new ct(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];f!==p&&(this.logger.verbose(`Replacing tenant domain name ${f} with id ${p}`),f=p)}d!==f&&(t=t.replace(`/${f}/`,`/${d}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Or.Adfs||this.protocolMode===pr.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var o,a;(o=this.performanceClient)==null||o.addQueueMeasurement(q.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await de(this.updateCloudDiscoveryMetadata.bind(this),q.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await de(this.updateEndpointMetadata.bind(this),q.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),(a=this.performanceClient)==null||a.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Hv(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==hr.CACHE&&(r==null?void 0:r.source)!==hr.CACHE&&(e.expiresAt=Hv(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var o,a,l;(o=this.performanceClient)==null||o.addQueueMeasurement(q.AuthorityUpdateEndpointMetadata,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===hr.HARDCODED_VALUES&&(a=this.authorityOptions.azureRegionConfiguration)!=null&&a.azureRegion&&t.metadata){const d=await de(this.updateMetadataWithRegionalInformation.bind(this),q.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Wc(e,d,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await de(this.getEndpointMetadataFromNetwork.bind(this),q.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(l=this.authorityOptions.azureRegionConfiguration)!=null&&l.azureRegion&&(r=await de(this.updateMetadataWithRegionalInformation.bind(this),q.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Wc(e,r,!0),hr.NETWORK;throw ve(XC,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Wc(e,t,!1),{source:hr.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Wc(e,o,!1),{source:hr.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=Uv(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:hr.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new ct(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw xt(Eb)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(q.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const o=await this.networkInterface.sendGetRequestAsync(t,e);return lI(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in zv?zv[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,o,a;(r=this.performanceClient)==null||r.addQueueMeasurement(q.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const t=(o=this.authorityOptions.azureRegionConfiguration)==null?void 0:o.azureRegion;if(t){if(t!==le.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=E0.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,Pn.replaceWithRegionalInformation(e,t);const l=await de(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),q.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.environmentRegion,this.regionDiscoveryMetadata);if(l)return this.regionDiscoveryMetadata.region_outcome=E0.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=l,Pn.replaceWithRegionalInformation(e,l);this.regionDiscoveryMetadata.region_outcome=E0.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(q.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await de(this.getCloudDiscoveryMetadataFromNetwork.bind(this),q.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return S0(e,r,!0),hr.NETWORK;throw xt(Sb)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||le.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||le.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||le.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),S0(e,t,!1),hr.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=tN(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),S0(e,o,!1),hr.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=Uv(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),hr.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Or.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Pn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=ad(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),xt(gm)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Pn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(q.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${le.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const a=await this.networkInterface.sendGetRequestAsync(e,t);let l,d;if(cI(a.body))l=a.body,d=l.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${l.tenant_discovery_endpoint}`);else if(uI(a.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${a.status}`),l=a.body,l.error===le.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${l.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${l.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),d=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=ad(d,this.hostnameAndPort)}catch(a){if(a instanceof Tt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${a.errorCode}
Error Description: ${a.errorMessage}`);else{const l=a;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${l.name}
Error Description: ${l.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Pn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&ct.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==pm.None){const o=t.tenant?t.tenant:le.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return le.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ve(ws)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Db.has(e)}static isPublicCloudAuthority(e){return le.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const o=new ct(e);o.validateAsUri();const a=o.getUrlComponents();let l=`${t}.${a.HostNameAndPort}`;this.isPublicCloudAuthority(a.HostNameAndPort)&&(l=`${t}.${le.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const d=ct.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:l}).urlString;return r?`${d}?${r}`:d}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=Pn.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=Pn.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=Pn.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const o=new ct(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(le.CIAM_AUTH_URL)){const a=o.HostNameAndPort.split(".")[0];t=`${t}${a}${le.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}Pn.reservedTenantDomains=new Set(["{tenant}","{tenantid}",to.COMMON,to.CONSUMERS,to.ORGANIZATIONS]);function hI(n){var o;const r=(o=new ct(n).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:o.toLowerCase();switch(r){case to.COMMON:case to.ORGANIZATIONS:case to.CONSUMERS:return;default:return r}}function Yb(n){return n.endsWith(le.FORWARD_SLASH)?n:`${n}${le.FORWARD_SLASH}`}function fI(n){const e=n.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw xt(gm)}return{canonicalAuthority:n.authority?Yb(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}/*! @azure/msal-common v15.6.0 2025-05-06 */async function Qb(n,e,t,r,o,a,l){l==null||l.addQueueMeasurement(q.AuthorityFactoryCreateDiscoveredInstance,a);const d=Pn.transformCIAMAuthority(Yb(n)),h=new Pn(d,e,t,r,o,a,l);try{return await de(h.resolveEndpointsAsync.bind(h),q.AuthorityResolveEndpointsAsync,o,l,a)(),h}catch{throw ve(ws)}}/*! @azure/msal-common v15.6.0 2025-05-06 */class Vo extends Tt{constructor(e,t,r,o,a){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=a,Object.setPrototypeOf(this,Vo.prototype)}}/*! @azure/msal-common v15.6.0 2025-05-06 */function ch(n,e,t){var r;return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.6.0 2025-05-06 */class ns{static generateThrottlingStorageKey(e){return`${Va.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){var a;const r=ns.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new Vo(((a=o.errorCodes)==null?void 0:a.join(" "))||le.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r){if(ns.checkResponseStatus(r)||ns.checkResponseForRetryAfter(r)){const o={throttleTime:ns.calculateThrottleTime(parseInt(r.headers[Kn.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(ns.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Kn.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||Va.DEFAULT_THROTTLE_TIME_SECONDS),r+Va.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){const a=ch(t,r,o),l=this.generateThrottlingStorageKey(a);e.removeItem(l)}}/*! @azure/msal-common v15.6.0 2025-05-06 */class uh extends Tt{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,uh.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function Ha(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new uh(n,e,t)}/*! @azure/msal-common v15.6.0 2025-05-06 */class Rm{constructor(e,t){this.config=uN(e),this.logger=new Ts(this.config.loggerOptions,hb,fm),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Kn.CONTENT_TYPE]=le.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Br.HOME_ACCOUNT_ID:try{const r=Ti(e.credential);t[Kn.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Br.UPN:t[Kn.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,r,o,a,l){var h;l&&((h=this.performanceClient)==null||h.addQueueMeasurement(l,a));const d=await this.sendPostRequest(o,e,{body:t,headers:r},a);return this.config.serverTelemetryManager&&d.status<500&&d.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),d}async sendPostRequest(e,t,r,o){var l,d,h;ns.preProcess(this.cacheManager,e);let a;try{a=await de(this.networkClient.sendPostRequestAsync.bind(this.networkClient),q.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);const f=a.headers||{};(d=this.performanceClient)==null||d.addFields({refreshTokenSize:((l=a.body.refresh_token)==null?void 0:l.length)||0,httpVerToken:f[Kn.X_MS_HTTP_VERSION]||"",requestId:f[Kn.X_MS_REQUEST_ID]||""},o)}catch(f){if(f instanceof uh){const p=f.responseHeaders;throw p&&((h=this.performanceClient)==null||h.addFields({httpVerToken:p[Kn.X_MS_HTTP_VERSION]||"",requestId:p[Kn.X_MS_REQUEST_ID]||"",contentTypeHeader:p[Kn.CONTENT_TYPE]||void 0,contentLengthHeader:p[Kn.CONTENT_LENGTH]||void 0,httpStatus:f.httpStatus},o)),f.error}throw f instanceof Tt?f:ve(JC)}return ns.postProcess(this.cacheManager,e,a),a}async updateAuthority(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(q.UpdateTokenEndpointAuthority,t);const r=`https://${e}/${this.authority.tenant}/`,o=await Qb(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&ah(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Do(t,e.tokenQueryParameters),Tm(t,e.correlationId),ih(t,e.correlationId,this.performanceClient),tl(t)}}/*! @azure/msal-common v15.6.0 2025-05-06 */const dd="no_tokens_found",Jb="native_account_unavailable",Dm="refresh_token_expired",pI="interaction_required",mI="consent_required",gI="login_required",dh="bad_token";/*! @azure/msal-common v15.6.0 2025-05-06 */const Wv=[pI,mI,gI,dh],xI=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],yI={[dd]:"No refresh token found in the cache. Please sign-in.",[Jb]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Dm]:"Refresh token has expired.",[dh]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class zr extends Tt{constructor(e,t,r,o,a,l,d,h){super(e,t,r),Object.setPrototypeOf(this,zr.prototype),this.timestamp=o||le.EMPTY_STRING,this.traceId=a||le.EMPTY_STRING,this.correlationId=l||le.EMPTY_STRING,this.claims=d||le.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=h}}function Xb(n,e,t){const r=!!n&&Wv.indexOf(n)>-1,o=!!t&&xI.indexOf(t)>-1,a=!!e&&Wv.some(l=>e.indexOf(l)>-1);return r||a||o}function ap(n){return new zr(n,yI[n])}/*! @azure/msal-common v15.6.0 2025-05-06 */class zi{static setRequestState(e,t,r){const o=zi.generateLibraryState(e,r);return t?`${o}${le.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw ve(np);const r={id:e.createNewGuid()};t&&(r.meta=t);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw ve(np);if(!t)throw ve(Ni);try{const r=t.split(le.RESOURCE_DELIM),o=r[0],a=r.length>1?r.slice(1).join(le.RESOURCE_DELIM):le.EMPTY_STRING,l=e.base64Decode(o),d=JSON.parse(l);return{userRequestState:a||le.EMPTY_STRING,libraryState:d}}catch{throw ve(Ni)}}}/*! @azure/msal-common v15.6.0 2025-05-06 */const vI={SW:"sw",UHW:"uhw"};class Ii{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(q.PopTokenGenerateCnf,e.correlationId);const r=await de(this.generateKid.bind(this),q.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(q.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:vI.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,o){const{resourceRequestMethod:a,resourceRequestUri:l,shrClaims:d,shrNonce:h,shrOptions:f}=r,p=l?new ct(l):void 0,y=p==null?void 0:p.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:mr(),m:a==null?void 0:a.toUpperCase(),u:y==null?void 0:y.HostNameAndPort,nonce:h||this.cryptoUtils.createNewGuid(),p:y==null?void 0:y.AbsolutePath,q:y!=null&&y.QueryString?[[],y.QueryString]:void 0,client_claims:d||void 0,...o},t,f,r.correlationId)}}/*! @azure/msal-common v15.6.0 2025-05-06 */class wI{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.6.0 2025-05-06 */class Lo{constructor(e,t,r,o,a,l,d){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=a,this.persistencePlugin=l,this.performanceClient=d}validateTokenResponse(e,t){var r;if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||le.NOT_AVAILABLE} - Timestamp: ${e.timestamp||le.NOT_AVAILABLE} - Description: ${e.error_description||le.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||le.NOT_AVAILABLE} - Trace ID: ${e.trace_id||le.NOT_AVAILABLE}`,a=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,l=new Vo(e.error,o,e.suberror,a,e.status);if(t&&e.status&&e.status>=zc.SERVER_ERROR_RANGE_START&&e.status<=zc.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${l}`);return}else if(t&&e.status&&e.status>=zc.CLIENT_ERROR_RANGE_START&&e.status<=zc.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${l}`);return}throw Xb(e.error,e.error_description,e.suberror)?new zr(e.error,e.error_description,e.suberror,e.timestamp||le.EMPTY_STRING,e.trace_id||le.EMPTY_STRING,e.correlation_id||le.EMPTY_STRING,e.claims||le.EMPTY_STRING,a):l}}async handleServerTokenResponse(e,t,r,o,a,l,d,h,f){var w;(w=this.performanceClient)==null||w.addQueueMeasurement(q.HandleServerTokenResponse,e.correlation_id);let p;if(e.id_token){if(p=$i(e.id_token||le.EMPTY_STRING,this.cryptoObj.base64Decode),a&&a.nonce&&p.nonce!==a.nonce)throw ve(tb);if(o.maxAge||o.maxAge===0){const E=p.auth_time;if(!E)throw ve(lm);fb(E,o.maxAge)}}this.homeAccountIdentifier=Wn.generateHomeAccountId(e.client_info||le.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,p);let y;a&&a.state&&(y=zi.parseRequestState(this.cryptoObj,a.state)),e.key_id=e.key_id||o.sshKid||void 0;const x=this.generateCacheRecord(e,t,r,o,p,l,a);let C;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),C=new wI(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(C)),d&&!h&&x.account){const E=x.account.generateAccountKey();if(!this.cacheStorage.getAccount(E))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Lo.generateAuthenticationResult(this.cryptoObj,t,x,!1,o,p,y,void 0,f)}await this.cacheStorage.saveCacheRecord(x,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&C&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(C))}return Lo.generateAuthenticationResult(this.cryptoObj,t,x,!1,o,p,y,e,f)}generateCacheRecord(e,t,r,o,a,l,d){const h=t.getPreferredCache();if(!h)throw ve(um);const f=Nb(a);let p,y;e.id_token&&a&&(p=th(this.homeAccountIdentifier,h,e.id_token,this.clientId,f||""),y=Pm(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,a,e.client_info,h,f,d,void 0,this.logger));let x=null;if(e.access_token){const E=e.scope?Jt.fromString(e.scope):new Jt(o.scopes||[]),S=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,A=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,k=r+S,I=k+A,R=b&&b>0?r+b:void 0;x=nh(this.homeAccountIdentifier,h,e.access_token,this.clientId,f||t.tenant||"",E.printScopes(),k,I,this.cryptoObj.base64Decode,R,e.token_type,l,e.key_id,o.claims,o.requestedClaimsHash)}let C=null;if(e.refresh_token){let E;if(e.refresh_token_expires_in){const S=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;E=r+S}C=pb(this.homeAccountIdentifier,h,e.refresh_token,this.clientId,e.foci,l,E)}let w=null;return e.foci&&(w={clientId:this.clientId,environment:h,familyId:e.foci}),{account:y,idToken:p,accessToken:x,refreshToken:C,appMetadata:w}}static async generateAuthenticationResult(e,t,r,o,a,l,d,h,f){var k,I,R,D,j;let p=le.EMPTY_STRING,y=[],x=null,C,w,E=le.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===wt.POP&&!a.popKid){const M=new Ii(e),{secret:U,keyId:P}=r.accessToken;if(!P)throw ve(dm);p=await M.signPopToken(U,P,a)}else p=r.accessToken.secret;y=Jt.fromString(r.accessToken.target).asArray(),x=ki(r.accessToken.expiresOn),C=ki(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(w=ki(r.accessToken.refreshOn))}r.appMetadata&&(E=r.appMetadata.familyId===za?za:"");const S=(l==null?void 0:l.oid)||(l==null?void 0:l.sub)||"",A=(l==null?void 0:l.tid)||"";h!=null&&h.spa_accountid&&r.account&&(r.account.nativeAccountId=h==null?void 0:h.spa_accountid);const b=r.account?vm(r.account.getAccountInfo(),void 0,l,(k=r.idToken)==null?void 0:k.secret):null;return{authority:t.canonicalAuthority,uniqueId:S,tenantId:A,scopes:y,account:b,idToken:((I=r==null?void 0:r.idToken)==null?void 0:I.secret)||"",idTokenClaims:l||{},accessToken:p,fromCache:o,expiresOn:x,extExpiresOn:C,refreshOn:w,correlationId:a.correlationId,requestId:f||le.EMPTY_STRING,familyId:E,tokenType:((R=r.accessToken)==null?void 0:R.tokenType)||le.EMPTY_STRING,state:d?d.userRequestState:le.EMPTY_STRING,cloudGraphHostName:((D=r.account)==null?void 0:D.cloudGraphHostName)||le.EMPTY_STRING,msGraphHost:((j=r.account)==null?void 0:j.msGraphHost)||le.EMPTY_STRING,code:h==null?void 0:h.spa_code,fromNativeBroker:!1}}}function Pm(n,e,t,r,o,a,l,d,h,f,p){p==null||p.verbose("setCachedAccount called");const x=n.getAccountKeys().find(A=>A.startsWith(t));let C=null;x&&(C=n.getAccount(x));const w=C||Wn.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:a,environment:l,cloudGraphHostName:h==null?void 0:h.cloud_graph_host_name,msGraphHost:h==null?void 0:h.msgraph_host,nativeAccountId:f},e,r),E=w.tenantProfiles||[],S=d||w.realm;if(S&&!E.find(A=>A.tenantId===S)){const A=ym(t,w.localAccountId,S,o);E.push(A)}return w.tenantProfiles=E,w}/*! @azure/msal-common v15.6.0 2025-05-06 */class CI{static validateRedirectUri(e){if(!e)throw xt(mb)}static validatePrompt(e){const t=[];for(const r in Tn)t.push(Tn[r]);if(t.indexOf(e)<0)throw xt(vb)}static validateClaims(e){try{JSON.parse(e)}catch{throw xt(rh)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw xt(sh);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([Mv.PLAIN,Mv.S256].indexOf(e)<0)throw xt(bb)}}/*! @azure/msal-common v15.6.0 2025-05-06 */async function Zb(n,e,t){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})}/*! @azure/msal-common v15.6.0 2025-05-06 */class eE extends Rm{constructor(e,t){var r;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,t){var d,h;if((d=this.performanceClient)==null||d.addQueueMeasurement(q.AuthClientAcquireToken,e.correlationId),!e.code)throw ve(sb);const r=mr(),o=await de(this.executeTokenRequest.bind(this),q.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=(h=o.headers)==null?void 0:h[Kn.X_MS_REQUEST_ID],l=new Lo(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return l.validateTokenResponse(o.body),de(l.handleServerTokenResponse.bind(l),q.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,a)}getLogoutUri(e){if(!e)throw xt(Cb);const t=this.createLogoutUrlQueryString(e);return ct.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var f;(f=this.performanceClient)==null||f.addQueueMeasurement(q.AuthClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),o=ct.appendQueryString(e.tokenEndpoint,r),a=await de(this.createTokenRequestBody.bind(this),q.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);let l;if(t.clientInfo)try{const p=od(t.clientInfo,this.cryptoUtils.base64Decode);l={credential:`${p.uid}${jn.CLIENT_INFO_SEPARATOR}${p.utid}`,type:Br.HOME_ACCOUNT_ID}}catch(p){this.logger.verbose("Could not parse client info for CCS Header: "+p)}const d=this.createTokenRequestHeaders(l||t.ccsCredential),h=ch(this.config.authOptions.clientId,t);return de(this.executePostToTokenEndpoint.bind(this),q.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,a,d,h,t.correlationId,q.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,a;(o=this.performanceClient)==null||o.addQueueMeasurement(q.AuthClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(Em(t,e.embeddedClientId||((a=e.tokenBodyParameters)==null?void 0:a[Bo])||this.config.authOptions.clientId),this.includeRedirectUri?Sm(t,e.redirectUri):CI.validateRedirectUri(e.redirectUri),bm(t,e.scopes,!0,this.oidcDefaultScopes),nI(t,e.code),Am(t,this.config.libraryInfo),_m(t,this.config.telemetry.application),Gb(t),this.serverTelemetryManager&&!Mb(this.config)&&Wb(t,this.serverTelemetryManager),e.codeVerifier&&sI(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&Ub(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const l=this.config.clientCredentials.clientAssertion;$b(t,await Zb(l.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),zb(t,l.assertionType)}if(Vb(t,WC.AUTHORIZATION_CODE_GRANT),Nm(t),e.authenticationScheme===wt.POP){const l=new Ii(this.cryptoUtils,this.performanceClient);let d;e.popKid?d=this.cryptoUtils.encodeKid(e.popKid):d=(await de(l.generateCnf.bind(l),q.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Im(t,d)}else if(e.authenticationScheme===wt.SSH)if(e.sshJwk)qb(t,e.sshJwk);else throw xt(oh);(!os.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&km(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const l=od(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${l.uid}${jn.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Br.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Br.HOME_ACCOUNT_ID:try{const l=Ti(r.credential);qa(t,l)}catch(l){this.logger.verbose("Could not parse home account ID for CCS Header: "+l)}break;case Br.UPN:ud(t,r.credential);break}return e.embeddedClientId&&ah(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Do(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Kv])&&Do(t,{[Kv]:"1"}),ih(t,e.correlationId,this.performanceClient),tl(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&QN(t,e.postLogoutRedirectUri),e.correlationId&&Tm(t,e.correlationId),e.idTokenHint&&JN(t,e.idTokenHint),e.state&&Hb(t,e.state),e.logoutHint&&iI(t,e.logoutHint),e.extraQueryParameters&&Do(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Kb(t),tl(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.6.0 2025-05-06 */const bI=300;class EI extends Rm{constructor(e,t){super(e,t)}async acquireToken(e){var l,d;(l=this.performanceClient)==null||l.addQueueMeasurement(q.RefreshTokenClientAcquireToken,e.correlationId);const t=mr(),r=await de(this.executeTokenRequest.bind(this),q.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=(d=r.headers)==null?void 0:d[Kn.X_MS_REQUEST_ID],a=new Lo(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(r.body),de(a.handleServerTokenResponse.bind(a),q.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){var r;if(!e)throw xt(wb);if((r=this.performanceClient)==null||r.addQueueMeasurement(q.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw ve(cm);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await de(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const a=o instanceof zr&&o.errorCode===dd,l=o instanceof Vo&&o.errorCode===Ov.INVALID_GRANT_ERROR&&o.subError===Ov.CLIENT_MISMATCH_ERROR;if(a||l)return de(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return de(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var a,l,d;(a=this.performanceClient)==null||a.addQueueMeasurement(q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=$r(this.cacheManager.getRefreshToken.bind(this.cacheManager),q.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw ap(dd);if(r.expiresOn&&sp(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||bI))throw(l=this.performanceClient)==null||l.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),ap(Dm);const o={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||wt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Br.HOME_ACCOUNT_ID}};try{return await de(this.acquireToken.bind(this),q.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(h){if(h instanceof zr&&((d=this.performanceClient)==null||d.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),h.subError===dh)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const f=Ka(r);this.cacheManager.removeRefreshToken(f)}throw h}}async executeTokenRequest(e,t){var h;(h=this.performanceClient)==null||h.addQueueMeasurement(q.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),o=ct.appendQueryString(t.tokenEndpoint,r),a=await de(this.createTokenRequestBody.bind(this),q.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),l=this.createTokenRequestHeaders(e.ccsCredential),d=ch(this.config.authOptions.clientId,e);return de(this.executePostToTokenEndpoint.bind(this),q.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,a,l,d,e.correlationId,q.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,o,a;(r=this.performanceClient)==null||r.addQueueMeasurement(q.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(Em(t,e.embeddedClientId||((o=e.tokenBodyParameters)==null?void 0:o[Bo])||this.config.authOptions.clientId),e.redirectUri&&Sm(t,e.redirectUri),bm(t,e.scopes,!0,(a=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:a.defaultScopes),Vb(t,WC.REFRESH_TOKEN_GRANT),Nm(t),Am(t,this.config.libraryInfo),_m(t,this.config.telemetry.application),Gb(t),this.serverTelemetryManager&&!Mb(this.config)&&Wb(t,this.serverTelemetryManager),rI(t,e.refreshToken),this.config.clientCredentials.clientSecret&&Ub(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const l=this.config.clientCredentials.clientAssertion;$b(t,await Zb(l.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),zb(t,l.assertionType)}if(e.authenticationScheme===wt.POP){const l=new Ii(this.cryptoUtils,this.performanceClient);let d;e.popKid?d=this.cryptoUtils.encodeKid(e.popKid):d=(await de(l.generateCnf.bind(l),q.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Im(t,d)}else if(e.authenticationScheme===wt.SSH)if(e.sshJwk)qb(t,e.sshJwk);else throw xt(oh);if((!os.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&km(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Br.HOME_ACCOUNT_ID:try{const l=Ti(e.ccsCredential.credential);qa(t,l)}catch(l){this.logger.verbose("Could not parse home account ID for CCS Header: "+l)}break;case Br.UPN:ud(t,e.ccsCredential.credential);break}return e.embeddedClientId&&ah(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Do(t,e.tokenBodyParameters),ih(t,e.correlationId,this.performanceClient),tl(t)}}/*! @azure/msal-common v15.6.0 2025-05-06 */class SI extends Rm{constructor(e,t){super(e,t)}async acquireCachedToken(e){var h;(h=this.performanceClient)==null||h.addQueueMeasurement(q.SilentFlowClientAcquireCachedToken,e.correlationId);let t=ko.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!os.isEmptyObj(e.claims))throw this.setCacheOutcome(ko.FORCE_REFRESH_OR_CLAIMS,e.correlationId),ve(no);if(!e.account)throw ve(cm);const r=e.account.tenantId||hI(e.authority),o=this.cacheManager.getTokenKeys(),a=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(a){if(O2(a.cachedAt)||sp(a.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ko.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),ve(no);a.refreshOn&&sp(a.refreshOn,0)&&(t=ko.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ko.NO_CACHED_ACCESS_TOKEN,e.correlationId),ve(no);const l=e.authority||this.authority.getPreferredCache(),d={account:this.cacheManager.readAccountFromCache(e.account),accessToken:a,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(l)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await de(this.generateResultFromCacheRecord.bind(this),q.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(d,e),t]}setCacheOutcome(e,t){var r,o;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(o=this.performanceClient)==null||o.addFields({cacheOutcome:e},t),e!==ko.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(q.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=$i(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){const a=r==null?void 0:r.auth_time;if(!a)throw ve(lm);fb(a,t.maxAge)}return Lo.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}/*! @azure/msal-common v15.6.0 2025-05-06 */const kI={sendGetRequestAsync:()=>Promise.reject(ve(ot)),sendPostRequestAsync:()=>Promise.reject(ve(ot))};/*! @azure/msal-common v15.6.0 2025-05-06 */function TI(n,e,t,r){var d,h;const o=e.correlationId,a=new Map;Em(a,e.embeddedClientId||((d=e.extraQueryParameters)==null?void 0:d[Bo])||n.clientId);const l=[...e.scopes||[],...e.extraScopesToConsent||[]];if(bm(a,l,!0,(h=n.authority.options.OIDCOptions)==null?void 0:h.defaultScopes),Sm(a,e.redirectUri),Tm(a,o),GN(a,e.responseMode),Nm(a),e.prompt&&(ZN(a,e.prompt),r==null||r.addFields({prompt:e.prompt},o)),e.domainHint&&(XN(a,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},o)),e.prompt!==Tn.SELECT_ACCOUNT)if(e.sid&&e.prompt===Tn.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),qv(a,e.sid),r==null||r.addFields({sidFromRequest:!0},o);else if(e.account){const f=NI(e.account);let p=II(e.account);if(p&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),p=null),p){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Gc(a,p),r==null||r.addFields({loginHintFromClaim:!0},o);try{const y=Ti(e.account.homeAccountId);qa(a,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(f&&e.prompt===Tn.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),qv(a,f),r==null||r.addFields({sidFromClaim:!0},o);try{const y=Ti(e.account.homeAccountId);qa(a,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Gc(a,e.loginHint),ud(a,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Gc(a,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},o);try{const y=Ti(e.account.homeAccountId);qa(a,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Gc(a,e.loginHint),ud(a,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&eI(a,e.nonce),e.state&&Hb(a,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&km(a,e.claims,n.clientCapabilities),e.embeddedClientId&&ah(a,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(ip))&&Kb(a),a}function tE(n,e,t,r){const o=tl(e,t,r);return ct.appendQueryString(n.authorizationEndpoint,o)}function AI(n,e){if(nE(n,e),!n.code)throw ve(cb);return n}function nE(n,e){if(!n.state||!e)throw n.state?ve(Z0,"Cached State"):ve(Z0,"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw ve(Ni,n.state)}try{r=decodeURIComponent(e)}catch{throw ve(Ni,n.state)}if(t!==r)throw ve(eb);if(n.error||n.error_description||n.suberror){const o=_I(n);throw Xb(n.error,n.error_description,n.suberror)?new zr(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new Vo(n.error||"",n.error_description,n.suberror,o)}}function _I(n){var r,o;const e="code=",t=(r=n.error_uri)==null?void 0:r.lastIndexOf(e);return t&&t>=0?(o=n.error_uri)==null?void 0:o.substring(t+e.length):void 0}function NI(n){var e;return((e=n.idTokenClaims)==null?void 0:e.sid)||null}function II(n){var e;return((e=n.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.6.0 2025-05-06 */const Gv=",",rE="|";function RI(n){const{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:a}=n,l=new Map([[0,[t,r]],[2,[o,a]]]);let d=[];if(e!=null&&e.length){if(d=e.split(Gv),d.length<4)return e}else d=Array.from({length:4},()=>rE);return l.forEach((h,f)=>{var p,y;h.length===2&&((p=h[0])!=null&&p.length)&&((y=h[1])!=null&&y.length)&&DI({skuArr:d,index:f,skuName:h[0],skuVersion:h[1]})}),d.join(Gv)}function DI(n){const{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(rE))}class nl{constructor(e,t){this.cacheOutcome=ko.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||le.EMPTY_STRING,this.wrapperVer=e.wrapperVer||le.EMPTY_STRING,this.telemetryCacheKey=Sn.CACHE_KEY+jn.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Sn.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&t.push(`broker_error=${r}`);const o=t.join(Sn.VALUE_SEPARATOR),a=this.getRegionDiscoveryFields(),l=[e,a].join(Sn.VALUE_SEPARATOR);return[Sn.SCHEMA_VERSION,l,o].join(Sn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=nl.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Sn.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Sn.VALUE_SEPARATOR),a=e.errors.length,l=t<a?Sn.OVERFLOW_TRUE:Sn.OVERFLOW_FALSE,d=[a,l].join(Sn.VALUE_SEPARATOR);return[Sn.SCHEMA_VERSION,e.cacheHits,r,o,d].join(Sn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Sn.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Tt?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Sn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),t=nl.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{const o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,r=0,o=0;const a=e.errors.length;for(t=0;t<a;t++){const l=e.failedRequests[2*t]||le.EMPTY_STRING,d=e.failedRequests[2*t+1]||le.EMPTY_STRING,h=e.errors[t]||le.EMPTY_STRING;if(o+=l.toString().length+d.toString().length+h.length+3,o<Sn.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||le.EMPTY_STRING),e.push(this.regionSource||le.EMPTY_STRING),e.push(this.regionOutcome||le.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return RI(e)}}/*! @azure/msal-common v15.6.0 2025-05-06 */const sE="missing_kid_error",oE="missing_alg_error";/*! @azure/msal-common v15.6.0 2025-05-06 */const PI={[sE]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[oE]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class jm extends Tt{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,jm.prototype)}}function Yv(n){return new jm(n,PI[n])}/*! @azure/msal-common v15.6.0 2025-05-06 */class Mm{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Yv(sE);if(!e.alg)throw Yv(oE);const t=new Mm({typ:e.typ||w2.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}/*! @azure/msal-common v15.6.0 2025-05-06 */class Qv{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class jI{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:dI.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Qv}}startPerformanceMeasurement(){return new Qv}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v4.12.0 2025-05-06 */const rl="pkce_not_created",Om="ear_jwk_empty",iE="ear_jwe_empty",sl="crypto_nonexistent",Ri="empty_navigate_uri",hd="hash_empty_error",ol="no_state_in_hash",fd="hash_does_not_contain_known_properties",pd="unable_to_parse_state",md="state_interaction_type_mismatch",gd="interaction_in_progress",xd="popup_window_error",yd="empty_window_error",Ho="user_cancelled",lp="monitor_popup_timeout",vd="monitor_window_timeout",wd="redirect_in_iframe",Cd="block_iframe_reload",bd="block_nested_popups",cp="iframe_closed_prematurely",Di="silent_logout_unsupported",Ed="no_account_error",up="silent_prompt_value_error",Sd="no_token_request_cache_error",kd="unable_to_parse_token_request_cache_error",dp="auth_request_not_set_error",hp="invalid_cache_type",Pi="non_browser_environment",Xs="database_not_open",ji="no_network_connectivity",Td="post_request_failed",Ad="get_request_failed",il="failed_to_parse_response",_d="unable_to_load_token",al="crypto_key_not_found",Nd="auth_code_required",Id="auth_code_or_nativeAccountId_required",Rd="spa_code_and_nativeAccountId_present",ll="database_unavailable",Dd="unable_to_acquire_token_from_native_platform",Pd="native_handshake_timeout",jd="native_extension_not_installed",cl="native_connection_not_established",Mi="uninitialized_public_client_application",Md="native_prompt_not_supported",Od="invalid_base64_string",Fd="invalid_pop_token_request",aE="failed_to_build_headers",lE="failed_to_parse_headers",uu="failed_to_decrypt_ear_response";/*! @azure/msal-browser v4.12.0 2025-05-06 */const ys="For more visit: aka.ms/msaljs/browser-errors",Je={[rl]:"The PKCE code challenge and verifier could not be generated.",[Om]:"No EAR encryption key provided. This is unexpected.",[iE]:"Server response does not contain ear_jwe property. This is unexpected.",[sl]:"The crypto object or function is not available.",[Ri]:"Navigation URI is empty. Please check stack trace for more info.",[hd]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ys}`,[ol]:"Hash does not contain state. Please verify that the request originated from msal.",[fd]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ys}`,[pd]:"Unable to parse state. Please verify that the request originated from msal.",[md]:"Hash contains state but the interaction type does not match the caller.",[gd]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ys}`,[xd]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[yd]:"window.open returned null or undefined window object.",[Ho]:"User cancelled the flow.",[lp]:`Token acquisition in popup failed due to timeout.  ${ys}`,[vd]:`Token acquisition in iframe failed due to timeout.  ${ys}`,[wd]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Cd]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ys}`,[bd]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[cp]:"The iframe being monitored was closed prematurely.",[Di]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Ed]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[up]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Sd]:"No token request found in cache.",[kd]:"The cached token request could not be parsed.",[dp]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[hp]:"Invalid cache type",[Pi]:"Login and token requests are not supported in non-browser environments.",[Xs]:"Database is not open!",[ji]:"No network connectivity. Check your internet connection.",[Td]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Ad]:"Network request failed. Please check the network trace to determine root cause.",[il]:"Failed to parse network response. Check network trace.",[_d]:"Error loading token to cache.",[al]:"Cryptographic Key or Keypair not found in browser storage.",[Nd]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Id]:"An authorization code or nativeAccountId must be provided to this flow.",[Rd]:"Request cannot contain both spa code and native account id.",[ll]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Dd]:`Unable to acquire token from native platform.  ${ys}`,[Pd]:"Timed out while attempting to establish connection to browser extension",[jd]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[cl]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ys}`,[Mi]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ys}`,[Md]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Od]:"Invalid base64 encoded string.",[Fd]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[aE]:"Failed to build request headers object.",[lE]:"Failed to parse response headers",[uu]:"Failed to decrypt ear response"};Je[rl],Je[sl],Je[Ri],Je[hd],Je[ol],Je[fd],Je[pd],Je[md],Je[gd],Je[xd],Je[yd],Je[Ho],Je[lp],Je[vd],Je[wd],Je[Cd],Je[bd],Je[cp],Je[Di],Je[Ed],Je[up],Je[Sd],Je[kd],Je[dp],Je[hp],Je[Pi],Je[Xs],Je[ji],Je[Td],Je[Ad],Je[il],Je[_d],Je[al],Je[Nd],Je[Id],Je[Rd],Je[ll],Je[Dd],Je[Pd],Je[jd],Je[cl],Je[Mi],Je[Md],Je[Od],Je[Fd];class kl extends Tt{constructor(e,t){super(e,Je[e],t),Object.setPrototypeOf(this,kl.prototype),this.name="BrowserAuthError"}}function Ie(n,e){return new kl(n,e)}/*! @azure/msal-browser v4.12.0 2025-05-06 */const tr={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},vi={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},_o={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},An={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Jv={GET:"GET",POST:"POST"},Zs={SIGNIN:"signin",SIGNOUT:"signout"},sn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},eo={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Yc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Ct={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var $e;(function(n){n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none"})($e||($e={}));const rn={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},Xv={scopes:Sl},cE="jwk",MI={React:"@azure/msal-react",Angular:"@azure/msal-angular"},fp="msal.db",OI=1,FI=`${fp}.keys`,Vn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},BI=[Vn.Default,Vn.Skip,Vn.RefreshTokenAndNetwork],LI="msal.browser.log.level",HI="msal.browser.log.pii";/*! @azure/msal-browser v4.12.0 2025-05-06 */function Qc(n){return encodeURIComponent(ul(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function oo(n){return uE(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ul(n){return uE(new TextEncoder().encode(n))}function uE(n){const e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}/*! @azure/msal-browser v4.12.0 2025-05-06 */function Hr(n){return new TextDecoder().decode(ro(n))}function ro(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Ie(Od)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.12.0 2025-05-06 */const UI="RSASSA-PKCS1-v1_5",Vi="AES-GCM",dE="HKDF",Fm="SHA-256",$I=2048,zI=new Uint8Array([1,0,1]),Zv="0123456789abcdef",ew=new Uint32Array(1),Bm="raw",hE="encrypt",Lm="decrypt",VI="deriveKey",KI="crypto_subtle_undefined",Hm={name:UI,hash:Fm,modulusLength:$I,publicExponent:zI};function qI(n){if(!window)throw Ie(Pi);if(!window.crypto)throw Ie(sl);if(!n&&!window.crypto.subtle)throw Ie(sl,KI)}async function fE(n,e,t){e==null||e.addQueueMeasurement(q.Sha256Digest,t);const o=new TextEncoder().encode(n);return window.crypto.subtle.digest(Fm,o)}function WI(n){return window.crypto.getRandomValues(n)}function T0(){return window.crypto.getRandomValues(ew),ew[0]}function Vr(){const n=Date.now(),e=T0()*1024+(T0()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,a=T0();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=a>>>24,t[13]=a>>>16,t[14]=a>>>8,t[15]=a;let l="";for(let d=0;d<t.length;d++)l+=Zv.charAt(t[d]>>>4),l+=Zv.charAt(t[d]&15),(d===3||d===5||d===7||d===9)&&(l+="-");return l}async function GI(n,e){return window.crypto.subtle.generateKey(Hm,n,e)}async function A0(n){return window.crypto.subtle.exportKey(cE,n)}async function YI(n,e,t){return window.crypto.subtle.importKey(cE,n,Hm,e,t)}async function QI(n,e){return window.crypto.subtle.sign(Hm,n,e)}async function Um(){const n=await pE(),t={alg:"dir",kty:"oct",k:oo(new Uint8Array(n))};return ul(JSON.stringify(t))}async function JI(n){const e=Hr(n),r=JSON.parse(e).k,o=ro(r);return window.crypto.subtle.importKey(Bm,o,Vi,!1,[Lm])}async function XI(n,e){const t=e.split(".");if(t.length!==5)throw Ie(uu,"jwe_length");const r=await JI(n).catch(()=>{throw Ie(uu,"import_key")});try{const o=new TextEncoder().encode(t[0]),a=ro(t[2]),l=ro(t[3]),d=ro(t[4]),h=d.byteLength*8,f=new Uint8Array(l.length+d.length);f.set(l),f.set(d,l.length);const p=await window.crypto.subtle.decrypt({name:Vi,iv:a,tagLength:h,additionalData:o},r,f);return new TextDecoder().decode(p)}catch{throw Ie(uu,"decrypt")}}async function pE(){const n=await window.crypto.subtle.generateKey({name:Vi,length:256},!0,[hE,Lm]);return window.crypto.subtle.exportKey(Bm,n)}async function tw(n){return window.crypto.subtle.importKey(Bm,n,dE,!1,[VI])}async function mE(n,e,t){return window.crypto.subtle.deriveKey({name:dE,salt:e,hash:Fm,info:new TextEncoder().encode(t)},n,{name:Vi,length:256},!1,[hE,Lm])}async function ZI(n,e,t){const r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),a=await mE(n,o,t),l=await window.crypto.subtle.encrypt({name:Vi,iv:new Uint8Array(12)},a,r);return{data:oo(new Uint8Array(l)),nonce:oo(o)}}async function eR(n,e,t,r){const o=ro(r),a=await mE(n,ro(e),t),l=await window.crypto.subtle.decrypt({name:Vi,iv:new Uint8Array(12)},a,o);return new TextDecoder().decode(l)}async function gE(n){const e=await fE(n),t=new Uint8Array(e);return oo(t)}/*! @azure/msal-browser v4.12.0 2025-05-06 */const dl="storage_not_supported",tn="stubbed_public_client_application_called",Bd="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.12.0 2025-05-06 */const du={[dl]:"Given storage configuration option was not supported.",[tn]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Bd]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};du[dl],du[tn],du[Bd];class $m extends Tt{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,$m.prototype)}}function nn(n){return new $m(n,du[n])}/*! @azure/msal-browser v4.12.0 2025-05-06 */function xE(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function tR(n){const e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function zm(){return window.parent!==window}function nR(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${tr.POPUP_NAME_PREFIX}.`)===0}function bs(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function rR(){const e=new ct(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function sR(){if(ct.hashContainsKnownProperties(window.location.hash)&&zm())throw Ie(Cd)}function oR(n){if(zm()&&!n)throw Ie(wd)}function iR(){if(nR())throw Ie(bd)}function yE(){if(typeof window>"u")throw Ie(Pi)}function vE(n){if(!n)throw Ie(Mi)}function Vm(n){yE(),sR(),iR(),vE(n)}function nw(n,e){if(Vm(n),oR(e.system.allowRedirectInIframe),e.cache.cacheLocation===An.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw nn(Bd)}function wE(n){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function aR(){return Vr()}/*! @azure/msal-browser v4.12.0 2025-05-06 */class Ld{navigateInternal(e,t){return Ld.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Ld.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class lR{async sendGetRequestAsync(e,t){let r,o={},a=0;const l=rw(t);try{r=await fetch(e,{method:Jv.GET,headers:l})}catch(d){throw Ha(Ie(window.navigator.onLine?Ad:ji),void 0,void 0,d)}o=sw(r.headers);try{return a=r.status,{headers:o,body:await r.json(),status:a}}catch(d){throw Ha(Ie(il),a,o,d)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",o=rw(t);let a,l=0,d={};try{a=await fetch(e,{method:Jv.POST,headers:o,body:r})}catch(h){throw Ha(Ie(window.navigator.onLine?Td:ji),void 0,void 0,h)}d=sw(a.headers);try{return l=a.status,{headers:d,body:await a.json(),status:l}}catch(h){throw Ha(Ie(il),l,d,h)}}}function rw(n){try{const e=new Headers;if(!(n&&n.headers))return e;const t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch(e){throw Ha(Ie(aE),void 0,void 0,e)}}function sw(n){try{const e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw Ie(lE)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */const cR=6e4,pp=1e4,uR=3e4,dR=2e3;function hR({auth:n,cache:e,system:t,telemetry:r},o){const a={clientId:le.EMPTY_STRING,authority:`${le.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:le.EMPTY_STRING,authorityMetadata:le.EMPTY_STRING,redirectUri:typeof window<"u"?bs():"",postLogoutRedirectUri:le.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:pr.AAD,OIDCOptions:{serverResponseType:eh.FRAGMENT,defaultScopes:[le.OPENID_SCOPE,le.PROFILE_SCOPE,le.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:pm.None,tenant:le.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},l={cacheLocation:An.SessionStorage,temporaryCacheLocation:An.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===An.LocalStorage),claimsBasedCachingEnabled:!1},d={loggerCallback:()=>{},logLevel:Mt.Info,piiLoggingEnabled:!1},f={...{...jb,loggerOptions:d,networkClient:o?new lR:kI,navigationClient:new Ld,loadFrameTimeout:0,windowHashTimeout:(t==null?void 0:t.loadFrameTimeout)||cR,iframeHashTimeout:(t==null?void 0:t.loadFrameTimeout)||pp,navigateFrameWait:0,redirectNavigationTimeout:uR,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(t==null?void 0:t.nativeBrokerHandshakeTimeout)||dR,pollIntervalMilliseconds:tr.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:(t==null?void 0:t.loggerOptions)||d},p={application:{appName:le.EMPTY_STRING,appVersion:le.EMPTY_STRING},client:new jI};if((n==null?void 0:n.protocolMode)!==pr.OIDC&&(n!=null&&n.OIDCOptions)&&new Ts(f.loggerOptions).warning(JSON.stringify(xt(Tb))),n!=null&&n.protocolMode&&n.protocolMode===pr.OIDC&&(f!=null&&f.allowPlatformBroker))throw xt(Ab);return{auth:{...a,...n,OIDCOptions:{...a.OIDCOptions,...n==null?void 0:n.OIDCOptions}},cache:{...l,...e},system:f,telemetry:{...p,...r}}}/*! @azure/msal-browser v4.12.0 2025-05-06 */const fR="@azure/msal-browser",Tl="4.12.0";/*! @azure/msal-browser v4.12.0 2025-05-06 */class Km{static loggerCallback(e,t){switch(e){case Mt.Error:console.error(t);return;case Mt.Info:console.info(t);return;case Mt.Verbose:console.debug(t);return;case Mt.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){var h;this.browserEnvironment=typeof window<"u",this.config=hR(e,this.browserEnvironment);let t;try{t=window[An.SessionStorage]}catch{}const r=t==null?void 0:t.getItem(LI),o=(h=t==null?void 0:t.getItem(HI))==null?void 0:h.toLowerCase(),a=o==="true"?!0:o==="false"?!1:void 0,l={...this.config.system.loggerOptions},d=r&&Object.keys(Mt).includes(r)?Mt[r]:void 0;d&&(l.loggerCallback=Km.loggerCallback,l.logLevel=d),a!==void 0&&(l.piiLoggingEnabled=a),this.logger=new Ts(l,fR,Tl),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class Uo extends Km{getModuleName(){return Uo.MODULE_NAME}getId(){return Uo.ID}async initialize(){return this.available=typeof window<"u",this.available}}Uo.MODULE_NAME="";Uo.ID="StandardOperatingContext";/*! @azure/msal-browser v4.12.0 2025-05-06 */class pR{constructor(){this.dbName=fp,this.version=OI,this.tableName=FI,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{const a=o;this.db=a.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(Ie(ll)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Ie(Xs));const l=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);l.addEventListener("success",d=>{const h=d;this.closeConnection(),t(h.target.result)}),l.addEventListener("error",d=>{this.closeConnection(),r(d)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(Ie(Xs));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);d.addEventListener("success",()=>{this.closeConnection(),r()}),d.addEventListener("error",h=>{this.closeConnection(),o(h)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Ie(Xs));const l=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);l.addEventListener("success",()=>{this.closeConnection(),t()}),l.addEventListener("error",d=>{this.closeConnection(),r(d)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(Ie(Xs));const a=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();a.addEventListener("success",l=>{const d=l;this.closeConnection(),e(d.target.result)}),a.addEventListener("error",l=>{this.closeConnection(),t(l)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Ie(Xs));const l=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);l.addEventListener("success",d=>{const h=d;this.closeConnection(),t(h.target.result===1)}),l.addEventListener("error",d=>{this.closeConnection(),r(d)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(fp),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class hh{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class mR{constructor(e){this.inMemoryCache=new hh,this.indexedDBCache=new pR,this.logger=e}handleDatabaseAccessError(e){if(e instanceof kl&&e.errorCode===ll)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class As{constructor(e,t,r){this.logger=e,qI(r??!1),this.cache=new mR(this.logger),this.performanceClient=t}createNewGuid(){return Vr()}base64Encode(e){return ul(e)}base64Decode(e){return Hr(e)}base64UrlEncode(e){return Qc(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var p;const t=(p=this.performanceClient)==null?void 0:p.startMeasurement(q.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await GI(As.EXTRACTABLE,As.POP_KEY_USAGES),o=await A0(r.publicKey),a={e:o.e,kty:o.kty,n:o.n},l=ow(a),d=await this.hashString(l),h=await A0(r.privateKey),f=await YI(h,!1,["sign"]);return await this.cache.setItem(d,{privateKey:f,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),d}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,o){var k;const a=(k=this.performanceClient)==null?void 0:k.startMeasurement(q.CryptoOptsSignJwt,o),l=await this.cache.getItem(t);if(!l)throw Ie(al);const d=await A0(l.publicKey),h=ow(d),f=Qc(JSON.stringify({kid:t})),p=Mm.getShrHeaderString({...r==null?void 0:r.header,alg:d.alg,kid:f}),y=Qc(p);e.cnf={jwk:JSON.parse(h)};const x=Qc(JSON.stringify(e)),C=`${y}.${x}`,E=new TextEncoder().encode(C),S=await QI(l.privateKey,E),A=oo(new Uint8Array(S)),b=`${C}.${A}`;return a&&a.end({success:!0}),b}async hashString(e){return gE(e)}}As.POP_KEY_USAGES=["sign","verify"];As.EXTRACTABLE=!0;function ow(n){return JSON.stringify(n,Object.keys(n).sort())}/*! @azure/msal-browser v4.12.0 2025-05-06 */const gR=24*60*60*1e3,mp={Lax:"Lax",None:"None"};class CE{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const a=r[o],[l,...d]=decodeURIComponent(a).trim().split("="),h=d.join("=");if(l===t)return h}return""}getUserData(){throw ve(ot)}setItem(e,t,r,o=!0,a=mp.Lax){let l=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${a};`;if(r){const d=xR(r);l+=`expires=${d};`}(o||a===mp.None)&&(l+="Secure;"),document.cookie=l}async setUserData(){return Promise.reject(ve(ot))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}}function xR(n){const e=new Date;return new Date(e.getTime()+n*gR).toUTCString()}/*! @azure/msal-browser v4.12.0 2025-05-06 */function gp(n){const e=n.getItem(eo.ACCOUNT_KEYS);return e?JSON.parse(e):[]}function xp(n,e){const t=e.getItem(`${eo.TOKEN_KEYS}.${n}`);if(t){const r=JSON.parse(t);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.12.0 2025-05-06 */const iw="msal.cache.encryption",yR="msal.broadcast.cache";class vR{constructor(e,t,r){if(!window.localStorage)throw nn(dl);this.memoryStorage=new hh,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(yR)}async initialize(e){const t=new CE,r=t.getItem(iw);let o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){const a=$r(ro,q.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:await de(tw,q.GenerateHKDF,this.logger,this.performanceClient,e)(a)},await de(this.importExistingCache.bind(this),q.ImportExistingCache,this.logger,this.performanceClient,e)(e)}else{this.clear();const a=Vr(),l=await de(pE,q.GenerateBaseKey,this.logger,this.performanceClient,e)(),d=$r(oo,q.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(l));this.encryptionCookie={id:a,key:await de(tw,q.GenerateHKDF,this.logger,this.performanceClient,e)(l)};const h={id:a,key:d};t.setItem(iw,JSON.stringify(h),0,!0,mp.None)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Ie(Mi);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r){if(!this.initialized||!this.encryptionCookie)throw Ie(Mi);const{data:o,nonce:a}=await de(ZI,q.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),l={id:this.encryptionCookie.id,nonce:a,data:o};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(l)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),gp(this).forEach(r=>this.removeItem(r));const t=xp(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(le.CACHE_PREFIX)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=gp(this);t=await this.importArray(t,e),this.setItem(eo.ACCOUNT_KEYS,JSON.stringify(t));const r=xp(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),this.setItem(`${eo.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return!o.id||!o.nonce||!o.data?(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null):o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):de(eR,q.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data)}async importArray(e,t){const r=[],o=[];return e.forEach(a=>{const l=this.getItemFromEncryptedCache(a,t).then(d=>{d?(this.memoryStorage.setItem(a,d),r.push(a)):this.removeItem(a)});o.push(l)}),await Promise.all(o),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(q.LocalStorageUpdated);t.add({isBackground:!0});const{key:r,value:o,context:a}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(a&&a!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${a}`),t.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class wR{constructor(){if(!window.sessionStorage)throw nn(dl)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */const De={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v4.12.0 2025-05-06 */class yp extends op{constructor(e,t,r,o,a,l,d){super(e,r,o,d),this.cacheConfig=t,this.logger=o,this.internalStorage=new hh,this.browserStorage=aw(e,t.cacheLocation,o,a),this.temporaryCacheStorage=aw(e,t.temporaryCacheLocation,o,a),this.cookieStorage=new CE,this.performanceClient=a,this.eventHandler=l}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(t);return!r||!Wn.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):op.toObject(new Wn,r)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey();await de(this.browserStorage.setUserData.bind(this.browserStorage),q.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t);const o=this.addAccountKeyToMap(r);this.cacheConfig.cacheLocation===An.LocalStorage&&o&&this.eventHandler.emitEvent(De.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return gp(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const t=this.getAccountKeys();return t.indexOf(e)===-1?(t.push(e),this.browserStorage.setItem(eo.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.browserStorage.setItem(eo.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===An.LocalStorage&&this.eventHandler.emitEvent(De.ACCOUNT_REMOVED,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,tt.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,tt.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,tt.REFRESH_TOKEN)}getTokenKeys(){return xp(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(t){case tt.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case tt.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case tt.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),ve(rp)}this.browserStorage.setItem(`${eo.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(t){case tt.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case tt.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const a=r.accessToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case tt.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const l=r.refreshToken.indexOf(e);l>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(l,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),ve(rp)}this.browserStorage.setItem(`${eo.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,tt.ID_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!B2(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,tt.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=Ka(e);await de(this.browserStorage.setUserData.bind(this.browserStorage),q.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,tt.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,tt.ACCESS_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!F2(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,tt.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=Ka(e);await de(this.browserStorage.setUserData.bind(this.browserStorage),q.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,tt.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,tt.REFRESH_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!L2(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,tt.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=Ka(e);await de(this.browserStorage.setUserData.bind(this.browserStorage),q.SetUserData,this.logger,this.performanceClient)(r,JSON.stringify(e),t),this.addTokenKey(r,tt.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!G2(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=W2(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!K2(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&Y2(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Yc.WRAPPER_SKU,e),this.internalStorage.setItem(Yc.WRAPPER_VER,t)}getWrapperMetadata(){const e=this.internalStorage.getItem(Yc.WRAPPER_SKU)||le.EMPTY_STRING,t=this.internalStorage.getItem(Yc.WRAPPER_VER)||le.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(jv.ACTIVE_ACCOUNT_FILTERS),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(jv.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(r))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(De.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!q2(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const a=this.cookieStorage.getItem(r);if(a)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),a}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===An.LocalStorage){const a=this.browserStorage.getItem(r);if(a)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),a}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(le.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(le.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(q.ClearTokensAndKeysWithClaims,t);const r=this.getTokenKeys(),o=[];r.accessToken.forEach(a=>{const l=this.getAccessTokenCredential(a);l!=null&&l.requestedClaimsHash&&a.includes(l.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(a))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):os.startsWith(e,le.CACHE_PREFIX)?e:`${le.CACHE_PREFIX}.${this.clientId}.${e}`}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(sn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(sn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(sn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(sn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(sn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=ul(JSON.stringify(e));if(this.setTemporaryCache(sn.REQUEST_PARAMS,r,!0),t){const o=ul(t);this.setTemporaryCache(sn.VERIFIER,o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(sn.REQUEST_PARAMS,!0);if(!e)throw Ie(Sd);const t=this.getTemporaryCache(sn.VERIFIER,!0);let r,o="";try{r=JSON.parse(Hr(e)),t&&(o=Hr(t))}catch(a){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${a}`),Ie(kd)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(sn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const t=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${le.CACHE_PREFIX}.${sn.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),xE(window),null}}setInteractionInProgress(e,t=Zs.SIGNIN){var o;const r=`${le.CACHE_PREFIX}.${sn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Ie(gd);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&((o=this.getInteractionInProgress())==null?void 0:o.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,t){var d,h,f;const r=th((d=e.account)==null?void 0:d.homeAccountId,(h=e.account)==null?void 0:h.environment,e.idToken,this.clientId,e.tenantId);let o;t.claims&&(o=await this.cryptoImpl.hashString(t.claims));const a=nh((f=e.account)==null?void 0:f.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Lv(e.expiresOn):0,e.extExpiresOn?Lv(e.extExpiresOn):0,Hr,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),l={idToken:r,accessToken:a};return this.saveCacheRecord(l,e.correlationId)}async saveCacheRecord(e,t,r){try{await super.saveCacheRecord(e,t,r)}catch(o){if(o instanceof Ai&&this.performanceClient&&t)try{const a=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},t)}catch{}throw o}}}function aw(n,e,t,r){try{switch(e){case An.LocalStorage:return new vR(n,t,r);case An.SessionStorage:return new wR;case An.MemoryStorage:default:break}}catch(o){t.error(o)}return new hh}const CR=(n,e,t,r)=>{const o={cacheLocation:An.MemoryStorage,temporaryCacheLocation:An.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new yp(n,o,sd,e,t,r)};/*! @azure/msal-browser v4.12.0 2025-05-06 */function bR(n,e,t,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r):[]}function ER(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;const r=t.getAccountInfoFilteredBy(n);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function SR(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;const r=t.getAccountInfoFilteredBy({username:n});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function kR(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=t.getAccountInfoFilteredBy({homeAccountId:n});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function TR(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const r=t.getAccountInfoFilteredBy({localAccountId:n});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function AR(n,e){e.setActiveAccount(n)}function _R(n){return n.getActiveAccount()}/*! @azure/msal-browser v4.12.0 2025-05-06 */const NR="msal.broadcast.event";class IR{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Ts({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(NR)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){const o=r||aR();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){var l;const a={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case De.ACCOUNT_ADDED:case De.ACCOUNT_REMOVED:case De.ACTIVE_ACCOUNT_CHANGED:(l=this.broadcastChannel)==null||l.postMessage(a);break;default:this.invokeCallbacks(a);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class bE{constructor(e,t,r,o,a,l,d,h,f){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=a,this.navigationClient=l,this.nativeMessageHandler=h,this.correlationId=f||Vr(),this.logger=o.clone(tr.MSAL_SKU,Tl,this.correlationId),this.performanceClient=d}async clearCacheOnLogout(e){if(e){Wn.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(Wn.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return ct.getAbsoluteUrl(t,bs())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new nl(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(q.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.requestAuthority||this.config.auth.authority,l=r!=null&&r.length?r==="true":this.config.auth.instanceAware,d=t&&l?this.config.auth.authority.replace(ct.getDomainFromUrl(a),t.environment):a,h=Pn.generateAuthority(d,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),f=await de(Qb,q.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(h,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!f.isAlias(t.environment))throw xt(_b);return f}}/*! @azure/msal-browser v4.12.0 2025-05-06 */async function qm(n,e,t,r){t.addQueueMeasurement(q.InitializeBaseRequest,n.correlationId);const o=n.authority||e.auth.authority,a=[...n&&n.scopes||[]],l={...n,correlationId:n.correlationId,authority:o,scopes:a};if(!l.authenticationScheme)l.authenticationScheme=wt.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(l.authenticationScheme===wt.SSH){if(!n.sshJwk)throw xt(oh);if(!n.sshKid)throw xt(kb)}r.verbose(`Authentication Scheme set to "${l.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!os.isEmptyObj(n.claims)&&(l.requestedClaimsHash=await gE(n.claims)),l}async function RR(n,e,t,r,o){r.addQueueMeasurement(q.InitializeSilentRequest,n.correlationId);const a=await de(qm,q.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return{...n,...a,account:e,forceRefresh:n.forceRefresh||!1}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class Ki extends bE{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const t={correlationId:this.correlationId||Vr(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=ct.getAbsoluteUrl(e.postLogoutRedirectUri,bs())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=ct.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,bs())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=ct.getAbsoluteUrl(bs(),bs())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(q.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const t=await de(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new eE(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:a,account:l}=e;this.performanceClient.addQueueMeasurement(q.StandardInteractionClientGetClientConfiguration,this.correlationId);const d=await de(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:a,account:l}),h=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:d,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:h.loggerCallback,piiLoggingEnabled:h.piiLoggingEnabled,logLevel:h.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:tr.MSAL_SKU,version:Tl,cpu:le.EMPTY_STRING,os:le.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(q.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),o={interactionType:t},a=zi.setRequestState(this.browserCrypto,e&&e.state||le.EMPTY_STRING,o),d={...await de(qm,q.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:a,nonce:e.nonce||Vr(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return d;const h=e.account||this.browserStorage.getActiveAccount();return h&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${h.homeAccountId}`,this.correlationId),d.account=h),d}}/*! @azure/msal-browser v4.12.0 2025-05-06 */const DR="ContentError",EE="user_switch";/*! @azure/msal-browser v4.12.0 2025-05-06 */const PR="USER_INTERACTION_REQUIRED",jR="USER_CANCEL",MR="NO_NETWORK",OR="PERSISTENT_ERROR",FR="DISABLED",BR="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v4.12.0 2025-05-06 */const LR=-2147186943,HR={[EE]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class rs extends Tt{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,rs.prototype),this.name="NativeAuthError",this.ext=r}}function yi(n){if(n.ext&&n.ext.status&&(n.ext.status===OR||n.ext.status===FR)||n.ext&&n.ext.error&&n.ext.error===LR)return!0;switch(n.errorCode){case DR:return!0;default:return!1}}function vp(n,e,t){if(t&&t.status)switch(t.status){case BR:return ap(Jb);case PR:return new zr(n,e);case jR:return Ie(Ho);case MR:return Ie(ji)}return new rs(n,HR[n]||e,t)}/*! @azure/msal-browser v4.12.0 2025-05-06 */class ss{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(q.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:vi.CHANNEL_ID,extensionId:this.extensionId,responseId:Vr(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,o)=>{this.resolvers.set(t.responseId,{resolve:r,reject:o})})}static async createProvider(e,t,r){e.trace("NativeMessageHandler - createProvider called.");try{const o=new ss(e,t,r,vi.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{const a=new ss(e,t,r);return await a.sendHandshakeRequest(),a}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:vi.CHANNEL_ID,extensionId:this.extensionId,responseId:Vr(),body:{method:_o.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Ie(Pd)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(!(!t.channel||t.channel!==vi.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===_o.HandshakeRequest){const r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Ie(jd))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const a=t.body.method;if(a===_o.Response){if(!r)return;const l=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(l)}`),l.status!=="Success")r.reject(vp(l.code,l.description,l.ext));else if(l.result)l.result.code&&l.result.description?r.reject(vp(l.result.code,l.result.description,l.result.ext)):r.resolve(l.result);else throw GC(om,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(a===_o.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(a){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${a}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(a):o&&o.reject(a)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,r,o){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!r)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(o)switch(o){case wt.BEARER:case wt.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v4.12.0 2025-05-06 */function UR(n,e){if(!e)return null;try{return zi.parseRequestState(n,e).libraryState.meta}catch{throw ve(Ni)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */function Hd(n,e,t){const r=id(n);if(!r)throw Ib(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),Ie(fd)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Ie(hd));return r}function $R(n,e,t){if(!n.state)throw Ie(ol);const r=UR(e,n.state);if(!r)throw Ie(pd);if(r.interactionType!==t)throw Ie(md)}/*! @azure/msal-browser v4.12.0 2025-05-06 */class SE{constructor(e,t,r,o,a){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=a}async handleCodeResponse(e,t){this.performanceClient.addQueueMeasurement(q.HandleCodeResponse,t.correlationId);let r;try{r=AI(e,t.state)}catch(o){throw o instanceof Vo&&o.subError===Ho?Ie(Ho):o}return de(this.handleCodeResponseFromServer.bind(this),q.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(q.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await de(this.authModule.updateAuthority.bind(this.authModule),q.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const a=this.createCcsCredentials(t);a&&(this.authCodeRequest.ccsCredential=a)}return await de(this.authModule.acquireToken.bind(this.authModule),q.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Br.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Br.UPN}:null}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class kE extends Ki{async acquireToken(e){this.performanceClient.addQueueMeasurement(q.SilentCacheClientAcquireToken,e.correlationId);const t=this.initializeServerTelemetryManager(Ct.acquireTokenSilent_silentFlow),r=await de(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new SI(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const l=(await de(o.acquireCachedToken.bind(o),q.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),l}catch(a){throw a instanceof kl&&a.errorCode===al&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),a}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t==null?void 0:t.account)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class hu extends bE{constructor(e,t,r,o,a,l,d,h,f,p,y,x){var w;super(e,t,r,o,a,l,h,f,x),this.apiId=d,this.accountId=p,this.nativeMessageHandler=f,this.nativeStorageManager=y,this.silentCacheClient=new kE(e,this.nativeStorageManager,r,o,a,l,h,f,x);const C=this.nativeMessageHandler.getExtensionId()===vi.PREFERRED_EXTENSION_ID?"chrome":(w=this.nativeMessageHandler.getExtensionId())!=null&&w.length?"unknown":void 0;this.skus=nl.makeExtraSkuString({libraryName:tr.MSAL_SKU,libraryVersion:Tl,extensionName:C,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[KN]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(q.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(q.NativeInteractionClientAcquireToken,e.correlationId),o=mr(),a=this.initializeServerTelemetryManager(this.apiId);try{const l=await this.initializeNativeRequest(e);try{const y=await this.acquireTokensFromCache(this.accountId,l);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),y}catch(y){if(t===Vn.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),y;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...d}=l,h={method:_o.GetToken,request:d},f=await this.nativeMessageHandler.sendMessage(h),p=this.validateNativeResponse(f);return await this.handleNativeResponse(p,l,o).then(y=>(r.end({success:!0,isNativeBroker:!0,requestId:y.requestId}),a.clearNativeBrokerErrorCode(),y)).catch(y=>{throw r.end({success:!1,errorCode:y.errorCode,subErrorCode:y.subError,isNativeBroker:!0}),y})}catch(l){throw l instanceof rs&&a.setNativeBrokerErrorCode(l.errorCode),l}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Jt.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ve(tp);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw ve(tp);try{const o=this.createSilentCacheRequest(t,r),a=await this.silentCacheClient.acquireToken(o),l={...r,idTokenClaims:a==null?void 0:a.idTokenClaims,idToken:a==null?void 0:a.idToken};return{...a,account:l}}catch(o){throw o}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const o=await this.initializeNativeRequest(r),a={method:_o.GetToken,request:o};try{const h=await this.nativeMessageHandler.sendMessage(a);this.validateNativeResponse(h)}catch(h){if(h instanceof rs&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(h.errorCode),yi(h)))throw h}this.browserStorage.setTemporaryCache(sn.NATIVE_REQUEST,JSON.stringify(o),!0);const l={apiId:Ct.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(d,l)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(e==null||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:o,...a}=r;o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(sn.NATIVE_REQUEST));const l={method:_o.GetToken,request:a},d=mr();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const h=await this.nativeMessageHandler.sendMessage(l);this.validateNativeResponse(h);const p=await this.handleNativeResponse(h,a,d);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),p}catch(h){throw h}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){var p,y;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=$i(e.id_token,Hr),a=this.createHomeAccountIdentifier(e,o),l=(p=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))==null?void 0:p.homeAccountId;if((y=t.extraParameters)!=null&&y.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(a!==l&&e.account.id!==t.accountId)throw vp(EE);const d=await this.getDiscoveredAuthority({requestAuthority:t.authority}),h=Pm(this.browserStorage,d,a,Hr,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const f=await this.generateAuthenticationResult(e,t,o,h,d.canonicalAuthority,r);return await this.cacheAccount(h),await this.cacheNativeTokens(e,t,a,o,e.access_token,f.tenantId,r),f}createHomeAccountIdentifier(e,t){return Wn.generateHomeAccountId(e.client_info||le.EMPTY_STRING,Or.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?Jt.fromString(e.scope):Jt.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===wt.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Ii(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw ve(dm);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,t,r,o,a,l){const d=this.addTelemetryFromNativeResponse(e),h=e.scope?Jt.fromString(e.scope):Jt.fromString(t.scope),f=e.account.properties||{},p=f.UID||r.oid||r.sub||le.EMPTY_STRING,y=f.TenantId||r.tid||le.EMPTY_STRING,x=vm(o.getAccountInfo(),void 0,r,e.id_token);x.nativeAccountId!==e.account.id&&(x.nativeAccountId=e.account.id);const C=await this.generatePopAccessToken(e,t),w=t.tokenType===wt.POP?wt.POP:wt.BEARER;return{authority:a,uniqueId:p,tenantId:y,scopes:h.asArray(),account:x,idToken:e.id_token,idTokenClaims:r,accessToken:C,fromCache:d?this.isResponseFromCache(d):!1,expiresOn:ki(l+e.expires_in),tokenType:w,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,a,l,d){const h=th(r,t.authority,e.id_token||"",t.clientId,o.tid||""),f=t.tokenType===wt.POP?le.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,p=d+f,y=this.generateScopes(e,t),x=nh(r,t.authority,a,t.clientId,o.tid||l,y.printScopes(),p,0,Hr,void 0,t.tokenType,void 0,t.keyId),C={idToken:h,accessToken:x};return this.nativeStorageManager.saveCacheRecord(C,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw GC(om,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new ct(t);r.validateAsUri();const{scopes:o,...a}=e,l=new Jt(o||[]);l.appendScopes(Sl);const d=()=>{switch(this.apiId){case Ct.ssoSilent:case Ct.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Tn.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case Tn.NONE:case Tn.CONSENT:case Tn.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Ie(Md)}},h={...a,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:l.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:d(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(h.signPopToken&&e.popKid)throw Ie(Fd);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=vi.MATS_TELEMETRY,e.authenticationScheme===wt.POP){const f={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},p=new Ii(this.browserCrypto);let y;if(h.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const x=await de(p.generateCnf.bind(p),q.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(f,this.logger);y=x.reqCnfString,h.keyId=x.kid,h.signPopToken=!0}h.reqCnf=y}return this.addRequestSKUs(h),h}handleExtraBrokerParams(e){var a;const t=e.extraParameters&&e.extraParameters.hasOwnProperty(ld)&&e.extraParameters.hasOwnProperty(cd)&&e.extraParameters.hasOwnProperty(Bo);if(!e.embeddedClientId&&!t)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[cd],r=e.extraParameters[Bo]),e.extraParameters={child_client_id:r,child_redirect_uri:o},(a=this.performanceClient)==null||a.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */async function TE(n,e,t,r,o){const a=TI({...n.auth,authority:e},t,r,o);if(Am(a,{sku:tr.MSAL_SKU,version:Tl,os:"",cpu:""}),n.auth.protocolMode!==pr.OIDC&&_m(a,n.telemetry.application),t.platformBroker&&(YN(a),t.authenticationScheme===wt.POP)){const l=new As(r,o),d=new Ii(l);let h;t.popKid?h=l.encodeKid(t.popKid):h=(await de(d.generateCnf.bind(d),q.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,Im(a,h)}return ih(a,t.correlationId,o),a}async function Wm(n,e,t,r,o){if(!t.codeChallenge)throw xt(sh);const a=await de(TE,q.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return Lb(a,qC.CODE),tI(a,t.codeChallenge,le.S256_CODE_CHALLENGE_METHOD),Do(a,t.extraQueryParameters||{}),tE(e,a,n.auth.encodeExtraQueryParams,t.extraQueryParameters)}async function Gm(n,e,t,r,o,a){if(!r.earJwk)throw Ie(Om);const l=await TE(e,t,r,o,a);Lb(l,qC.IDTOKEN_TOKEN_REFRESHTOKEN),aI(l,r.earJwk);const d=new Map;Do(d,r.extraQueryParameters||{});const h=tE(t,d,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return zR(n,h,l)}function zR(n,e,t){const r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,a)=>{const l=n.createElement("input");l.hidden=!0,l.name=a,l.value=o,r.appendChild(l)}),n.body.appendChild(r),r}async function AE(n,e,t,r,o,a,l,d,h,f){if(!f)throw Ie(cl);const p=new As(d,h),y=new hu(r,o,p,d,l,r.system.navigationClient,t,h,f,e,a,n.correlationId),{userRequestState:x}=zi.parseRequestState(p,n.state);return de(y.acquireToken.bind(y),q.NativeInteractionClientAcquireToken,d,h,n.correlationId)({...n,state:x,prompt:void 0})}async function Ym(n,e,t,r,o,a,l,d,h,f,p,y){if(ns.removeThrottle(l,o.auth.clientId,n),e.accountId)return de(AE,q.HandleResponsePlatformBroker,f,p,n.correlationId)(n,e.accountId,r,o,l,d,h,f,p,y);const x={...n,code:e.code||"",codeVerifier:t},C=new SE(a,l,x,f,p);return await de(C.handleCodeResponse.bind(C),q.HandleCodeResponse,f,p,n.correlationId)(e,n)}async function Qm(n,e,t,r,o,a,l,d,h,f,p){if(ns.removeThrottle(a,r.auth.clientId,n),nE(e,n.state),!e.ear_jwe)throw Ie(iE);if(!n.earJwk)throw Ie(Om);const y=JSON.parse(await de(XI,q.DecryptEarResponse,h,f,n.correlationId)(n.earJwk,e.ear_jwe));if(y.accountId)return de(AE,q.HandleResponsePlatformBroker,h,f,n.correlationId)(n,y.accountId,t,r,a,l,d,h,f,p);const x=new Lo(r.auth.clientId,a,new As(h,f),h,null,null,f);x.validateTokenResponse(y);const C={code:"",state:n.state,nonce:n.nonce,client_info:y.client_info,cloud_graph_host_name:y.cloud_graph_host_name,cloud_instance_host_name:y.cloud_instance_host_name,cloud_instance_name:y.cloud_instance_name,msgraph_host:y.msgraph_host};return await de(x.handleServerTokenResponse.bind(x),q.HandleServerTokenResponse,h,f,n.correlationId)(y,o,mr(),n,C,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.12.0 2025-05-06 */const VR=32;async function fh(n,e,t){n.addQueueMeasurement(q.GeneratePkceCodes,t);const r=$r(KR,q.GenerateCodeVerifier,e,n,t)(n,e,t),o=await de(qR,q.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}}function KR(n,e,t){try{const r=new Uint8Array(VR);return $r(WI,q.GetRandomValues,e,n,t)(r),oo(r)}catch{throw Ie(rl)}}async function qR(n,e,t,r){e.addQueueMeasurement(q.GenerateCodeChallengeFromVerifier,r);try{const o=await de(fE,q.Sha256Digest,t,e,r)(n,e,r);return oo(new Uint8Array(o))}catch{throw Ie(rl)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class WR extends Ki{constructor(e,t,r,o,a,l,d,h,f,p){super(e,t,r,o,a,l,d,f,p),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=h,this.eventHandler=a}acquireToken(e,t){try{const o={popupName:this.generatePopupName(e.scopes||Sl,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(e,o,t))}catch(r){return Promise.reject(r)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},o=e&&e.authority,a=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,a)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,a))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,r){this.logger.verbose("acquireTokenPopupAsync called");const o=await de(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,$e.Popup);t.popup&&wE(o.authority);const a=ss.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);return o.platformBroker=a,this.config.auth.protocolMode===pr.EAR?this.executeEarFlow(o,t):this.executeCodeFlow(o,t,r)}async executeCodeFlow(e,t,r){var h;const o=e.correlationId,a=this.initializeServerTelemetryManager(Ct.acquireTokenPopup),l=r||await de(fh,q.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),d={...e,codeChallenge:l.challenge};try{const f=await de(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:a,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),p=await de(Wm,q.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,f.authority,d,this.logger,this.performanceClient),y=this.initiateAuthRequest(p,t);this.eventHandler.emitEvent(De.POPUP_OPENED,$e.Popup,{popupWindow:y},null);const x=await this.monitorPopupForHash(y,t.popupWindowParent),C=$r(Hd,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(x,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await de(Ym,q.HandleResponseCode,this.logger,this.performanceClient,o)(e,C,l.verifier,Ct.acquireTokenPopup,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}catch(f){throw(h=t.popup)==null||h.close(),f instanceof Tt&&(f.setCorrelationId(this.correlationId),a.cacheFailedRequest(f)),f}}async executeEarFlow(e,t){const r=e.correlationId,o=await de(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await de(Um,q.GenerateEarKey,this.logger,this.performanceClient,r)(),l={...e,earJwk:a},d=t.popup||this.openPopup("about:blank",t);(await Gm(d.document,this.config,o,l,this.logger,this.performanceClient)).submit();const f=await de(this.monitorPopupForHash.bind(this),q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(d,t.popupWindowParent),p=$r(Hd,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);return de(Qm,q.HandleResponseEar,this.logger,this.performanceClient,r)(l,p,Ct.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async logoutPopupAsync(e,t,r,o){var l,d,h,f;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(De.LOGOUT_START,$e.Popup,e);const a=this.initializeServerTelemetryManager(Ct.logoutPopup);try{await this.clearCacheOnLogout(e.account);const p=await de(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:r,account:e.account||void 0});try{p.authority.endSessionEndpoint}catch{if((l=e.account)!=null&&l.homeAccountId&&e.postLogoutRedirectUri&&p.authority.protocolMode===pr.OIDC){if(this.browserStorage.removeAccount((d=e.account)==null?void 0:d.homeAccountId),this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,$e.Popup,e),o){const C={apiId:Ct.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},w=ct.getAbsoluteUrl(o,bs());await this.navigationClient.navigateInternal(w,C)}(h=t.popup)==null||h.close();return}}const y=p.getLogoutUri(e);this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,$e.Popup,e);const x=this.openPopup(y,t);if(this.eventHandler.emitEvent(De.POPUP_OPENED,$e.Popup,{popupWindow:x},null),await this.monitorPopupForHash(x,t.popupWindowParent).catch(()=>{}),o){const C={apiId:Ct.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},w=ct.getAbsoluteUrl(o,bs());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${w}`),await this.navigationClient.navigateInternal(w,C)}else this.logger.verbose("No main window navigation requested")}catch(p){throw(f=t.popup)==null||f.close(),p instanceof Tt&&(p.setCorrelationId(this.correlationId),a.cacheFailedRequest(p)),this.eventHandler.emitEvent(De.LOGOUT_FAILURE,$e.Popup,null,p),this.eventHandler.emitEvent(De.LOGOUT_END,$e.Popup),p}this.eventHandler.emitEvent(De.LOGOUT_END,$e.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Ie(Ri)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const a=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(a),o(Ie(Ho));return}let l="";try{l=e.location.href}catch{}if(!l||l==="about:blank")return;clearInterval(a);let d="";const h=this.config.auth.OIDCOptions.serverResponseType;e&&(h===eh.QUERY?d=e.location.search:d=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(d)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw Ie(yd);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),Ie(xd)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){var C,w,E,S;const a=o.screenLeft?o.screenLeft:o.screenX,l=o.screenTop?o.screenTop:o.screenY,d=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let f=(C=r.popupSize)==null?void 0:C.width,p=(w=r.popupSize)==null?void 0:w.height,y=(E=r.popupPosition)==null?void 0:E.top,x=(S=r.popupPosition)==null?void 0:S.left;return(!f||f<0||f>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),f=tr.POPUP_WIDTH),(!p||p<0||p>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),p=tr.POPUP_HEIGHT),(!y||y<0||y>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),y=Math.max(0,h/2-tr.POPUP_HEIGHT/2+l)),(!x||x<0||x>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),x=Math.max(0,d/2-tr.POPUP_WIDTH/2+a)),o.open(e,t,`width=${f}, height=${p}, top=${y}, left=${x}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${tr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${tr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}/*! @azure/msal-browser v4.12.0 2025-05-06 */function GR(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const n=window.performance.getEntriesByType("navigation"),e=n.length?n[0]:void 0;return e==null?void 0:e.type}class YR extends Ki{constructor(e,t,r,o,a,l,d,h,f,p){super(e,t,r,o,a,l,d,f,p),this.nativeStorage=h}async acquireToken(e){const t=await de(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,$e.Redirect);t.platformBroker=ss.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);const r=a=>{a.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(De.RESTORE_FROM_BFCACHE,$e.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${o}`),this.browserStorage.setTemporaryCache(sn.ORIGIN_URI,o,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===pr.EAR?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(a){throw a instanceof Tt&&a.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),a}}async executeCodeFlow(e,t){const r=e.correlationId,o=this.initializeServerTelemetryManager(Ct.acquireTokenRedirect),a=await de(fh,q.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),l={...e,codeChallenge:a.challenge};this.browserStorage.cacheAuthorizeRequest(l,a.verifier);try{const d=await de(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:l.authority,requestAzureCloudOptions:l.azureCloudOptions,requestExtraQueryParameters:l.extraQueryParameters,account:l.account}),h=await de(Wm,q.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,d.authority,l,this.logger,this.performanceClient);return await this.initiateAuthRequest(h,t)}catch(d){throw d instanceof Tt&&(d.setCorrelationId(this.correlationId),o.cacheFailedRequest(d)),d}}async executeEarFlow(e){const t=e.correlationId,r=await de(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await de(Um,q.GenerateEarKey,this.logger,this.performanceClient,t)(),a={...e,earJwk:o};this.browserStorage.cacheAuthorizeRequest(a),(await Gm(document,this.config,r,a,this.logger,this.performanceClient)).submit()}async handleRedirectPromise(e="",t,r,o){const a=this.initializeServerTelemetryManager(Ct.handleRedirectPromise);try{const[l,d]=this.getRedirectResponse(e||"");if(!l)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),GR()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const h=this.browserStorage.getTemporaryCache(sn.ORIGIN_URI,!0)||le.EMPTY_STRING,f=ct.removeHashFromUrl(h),p=ct.removeHashFromUrl(window.location.href);if(f===p&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),h.indexOf("#")>-1&&tR(h),await this.handleResponse(l,t,r,a);if(this.config.auth.navigateToLoginRequestUrl){if(!zm()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(sn.URL_HASH,d,!0);const y={apiId:Ct.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let x=!0;if(!h||h==="null"){const C=rR();this.browserStorage.setTemporaryCache(sn.ORIGIN_URI,C,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),x=await this.navigationClient.navigateInternal(C,y)}else this.logger.verbose(`Navigating to loginRequestUrl: ${h}`),x=await this.navigationClient.navigateInternal(h,y);if(!x)return await this.handleResponse(l,t,r,a)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(l,t,r,a);return null}catch(l){throw l instanceof Tt&&(l.setCorrelationId(this.correlationId),a.cacheFailedRequest(l)),l}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===eh.QUERY?t=window.location.search:t=window.location.hash);let r=id(t);if(r){try{$R(r,this.browserCrypto,$e.Redirect)}catch(a){return a instanceof Tt&&this.logger.error(`Interaction type validation failed due to ${a.errorCode}: ${a.errorMessage}`),[null,""]}return xE(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const o=this.browserStorage.getTemporaryCache(sn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(sn.URL_HASH)),o&&(r=id(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,t,r,o){if(!e.state)throw Ie(ol);if(e.ear_jwe){const d=await de(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return de(Qm,q.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,Ct.acquireTokenRedirect,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}const l=await de(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return de(Ym,q.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,Ct.acquireTokenRedirect,this.config,l,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Ct.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=t||this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Ie(Ri)}async logout(e){var o,a;this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Ct.logout);try{this.eventHandler.emitEvent(De.LOGOUT_START,$e.Redirect,e),await this.clearCacheOnLogout(t.account);const l={apiId:Ct.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=await de(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(d.authority.protocolMode===pr.OIDC)try{d.authority.endSessionEndpoint}catch{if((o=t.account)!=null&&o.homeAccountId){this.browserStorage.removeAccount((a=t.account)==null?void 0:a.homeAccountId),this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,$e.Redirect,t);return}}const h=d.getLogoutUri(t);if(this.eventHandler.emitEvent(De.LOGOUT_SUCCESS,$e.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(h)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Zs.SIGNOUT),await this.navigationClient.navigateExternal(h,l);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Zs.SIGNOUT),await this.navigationClient.navigateExternal(h,l);return}}catch(l){throw l instanceof Tt&&(l.setCorrelationId(this.correlationId),r.cacheFailedRequest(l)),this.eventHandler.emitEvent(De.LOGOUT_FAILURE,$e.Redirect,null,l),this.eventHandler.emitEvent(De.LOGOUT_END,$e.Redirect),l}this.eventHandler.emitEvent(De.LOGOUT_END,$e.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return ct.getAbsoluteUrl(t,bs())}}/*! @azure/msal-browser v4.12.0 2025-05-06 */async function QR(n,e,t,r,o){if(e.addQueueMeasurement(q.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),Ie(Ri);return o?de(XR,q.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):$r(ZR,q.SilentHandlerLoadFrameSync,t,e,r)(n)}async function JR(n,e,t,r,o){const a=Jm();if(!a.contentDocument)throw"No document associated with iframe!";return(await Gm(a.contentDocument,n,e,t,r,o)).submit(),a}async function lw(n,e,t,r,o,a,l){return r.addQueueMeasurement(q.SilentHandlerMonitorIframeForHash,a),new Promise((d,h)=>{e<pp&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${pp}ms). This may result in timeouts.`);const f=window.setTimeout(()=>{window.clearInterval(p),h(Ie(vd))},e),p=window.setInterval(()=>{let y="";const x=n.contentWindow;try{y=x?x.location.href:""}catch{}if(!y||y==="about:blank")return;let C="";x&&(l===eh.QUERY?C=x.location.search:C=x.location.hash),window.clearTimeout(f),window.clearInterval(p),d(C)},t)}).finally(()=>{$r(eD,q.RemoveHiddenIframe,o,r,a)(n)})}function XR(n,e,t,r){return t.addQueueMeasurement(q.SilentHandlerLoadFrame,r),new Promise((o,a)=>{const l=Jm();window.setTimeout(()=>{if(!l){a("Unable to load iframe");return}l.src=n,o(l)},e)})}function ZR(n){const e=Jm();return e.src=n,e}function Jm(){const n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function eD(n){document.body===n.parentNode&&document.body.removeChild(n)}/*! @azure/msal-browser v4.12.0 2025-05-06 */class tD extends Ki{constructor(e,t,r,o,a,l,d,h,f,p,y){super(e,t,r,o,a,l,h,p,y),this.apiId=d,this.nativeStorage=f}async acquireToken(e){this.performanceClient.addQueueMeasurement(q.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==Tn.NONE&&t.prompt!==Tn.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${Tn.NONE}`),t.prompt=Tn.NONE):t.prompt=Tn.NONE;const r=await de(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,$e.Silent);return r.platformBroker=ss.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,r.authenticationScheme),wE(r.authority),this.config.auth.protocolMode===pr.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let t;const r=this.initializeServerTelemetryManager(this.apiId);try{return t=await de(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await de(this.silentTokenHelper.bind(this),q.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(o){if(o instanceof Tt&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),!t||!(o instanceof Tt)||o.errorCode!==tr.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),await de(this.silentTokenHelper.bind(this),q.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,r=await de(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await de(Um,q.GenerateEarKey,this.logger,this.performanceClient,t)(),a={...e,earJwk:o},l=await de(JR,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,a,this.logger,this.performanceClient),d=this.config.auth.OIDCOptions.serverResponseType,h=await de(lw,q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(l,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,d),f=$r(Hd,q.DeserializeResponse,this.logger,this.performanceClient,t)(h,d,this.logger);return de(Qm,q.HandleResponseEar,this.logger,this.performanceClient,t)(a,f,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}logout(){return Promise.reject(Ie(Di))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(q.SilentIframeClientTokenHelper,r);const o=await de(fh,q.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),a={...t,codeChallenge:o.challenge},l=await de(Wm,q.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,a,this.logger,this.performanceClient),d=await de(QR,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(l,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),h=this.config.auth.OIDCOptions.serverResponseType,f=await de(lw,q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,h),p=$r(Hd,q.DeserializeResponse,this.logger,this.performanceClient,r)(f,h,this.logger);return de(Ym,q.HandleResponseCode,this.logger,this.performanceClient,r)(t,p,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class nD extends Ki{async acquireToken(e){this.performanceClient.addQueueMeasurement(q.SilentRefreshClientAcquireToken,e.correlationId);const t=await de(qm,q.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(Ct.acquireTokenSilent_silentFlow),a=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return de(a.acquireTokenByRefreshToken.bind(a),q.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(l=>{throw l.setCorrelationId(this.correlationId),o.cacheFailedRequest(l),l})}logout(){return Promise.reject(Ie(Di))}async createRefreshTokenClient(e){const t=await de(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new EI(t,this.performanceClient)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class rD{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw Ie(Pi);const o=e.correlationId||Vr(),a=t.id_token?$i(t.id_token,Hr):void 0,l={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},d=e.authority?new Pn(Pn.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,l,this.logger,e.correlationId||Vr()):void 0,h=await this.loadAccount(e,r.clientInfo||t.client_info||"",o,a,d),f=await this.loadIdToken(t,h.homeAccountId,h.environment,h.realm,o),p=await this.loadAccessToken(e,t,h.homeAccountId,h.environment,h.realm,r,o),y=await this.loadRefreshToken(t,h.homeAccountId,h.environment,o);return this.generateAuthenticationResult(e,{account:h,idToken:f,accessToken:p,refreshToken:y},a,d)}async loadAccount(e,t,r,o,a){if(this.logger.verbose("TokenCache - loading account"),e.account){const f=Wn.createFromAccountInfo(e.account);return await this.storage.setAccount(f,r),f}else if(!a||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Ie(_d);const l=Wn.generateHomeAccountId(t,a.authorityType,this.logger,this.cryptoObj,o),d=o==null?void 0:o.tid,h=Pm(this.storage,a,l,Hr,o,t,a.hostnameAndPort,d,void 0,void 0,this.logger);return await this.storage.setAccount(h,r),h}async loadIdToken(e,t,r,o,a){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const l=th(t,r,e.id_token,this.config.auth.clientId,o);return await this.storage.setIdTokenCredential(l,a),l}async loadAccessToken(e,t,r,o,a,l,d){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const h=t.scope?Jt.fromString(t.scope):new Jt(e.scopes),f=l.expiresOn||t.expires_in+mr(),p=l.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+mr(),y=nh(r,o,t.access_token,this.config.auth.clientId,a,h.printScopes(),f,p,Hr);return await this.storage.setAccessTokenCredential(y,d),y}async loadRefreshToken(e,t,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const a=pb(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(a,o),a}generateAuthenticationResult(e,t,r,o){var p,y,x;let a="",l=[],d=null,h;t!=null&&t.accessToken&&(a=t.accessToken.secret,l=Jt.fromString(t.accessToken.target).asArray(),d=ki(t.accessToken.expiresOn),h=ki(t.accessToken.extendedExpiresOn));const f=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:l,account:f.getAccountInfo(),idToken:((p=t.idToken)==null?void 0:p.secret)||"",idTokenClaims:r||{},accessToken:a,fromCache:!0,expiresOn:d,correlationId:e.correlationId||"",requestId:"",extExpiresOn:h,familyId:((y=t.refreshToken)==null?void 0:y.familyId)||"",tokenType:((x=t==null?void 0:t.accessToken)==null?void 0:x.tokenType)||"",state:e.state||"",cloudGraphHostName:f.cloudGraphHostName||"",msGraphHost:f.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class sD extends eE{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.12.0 2025-05-06 */class oD extends Ki{constructor(e,t,r,o,a,l,d,h,f,p){super(e,t,r,o,a,l,h,f,p),this.apiId=d}async acquireToken(e){if(!e.code)throw Ie(Nd);const t=await de(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,$e.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const o={...t,code:e.code},a=await de(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),l=new sD(a);this.logger.verbose("Auth code client created");const d=new SE(l,this.browserStorage,o,this.logger,this.performanceClient);return await de(d.handleCodeResponseFromServer.bind(d),q.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof Tt&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(Ie(Di))}}/*! @azure/msal-browser v4.12.0 2025-05-06 */function iD(n,e,t){var l;const r=((l=window.msal)==null?void 0:l.clientIds)||[],o=r.length,a=r.filter(d=>d===n).length;a>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:a})}/*! @azure/msal-browser v4.12.0 2025-05-06 */function es(n){const e=n==null?void 0:n.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function Jc(n,e){try{Vm(n)}catch(t){throw e.end({success:!1},t),t}}class ph{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new As(this.logger,this.performanceClient):sd,this.eventHandler=new IR(this.logger),this.browserStorage=this.isBrowserEnvironment?new yp(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,fI(this.config.auth)):CR(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const t={cacheLocation:An.MemoryStorage,temporaryCacheLocation:An.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new yp(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new rD(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const r=new ph(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(De.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,a=this.performanceClient.startMeasurement(q.InitializeClientApplication,r);if(this.eventHandler.emitEvent(De.INITIALIZE_START),!t)try{this.logMultipleInstances(a)}catch{}if(await de(this.browserStorage.initialize.bind(this.browserStorage),q.InitializeCache,this.logger,this.performanceClient,r)(r),o)try{this.nativeExtensionProvider=await ss.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(l){this.logger.verbose(l)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await de(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),q.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(this.performanceClient,r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(De.INITIALIZE_END),a.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),vE(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var h;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((h=this.browserStorage.getInteractionInProgress())==null?void 0:h.type)===Zs.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),a=o&&ss.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e;let l;this.eventHandler.emitEvent(De.HANDLE_REDIRECT_START,$e.Redirect);let d;try{if(a&&this.nativeExtensionProvider){l=this.performanceClient.startMeasurement(q.AcquireTokenRedirect,(o==null?void 0:o.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const f=new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ct.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,o.accountId,this.nativeInternalStorage,o.correlationId);d=de(f.handleRedirectPromise.bind(f),q.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,l.event.correlationId)(this.performanceClient,l.event.correlationId)}else{const[f,p]=this.browserStorage.getCachedRequest(),y=f.correlationId;l=this.performanceClient.startMeasurement(q.AcquireTokenRedirect,y),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const x=this.createRedirectClient(y);d=de(x.handleRedirectPromise.bind(x),q.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,l.event.correlationId)(e,f,p,l)}}catch(f){throw this.browserStorage.resetRequestCache(),f}return d.then(f=>(f?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(De.LOGIN_SUCCESS,$e.Redirect,f),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_SUCCESS,$e.Redirect,f),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),l.end({success:!0,accountType:es(f.account)})):l.event.errorCode?l.end({success:!1}):l.discard(),this.eventHandler.emitEvent(De.HANDLE_REDIRECT_END,$e.Redirect),f)).catch(f=>{this.browserStorage.resetRequestCache();const p=f;throw r.length>0?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,$e.Redirect,null,p):this.eventHandler.emitEvent(De.LOGIN_FAILURE,$e.Redirect,null,p),this.eventHandler.emitEvent(De.HANDLE_REDIRECT_END,$e.Redirect),l.end({success:!1},p),f})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement(q.AcquireTokenPreRedirect,t);r.add({accountType:es(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=l=>{const d=typeof o=="function"?o(l):void 0;return d!==!1?r.end({success:!0}):r.discard(),d};else{const l=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=d=>{const h=typeof l=="function"?l(d):void 0;return h!==!1?r.end({success:!0}):r.discard(),h}}const a=this.getAllAccounts().length>0;try{nw(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Zs.SIGNIN),a?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_START,$e.Redirect,e):this.eventHandler.emitEvent(De.LOGIN_START,$e.Redirect,e);let l;return this.nativeExtensionProvider&&this.canUsePlatformBroker(e)?l=new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ct.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(h=>{if(h instanceof rs&&yi(h))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(h instanceof zr)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw h}):l=this.createRedirectClient(t).acquireToken(e),await l}catch(l){throw this.browserStorage.resetRequestCache(),r.end({success:!1},l),a?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,$e.Redirect,null,l):this.eventHandler.emitEvent(De.LOGIN_FAILURE,$e.Redirect,null,l),l}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(q.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:es(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),Jc(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,Zs.SIGNIN)}catch(d){return Promise.reject(d)}const o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_START,$e.Popup,e):this.eventHandler.emitEvent(De.LOGIN_START,$e.Popup,e);let a;const l=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?a=this.acquireTokenNative({...e,correlationId:t},Ct.acquireTokenPopup).then(d=>(r.end({success:!0,isNativeBroker:!0,accountType:es(d.account)}),d)).catch(d=>{if(d instanceof rs&&yi(d))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e,l);if(d instanceof zr)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,l);throw d}):a=this.createPopupClient(t).acquireToken(e,l),a.then(d=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(De.LOGIN_SUCCESS,$e.Popup,d):this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_SUCCESS,$e.Popup,d),r.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length,accountType:es(d.account)}),d)).catch(d=>(o.length>0?this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,$e.Popup,null,d):this.eventHandler.emitEvent(De.LOGIN_FAILURE,$e.Popup,null,d),r.end({success:!1},d),Promise.reject(d))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var a,l;const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(q.SsoSilent,t),(a=this.ssoSilentMeasurement)==null||a.add({scenarioId:e.scenarioId,accountType:es(e.account)}),Jc(this.initialized,this.ssoSilentMeasurement),(l=this.ssoSilentMeasurement)==null||l.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(De.SSO_SILENT_START,$e.Silent,r);let o;return this.canUsePlatformBroker(r)?o=this.acquireTokenNative(r,Ct.ssoSilent).catch(d=>{if(d instanceof rs&&yi(d))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw d}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(d=>{var h;return this.eventHandler.emitEvent(De.SSO_SILENT_SUCCESS,$e.Silent,d),(h=this.ssoSilentMeasurement)==null||h.end({success:!0,isNativeBroker:d.fromNativeBroker,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length,accountType:es(d.account)}),d}).catch(d=>{var h;throw this.eventHandler.emitEvent(De.SSO_SILENT_FAILURE,$e.Silent,null,d),(h=this.ssoSilentMeasurement)==null||h.end({success:!1},d),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(q.AcquireTokenByCode,t);Jc(this.initialized,r),this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_START,$e.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Ie(Rd);if(e.code){const o=e.code;let a=this.hybridAuthCodeResponses.get(o);return a?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),a=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(l=>(this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_SUCCESS,$e.Silent,l),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:l.fromNativeBroker,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length,accountType:es(l.account)}),l)).catch(l=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_FAILURE,$e.Silent,null,l),r.end({success:!1},l),l}),this.hybridAuthCodeResponses.set(o,a)),await a}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:t},Ct.acquireTokenByCode,e.nativeAccountId).catch(a=>{throw a instanceof rs&&yi(a)&&(this.nativeExtensionProvider=void 0),a});return r.end({accountType:es(o.account),success:!0}),o}else throw Ie(Dd);else throw Ie(Id)}catch(o){throw this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_BY_CODE_FAILURE,$e.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var o;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(q.AcquireTokenByCodeAsync,e.correlationId),(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(a=>{var l;return(l=this.acquireTokenByCodeAsyncMeasurement)==null||l.end({success:!0,fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker}),a}).catch(a=>{var l;throw(l=this.acquireTokenByCodeAsyncMeasurement)==null||l.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(q.AcquireTokenFromCache,e.correlationId),t){case Vn.Default:case Vn.AccessToken:case Vn.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return de(r.acquireToken.bind(r),q.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ve(no)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(q.AcquireTokenByRefreshToken,e.correlationId),t){case Vn.Default:case Vn.AccessTokenAndRefreshToken:case Vn.RefreshToken:case Vn.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return de(r.acquireToken.bind(r),q.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw ve(no)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(q.AcquireTokenBySilentIframe,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return de(t.acquireToken.bind(t),q.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);return nw(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Zs.SIGNOUT),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Vm(this.initialized),this.browserStorage.setInteractionInProgress(!0,Zs.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return bR(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return ER(e,this.logger,this.browserStorage)}getAccountByUsername(e){return SR(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return kR(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return TR(e,this.logger,this.browserStorage)}setActiveAccount(e){AR(e,this.browserStorage)}getActiveAccount(){return _R(this.browserStorage)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=Wn.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,o){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Ie(cl);return new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!ss.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Tn.NONE:case Tn.CONSENT:case Tn.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new WR(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new YR(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new tD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ct.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new kE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new nD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new oD(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ct.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return yE(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==An.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==An.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Vr():le.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||Xv})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||Xv})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(q.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Jc(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);const o=e.account||this.getActiveAccount();if(!o)throw Ie(Ed);return r.add({accountType:es(o)}),this.acquireTokenSilentDeduped(e,o,t).then(a=>(r.end({success:!0,fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length}),{...a,state:e.state,correlationId:t})).catch(a=>{throw a instanceof Tt&&a.setCorrelationId(t),r.end({success:!1},a),a})}async acquireTokenSilentDeduped(e,t,r){const o=ch(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority,correlationId:r},t.homeAccountId),a=JSON.stringify(o),l=this.activeSilentTokenRequests.get(a);if(typeof l>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const d=de(this.acquireTokenSilentAsync.bind(this),q.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},t);return this.activeSilentTokenRequests.set(a,d),d.finally(()=>{this.activeSilentTokenRequests.delete(a)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),l}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(q.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_START,$e.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const o=await de(RR,q.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),a=e.cacheLookupPolicy||Vn.Default;return this.acquireTokenSilentNoIframe(o,a).catch(async d=>{if(aD(d,a))if(this.activeIframeRequest)if(a!==Vn.Skip){const[f,p]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${p}`,o.correlationId);const y=this.performanceClient.startMeasurement(q.AwaitConcurrentIframe,o.correlationId);y.add({awaitIframeCorrelationId:p});const x=await f;if(y.end({success:x}),x)return this.logger.verbose(`Parallel iframe request with correlationId: ${p} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,a);throw this.logger.info(`Iframe request with correlationId: ${p} failed. Interaction is required.`),d}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),de(this.acquireTokenBySilentIframe.bind(this),q.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let f;return this.activeIframeRequest=[new Promise(p=>{f=p}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),de(this.acquireTokenBySilentIframe.bind(this),q.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(p=>(f(!0),p)).catch(p=>{throw f(!1),p}).finally(()=>{this.activeIframeRequest=void 0})}else throw d}).then(d=>(this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_SUCCESS,$e.Silent,d),e.correlationId&&this.performanceClient.addFields({fromCache:d.fromCache,isNativeBroker:d.fromNativeBroker},e.correlationId),d)).catch(d=>{throw this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_FAILURE,$e.Silent,null,d),d}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return ss.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,Ct.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(async r=>{throw r instanceof rs&&yi(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,ve(no)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Vn.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),de(this.acquireTokenFromCache.bind(this),q.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Vn.AccessToken)throw r;return this.eventHandler.emitEvent(De.ACQUIRE_TOKEN_NETWORK_START,$e.Silent,e),de(this.acquireTokenByRefreshToken.bind(this),q.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await de(fh,q.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),iD(t,e,this.logger)}}function aD(n,e){const t=!(n instanceof zr&&n.subError!==dh),r=n.errorCode===tr.INVALID_GRANT_ERROR||n.errorCode===no,o=t&&r||n.errorCode===dd||n.errorCode===Dm,a=BI.includes(e);return o&&a}/*! @azure/msal-browser v4.12.0 2025-05-06 */async function lD(n,e){const t=new Uo(n);return await t.initialize(),ph.createController(t,e)}/*! @azure/msal-browser v4.12.0 2025-05-06 */class Xm{static async createPublicClientApplication(e){const t=await lD(e);return new Xm(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new ph(new Uo(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v4.12.0 2025-05-06 */const cD={initialize:()=>Promise.reject(nn(tn)),acquireTokenPopup:()=>Promise.reject(nn(tn)),acquireTokenRedirect:()=>Promise.reject(nn(tn)),acquireTokenSilent:()=>Promise.reject(nn(tn)),acquireTokenByCode:()=>Promise.reject(nn(tn)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(nn(tn)),loginPopup:()=>Promise.reject(nn(tn)),loginRedirect:()=>Promise.reject(nn(tn)),logout:()=>Promise.reject(nn(tn)),logoutRedirect:()=>Promise.reject(nn(tn)),logoutPopup:()=>Promise.reject(nn(tn)),ssoSilent:()=>Promise.reject(nn(tn)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw nn(tn)},getLogger:()=>{throw nn(tn)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw nn(tn)},hydrateCache:()=>Promise.reject(nn(tn)),clearCache:()=>Promise.reject(nn(tn))};/*! @azure/msal-browser v4.12.0 2025-05-06 */class uD{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case De.LOGIN_START:return rn.Login;case De.SSO_SILENT_START:return rn.SsoSilent;case De.ACQUIRE_TOKEN_START:if(e.interactionType===$e.Redirect||e.interactionType===$e.Popup)return rn.AcquireToken;break;case De.HANDLE_REDIRECT_START:return rn.HandleRedirect;case De.LOGOUT_START:return rn.Logout;case De.SSO_SILENT_SUCCESS:case De.SSO_SILENT_FAILURE:if(t&&t!==rn.SsoSilent)break;return rn.None;case De.LOGOUT_END:if(t&&t!==rn.Logout)break;return rn.None;case De.HANDLE_REDIRECT_END:if(t&&t!==rn.HandleRedirect)break;return rn.None;case De.LOGIN_SUCCESS:case De.LOGIN_FAILURE:case De.ACQUIRE_TOKEN_SUCCESS:case De.ACQUIRE_TOKEN_FAILURE:case De.RESTORE_FROM_BFCACHE:if(e.interactionType===$e.Redirect||e.interactionType===$e.Popup){if(t&&t!==rn.Login&&t!==rn.AcquireToken)break;return rn.None}break}return null}}/*! @azure/msal-react v3.0.12 2025-05-06 */const dD={instance:cD,inProgress:rn.None,accounts:[],logger:new Ts({})},Zm=T.createContext(dD);Zm.Consumer;/*! @azure/msal-react v3.0.12 2025-05-06 */function cw(n,e){if(n.length!==e.length)return!1;const t=[...e];return n.every(r=>{const o=t.shift();return!r||!o?!1:r.homeAccountId===o.homeAccountId&&r.localAccountId===o.localAccountId&&r.username===o.username})}/*! @azure/msal-react v3.0.12 2025-05-06 */const hD="@azure/msal-react",uw="3.0.12";/*! @azure/msal-react v3.0.12 2025-05-06 */const Ud={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},fD=(n,e)=>{const{type:t,payload:r}=e;let o=n.inProgress;switch(t){case Ud.UNBLOCK_INPROGRESS:n.inProgress===rn.Startup&&(o=rn.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Ud.EVENT:const l=r.message,d=uD.getInteractionStatusFromEvent(l,n.inProgress);d&&(r.logger.info(`MsalProvider - ${l.eventType} results in setting inProgress from ${n.inProgress} to ${d}`),o=d);break;default:throw new Error(`Unknown action type: ${t}`)}if(o===rn.Startup)return n;const a=r.instance.getAllAccounts();return o!==n.inProgress&&!cw(a,n.accounts)?{...n,inProgress:o,accounts:a}:o!==n.inProgress?{...n,inProgress:o}:cw(a,n.accounts)?n:{...n,accounts:a}};function pD({instance:n,children:e}){T.useEffect(()=>{n.initializeWrapperLibrary(MI.React,uw)},[n]);const t=T.useMemo(()=>n.getLogger().clone(hD,uw),[n]),[r,o]=T.useReducer(fD,void 0,()=>({inProgress:rn.Startup,accounts:[]}));T.useEffect(()=>{const l=n.addEventCallback(d=>{o({payload:{instance:n,logger:t,message:d},type:Ud.EVENT})});return t.verbose(`MsalProvider - Registered event callback with id: ${l}`),n.initialize().then(()=>{n.handleRedirectPromise().catch(()=>{}).finally(()=>{o({payload:{instance:n,logger:t},type:Ud.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{l&&(t.verbose(`MsalProvider - Removing event callback ${l}`),n.removeEventCallback(l))}},[n,t]);const a={instance:n,inProgress:r.inProgress,accounts:r.accounts,logger:t};return LA.createElement(Zm.Provider,{value:a},e)}/*! @azure/msal-react v3.0.12 2025-05-06 */const _E=()=>T.useContext(Zm);/*! @azure/msal-react v3.0.12 2025-05-06 */function mD(n,e){return n.length>0}function gD(n){const{accounts:e,inProgress:t}=_E();return T.useMemo(()=>t===rn.Startup?!1:mD(e),[e,t,n])}const xD={auth:{clientId:"76064fb0-a595-4e08-8f74-48fdd4bcd5d0",authority:"https://login.microsoftonline.com/0eadb77e-42dc-47f8-bbe3-ec2395e0712c",redirectUri:"https://qtrackly-fbf5d.web.app"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},dw={scopes:["User.Read","api://4a8ac758-c6bb-408f-8fdc-03e0a8bf72e9/QTask_Backend"]},yD={scopes:["api://4a8ac758-c6bb-408f-8fdc-03e0a8bf72e9/QTask_Backend"]},vD={scopes:["User.Read"]},_0=new Xm(xD);function NE(n,e){return function(){return n.apply(e,arguments)}}const{toString:wD}=Object.prototype,{getPrototypeOf:eg}=Object,{iterator:mh,toStringTag:IE}=Symbol,gh=(n=>e=>{const t=wD.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Wr=n=>(n=n.toLowerCase(),e=>gh(e)===n),xh=n=>e=>typeof e===n,{isArray:qi}=Array,hl=xh("undefined");function CD(n){return n!==null&&!hl(n)&&n.constructor!==null&&!hl(n.constructor)&&rr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const RE=Wr("ArrayBuffer");function bD(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&RE(n.buffer),e}const ED=xh("string"),rr=xh("function"),DE=xh("number"),yh=n=>n!==null&&typeof n=="object",SD=n=>n===!0||n===!1,fu=n=>{if(gh(n)!=="object")return!1;const e=eg(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(IE in n)&&!(mh in n)},kD=Wr("Date"),TD=Wr("File"),AD=Wr("Blob"),_D=Wr("FileList"),ND=n=>yh(n)&&rr(n.pipe),ID=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||rr(n.append)&&((e=gh(n))==="formdata"||e==="object"&&rr(n.toString)&&n.toString()==="[object FormData]"))},RD=Wr("URLSearchParams"),[DD,PD,jD,MD]=["ReadableStream","Request","Response","Headers"].map(Wr),OD=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Al(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),qi(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),l=a.length;let d;for(r=0;r<l;r++)d=a[r],e.call(null,n[d],d,n)}}function PE(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const No=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jE=n=>!hl(n)&&n!==No;function wp(){const{caseless:n}=jE(this)&&this||{},e={},t=(r,o)=>{const a=n&&PE(e,o)||o;fu(e[a])&&fu(r)?e[a]=wp(e[a],r):fu(r)?e[a]=wp({},r):qi(r)?e[a]=r.slice():e[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Al(arguments[r],t);return e}const FD=(n,e,t,{allOwnKeys:r}={})=>(Al(e,(o,a)=>{t&&rr(o)?n[a]=NE(o,t):n[a]=o},{allOwnKeys:r}),n),BD=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),LD=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},HD=(n,e,t,r)=>{let o,a,l;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)l=o[a],(!r||r(l,n,e))&&!d[l]&&(e[l]=n[l],d[l]=!0);n=t!==!1&&eg(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},UD=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},$D=n=>{if(!n)return null;if(qi(n))return n;let e=n.length;if(!DE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},zD=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&eg(Uint8Array)),VD=(n,e)=>{const r=(n&&n[mh]).call(n);let o;for(;(o=r.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},KD=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},qD=Wr("HTMLFormElement"),WD=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),hw=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),GD=Wr("RegExp"),ME=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Al(t,(o,a)=>{let l;(l=e(o,a,n))!==!1&&(r[a]=l||o)}),Object.defineProperties(n,r)},YD=n=>{ME(n,(e,t)=>{if(rr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(rr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},QD=(n,e)=>{const t={},r=o=>{o.forEach(a=>{t[a]=!0})};return qi(n)?r(n):r(String(n).split(e)),t},JD=()=>{},XD=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function ZD(n){return!!(n&&rr(n.append)&&n[IE]==="FormData"&&n[mh])}const e4=n=>{const e=new Array(10),t=(r,o)=>{if(yh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const a=qi(r)?[]:{};return Al(r,(l,d)=>{const h=t(l,o+1);!hl(h)&&(a[d]=h)}),e[o]=void 0,a}}return r};return t(n,0)},t4=Wr("AsyncFunction"),n4=n=>n&&(yh(n)||rr(n))&&rr(n.then)&&rr(n.catch),OE=((n,e)=>n?setImmediate:e?((t,r)=>(No.addEventListener("message",({source:o,data:a})=>{o===No&&a===t&&r.length&&r.shift()()},!1),o=>{r.push(o),No.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",rr(No.postMessage)),r4=typeof queueMicrotask<"u"?queueMicrotask.bind(No):typeof process<"u"&&process.nextTick||OE,s4=n=>n!=null&&rr(n[mh]),re={isArray:qi,isArrayBuffer:RE,isBuffer:CD,isFormData:ID,isArrayBufferView:bD,isString:ED,isNumber:DE,isBoolean:SD,isObject:yh,isPlainObject:fu,isReadableStream:DD,isRequest:PD,isResponse:jD,isHeaders:MD,isUndefined:hl,isDate:kD,isFile:TD,isBlob:AD,isRegExp:GD,isFunction:rr,isStream:ND,isURLSearchParams:RD,isTypedArray:zD,isFileList:_D,forEach:Al,merge:wp,extend:FD,trim:OD,stripBOM:BD,inherits:LD,toFlatObject:HD,kindOf:gh,kindOfTest:Wr,endsWith:UD,toArray:$D,forEachEntry:VD,matchAll:KD,isHTMLForm:qD,hasOwnProperty:hw,hasOwnProp:hw,reduceDescriptors:ME,freezeMethods:YD,toObjectSet:QD,toCamelCase:WD,noop:JD,toFiniteNumber:XD,findKey:PE,global:No,isContextDefined:jE,isSpecCompliantForm:ZD,toJSONObject:e4,isAsyncFn:t4,isThenable:n4,setImmediate:OE,asap:r4,isIterable:s4};function nt(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}re.inherits(nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const FE=nt.prototype,BE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{BE[n]={value:n}});Object.defineProperties(nt,BE);Object.defineProperty(FE,"isAxiosError",{value:!0});nt.from=(n,e,t,r,o,a)=>{const l=Object.create(FE);return re.toFlatObject(n,l,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),nt.call(l,n.message,e,t,r,o),l.cause=n,l.name=n.name,a&&Object.assign(l,a),l};const o4=null;function Cp(n){return re.isPlainObject(n)||re.isArray(n)}function LE(n){return re.endsWith(n,"[]")?n.slice(0,-2):n}function fw(n,e,t){return n?n.concat(e).map(function(o,a){return o=LE(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function i4(n){return re.isArray(n)&&!n.some(Cp)}const a4=re.toFlatObject(re,{},null,function(e){return/^is[A-Z]/.test(e)});function vh(n,e,t){if(!re.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=re.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,S){return!re.isUndefined(S[E])});const r=t.metaTokens,o=t.visitor||p,a=t.dots,l=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(e);if(!re.isFunction(o))throw new TypeError("visitor must be a function");function f(w){if(w===null)return"";if(re.isDate(w))return w.toISOString();if(!h&&re.isBlob(w))throw new nt("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(w)||re.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,E,S){let A=w;if(w&&!S&&typeof w=="object"){if(re.endsWith(E,"{}"))E=r?E:E.slice(0,-2),w=JSON.stringify(w);else if(re.isArray(w)&&i4(w)||(re.isFileList(w)||re.endsWith(E,"[]"))&&(A=re.toArray(w)))return E=LE(E),A.forEach(function(k,I){!(re.isUndefined(k)||k===null)&&e.append(l===!0?fw([E],I,a):l===null?E:E+"[]",f(k))}),!1}return Cp(w)?!0:(e.append(fw(S,E,a),f(w)),!1)}const y=[],x=Object.assign(a4,{defaultVisitor:p,convertValue:f,isVisitable:Cp});function C(w,E){if(!re.isUndefined(w)){if(y.indexOf(w)!==-1)throw Error("Circular reference detected in "+E.join("."));y.push(w),re.forEach(w,function(A,b){(!(re.isUndefined(A)||A===null)&&o.call(e,A,re.isString(b)?b.trim():b,E,x))===!0&&C(A,E?E.concat(b):[b])}),y.pop()}}if(!re.isObject(n))throw new TypeError("data must be an object");return C(n),e}function pw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function tg(n,e){this._pairs=[],n&&vh(n,this,e)}const HE=tg.prototype;HE.append=function(e,t){this._pairs.push([e,t])};HE.toString=function(e){const t=e?function(r){return e.call(this,r,pw)}:pw;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function l4(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function UE(n,e,t){if(!e)return n;const r=t&&t.encode||l4;re.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=re.isURLSearchParams(e)?e.toString():new tg(e,t).toString(r),a){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class mw{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){re.forEach(this.handlers,function(r){r!==null&&e(r)})}}const $E={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},c4=typeof URLSearchParams<"u"?URLSearchParams:tg,u4=typeof FormData<"u"?FormData:null,d4=typeof Blob<"u"?Blob:null,h4={isBrowser:!0,classes:{URLSearchParams:c4,FormData:u4,Blob:d4},protocols:["http","https","file","blob","url","data"]},ng=typeof window<"u"&&typeof document<"u",bp=typeof navigator=="object"&&navigator||void 0,f4=ng&&(!bp||["ReactNative","NativeScript","NS"].indexOf(bp.product)<0),p4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",m4=ng&&window.location.href||"http://localhost",g4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ng,hasStandardBrowserEnv:f4,hasStandardBrowserWebWorkerEnv:p4,navigator:bp,origin:m4},Symbol.toStringTag,{value:"Module"})),On={...g4,...h4};function x4(n,e){return vh(n,new On.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,a){return On.isNode&&re.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function y4(n){return re.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function v4(n){const e={},t=Object.keys(n);let r;const o=t.length;let a;for(r=0;r<o;r++)a=t[r],e[a]=n[a];return e}function zE(n){function e(t,r,o,a){let l=t[a++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),h=a>=t.length;return l=!l&&re.isArray(o)?o.length:l,h?(re.hasOwnProp(o,l)?o[l]=[o[l],r]:o[l]=r,!d):((!o[l]||!re.isObject(o[l]))&&(o[l]=[]),e(t,r,o[l],a)&&re.isArray(o[l])&&(o[l]=v4(o[l])),!d)}if(re.isFormData(n)&&re.isFunction(n.entries)){const t={};return re.forEachEntry(n,(r,o)=>{e(y4(r),o,t,0)}),t}return null}function w4(n,e,t){if(re.isString(n))try{return(e||JSON.parse)(n),re.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const _l={transitional:$E,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,a=re.isObject(e);if(a&&re.isHTMLForm(e)&&(e=new FormData(e)),re.isFormData(e))return o?JSON.stringify(zE(e)):e;if(re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e)||re.isReadableStream(e))return e;if(re.isArrayBufferView(e))return e.buffer;if(re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return x4(e,this.formSerializer).toString();if((d=re.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return vh(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),w4(e)):e}],transformResponse:[function(e){const t=this.transitional||_l.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(re.isResponse(e)||re.isReadableStream(e))return e;if(e&&re.isString(e)&&(r&&!this.responseType||o)){const l=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(d){if(l)throw d.name==="SyntaxError"?nt.from(d,nt.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:On.classes.FormData,Blob:On.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],n=>{_l.headers[n]={}});const C4=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b4=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(l){o=l.indexOf(":"),t=l.substring(0,o).trim().toLowerCase(),r=l.substring(o+1).trim(),!(!t||e[t]&&C4[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},gw=Symbol("internals");function Oa(n){return n&&String(n).trim().toLowerCase()}function pu(n){return n===!1||n==null?n:re.isArray(n)?n.map(pu):String(n)}function E4(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const S4=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function N0(n,e,t,r,o){if(re.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!re.isString(e)){if(re.isString(r))return e.indexOf(r)!==-1;if(re.isRegExp(r))return r.test(e)}}function k4(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function T4(n,e){const t=re.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,a,l){return this[r].call(this,e,o,a,l)},configurable:!0})})}class sr{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function a(d,h,f){const p=Oa(h);if(!p)throw new Error("header name must be a non-empty string");const y=re.findKey(o,p);(!y||o[y]===void 0||f===!0||f===void 0&&o[y]!==!1)&&(o[y||h]=pu(d))}const l=(d,h)=>re.forEach(d,(f,p)=>a(f,p,h));if(re.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(re.isString(e)&&(e=e.trim())&&!S4(e))l(b4(e),t);else if(re.isObject(e)&&re.isIterable(e)){let d={},h,f;for(const p of e){if(!re.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[f=p[0]]=(h=d[f])?re.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}l(d,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=Oa(e),e){const r=re.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return E4(o);if(re.isFunction(t))return t.call(this,o,r);if(re.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Oa(e),e){const r=re.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||N0(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function a(l){if(l=Oa(l),l){const d=re.findKey(r,l);d&&(!t||N0(r,r[d],d,t))&&(delete r[d],o=!0)}}return re.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const a=t[r];(!e||N0(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,r={};return re.forEach(this,(o,a)=>{const l=re.findKey(r,a);if(l){t[l]=pu(o),delete t[a];return}const d=e?k4(a):String(a).trim();d!==a&&delete t[a],t[d]=pu(o),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return re.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&re.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[gw]=this[gw]={accessors:{}}).accessors,o=this.prototype;function a(l){const d=Oa(l);r[d]||(T4(o,l),r[d]=!0)}return re.isArray(e)?e.forEach(a):a(e),this}}sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(sr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});re.freezeMethods(sr);function I0(n,e){const t=this||_l,r=e||t,o=sr.from(r.headers);let a=r.data;return re.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function VE(n){return!!(n&&n.__CANCEL__)}function Wi(n,e,t){nt.call(this,n??"canceled",nt.ERR_CANCELED,e,t),this.name="CanceledError"}re.inherits(Wi,nt,{__CANCEL__:!0});function KE(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new nt("Request failed with status code "+t.status,[nt.ERR_BAD_REQUEST,nt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function A4(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function _4(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,a=0,l;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),p=r[a];l||(l=f),t[o]=h,r[o]=f;let y=a,x=0;for(;y!==o;)x+=t[y++],y=y%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),f-l<e)return;const C=p&&f-p;return C?Math.round(x*1e3/C):void 0}}function N4(n,e){let t=0,r=1e3/e,o,a;const l=(f,p=Date.now())=>{t=p,o=null,a&&(clearTimeout(a),a=null),n.apply(null,f)};return[(...f)=>{const p=Date.now(),y=p-t;y>=r?l(f,p):(o=f,a||(a=setTimeout(()=>{a=null,l(o)},r-y)))},()=>o&&l(o)]}const $d=(n,e,t=3)=>{let r=0;const o=_4(50,250);return N4(a=>{const l=a.loaded,d=a.lengthComputable?a.total:void 0,h=l-r,f=o(h),p=l<=d;r=l;const y={loaded:l,total:d,progress:d?l/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&p?(d-l)/f:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(y)},t)},xw=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},yw=n=>(...e)=>re.asap(()=>n(...e)),I4=On.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,On.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(On.origin),On.navigator&&/(msie|trident)/i.test(On.navigator.userAgent)):()=>!0,R4=On.hasStandardBrowserEnv?{write(n,e,t,r,o,a){const l=[n+"="+encodeURIComponent(e)];re.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),re.isString(r)&&l.push("path="+r),re.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function D4(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function P4(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function qE(n,e,t){let r=!D4(e);return n&&(r||t==!1)?P4(n,e):e}const vw=n=>n instanceof sr?{...n}:n;function $o(n,e){e=e||{};const t={};function r(f,p,y,x){return re.isPlainObject(f)&&re.isPlainObject(p)?re.merge.call({caseless:x},f,p):re.isPlainObject(p)?re.merge({},p):re.isArray(p)?p.slice():p}function o(f,p,y,x){if(re.isUndefined(p)){if(!re.isUndefined(f))return r(void 0,f,y,x)}else return r(f,p,y,x)}function a(f,p){if(!re.isUndefined(p))return r(void 0,p)}function l(f,p){if(re.isUndefined(p)){if(!re.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function d(f,p,y){if(y in e)return r(f,p);if(y in n)return r(void 0,f)}const h={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(f,p,y)=>o(vw(f),vw(p),y,!0)};return re.forEach(Object.keys(Object.assign({},n,e)),function(p){const y=h[p]||o,x=y(n[p],e[p],p);re.isUndefined(x)&&y!==d||(t[p]=x)}),t}const WE=n=>{const e=$o({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:l,auth:d}=e;e.headers=l=sr.from(l),e.url=UE(qE(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let h;if(re.isFormData(t)){if(On.hasStandardBrowserEnv||On.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[f,...p]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];l.setContentType([f||"multipart/form-data",...p].join("; "))}}if(On.hasStandardBrowserEnv&&(r&&re.isFunction(r)&&(r=r(e)),r||r!==!1&&I4(e.url))){const f=o&&a&&R4.read(a);f&&l.set(o,f)}return e},j4=typeof XMLHttpRequest<"u",M4=j4&&function(n){return new Promise(function(t,r){const o=WE(n);let a=o.data;const l=sr.from(o.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=o,p,y,x,C,w;function E(){C&&C(),w&&w(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(o.method.toUpperCase(),o.url,!0),S.timeout=o.timeout;function A(){if(!S)return;const k=sr.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!d||d==="text"||d==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:k,config:n,request:S};KE(function(j){t(j),E()},function(j){r(j),E()},R),S=null}"onloadend"in S?S.onloadend=A:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(A)},S.onabort=function(){S&&(r(new nt("Request aborted",nt.ECONNABORTED,n,S)),S=null)},S.onerror=function(){r(new nt("Network Error",nt.ERR_NETWORK,n,S)),S=null},S.ontimeout=function(){let I=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const R=o.transitional||$E;o.timeoutErrorMessage&&(I=o.timeoutErrorMessage),r(new nt(I,R.clarifyTimeoutError?nt.ETIMEDOUT:nt.ECONNABORTED,n,S)),S=null},a===void 0&&l.setContentType(null),"setRequestHeader"in S&&re.forEach(l.toJSON(),function(I,R){S.setRequestHeader(R,I)}),re.isUndefined(o.withCredentials)||(S.withCredentials=!!o.withCredentials),d&&d!=="json"&&(S.responseType=o.responseType),f&&([x,w]=$d(f,!0),S.addEventListener("progress",x)),h&&S.upload&&([y,C]=$d(h),S.upload.addEventListener("progress",y),S.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(p=k=>{S&&(r(!k||k.type?new Wi(null,n,S):k),S.abort(),S=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const b=A4(o.url);if(b&&On.protocols.indexOf(b)===-1){r(new nt("Unsupported protocol "+b+":",nt.ERR_BAD_REQUEST,n));return}S.send(a||null)})},O4=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const a=function(f){if(!o){o=!0,d();const p=f instanceof Error?f:this.reason;r.abort(p instanceof nt?p:new Wi(p instanceof Error?p.message:p))}};let l=e&&setTimeout(()=>{l=null,a(new nt(`timeout ${e} of ms exceeded`,nt.ETIMEDOUT))},e);const d=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),n=null)};n.forEach(f=>f.addEventListener("abort",a));const{signal:h}=r;return h.unsubscribe=()=>re.asap(d),h}},F4=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},B4=async function*(n,e){for await(const t of L4(n))yield*F4(t,e)},L4=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},ww=(n,e,t,r)=>{const o=B4(n,e);let a=0,l,d=h=>{l||(l=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await o.next();if(f){d(),h.close();return}let y=p.byteLength;if(t){let x=a+=y;t(x)}h.enqueue(new Uint8Array(p))}catch(f){throw d(f),f}},cancel(h){return d(h),o.return()}},{highWaterMark:2})},wh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",GE=wh&&typeof ReadableStream=="function",H4=wh&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),YE=(n,...e)=>{try{return!!n(...e)}catch{return!1}},U4=GE&&YE(()=>{let n=!1;const e=new Request(On.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Cw=64*1024,Ep=GE&&YE(()=>re.isReadableStream(new Response("").body)),zd={stream:Ep&&(n=>n.body)};wh&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!zd[e]&&(zd[e]=re.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new nt(`Response type '${e}' is not supported`,nt.ERR_NOT_SUPPORT,r)})})})(new Response);const $4=async n=>{if(n==null)return 0;if(re.isBlob(n))return n.size;if(re.isSpecCompliantForm(n))return(await new Request(On.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(re.isArrayBufferView(n)||re.isArrayBuffer(n))return n.byteLength;if(re.isURLSearchParams(n)&&(n=n+""),re.isString(n))return(await H4(n)).byteLength},z4=async(n,e)=>{const t=re.toFiniteNumber(n.getContentLength());return t??$4(e)},V4=wh&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:a,timeout:l,onDownloadProgress:d,onUploadProgress:h,responseType:f,headers:p,withCredentials:y="same-origin",fetchOptions:x}=WE(n);f=f?(f+"").toLowerCase():"text";let C=O4([o,a&&a.toAbortSignal()],l),w;const E=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let S;try{if(h&&U4&&t!=="get"&&t!=="head"&&(S=await z4(p,r))!==0){let R=new Request(e,{method:"POST",body:r,duplex:"half"}),D;if(re.isFormData(r)&&(D=R.headers.get("content-type"))&&p.setContentType(D),R.body){const[j,M]=xw(S,$d(yw(h)));r=ww(R.body,Cw,j,M)}}re.isString(y)||(y=y?"include":"omit");const A="credentials"in Request.prototype;w=new Request(e,{...x,signal:C,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:A?y:void 0});let b=await fetch(w);const k=Ep&&(f==="stream"||f==="response");if(Ep&&(d||k&&E)){const R={};["status","statusText","headers"].forEach(U=>{R[U]=b[U]});const D=re.toFiniteNumber(b.headers.get("content-length")),[j,M]=d&&xw(D,$d(yw(d),!0))||[];b=new Response(ww(b.body,Cw,j,()=>{M&&M(),E&&E()}),R)}f=f||"text";let I=await zd[re.findKey(zd,f)||"text"](b,n);return!k&&E&&E(),await new Promise((R,D)=>{KE(R,D,{data:I,headers:sr.from(b.headers),status:b.status,statusText:b.statusText,config:n,request:w})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new nt("Network Error",nt.ERR_NETWORK,n,w),{cause:A.cause||A}):nt.from(A,A&&A.code,n,w)}}),Sp={http:o4,xhr:M4,fetch:V4};re.forEach(Sp,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const bw=n=>`- ${n}`,K4=n=>re.isFunction(n)||n===null||n===!1,QE={getAdapter:n=>{n=re.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let a=0;a<e;a++){t=n[a];let l;if(r=t,!K4(t)&&(r=Sp[(l=String(t)).toLowerCase()],r===void 0))throw new nt(`Unknown adapter '${l}'`);if(r)break;o[l||"#"+a]=r}if(!r){const a=Object.entries(o).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?a.length>1?`since :
`+a.map(bw).join(`
`):" "+bw(a[0]):"as no adapter specified";throw new nt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:Sp};function R0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Wi(null,n)}function Ew(n){return R0(n),n.headers=sr.from(n.headers),n.data=I0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),QE.getAdapter(n.adapter||_l.adapter)(n).then(function(r){return R0(n),r.data=I0.call(n,n.transformResponse,r),r.headers=sr.from(r.headers),r},function(r){return VE(r)||(R0(n),r&&r.response&&(r.response.data=I0.call(n,n.transformResponse,r.response),r.response.headers=sr.from(r.response.headers))),Promise.reject(r)})}const JE="1.9.0",Ch={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Ch[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Sw={};Ch.transitional=function(e,t,r){function o(a,l){return"[Axios v"+JE+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,d)=>{if(e===!1)throw new nt(o(l," has been removed"+(t?" in "+t:"")),nt.ERR_DEPRECATED);return t&&!Sw[l]&&(Sw[l]=!0,console.warn(o(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,l,d):!0}};Ch.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function q4(n,e,t){if(typeof n!="object")throw new nt("options must be an object",nt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const a=r[o],l=e[a];if(l){const d=n[a],h=d===void 0||l(d,a,n);if(h!==!0)throw new nt("option "+a+" must be "+h,nt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new nt("Unknown option "+a,nt.ERR_BAD_OPTION)}}const mu={assertOptions:q4,validators:Ch},ts=mu.validators;class Po{constructor(e){this.defaults=e||{},this.interceptors={request:new mw,response:new mw}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=$o(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:a}=t;r!==void 0&&mu.assertOptions(r,{silentJSONParsing:ts.transitional(ts.boolean),forcedJSONParsing:ts.transitional(ts.boolean),clarifyTimeoutError:ts.transitional(ts.boolean)},!1),o!=null&&(re.isFunction(o)?t.paramsSerializer={serialize:o}:mu.assertOptions(o,{encode:ts.function,serialize:ts.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),mu.assertOptions(t,{baseUrl:ts.spelling("baseURL"),withXsrfToken:ts.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=a&&re.merge(a.common,a[t.method]);a&&re.forEach(["delete","get","head","post","put","patch","common"],w=>{delete a[w]}),t.headers=sr.concat(l,a);const d=[];let h=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(h=h&&E.synchronous,d.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,y=0,x;if(!h){const w=[Ew.bind(this),void 0];for(w.unshift.apply(w,d),w.push.apply(w,f),x=w.length,p=Promise.resolve(t);y<x;)p=p.then(w[y++],w[y++]);return p}x=d.length;let C=t;for(y=0;y<x;){const w=d[y++],E=d[y++];try{C=w(C)}catch(S){E.call(this,S);break}}try{p=Ew.call(this,C)}catch(w){return Promise.reject(w)}for(y=0,x=f.length;y<x;)p=p.then(f[y++],f[y++]);return p}getUri(e){e=$o(this.defaults,e);const t=qE(e.baseURL,e.url,e.allowAbsoluteUrls);return UE(t,e.params,e.paramsSerializer)}}re.forEach(["delete","get","head","options"],function(e){Po.prototype[e]=function(t,r){return this.request($o(r||{},{method:e,url:t,data:(r||{}).data}))}});re.forEach(["post","put","patch"],function(e){function t(r){return function(a,l,d){return this.request($o(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Po.prototype[e]=t(),Po.prototype[e+"Form"]=t(!0)});class rg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const l=new Promise(d=>{r.subscribe(d),a=d}).then(o);return l.cancel=function(){r.unsubscribe(a)},l},e(function(a,l,d){r.reason||(r.reason=new Wi(a,l,d),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new rg(function(o){e=o}),cancel:e}}}function W4(n){return function(t){return n.apply(null,t)}}function G4(n){return re.isObject(n)&&n.isAxiosError===!0}const kp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kp).forEach(([n,e])=>{kp[e]=n});function XE(n){const e=new Po(n),t=NE(Po.prototype.request,e);return re.extend(t,Po.prototype,e,{allOwnKeys:!0}),re.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return XE($o(n,o))},t}const Ze=XE(_l);Ze.Axios=Po;Ze.CanceledError=Wi;Ze.CancelToken=rg;Ze.isCancel=VE;Ze.VERSION=JE;Ze.toFormData=vh;Ze.AxiosError=nt;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=W4;Ze.isAxiosError=G4;Ze.mergeConfig=$o;Ze.AxiosHeaders=sr;Ze.formToJSON=n=>zE(re.isHTMLForm(n)?new FormData(n):n);Ze.getAdapter=QE.getAdapter;Ze.HttpStatusCode=kp;Ze.default=Ze;const ZE=async(n,e,t,r=null)=>{var o,a;try{const l={method:n,url:`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net${e}`,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},data:r};return(await Ze(l)).data}catch(l){throw console.error(`API request failed for ${e}:`,l),new Error(`API error: ${(o=l.response)==null?void 0:o.status} - ${((a=l.response)==null?void 0:a.statusText)||l.message}`)}},Y4=async n=>ZE("GET","/api/auth/me",n),eS=T.createContext(),vs={IDLE:"idle",LOADING:"loading",AUTHENTICATED:"authenticated",ERROR:"error"},Q4=({children:n})=>{const{instance:e,accounts:t}=_E(),r=gD(),[o,a]=T.useState(vs.IDLE),[l,d]=T.useState([]),[h,f]=T.useState(null),[p,y]=T.useState(null),[x,C]=T.useState(!1),w=T.useCallback(async(D="api")=>{if(!t[0])throw new Error("No active account found. Please sign in again.");const j=D==="graph"?{...vD,account:t[0]}:{...yD,account:t[0]};try{const M=await e.acquireTokenSilent(j);return console.log(`Token acquired successfully for ${D}`),M.accessToken}catch(M){if(console.error(`Token acquisition failed for ${D}:`,M),M.name==="InteractionRequiredAuthError")return console.log("Interaction required, redirecting..."),await e.acquireTokenRedirect(j),null;throw M}},[e,t]),E=T.useCallback(async(D=0)=>{if(!r||!t[0]){a(vs.IDLE);return}try{a(vs.LOADING),y(null);const M=await w("api");if(!M)return;const U=await Y4(M);console.log("User data fetched:",U);const P=U.roles&&U.roles.length>0?U.roles:["user"];d(P),f({id:t[0].localAccountId,username:t[0].username,name:t[0].name,email:t[0].username,roles:P});try{await ZE("GET","/api/user/profile",M),console.log("User profile synchronized with backend")}catch(L){console.warn("Profile sync failed:",L)}a(vs.AUTHENTICATED),C(!0)}catch(M){if(console.error("Error fetching user data:",M),M.message.includes("403")||M.message.includes("consent")){y("Additional permissions required. Please re-authenticate."),await e.loginRedirect({...dw,prompt:"consent"});return}if(D<3){console.log(`Retrying user data fetch (${D+1}/3)`),setTimeout(()=>E(D+1),1e3*(D+1));return}console.warn("Using fallback user role after retries"),d(["user"]),f({id:t[0].localAccountId,username:t[0].username,name:t[0].name,email:t[0].username,roles:["user"]}),y(`Failed to load user permissions: ${M.message}`),a(vs.AUTHENTICATED),C(!0)}},[r,t,w,e]);T.useEffect(()=>{r&&t.length>0&&!x?E():r||(a(vs.IDLE),d([]),f(null),y(null),C(!1))},[r,t,x,E]);const S=T.useCallback(async()=>{try{y(null),a(vs.LOADING),await e.loginRedirect(dw)}catch(D){console.error("Login error:",D),y("Login failed. Please try again."),a(vs.ERROR)}},[e]),A=T.useCallback(async()=>{try{y(null),await e.logoutRedirect({postLogoutRedirectUri:window.location.origin})}catch(D){console.error("Logout error:",D),y("Logout failed. Please try again.")}},[e]),b=T.useCallback(()=>l.includes("admin")?"admin":l.includes("manager")?"manager":"user",[l]),k=T.useCallback(D=>{if(!l||l.length===0||!D)return!1;const j=l.map(U=>U.toLowerCase());if(Array.isArray(D)){const U=D.map(P=>P.toLowerCase());return j.includes("admin")?!0:U.some(P=>P==="user"&&j.includes("manager")?!0:j.includes(P))}const M=D.toLowerCase();return j.includes("admin")||M==="user"&&j.includes("manager")?!0:j.includes(M)},[l]),I=T.useCallback(()=>{r&&t.length>0?E():S()},[r,t,E,S]),R={isAuthenticated:r,authState:o,user:h,userRoles:l,isLoading:o===vs.LOADING,isInitialized:x,error:p,login:S,logout:A,acquireToken:w,retry:I,getPrimaryRole:b,hasRole:k};return c.jsx(eS.Provider,{value:R,children:n})},vn=()=>{const n=T.useContext(eS);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},xn=Ze.create({baseURL:"https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api",headers:{"Content-Type":"application/json"}}),tS=n=>{xn.interceptors.request.use(async e=>{try{const t=await n("api");if(!t)throw console.error(" No token acquired for request:",{url:e.url,method:e.method}),new Error("Authentication token is missing");return e.headers.Authorization=`Bearer ${t}`,e}catch(t){return console.error(" Error acquiring token:",t.message),Promise.reject(t)}}),xn.interceptors.response.use(e=>e,async e=>{var r,o;const t=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!t._retry){console.warn(" 401 Unauthorized, retrying with new token..."),t._retry=!0;try{const a=await n("api",{forceRefresh:!0});if(!a)throw new Error("Failed to refresh token");return t.headers.Authorization=`Bearer ${a}`,xn(t)}catch(a){return console.error(" Token refresh failed:",a.message),Promise.reject(a)}}return console.error(" API request failed:",(o=e.response)==null?void 0:o.statusText),Promise.reject(e)})},Gi=async()=>{var n,e;try{console.debug("Fetching encryption keys...");const t=await xn.get("/Encryption/keys");if(console.debug("Full API Response:",t),console.debug("Fetched encryption keys:",t.data),!t.data.aesKey||!t.data.aesIV)throw new Error("Invalid or missing encryption keys in response!");return t.data}catch(t){return console.error("Error fetching encryption keys:",{message:t.message,status:(n=t.response)==null?void 0:n.status,data:(e=t.response)==null?void 0:e.data}),{aesKey:"",aesIV:""}}},J4=async()=>{var n,e;try{const t=await xn.get("/User/users");return console.debug("Fetched users:",t.data),t.data}catch(t){throw console.error("Error fetching users:",{message:t.message,status:(n=t.response)==null?void 0:n.status,data:(e=t.response)==null?void 0:e.data}),t}},X4=async n=>{var e,t;try{return await xn.post("/User",n)}catch(r){throw console.error("Error submitting dependency request:",{message:r.message,status:(e=r.response)==null?void 0:e.status,data:(t=r.response)==null?void 0:t.data}),r}};var gu={exports:{}};function Z4(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xu={exports:{}};const eP={},tP=Object.freeze(Object.defineProperty({__proto__:null,default:eP},Symbol.toStringTag,{value:"Module"})),nP=MA(tP);var rP=xu.exports,kw;function at(){return kw||(kw=1,function(n,e){(function(t,r){n.exports=r()})(rP,function(){var t=t||function(r,o){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof m0<"u"&&m0.crypto&&(a=m0.crypto),!a&&typeof Z4=="function")try{a=nP}catch{}var l=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||function(){function b(){}return function(k){var I;return b.prototype=k,I=new b,b.prototype=null,I}}(),h={},f=h.lib={},p=f.Base=function(){return{extend:function(b){var k=d(this);return b&&k.mixIn(b),(!k.hasOwnProperty("init")||this.init===k.init)&&(k.init=function(){k.$super.init.apply(this,arguments)}),k.init.prototype=k,k.$super=this,k},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var k in b)b.hasOwnProperty(k)&&(this[k]=b[k]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=f.WordArray=p.extend({init:function(b,k){b=this.words=b||[],k!=o?this.sigBytes=k:this.sigBytes=b.length*4},toString:function(b){return(b||C).stringify(this)},concat:function(b){var k=this.words,I=b.words,R=this.sigBytes,D=b.sigBytes;if(this.clamp(),R%4)for(var j=0;j<D;j++){var M=I[j>>>2]>>>24-j%4*8&255;k[R+j>>>2]|=M<<24-(R+j)%4*8}else for(var U=0;U<D;U+=4)k[R+U>>>2]=I[U>>>2];return this.sigBytes+=D,this},clamp:function(){var b=this.words,k=this.sigBytes;b[k>>>2]&=4294967295<<32-k%4*8,b.length=r.ceil(k/4)},clone:function(){var b=p.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var k=[],I=0;I<b;I+=4)k.push(l());return new y.init(k,b)}}),x=h.enc={},C=x.Hex={stringify:function(b){for(var k=b.words,I=b.sigBytes,R=[],D=0;D<I;D++){var j=k[D>>>2]>>>24-D%4*8&255;R.push((j>>>4).toString(16)),R.push((j&15).toString(16))}return R.join("")},parse:function(b){for(var k=b.length,I=[],R=0;R<k;R+=2)I[R>>>3]|=parseInt(b.substr(R,2),16)<<24-R%8*4;return new y.init(I,k/2)}},w=x.Latin1={stringify:function(b){for(var k=b.words,I=b.sigBytes,R=[],D=0;D<I;D++){var j=k[D>>>2]>>>24-D%4*8&255;R.push(String.fromCharCode(j))}return R.join("")},parse:function(b){for(var k=b.length,I=[],R=0;R<k;R++)I[R>>>2]|=(b.charCodeAt(R)&255)<<24-R%4*8;return new y.init(I,k)}},E=x.Utf8={stringify:function(b){try{return decodeURIComponent(escape(w.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return w.parse(unescape(encodeURIComponent(b)))}},S=f.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=E.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var k,I=this._data,R=I.words,D=I.sigBytes,j=this.blockSize,M=j*4,U=D/M;b?U=r.ceil(U):U=r.max((U|0)-this._minBufferSize,0);var P=U*j,L=r.min(P*4,D);if(P){for(var $=0;$<P;$+=j)this._doProcessBlock(R,$);k=R.splice(0,P),I.sigBytes-=L}return new y.init(k,L)},clone:function(){var b=p.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});f.Hasher=S.extend({cfg:p.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){S.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var k=this._doFinalize();return k},blockSize:16,_createHelper:function(b){return function(k,I){return new b.init(I).finalize(k)}},_createHmacHelper:function(b){return function(k,I){return new A.HMAC.init(b,I).finalize(k)}}});var A=h.algo={};return h}(Math);return t})}(xu)),xu.exports}var yu={exports:{}},sP=yu.exports,Tw;function bh(){return Tw||(Tw=1,function(n,e){(function(t,r){n.exports=r(at())})(sP,function(t){return function(r){var o=t,a=o.lib,l=a.Base,d=a.WordArray,h=o.x64={};h.Word=l.extend({init:function(f,p){this.high=f,this.low=p}}),h.WordArray=l.extend({init:function(f,p){f=this.words=f||[],p!=r?this.sigBytes=p:this.sigBytes=f.length*8},toX32:function(){for(var f=this.words,p=f.length,y=[],x=0;x<p;x++){var C=f[x];y.push(C.high),y.push(C.low)}return d.create(y,this.sigBytes)},clone:function(){for(var f=l.clone.call(this),p=f.words=this.words.slice(0),y=p.length,x=0;x<y;x++)p[x]=p[x].clone();return f}})}(),t})}(yu)),yu.exports}var vu={exports:{}},oP=vu.exports,Aw;function iP(){return Aw||(Aw=1,function(n,e){(function(t,r){n.exports=r(at())})(oP,function(t){return function(){if(typeof ArrayBuffer=="function"){var r=t,o=r.lib,a=o.WordArray,l=a.init,d=a.init=function(h){if(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),(h instanceof Int8Array||typeof Uint8ClampedArray<"u"&&h instanceof Uint8ClampedArray||h instanceof Int16Array||h instanceof Uint16Array||h instanceof Int32Array||h instanceof Uint32Array||h instanceof Float32Array||h instanceof Float64Array)&&(h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength)),h instanceof Uint8Array){for(var f=h.byteLength,p=[],y=0;y<f;y++)p[y>>>2]|=h[y]<<24-y%4*8;l.call(this,p,f)}else l.apply(this,arguments)};d.prototype=a}}(),t.lib.WordArray})}(vu)),vu.exports}var wu={exports:{}},aP=wu.exports,_w;function lP(){return _w||(_w=1,function(n,e){(function(t,r){n.exports=r(at())})(aP,function(t){return function(){var r=t,o=r.lib,a=o.WordArray,l=r.enc;l.Utf16=l.Utf16BE={stringify:function(h){for(var f=h.words,p=h.sigBytes,y=[],x=0;x<p;x+=2){var C=f[x>>>2]>>>16-x%4*8&65535;y.push(String.fromCharCode(C))}return y.join("")},parse:function(h){for(var f=h.length,p=[],y=0;y<f;y++)p[y>>>1]|=h.charCodeAt(y)<<16-y%2*16;return a.create(p,f*2)}},l.Utf16LE={stringify:function(h){for(var f=h.words,p=h.sigBytes,y=[],x=0;x<p;x+=2){var C=d(f[x>>>2]>>>16-x%4*8&65535);y.push(String.fromCharCode(C))}return y.join("")},parse:function(h){for(var f=h.length,p=[],y=0;y<f;y++)p[y>>>1]|=d(h.charCodeAt(y)<<16-y%2*16);return a.create(p,f*2)}};function d(h){return h<<8&4278255360|h>>>8&16711935}}(),t.enc.Utf16})}(wu)),wu.exports}var Cu={exports:{}},cP=Cu.exports,Nw;function Ko(){return Nw||(Nw=1,function(n,e){(function(t,r){n.exports=r(at())})(cP,function(t){return function(){var r=t,o=r.lib,a=o.WordArray,l=r.enc;l.Base64={stringify:function(h){var f=h.words,p=h.sigBytes,y=this._map;h.clamp();for(var x=[],C=0;C<p;C+=3)for(var w=f[C>>>2]>>>24-C%4*8&255,E=f[C+1>>>2]>>>24-(C+1)%4*8&255,S=f[C+2>>>2]>>>24-(C+2)%4*8&255,A=w<<16|E<<8|S,b=0;b<4&&C+b*.75<p;b++)x.push(y.charAt(A>>>6*(3-b)&63));var k=y.charAt(64);if(k)for(;x.length%4;)x.push(k);return x.join("")},parse:function(h){var f=h.length,p=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var x=0;x<p.length;x++)y[p.charCodeAt(x)]=x}var C=p.charAt(64);if(C){var w=h.indexOf(C);w!==-1&&(f=w)}return d(h,f,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function d(h,f,p){for(var y=[],x=0,C=0;C<f;C++)if(C%4){var w=p[h.charCodeAt(C-1)]<<C%4*2,E=p[h.charCodeAt(C)]>>>6-C%4*2,S=w|E;y[x>>>2]|=S<<24-x%4*8,x++}return a.create(y,x)}}(),t.enc.Base64})}(Cu)),Cu.exports}var bu={exports:{}},uP=bu.exports,Iw;function dP(){return Iw||(Iw=1,function(n,e){(function(t,r){n.exports=r(at())})(uP,function(t){return function(){var r=t,o=r.lib,a=o.WordArray,l=r.enc;l.Base64url={stringify:function(h,f){f===void 0&&(f=!0);var p=h.words,y=h.sigBytes,x=f?this._safe_map:this._map;h.clamp();for(var C=[],w=0;w<y;w+=3)for(var E=p[w>>>2]>>>24-w%4*8&255,S=p[w+1>>>2]>>>24-(w+1)%4*8&255,A=p[w+2>>>2]>>>24-(w+2)%4*8&255,b=E<<16|S<<8|A,k=0;k<4&&w+k*.75<y;k++)C.push(x.charAt(b>>>6*(3-k)&63));var I=x.charAt(64);if(I)for(;C.length%4;)C.push(I);return C.join("")},parse:function(h,f){f===void 0&&(f=!0);var p=h.length,y=f?this._safe_map:this._map,x=this._reverseMap;if(!x){x=this._reverseMap=[];for(var C=0;C<y.length;C++)x[y.charCodeAt(C)]=C}var w=y.charAt(64);if(w){var E=h.indexOf(w);E!==-1&&(p=E)}return d(h,p,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function d(h,f,p){for(var y=[],x=0,C=0;C<f;C++)if(C%4){var w=p[h.charCodeAt(C-1)]<<C%4*2,E=p[h.charCodeAt(C)]>>>6-C%4*2,S=w|E;y[x>>>2]|=S<<24-x%4*8,x++}return a.create(y,x)}}(),t.enc.Base64url})}(bu)),bu.exports}var Eu={exports:{}},hP=Eu.exports,Rw;function qo(){return Rw||(Rw=1,function(n,e){(function(t,r){n.exports=r(at())})(hP,function(t){return function(r){var o=t,a=o.lib,l=a.WordArray,d=a.Hasher,h=o.algo,f=[];(function(){for(var E=0;E<64;E++)f[E]=r.abs(r.sin(E+1))*4294967296|0})();var p=h.MD5=d.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(E,S){for(var A=0;A<16;A++){var b=S+A,k=E[b];E[b]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var I=this._hash.words,R=E[S+0],D=E[S+1],j=E[S+2],M=E[S+3],U=E[S+4],P=E[S+5],L=E[S+6],$=E[S+7],z=E[S+8],ne=E[S+9],oe=E[S+10],he=E[S+11],K=E[S+12],B=E[S+13],Q=E[S+14],ee=E[S+15],_=I[0],F=I[1],Y=I[2],W=I[3];_=y(_,F,Y,W,R,7,f[0]),W=y(W,_,F,Y,D,12,f[1]),Y=y(Y,W,_,F,j,17,f[2]),F=y(F,Y,W,_,M,22,f[3]),_=y(_,F,Y,W,U,7,f[4]),W=y(W,_,F,Y,P,12,f[5]),Y=y(Y,W,_,F,L,17,f[6]),F=y(F,Y,W,_,$,22,f[7]),_=y(_,F,Y,W,z,7,f[8]),W=y(W,_,F,Y,ne,12,f[9]),Y=y(Y,W,_,F,oe,17,f[10]),F=y(F,Y,W,_,he,22,f[11]),_=y(_,F,Y,W,K,7,f[12]),W=y(W,_,F,Y,B,12,f[13]),Y=y(Y,W,_,F,Q,17,f[14]),F=y(F,Y,W,_,ee,22,f[15]),_=x(_,F,Y,W,D,5,f[16]),W=x(W,_,F,Y,L,9,f[17]),Y=x(Y,W,_,F,he,14,f[18]),F=x(F,Y,W,_,R,20,f[19]),_=x(_,F,Y,W,P,5,f[20]),W=x(W,_,F,Y,oe,9,f[21]),Y=x(Y,W,_,F,ee,14,f[22]),F=x(F,Y,W,_,U,20,f[23]),_=x(_,F,Y,W,ne,5,f[24]),W=x(W,_,F,Y,Q,9,f[25]),Y=x(Y,W,_,F,M,14,f[26]),F=x(F,Y,W,_,z,20,f[27]),_=x(_,F,Y,W,B,5,f[28]),W=x(W,_,F,Y,j,9,f[29]),Y=x(Y,W,_,F,$,14,f[30]),F=x(F,Y,W,_,K,20,f[31]),_=C(_,F,Y,W,P,4,f[32]),W=C(W,_,F,Y,z,11,f[33]),Y=C(Y,W,_,F,he,16,f[34]),F=C(F,Y,W,_,Q,23,f[35]),_=C(_,F,Y,W,D,4,f[36]),W=C(W,_,F,Y,U,11,f[37]),Y=C(Y,W,_,F,$,16,f[38]),F=C(F,Y,W,_,oe,23,f[39]),_=C(_,F,Y,W,B,4,f[40]),W=C(W,_,F,Y,R,11,f[41]),Y=C(Y,W,_,F,M,16,f[42]),F=C(F,Y,W,_,L,23,f[43]),_=C(_,F,Y,W,ne,4,f[44]),W=C(W,_,F,Y,K,11,f[45]),Y=C(Y,W,_,F,ee,16,f[46]),F=C(F,Y,W,_,j,23,f[47]),_=w(_,F,Y,W,R,6,f[48]),W=w(W,_,F,Y,$,10,f[49]),Y=w(Y,W,_,F,Q,15,f[50]),F=w(F,Y,W,_,P,21,f[51]),_=w(_,F,Y,W,K,6,f[52]),W=w(W,_,F,Y,M,10,f[53]),Y=w(Y,W,_,F,oe,15,f[54]),F=w(F,Y,W,_,D,21,f[55]),_=w(_,F,Y,W,z,6,f[56]),W=w(W,_,F,Y,ee,10,f[57]),Y=w(Y,W,_,F,L,15,f[58]),F=w(F,Y,W,_,B,21,f[59]),_=w(_,F,Y,W,U,6,f[60]),W=w(W,_,F,Y,he,10,f[61]),Y=w(Y,W,_,F,j,15,f[62]),F=w(F,Y,W,_,ne,21,f[63]),I[0]=I[0]+_|0,I[1]=I[1]+F|0,I[2]=I[2]+Y|0,I[3]=I[3]+W|0},_doFinalize:function(){var E=this._data,S=E.words,A=this._nDataBytes*8,b=E.sigBytes*8;S[b>>>5]|=128<<24-b%32;var k=r.floor(A/4294967296),I=A;S[(b+64>>>9<<4)+15]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,S[(b+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,E.sigBytes=(S.length+1)*4,this._process();for(var R=this._hash,D=R.words,j=0;j<4;j++){var M=D[j];D[j]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return R},clone:function(){var E=d.clone.call(this);return E._hash=this._hash.clone(),E}});function y(E,S,A,b,k,I,R){var D=E+(S&A|~S&b)+k+R;return(D<<I|D>>>32-I)+S}function x(E,S,A,b,k,I,R){var D=E+(S&b|A&~b)+k+R;return(D<<I|D>>>32-I)+S}function C(E,S,A,b,k,I,R){var D=E+(S^A^b)+k+R;return(D<<I|D>>>32-I)+S}function w(E,S,A,b,k,I,R){var D=E+(A^(S|~b))+k+R;return(D<<I|D>>>32-I)+S}o.MD5=d._createHelper(p),o.HmacMD5=d._createHmacHelper(p)}(Math),t.MD5})}(Eu)),Eu.exports}var Su={exports:{}},fP=Su.exports,Dw;function nS(){return Dw||(Dw=1,function(n,e){(function(t,r){n.exports=r(at())})(fP,function(t){return function(){var r=t,o=r.lib,a=o.WordArray,l=o.Hasher,d=r.algo,h=[],f=d.SHA1=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,y){for(var x=this._hash.words,C=x[0],w=x[1],E=x[2],S=x[3],A=x[4],b=0;b<80;b++){if(b<16)h[b]=p[y+b]|0;else{var k=h[b-3]^h[b-8]^h[b-14]^h[b-16];h[b]=k<<1|k>>>31}var I=(C<<5|C>>>27)+A+h[b];b<20?I+=(w&E|~w&S)+1518500249:b<40?I+=(w^E^S)+1859775393:b<60?I+=(w&E|w&S|E&S)-1894007588:I+=(w^E^S)-899497514,A=S,S=E,E=w<<30|w>>>2,w=C,C=I}x[0]=x[0]+C|0,x[1]=x[1]+w|0,x[2]=x[2]+E|0,x[3]=x[3]+S|0,x[4]=x[4]+A|0},_doFinalize:function(){var p=this._data,y=p.words,x=this._nDataBytes*8,C=p.sigBytes*8;return y[C>>>5]|=128<<24-C%32,y[(C+64>>>9<<4)+14]=Math.floor(x/4294967296),y[(C+64>>>9<<4)+15]=x,p.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var p=l.clone.call(this);return p._hash=this._hash.clone(),p}});r.SHA1=l._createHelper(f),r.HmacSHA1=l._createHmacHelper(f)}(),t.SHA1})}(Su)),Su.exports}var ku={exports:{}},pP=ku.exports,Pw;function sg(){return Pw||(Pw=1,function(n,e){(function(t,r){n.exports=r(at())})(pP,function(t){return function(r){var o=t,a=o.lib,l=a.WordArray,d=a.Hasher,h=o.algo,f=[],p=[];(function(){function C(A){for(var b=r.sqrt(A),k=2;k<=b;k++)if(!(A%k))return!1;return!0}function w(A){return(A-(A|0))*4294967296|0}for(var E=2,S=0;S<64;)C(E)&&(S<8&&(f[S]=w(r.pow(E,1/2))),p[S]=w(r.pow(E,1/3)),S++),E++})();var y=[],x=h.SHA256=d.extend({_doReset:function(){this._hash=new l.init(f.slice(0))},_doProcessBlock:function(C,w){for(var E=this._hash.words,S=E[0],A=E[1],b=E[2],k=E[3],I=E[4],R=E[5],D=E[6],j=E[7],M=0;M<64;M++){if(M<16)y[M]=C[w+M]|0;else{var U=y[M-15],P=(U<<25|U>>>7)^(U<<14|U>>>18)^U>>>3,L=y[M-2],$=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;y[M]=P+y[M-7]+$+y[M-16]}var z=I&R^~I&D,ne=S&A^S&b^A&b,oe=(S<<30|S>>>2)^(S<<19|S>>>13)^(S<<10|S>>>22),he=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),K=j+he+z+p[M]+y[M],B=oe+ne;j=D,D=R,R=I,I=k+K|0,k=b,b=A,A=S,S=K+B|0}E[0]=E[0]+S|0,E[1]=E[1]+A|0,E[2]=E[2]+b|0,E[3]=E[3]+k|0,E[4]=E[4]+I|0,E[5]=E[5]+R|0,E[6]=E[6]+D|0,E[7]=E[7]+j|0},_doFinalize:function(){var C=this._data,w=C.words,E=this._nDataBytes*8,S=C.sigBytes*8;return w[S>>>5]|=128<<24-S%32,w[(S+64>>>9<<4)+14]=r.floor(E/4294967296),w[(S+64>>>9<<4)+15]=E,C.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var C=d.clone.call(this);return C._hash=this._hash.clone(),C}});o.SHA256=d._createHelper(x),o.HmacSHA256=d._createHmacHelper(x)}(Math),t.SHA256})}(ku)),ku.exports}var Tu={exports:{}},mP=Tu.exports,jw;function gP(){return jw||(jw=1,function(n,e){(function(t,r,o){n.exports=r(at(),sg())})(mP,function(t){return function(){var r=t,o=r.lib,a=o.WordArray,l=r.algo,d=l.SHA256,h=l.SHA224=d.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var f=d._doFinalize.call(this);return f.sigBytes-=4,f}});r.SHA224=d._createHelper(h),r.HmacSHA224=d._createHmacHelper(h)}(),t.SHA224})}(Tu)),Tu.exports}var Au={exports:{}},xP=Au.exports,Mw;function rS(){return Mw||(Mw=1,function(n,e){(function(t,r,o){n.exports=r(at(),bh())})(xP,function(t){return function(){var r=t,o=r.lib,a=o.Hasher,l=r.x64,d=l.Word,h=l.WordArray,f=r.algo;function p(){return d.create.apply(d,arguments)}var y=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],x=[];(function(){for(var w=0;w<80;w++)x[w]=p()})();var C=f.SHA512=a.extend({_doReset:function(){this._hash=new h.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(w,E){for(var S=this._hash.words,A=S[0],b=S[1],k=S[2],I=S[3],R=S[4],D=S[5],j=S[6],M=S[7],U=A.high,P=A.low,L=b.high,$=b.low,z=k.high,ne=k.low,oe=I.high,he=I.low,K=R.high,B=R.low,Q=D.high,ee=D.low,_=j.high,F=j.low,Y=M.high,W=M.low,ce=U,pe=P,Ee=L,Z=$,se=z,we=ne,ke=oe,Le=he,Te=K,ze=B,it=Q,bt=ee,mt=_,Ln=F,$t=Y,Et=W,At=0;At<80;At++){var zt,Dt,_n=x[At];if(At<16)Dt=_n.high=w[E+At*2]|0,zt=_n.low=w[E+At*2+1]|0;else{var gr=x[At-15],dn=gr.high,hn=gr.low,Pt=(dn>>>1|hn<<31)^(dn>>>8|hn<<24)^dn>>>7,Vt=(hn>>>1|dn<<31)^(hn>>>8|dn<<24)^(hn>>>7|dn<<25),Ce=x[At-2],G=Ce.high,ge=Ce.low,Be=(G>>>19|ge<<13)^(G<<3|ge>>>29)^G>>>6,Ue=(ge>>>19|G<<13)^(ge<<3|G>>>29)^(ge>>>6|G<<26),qe=x[At-7],Pe=qe.high,ut=qe.low,He=x[At-16],We=He.high,lt=He.low;zt=Vt+ut,Dt=Pt+Pe+(zt>>>0<Vt>>>0?1:0),zt=zt+Ue,Dt=Dt+Be+(zt>>>0<Ue>>>0?1:0),zt=zt+lt,Dt=Dt+We+(zt>>>0<lt>>>0?1:0),_n.high=Dt,_n.low=zt}var rt=Te&it^~Te&mt,yt=ze&bt^~ze&Ln,Xt=ce&Ee^ce&se^Ee&se,_t=pe&Z^pe&we^Z&we,fn=(ce>>>28|pe<<4)^(ce<<30|pe>>>2)^(ce<<25|pe>>>7),Kt=(pe>>>28|ce<<4)^(pe<<30|ce>>>2)^(pe<<25|ce>>>7),Cn=(Te>>>14|ze<<18)^(Te>>>18|ze<<14)^(Te<<23|ze>>>9),Hn=(ze>>>14|Te<<18)^(ze>>>18|Te<<14)^(ze<<23|Te>>>9),Gr=y[At],Gn=Gr.high,or=Gr.low,Gt=Et+Hn,ir=$t+Cn+(Gt>>>0<Et>>>0?1:0),Gt=Gt+yt,ir=ir+rt+(Gt>>>0<yt>>>0?1:0),Gt=Gt+or,ir=ir+Gn+(Gt>>>0<or>>>0?1:0),Gt=Gt+zt,ir=ir+Dt+(Gt>>>0<zt>>>0?1:0),Yr=Kt+_t,Is=fn+Xt+(Yr>>>0<Kt>>>0?1:0);$t=mt,Et=Ln,mt=it,Ln=bt,it=Te,bt=ze,ze=Le+Gt|0,Te=ke+ir+(ze>>>0<Le>>>0?1:0)|0,ke=se,Le=we,se=Ee,we=Z,Ee=ce,Z=pe,pe=Gt+Yr|0,ce=ir+Is+(pe>>>0<Gt>>>0?1:0)|0}P=A.low=P+pe,A.high=U+ce+(P>>>0<pe>>>0?1:0),$=b.low=$+Z,b.high=L+Ee+($>>>0<Z>>>0?1:0),ne=k.low=ne+we,k.high=z+se+(ne>>>0<we>>>0?1:0),he=I.low=he+Le,I.high=oe+ke+(he>>>0<Le>>>0?1:0),B=R.low=B+ze,R.high=K+Te+(B>>>0<ze>>>0?1:0),ee=D.low=ee+bt,D.high=Q+it+(ee>>>0<bt>>>0?1:0),F=j.low=F+Ln,j.high=_+mt+(F>>>0<Ln>>>0?1:0),W=M.low=W+Et,M.high=Y+$t+(W>>>0<Et>>>0?1:0)},_doFinalize:function(){var w=this._data,E=w.words,S=this._nDataBytes*8,A=w.sigBytes*8;E[A>>>5]|=128<<24-A%32,E[(A+128>>>10<<5)+30]=Math.floor(S/4294967296),E[(A+128>>>10<<5)+31]=S,w.sigBytes=E.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var w=a.clone.call(this);return w._hash=this._hash.clone(),w},blockSize:1024/32});r.SHA512=a._createHelper(C),r.HmacSHA512=a._createHmacHelper(C)}(),t.SHA512})}(Au)),Au.exports}var _u={exports:{}},yP=_u.exports,Ow;function vP(){return Ow||(Ow=1,function(n,e){(function(t,r,o){n.exports=r(at(),bh(),rS())})(yP,function(t){return function(){var r=t,o=r.x64,a=o.Word,l=o.WordArray,d=r.algo,h=d.SHA512,f=d.SHA384=h.extend({_doReset:function(){this._hash=new l.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var p=h._doFinalize.call(this);return p.sigBytes-=16,p}});r.SHA384=h._createHelper(f),r.HmacSHA384=h._createHmacHelper(f)}(),t.SHA384})}(_u)),_u.exports}var Nu={exports:{}},wP=Nu.exports,Fw;function CP(){return Fw||(Fw=1,function(n,e){(function(t,r,o){n.exports=r(at(),bh())})(wP,function(t){return function(r){var o=t,a=o.lib,l=a.WordArray,d=a.Hasher,h=o.x64,f=h.Word,p=o.algo,y=[],x=[],C=[];(function(){for(var S=1,A=0,b=0;b<24;b++){y[S+5*A]=(b+1)*(b+2)/2%64;var k=A%5,I=(2*S+3*A)%5;S=k,A=I}for(var S=0;S<5;S++)for(var A=0;A<5;A++)x[S+5*A]=A+(2*S+3*A)%5*5;for(var R=1,D=0;D<24;D++){for(var j=0,M=0,U=0;U<7;U++){if(R&1){var P=(1<<U)-1;P<32?M^=1<<P:j^=1<<P-32}R&128?R=R<<1^113:R<<=1}C[D]=f.create(j,M)}})();var w=[];(function(){for(var S=0;S<25;S++)w[S]=f.create()})();var E=p.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var S=this._state=[],A=0;A<25;A++)S[A]=new f.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(S,A){for(var b=this._state,k=this.blockSize/2,I=0;I<k;I++){var R=S[A+2*I],D=S[A+2*I+1];R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var j=b[I];j.high^=D,j.low^=R}for(var M=0;M<24;M++){for(var U=0;U<5;U++){for(var P=0,L=0,$=0;$<5;$++){var j=b[U+5*$];P^=j.high,L^=j.low}var z=w[U];z.high=P,z.low=L}for(var U=0;U<5;U++)for(var ne=w[(U+4)%5],oe=w[(U+1)%5],he=oe.high,K=oe.low,P=ne.high^(he<<1|K>>>31),L=ne.low^(K<<1|he>>>31),$=0;$<5;$++){var j=b[U+5*$];j.high^=P,j.low^=L}for(var B=1;B<25;B++){var P,L,j=b[B],Q=j.high,ee=j.low,_=y[B];_<32?(P=Q<<_|ee>>>32-_,L=ee<<_|Q>>>32-_):(P=ee<<_-32|Q>>>64-_,L=Q<<_-32|ee>>>64-_);var F=w[x[B]];F.high=P,F.low=L}var Y=w[0],W=b[0];Y.high=W.high,Y.low=W.low;for(var U=0;U<5;U++)for(var $=0;$<5;$++){var B=U+5*$,j=b[B],ce=w[B],pe=w[(U+1)%5+5*$],Ee=w[(U+2)%5+5*$];j.high=ce.high^~pe.high&Ee.high,j.low=ce.low^~pe.low&Ee.low}var j=b[0],Z=C[M];j.high^=Z.high,j.low^=Z.low}},_doFinalize:function(){var S=this._data,A=S.words;this._nDataBytes*8;var b=S.sigBytes*8,k=this.blockSize*32;A[b>>>5]|=1<<24-b%32,A[(r.ceil((b+1)/k)*k>>>5)-1]|=128,S.sigBytes=A.length*4,this._process();for(var I=this._state,R=this.cfg.outputLength/8,D=R/8,j=[],M=0;M<D;M++){var U=I[M],P=U.high,L=U.low;P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,j.push(L),j.push(P)}return new l.init(j,R)},clone:function(){for(var S=d.clone.call(this),A=S._state=this._state.slice(0),b=0;b<25;b++)A[b]=A[b].clone();return S}});o.SHA3=d._createHelper(E),o.HmacSHA3=d._createHmacHelper(E)}(Math),t.SHA3})}(Nu)),Nu.exports}var Iu={exports:{}},bP=Iu.exports,Bw;function EP(){return Bw||(Bw=1,function(n,e){(function(t,r){n.exports=r(at())})(bP,function(t){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var o=t,a=o.lib,l=a.WordArray,d=a.Hasher,h=o.algo,f=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),x=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),C=l.create([0,1518500249,1859775393,2400959708,2840853838]),w=l.create([1352829926,1548603684,1836072691,2053994217,0]),E=h.RIPEMD160=d.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,j){for(var M=0;M<16;M++){var U=j+M,P=D[U];D[U]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var L=this._hash.words,$=C.words,z=w.words,ne=f.words,oe=p.words,he=y.words,K=x.words,B,Q,ee,_,F,Y,W,ce,pe,Ee;Y=B=L[0],W=Q=L[1],ce=ee=L[2],pe=_=L[3],Ee=F=L[4];for(var Z,M=0;M<80;M+=1)Z=B+D[j+ne[M]]|0,M<16?Z+=S(Q,ee,_)+$[0]:M<32?Z+=A(Q,ee,_)+$[1]:M<48?Z+=b(Q,ee,_)+$[2]:M<64?Z+=k(Q,ee,_)+$[3]:Z+=I(Q,ee,_)+$[4],Z=Z|0,Z=R(Z,he[M]),Z=Z+F|0,B=F,F=_,_=R(ee,10),ee=Q,Q=Z,Z=Y+D[j+oe[M]]|0,M<16?Z+=I(W,ce,pe)+z[0]:M<32?Z+=k(W,ce,pe)+z[1]:M<48?Z+=b(W,ce,pe)+z[2]:M<64?Z+=A(W,ce,pe)+z[3]:Z+=S(W,ce,pe)+z[4],Z=Z|0,Z=R(Z,K[M]),Z=Z+Ee|0,Y=Ee,Ee=pe,pe=R(ce,10),ce=W,W=Z;Z=L[1]+ee+pe|0,L[1]=L[2]+_+Ee|0,L[2]=L[3]+F+Y|0,L[3]=L[4]+B+W|0,L[4]=L[0]+Q+ce|0,L[0]=Z},_doFinalize:function(){var D=this._data,j=D.words,M=this._nDataBytes*8,U=D.sigBytes*8;j[U>>>5]|=128<<24-U%32,j[(U+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,D.sigBytes=(j.length+1)*4,this._process();for(var P=this._hash,L=P.words,$=0;$<5;$++){var z=L[$];L[$]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360}return P},clone:function(){var D=d.clone.call(this);return D._hash=this._hash.clone(),D}});function S(D,j,M){return D^j^M}function A(D,j,M){return D&j|~D&M}function b(D,j,M){return(D|~j)^M}function k(D,j,M){return D&M|j&~M}function I(D,j,M){return D^(j|~M)}function R(D,j){return D<<j|D>>>32-j}o.RIPEMD160=d._createHelper(E),o.HmacRIPEMD160=d._createHmacHelper(E)}(),t.RIPEMD160})}(Iu)),Iu.exports}var Ru={exports:{}},SP=Ru.exports,Lw;function og(){return Lw||(Lw=1,function(n,e){(function(t,r){n.exports=r(at())})(SP,function(t){(function(){var r=t,o=r.lib,a=o.Base,l=r.enc,d=l.Utf8,h=r.algo;h.HMAC=a.extend({init:function(f,p){f=this._hasher=new f.init,typeof p=="string"&&(p=d.parse(p));var y=f.blockSize,x=y*4;p.sigBytes>x&&(p=f.finalize(p)),p.clamp();for(var C=this._oKey=p.clone(),w=this._iKey=p.clone(),E=C.words,S=w.words,A=0;A<y;A++)E[A]^=1549556828,S[A]^=909522486;C.sigBytes=w.sigBytes=x,this.reset()},reset:function(){var f=this._hasher;f.reset(),f.update(this._iKey)},update:function(f){return this._hasher.update(f),this},finalize:function(f){var p=this._hasher,y=p.finalize(f);p.reset();var x=p.finalize(this._oKey.clone().concat(y));return x}})})()})}(Ru)),Ru.exports}var Du={exports:{}},kP=Du.exports,Hw;function TP(){return Hw||(Hw=1,function(n,e){(function(t,r,o){n.exports=r(at(),sg(),og())})(kP,function(t){return function(){var r=t,o=r.lib,a=o.Base,l=o.WordArray,d=r.algo,h=d.SHA256,f=d.HMAC,p=d.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:h,iterations:25e4}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,x){for(var C=this.cfg,w=f.create(C.hasher,y),E=l.create(),S=l.create([1]),A=E.words,b=S.words,k=C.keySize,I=C.iterations;A.length<k;){var R=w.update(x).finalize(S);w.reset();for(var D=R.words,j=D.length,M=R,U=1;U<I;U++){M=w.finalize(M),w.reset();for(var P=M.words,L=0;L<j;L++)D[L]^=P[L]}E.concat(R),b[0]++}return E.sigBytes=k*4,E}});r.PBKDF2=function(y,x,C){return p.create(C).compute(y,x)}}(),t.PBKDF2})}(Du)),Du.exports}var Pu={exports:{}},AP=Pu.exports,Uw;function co(){return Uw||(Uw=1,function(n,e){(function(t,r,o){n.exports=r(at(),nS(),og())})(AP,function(t){return function(){var r=t,o=r.lib,a=o.Base,l=o.WordArray,d=r.algo,h=d.MD5,f=d.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:h,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,y){for(var x,C=this.cfg,w=C.hasher.create(),E=l.create(),S=E.words,A=C.keySize,b=C.iterations;S.length<A;){x&&w.update(x),x=w.update(p).finalize(y),w.reset();for(var k=1;k<b;k++)x=w.finalize(x),w.reset();E.concat(x)}return E.sigBytes=A*4,E}});r.EvpKDF=function(p,y,x){return f.create(x).compute(p,y)}}(),t.EvpKDF})}(Pu)),Pu.exports}var ju={exports:{}},_P=ju.exports,$w;function wn(){return $w||($w=1,function(n,e){(function(t,r,o){n.exports=r(at(),co())})(_P,function(t){t.lib.Cipher||function(r){var o=t,a=o.lib,l=a.Base,d=a.WordArray,h=a.BufferedBlockAlgorithm,f=o.enc;f.Utf8;var p=f.Base64,y=o.algo,x=y.EvpKDF,C=a.Cipher=h.extend({cfg:l.extend(),createEncryptor:function(P,L){return this.create(this._ENC_XFORM_MODE,P,L)},createDecryptor:function(P,L){return this.create(this._DEC_XFORM_MODE,P,L)},init:function(P,L,$){this.cfg=this.cfg.extend($),this._xformMode=P,this._key=L,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(P){return this._append(P),this._process()},finalize:function(P){P&&this._append(P);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function P(L){return typeof L=="string"?U:D}return function(L){return{encrypt:function($,z,ne){return P(z).encrypt(L,$,z,ne)},decrypt:function($,z,ne){return P(z).decrypt(L,$,z,ne)}}}}()});a.StreamCipher=C.extend({_doFinalize:function(){var P=this._process(!0);return P},blockSize:1});var w=o.mode={},E=a.BlockCipherMode=l.extend({createEncryptor:function(P,L){return this.Encryptor.create(P,L)},createDecryptor:function(P,L){return this.Decryptor.create(P,L)},init:function(P,L){this._cipher=P,this._iv=L}}),S=w.CBC=function(){var P=E.extend();P.Encryptor=P.extend({processBlock:function($,z){var ne=this._cipher,oe=ne.blockSize;L.call(this,$,z,oe),ne.encryptBlock($,z),this._prevBlock=$.slice(z,z+oe)}}),P.Decryptor=P.extend({processBlock:function($,z){var ne=this._cipher,oe=ne.blockSize,he=$.slice(z,z+oe);ne.decryptBlock($,z),L.call(this,$,z,oe),this._prevBlock=he}});function L($,z,ne){var oe,he=this._iv;he?(oe=he,this._iv=r):oe=this._prevBlock;for(var K=0;K<ne;K++)$[z+K]^=oe[K]}return P}(),A=o.pad={},b=A.Pkcs7={pad:function(P,L){for(var $=L*4,z=$-P.sigBytes%$,ne=z<<24|z<<16|z<<8|z,oe=[],he=0;he<z;he+=4)oe.push(ne);var K=d.create(oe,z);P.concat(K)},unpad:function(P){var L=P.words[P.sigBytes-1>>>2]&255;P.sigBytes-=L}};a.BlockCipher=C.extend({cfg:C.cfg.extend({mode:S,padding:b}),reset:function(){var P;C.reset.call(this);var L=this.cfg,$=L.iv,z=L.mode;this._xformMode==this._ENC_XFORM_MODE?P=z.createEncryptor:(P=z.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==P?this._mode.init(this,$&&$.words):(this._mode=P.call(z,this,$&&$.words),this._mode.__creator=P)},_doProcessBlock:function(P,L){this._mode.processBlock(P,L)},_doFinalize:function(){var P,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),P=this._process(!0)):(P=this._process(!0),L.unpad(P)),P},blockSize:128/32});var k=a.CipherParams=l.extend({init:function(P){this.mixIn(P)},toString:function(P){return(P||this.formatter).stringify(this)}}),I=o.format={},R=I.OpenSSL={stringify:function(P){var L,$=P.ciphertext,z=P.salt;return z?L=d.create([1398893684,1701076831]).concat(z).concat($):L=$,L.toString(p)},parse:function(P){var L,$=p.parse(P),z=$.words;return z[0]==1398893684&&z[1]==1701076831&&(L=d.create(z.slice(2,4)),z.splice(0,4),$.sigBytes-=16),k.create({ciphertext:$,salt:L})}},D=a.SerializableCipher=l.extend({cfg:l.extend({format:R}),encrypt:function(P,L,$,z){z=this.cfg.extend(z);var ne=P.createEncryptor($,z),oe=ne.finalize(L),he=ne.cfg;return k.create({ciphertext:oe,key:$,iv:he.iv,algorithm:P,mode:he.mode,padding:he.padding,blockSize:P.blockSize,formatter:z.format})},decrypt:function(P,L,$,z){z=this.cfg.extend(z),L=this._parse(L,z.format);var ne=P.createDecryptor($,z).finalize(L.ciphertext);return ne},_parse:function(P,L){return typeof P=="string"?L.parse(P,this):P}}),j=o.kdf={},M=j.OpenSSL={execute:function(P,L,$,z,ne){if(z||(z=d.random(64/8)),ne)var oe=x.create({keySize:L+$,hasher:ne}).compute(P,z);else var oe=x.create({keySize:L+$}).compute(P,z);var he=d.create(oe.words.slice(L),$*4);return oe.sigBytes=L*4,k.create({key:oe,iv:he,salt:z})}},U=a.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:M}),encrypt:function(P,L,$,z){z=this.cfg.extend(z);var ne=z.kdf.execute($,P.keySize,P.ivSize,z.salt,z.hasher);z.iv=ne.iv;var oe=D.encrypt.call(this,P,L,ne.key,z);return oe.mixIn(ne),oe},decrypt:function(P,L,$,z){z=this.cfg.extend(z),L=this._parse(L,z.format);var ne=z.kdf.execute($,P.keySize,P.ivSize,L.salt,z.hasher);z.iv=ne.iv;var oe=D.decrypt.call(this,P,L,ne.key,z);return oe}})}()})}(ju)),ju.exports}var Mu={exports:{}},NP=Mu.exports,zw;function IP(){return zw||(zw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(NP,function(t){return t.mode.CFB=function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(a,l){var d=this._cipher,h=d.blockSize;o.call(this,a,l,h,d),this._prevBlock=a.slice(l,l+h)}}),r.Decryptor=r.extend({processBlock:function(a,l){var d=this._cipher,h=d.blockSize,f=a.slice(l,l+h);o.call(this,a,l,h,d),this._prevBlock=f}});function o(a,l,d,h){var f,p=this._iv;p?(f=p.slice(0),this._iv=void 0):f=this._prevBlock,h.encryptBlock(f,0);for(var y=0;y<d;y++)a[l+y]^=f[y]}return r}(),t.mode.CFB})}(Mu)),Mu.exports}var Ou={exports:{}},RP=Ou.exports,Vw;function DP(){return Vw||(Vw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(RP,function(t){return t.mode.CTR=function(){var r=t.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(a,l){var d=this._cipher,h=d.blockSize,f=this._iv,p=this._counter;f&&(p=this._counter=f.slice(0),this._iv=void 0);var y=p.slice(0);d.encryptBlock(y,0),p[h-1]=p[h-1]+1|0;for(var x=0;x<h;x++)a[l+x]^=y[x]}});return r.Decryptor=o,r}(),t.mode.CTR})}(Ou)),Ou.exports}var Fu={exports:{}},PP=Fu.exports,Kw;function jP(){return Kw||(Kw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(PP,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var r=t.lib.BlockCipherMode.extend();function o(d){if((d>>24&255)===255){var h=d>>16&255,f=d>>8&255,p=d&255;h===255?(h=0,f===255?(f=0,p===255?p=0:++p):++f):++h,d=0,d+=h<<16,d+=f<<8,d+=p}else d+=1<<24;return d}function a(d){return(d[0]=o(d[0]))===0&&(d[1]=o(d[1])),d}var l=r.Encryptor=r.extend({processBlock:function(d,h){var f=this._cipher,p=f.blockSize,y=this._iv,x=this._counter;y&&(x=this._counter=y.slice(0),this._iv=void 0),a(x);var C=x.slice(0);f.encryptBlock(C,0);for(var w=0;w<p;w++)d[h+w]^=C[w]}});return r.Decryptor=l,r}(),t.mode.CTRGladman})}(Fu)),Fu.exports}var Bu={exports:{}},MP=Bu.exports,qw;function OP(){return qw||(qw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(MP,function(t){return t.mode.OFB=function(){var r=t.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(a,l){var d=this._cipher,h=d.blockSize,f=this._iv,p=this._keystream;f&&(p=this._keystream=f.slice(0),this._iv=void 0),d.encryptBlock(p,0);for(var y=0;y<h;y++)a[l+y]^=p[y]}});return r.Decryptor=o,r}(),t.mode.OFB})}(Bu)),Bu.exports}var Lu={exports:{}},FP=Lu.exports,Ww;function BP(){return Ww||(Ww=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(FP,function(t){return t.mode.ECB=function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(o,a){this._cipher.encryptBlock(o,a)}}),r.Decryptor=r.extend({processBlock:function(o,a){this._cipher.decryptBlock(o,a)}}),r}(),t.mode.ECB})}(Lu)),Lu.exports}var Hu={exports:{}},LP=Hu.exports,Gw;function HP(){return Gw||(Gw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(LP,function(t){return t.pad.AnsiX923={pad:function(r,o){var a=r.sigBytes,l=o*4,d=l-a%l,h=a+d-1;r.clamp(),r.words[h>>>2]|=d<<24-h%4*8,r.sigBytes+=d},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},t.pad.Ansix923})}(Hu)),Hu.exports}var Uu={exports:{}},UP=Uu.exports,Yw;function $P(){return Yw||(Yw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(UP,function(t){return t.pad.Iso10126={pad:function(r,o){var a=o*4,l=a-r.sigBytes%a;r.concat(t.lib.WordArray.random(l-1)).concat(t.lib.WordArray.create([l<<24],1))},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},t.pad.Iso10126})}(Uu)),Uu.exports}var $u={exports:{}},zP=$u.exports,Qw;function VP(){return Qw||(Qw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(zP,function(t){return t.pad.Iso97971={pad:function(r,o){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,o)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})}($u)),$u.exports}var zu={exports:{}},KP=zu.exports,Jw;function qP(){return Jw||(Jw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(KP,function(t){return t.pad.ZeroPadding={pad:function(r,o){var a=o*4;r.clamp(),r.sigBytes+=a-(r.sigBytes%a||a)},unpad:function(r){for(var o=r.words,a=r.sigBytes-1,a=r.sigBytes-1;a>=0;a--)if(o[a>>>2]>>>24-a%4*8&255){r.sigBytes=a+1;break}}},t.pad.ZeroPadding})}(zu)),zu.exports}var Vu={exports:{}},WP=Vu.exports,Xw;function GP(){return Xw||(Xw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(WP,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(Vu)),Vu.exports}var Ku={exports:{}},YP=Ku.exports,Zw;function QP(){return Zw||(Zw=1,function(n,e){(function(t,r,o){n.exports=r(at(),wn())})(YP,function(t){return function(r){var o=t,a=o.lib,l=a.CipherParams,d=o.enc,h=d.Hex,f=o.format;f.Hex={stringify:function(p){return p.ciphertext.toString(h)},parse:function(p){var y=h.parse(p);return l.create({ciphertext:y})}}}(),t.format.Hex})}(Ku)),Ku.exports}var qu={exports:{}},JP=qu.exports,e1;function XP(){return e1||(e1=1,function(n,e){(function(t,r,o){n.exports=r(at(),Ko(),qo(),co(),wn())})(JP,function(t){return function(){var r=t,o=r.lib,a=o.BlockCipher,l=r.algo,d=[],h=[],f=[],p=[],y=[],x=[],C=[],w=[],E=[],S=[];(function(){for(var k=[],I=0;I<256;I++)I<128?k[I]=I<<1:k[I]=I<<1^283;for(var R=0,D=0,I=0;I<256;I++){var j=D^D<<1^D<<2^D<<3^D<<4;j=j>>>8^j&255^99,d[R]=j,h[j]=R;var M=k[R],U=k[M],P=k[U],L=k[j]*257^j*16843008;f[R]=L<<24|L>>>8,p[R]=L<<16|L>>>16,y[R]=L<<8|L>>>24,x[R]=L;var L=P*16843009^U*65537^M*257^R*16843008;C[j]=L<<24|L>>>8,w[j]=L<<16|L>>>16,E[j]=L<<8|L>>>24,S[j]=L,R?(R=M^k[k[k[P^M]]],D^=k[k[D]]):R=D=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],b=l.AES=a.extend({_doReset:function(){var k;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,R=I.words,D=I.sigBytes/4,j=this._nRounds=D+6,M=(j+1)*4,U=this._keySchedule=[],P=0;P<M;P++)P<D?U[P]=R[P]:(k=U[P-1],P%D?D>6&&P%D==4&&(k=d[k>>>24]<<24|d[k>>>16&255]<<16|d[k>>>8&255]<<8|d[k&255]):(k=k<<8|k>>>24,k=d[k>>>24]<<24|d[k>>>16&255]<<16|d[k>>>8&255]<<8|d[k&255],k^=A[P/D|0]<<24),U[P]=U[P-D]^k);for(var L=this._invKeySchedule=[],$=0;$<M;$++){var P=M-$;if($%4)var k=U[P];else var k=U[P-4];$<4||P<=4?L[$]=k:L[$]=C[d[k>>>24]]^w[d[k>>>16&255]]^E[d[k>>>8&255]]^S[d[k&255]]}}},encryptBlock:function(k,I){this._doCryptBlock(k,I,this._keySchedule,f,p,y,x,d)},decryptBlock:function(k,I){var R=k[I+1];k[I+1]=k[I+3],k[I+3]=R,this._doCryptBlock(k,I,this._invKeySchedule,C,w,E,S,h);var R=k[I+1];k[I+1]=k[I+3],k[I+3]=R},_doCryptBlock:function(k,I,R,D,j,M,U,P){for(var L=this._nRounds,$=k[I]^R[0],z=k[I+1]^R[1],ne=k[I+2]^R[2],oe=k[I+3]^R[3],he=4,K=1;K<L;K++){var B=D[$>>>24]^j[z>>>16&255]^M[ne>>>8&255]^U[oe&255]^R[he++],Q=D[z>>>24]^j[ne>>>16&255]^M[oe>>>8&255]^U[$&255]^R[he++],ee=D[ne>>>24]^j[oe>>>16&255]^M[$>>>8&255]^U[z&255]^R[he++],_=D[oe>>>24]^j[$>>>16&255]^M[z>>>8&255]^U[ne&255]^R[he++];$=B,z=Q,ne=ee,oe=_}var B=(P[$>>>24]<<24|P[z>>>16&255]<<16|P[ne>>>8&255]<<8|P[oe&255])^R[he++],Q=(P[z>>>24]<<24|P[ne>>>16&255]<<16|P[oe>>>8&255]<<8|P[$&255])^R[he++],ee=(P[ne>>>24]<<24|P[oe>>>16&255]<<16|P[$>>>8&255]<<8|P[z&255])^R[he++],_=(P[oe>>>24]<<24|P[$>>>16&255]<<16|P[z>>>8&255]<<8|P[ne&255])^R[he++];k[I]=B,k[I+1]=Q,k[I+2]=ee,k[I+3]=_},keySize:256/32});r.AES=a._createHelper(b)}(),t.AES})}(qu)),qu.exports}var Wu={exports:{}},ZP=Wu.exports,t1;function ej(){return t1||(t1=1,function(n,e){(function(t,r,o){n.exports=r(at(),Ko(),qo(),co(),wn())})(ZP,function(t){return function(){var r=t,o=r.lib,a=o.WordArray,l=o.BlockCipher,d=r.algo,h=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],f=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],x=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],C=d.DES=l.extend({_doReset:function(){for(var A=this._key,b=A.words,k=[],I=0;I<56;I++){var R=h[I]-1;k[I]=b[R>>>5]>>>31-R%32&1}for(var D=this._subKeys=[],j=0;j<16;j++){for(var M=D[j]=[],U=p[j],I=0;I<24;I++)M[I/6|0]|=k[(f[I]-1+U)%28]<<31-I%6,M[4+(I/6|0)]|=k[28+(f[I+24]-1+U)%28]<<31-I%6;M[0]=M[0]<<1|M[0]>>>31;for(var I=1;I<7;I++)M[I]=M[I]>>>(I-1)*4+3;M[7]=M[7]<<5|M[7]>>>27}for(var P=this._invSubKeys=[],I=0;I<16;I++)P[I]=D[15-I]},encryptBlock:function(A,b){this._doCryptBlock(A,b,this._subKeys)},decryptBlock:function(A,b){this._doCryptBlock(A,b,this._invSubKeys)},_doCryptBlock:function(A,b,k){this._lBlock=A[b],this._rBlock=A[b+1],w.call(this,4,252645135),w.call(this,16,65535),E.call(this,2,858993459),E.call(this,8,16711935),w.call(this,1,1431655765);for(var I=0;I<16;I++){for(var R=k[I],D=this._lBlock,j=this._rBlock,M=0,U=0;U<8;U++)M|=y[U][((j^R[U])&x[U])>>>0];this._lBlock=j,this._rBlock=D^M}var P=this._lBlock;this._lBlock=this._rBlock,this._rBlock=P,w.call(this,1,1431655765),E.call(this,8,16711935),E.call(this,2,858993459),w.call(this,16,65535),w.call(this,4,252645135),A[b]=this._lBlock,A[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function w(A,b){var k=(this._lBlock>>>A^this._rBlock)&b;this._rBlock^=k,this._lBlock^=k<<A}function E(A,b){var k=(this._rBlock>>>A^this._lBlock)&b;this._lBlock^=k,this._rBlock^=k<<A}r.DES=l._createHelper(C);var S=d.TripleDES=l.extend({_doReset:function(){var A=this._key,b=A.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var k=b.slice(0,2),I=b.length<4?b.slice(0,2):b.slice(2,4),R=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=C.createEncryptor(a.create(k)),this._des2=C.createEncryptor(a.create(I)),this._des3=C.createEncryptor(a.create(R))},encryptBlock:function(A,b){this._des1.encryptBlock(A,b),this._des2.decryptBlock(A,b),this._des3.encryptBlock(A,b)},decryptBlock:function(A,b){this._des3.decryptBlock(A,b),this._des2.encryptBlock(A,b),this._des1.decryptBlock(A,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=l._createHelper(S)}(),t.TripleDES})}(Wu)),Wu.exports}var Gu={exports:{}},tj=Gu.exports,n1;function nj(){return n1||(n1=1,function(n,e){(function(t,r,o){n.exports=r(at(),Ko(),qo(),co(),wn())})(tj,function(t){return function(){var r=t,o=r.lib,a=o.StreamCipher,l=r.algo,d=l.RC4=a.extend({_doReset:function(){for(var p=this._key,y=p.words,x=p.sigBytes,C=this._S=[],w=0;w<256;w++)C[w]=w;for(var w=0,E=0;w<256;w++){var S=w%x,A=y[S>>>2]>>>24-S%4*8&255;E=(E+C[w]+A)%256;var b=C[w];C[w]=C[E],C[E]=b}this._i=this._j=0},_doProcessBlock:function(p,y){p[y]^=h.call(this)},keySize:256/32,ivSize:0});function h(){for(var p=this._S,y=this._i,x=this._j,C=0,w=0;w<4;w++){y=(y+1)%256,x=(x+p[y])%256;var E=p[y];p[y]=p[x],p[x]=E,C|=p[(p[y]+p[x])%256]<<24-w*8}return this._i=y,this._j=x,C}r.RC4=a._createHelper(d);var f=l.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)h.call(this)}});r.RC4Drop=a._createHelper(f)}(),t.RC4})}(Gu)),Gu.exports}var Yu={exports:{}},rj=Yu.exports,r1;function sj(){return r1||(r1=1,function(n,e){(function(t,r,o){n.exports=r(at(),Ko(),qo(),co(),wn())})(rj,function(t){return function(){var r=t,o=r.lib,a=o.StreamCipher,l=r.algo,d=[],h=[],f=[],p=l.Rabbit=a.extend({_doReset:function(){for(var x=this._key.words,C=this.cfg.iv,w=0;w<4;w++)x[w]=(x[w]<<8|x[w]>>>24)&16711935|(x[w]<<24|x[w]>>>8)&4278255360;var E=this._X=[x[0],x[3]<<16|x[2]>>>16,x[1],x[0]<<16|x[3]>>>16,x[2],x[1]<<16|x[0]>>>16,x[3],x[2]<<16|x[1]>>>16],S=this._C=[x[2]<<16|x[2]>>>16,x[0]&4294901760|x[1]&65535,x[3]<<16|x[3]>>>16,x[1]&4294901760|x[2]&65535,x[0]<<16|x[0]>>>16,x[2]&4294901760|x[3]&65535,x[1]<<16|x[1]>>>16,x[3]&4294901760|x[0]&65535];this._b=0;for(var w=0;w<4;w++)y.call(this);for(var w=0;w<8;w++)S[w]^=E[w+4&7];if(C){var A=C.words,b=A[0],k=A[1],I=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,R=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,D=I>>>16|R&4294901760,j=R<<16|I&65535;S[0]^=I,S[1]^=D,S[2]^=R,S[3]^=j,S[4]^=I,S[5]^=D,S[6]^=R,S[7]^=j;for(var w=0;w<4;w++)y.call(this)}},_doProcessBlock:function(x,C){var w=this._X;y.call(this),d[0]=w[0]^w[5]>>>16^w[3]<<16,d[1]=w[2]^w[7]>>>16^w[5]<<16,d[2]=w[4]^w[1]>>>16^w[7]<<16,d[3]=w[6]^w[3]>>>16^w[1]<<16;for(var E=0;E<4;E++)d[E]=(d[E]<<8|d[E]>>>24)&16711935|(d[E]<<24|d[E]>>>8)&4278255360,x[C+E]^=d[E]},blockSize:128/32,ivSize:64/32});function y(){for(var x=this._X,C=this._C,w=0;w<8;w++)h[w]=C[w];C[0]=C[0]+1295307597+this._b|0,C[1]=C[1]+3545052371+(C[0]>>>0<h[0]>>>0?1:0)|0,C[2]=C[2]+886263092+(C[1]>>>0<h[1]>>>0?1:0)|0,C[3]=C[3]+1295307597+(C[2]>>>0<h[2]>>>0?1:0)|0,C[4]=C[4]+3545052371+(C[3]>>>0<h[3]>>>0?1:0)|0,C[5]=C[5]+886263092+(C[4]>>>0<h[4]>>>0?1:0)|0,C[6]=C[6]+1295307597+(C[5]>>>0<h[5]>>>0?1:0)|0,C[7]=C[7]+3545052371+(C[6]>>>0<h[6]>>>0?1:0)|0,this._b=C[7]>>>0<h[7]>>>0?1:0;for(var w=0;w<8;w++){var E=x[w]+C[w],S=E&65535,A=E>>>16,b=((S*S>>>17)+S*A>>>15)+A*A,k=((E&4294901760)*E|0)+((E&65535)*E|0);f[w]=b^k}x[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,x[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,x[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,x[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,x[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,x[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,x[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,x[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}r.Rabbit=a._createHelper(p)}(),t.Rabbit})}(Yu)),Yu.exports}var Qu={exports:{}},oj=Qu.exports,s1;function ij(){return s1||(s1=1,function(n,e){(function(t,r,o){n.exports=r(at(),Ko(),qo(),co(),wn())})(oj,function(t){return function(){var r=t,o=r.lib,a=o.StreamCipher,l=r.algo,d=[],h=[],f=[],p=l.RabbitLegacy=a.extend({_doReset:function(){var x=this._key.words,C=this.cfg.iv,w=this._X=[x[0],x[3]<<16|x[2]>>>16,x[1],x[0]<<16|x[3]>>>16,x[2],x[1]<<16|x[0]>>>16,x[3],x[2]<<16|x[1]>>>16],E=this._C=[x[2]<<16|x[2]>>>16,x[0]&4294901760|x[1]&65535,x[3]<<16|x[3]>>>16,x[1]&4294901760|x[2]&65535,x[0]<<16|x[0]>>>16,x[2]&4294901760|x[3]&65535,x[1]<<16|x[1]>>>16,x[3]&4294901760|x[0]&65535];this._b=0;for(var S=0;S<4;S++)y.call(this);for(var S=0;S<8;S++)E[S]^=w[S+4&7];if(C){var A=C.words,b=A[0],k=A[1],I=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,R=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,D=I>>>16|R&4294901760,j=R<<16|I&65535;E[0]^=I,E[1]^=D,E[2]^=R,E[3]^=j,E[4]^=I,E[5]^=D,E[6]^=R,E[7]^=j;for(var S=0;S<4;S++)y.call(this)}},_doProcessBlock:function(x,C){var w=this._X;y.call(this),d[0]=w[0]^w[5]>>>16^w[3]<<16,d[1]=w[2]^w[7]>>>16^w[5]<<16,d[2]=w[4]^w[1]>>>16^w[7]<<16,d[3]=w[6]^w[3]>>>16^w[1]<<16;for(var E=0;E<4;E++)d[E]=(d[E]<<8|d[E]>>>24)&16711935|(d[E]<<24|d[E]>>>8)&4278255360,x[C+E]^=d[E]},blockSize:128/32,ivSize:64/32});function y(){for(var x=this._X,C=this._C,w=0;w<8;w++)h[w]=C[w];C[0]=C[0]+1295307597+this._b|0,C[1]=C[1]+3545052371+(C[0]>>>0<h[0]>>>0?1:0)|0,C[2]=C[2]+886263092+(C[1]>>>0<h[1]>>>0?1:0)|0,C[3]=C[3]+1295307597+(C[2]>>>0<h[2]>>>0?1:0)|0,C[4]=C[4]+3545052371+(C[3]>>>0<h[3]>>>0?1:0)|0,C[5]=C[5]+886263092+(C[4]>>>0<h[4]>>>0?1:0)|0,C[6]=C[6]+1295307597+(C[5]>>>0<h[5]>>>0?1:0)|0,C[7]=C[7]+3545052371+(C[6]>>>0<h[6]>>>0?1:0)|0,this._b=C[7]>>>0<h[7]>>>0?1:0;for(var w=0;w<8;w++){var E=x[w]+C[w],S=E&65535,A=E>>>16,b=((S*S>>>17)+S*A>>>15)+A*A,k=((E&4294901760)*E|0)+((E&65535)*E|0);f[w]=b^k}x[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,x[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,x[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,x[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,x[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,x[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,x[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,x[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}r.RabbitLegacy=a._createHelper(p)}(),t.RabbitLegacy})}(Qu)),Qu.exports}var Ju={exports:{}},aj=Ju.exports,o1;function lj(){return o1||(o1=1,function(n,e){(function(t,r,o){n.exports=r(at(),Ko(),qo(),co(),wn())})(aj,function(t){return function(){var r=t,o=r.lib,a=o.BlockCipher,l=r.algo;const d=16,h=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],f=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var p={pbox:[],sbox:[]};function y(S,A){let b=A>>24&255,k=A>>16&255,I=A>>8&255,R=A&255,D=S.sbox[0][b]+S.sbox[1][k];return D=D^S.sbox[2][I],D=D+S.sbox[3][R],D}function x(S,A,b){let k=A,I=b,R;for(let D=0;D<d;++D)k=k^S.pbox[D],I=y(S,k)^I,R=k,k=I,I=R;return R=k,k=I,I=R,I=I^S.pbox[d],k=k^S.pbox[d+1],{left:k,right:I}}function C(S,A,b){let k=A,I=b,R;for(let D=d+1;D>1;--D)k=k^S.pbox[D],I=y(S,k)^I,R=k,k=I,I=R;return R=k,k=I,I=R,I=I^S.pbox[1],k=k^S.pbox[0],{left:k,right:I}}function w(S,A,b){for(let j=0;j<4;j++){S.sbox[j]=[];for(let M=0;M<256;M++)S.sbox[j][M]=f[j][M]}let k=0;for(let j=0;j<d+2;j++)S.pbox[j]=h[j]^A[k],k++,k>=b&&(k=0);let I=0,R=0,D=0;for(let j=0;j<d+2;j+=2)D=x(S,I,R),I=D.left,R=D.right,S.pbox[j]=I,S.pbox[j+1]=R;for(let j=0;j<4;j++)for(let M=0;M<256;M+=2)D=x(S,I,R),I=D.left,R=D.right,S.sbox[j][M]=I,S.sbox[j][M+1]=R;return!0}var E=l.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var S=this._keyPriorReset=this._key,A=S.words,b=S.sigBytes/4;w(p,A,b)}},encryptBlock:function(S,A){var b=x(p,S[A],S[A+1]);S[A]=b.left,S[A+1]=b.right},decryptBlock:function(S,A){var b=C(p,S[A],S[A+1]);S[A]=b.left,S[A+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=a._createHelper(E)}(),t.Blowfish})}(Ju)),Ju.exports}var cj=gu.exports,i1;function uj(){return i1||(i1=1,function(n,e){(function(t,r,o){n.exports=r(at(),bh(),iP(),lP(),Ko(),dP(),qo(),nS(),sg(),gP(),rS(),vP(),CP(),EP(),og(),TP(),co(),wn(),IP(),DP(),jP(),OP(),BP(),HP(),$P(),VP(),qP(),GP(),QP(),XP(),ej(),nj(),sj(),ij(),lj())})(cj,function(t){return t})}(gu)),gu.exports}var dj=uj();const xi=DC(dj);function Fr(n,e,t){if(!n||!e||!t)return n;try{const r=xi.enc.Base64.parse(e),o=xi.enc.Base64.parse(t);return xi.AES.decrypt(n,r,{iv:o,mode:xi.mode.CBC,padding:xi.pad.Pkcs7}).toString(xi.enc.Utf8)}catch(r){return console.error("Decryption failed:",r),null}}function hj(n,e,t){var r;return{userId:n.userId,name:Fr(n.name,e,t),email:Fr(n.email,e,t),roles:((r=n.roles)==null?void 0:r.map(o=>Fr(o,e,t)))||[],lastLogin:n.lastLogin,createdAt:n.createdAt}}const sS=T.createContext(),fj=({children:n})=>{const[e,t]=T.useState([]),[r,o]=T.useState(!0),[a,l]=T.useState(null);T.useEffect(()=>{(async()=>{try{o(!0),l(null);const{aesKey:f,aesIV:p}=await Gi(),x=(await J4()).map(C=>hj(C,f,p));t(x)}catch(f){console.error("Failed to load users:",f),l("Failed to load users or keys")}finally{o(!1)}})()},[]);const d={users:e,setUsers:t,loading:r,error:a,refreshUsers:()=>{o(!0),loadUsers()}};return c.jsx(sS.Provider,{value:d,children:n})},oS=()=>{const n=T.useContext(sS);if(!n)throw new Error("useUsers must be used within a UserProvider");return n},ig=""+new URL("Logo-7AFwe8r_.png",import.meta.url).href,pj=()=>{const[n,e]=T.useState("idle"),[t,r]=T.useState(null),o=lo(),[a,l]=T.useState(null),[d,h]=T.useState(null),{isAuthenticated:f,authState:p,login:y,getPrimaryRole:x,isInitialized:C,error:w,user:E,setUser:S,setUserRoles:A,acquireToken:b}=vn();T.useEffect(()=>{(async()=>{try{console.log("Starting to fetch encryption keys...");const M=await Gi();if(M&&M.aesKey&&M.aesIV)l(M.aesKey),h(M.aesIV),console.log("Keys set successfully");else throw new Error("Invalid keys structure")}catch(M){console.error("Failed to fetch encryption keys:",M),r("Failed to fetch encryption keys. Please try again.")}})()},[]);const k=async()=>{try{const j=await b("api");console.log("Checking user data for userId:",E.id);const M=await fetch("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/all",{headers:{Authorization:`Bearer ${j}`}});if(!M.ok)throw new Error(`HTTP error! Status: ${M.status}`);const U=await M.json();console.log("API response (allUsers):",U);const P=U.find(B=>B.userId===E.id);console.log("Current user from database:",P);const L=P!=null&&P.roles&&P.roles.length>0?P.roles[0]:null;let $=null;L?($=Fr(L,a,d),console.log("Decrypted role:",$)):($=x(),console.log("No encrypted role found, using fallback:",$));const z=B=>!B||B.trim()===""||B.toLowerCase()==="null"||B.toLowerCase()==="undefined",ne=z(P==null?void 0:P.department),oe=z(P==null?void 0:P.subDepartment),he=z(P==null?void 0:P.manager),K=ne||oe||he;if(console.log("=== USER DATA CHECK ==="),console.log("User ID:",E.id),console.log("User Email:",E.email),console.log("Department:",P==null?void 0:P.department,"Missing:",ne),console.log("SubDepartment:",P==null?void 0:P.subDepartment,"Missing:",oe),console.log("Manager:",P==null?void 0:P.manager,"Missing:",he),console.log("Has incomplete data:",K),console.log("User role:",$),console.log("====================="),$==="user"&&K)console.log(" User role with incomplete data - redirecting to department selector"),console.log("Missing fields:",{department:ne,subDepartment:oe,manager:he}),setTimeout(()=>{o("/department-selector",{replace:!0,state:{userId:E.id,userEmail:E.email,missingFields:{department:ne,subDepartment:oe,manager:he}}})},1500);else if($==="user"&&!K)console.log(" User role with complete data - navigating to tasks dashboard"),setTimeout(()=>{o("/tasks",{replace:!0})},1500);else{console.log(" Non-user role or complete data - navigating to role-based dashboard");const Q={admin:"/admin",manager:"/manager",user:"/tasks"}[$]||"/tasks";console.log(` Navigating to ${Q} for role: ${$}`),setTimeout(()=>{o(Q,{replace:!0})},1500)}}catch(j){if(console.error(" Error checking user data:",j),j.message.includes("401")){console.log("Unauthorized error, redirecting to login"),e("error"),r("Authentication expired. Please sign in again.");return}if(j.message.includes("404")){console.log("User not found in database, assuming new user - redirecting to department selector"),setTimeout(()=>{o("/department-selector",{replace:!0,state:{userId:E.id,userEmail:E.email,isNewUser:!0}})},1500);return}console.log(" Error occurred, showing error state"),e("error"),r("Unable to load user profile. Please check your connection and try again.")}};T.useEffect(()=>{f&&C&&p==="authenticated"&&a&&d&&(e("success"),k())},[f,C,p,a,d,o,x,b]),T.useEffect(()=>{w&&(e("error"),r(w))},[w]),T.useEffect(()=>{const j=new URLSearchParams(window.location.search),M=j.get("error"),U=j.get("error_description");M&&(console.error("OAuth error:",M,U),e("error"),r(U||M),window.history.replaceState({},document.title,window.location.pathname))},[]);const I=async()=>{try{e("loading"),r(null),await y()}catch(j){console.error("Login failed:",j),e("error"),r("Authentication failed. Please try again.")}},R=()=>{e("idle"),r(null)},D=()=>c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.4 3H3v8.4h8.4V3z",fill:"#F25022"}),c.jsx("path",{d:"M21 3h-8.4v8.4H21V3z",fill:"#7FBA00"}),c.jsx("path",{d:"M11.4 12.6H3V21h8.4v-8.4z",fill:"#00A4EF"}),c.jsx("path",{d:"M21 12.6h-8.4V21H21v-8.4z",fill:"#FFB900"})]});return n==="success"?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 px-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-10 w-full max-w-[450px]",children:[c.jsx("div",{className:"flex items-center justify-center w-20 h-20 mx-auto mb-6 bg-green-50 rounded-full",children:c.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),c.jsx("polyline",{points:"22,4 12,14.01 9,11.01"})]})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Welcome Back!"}),c.jsx("p",{className:"text-gray-600 mb-8",children:"Authentication successful. Setting up your profile..."}),c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#8929fe]"})})]})]})}):n==="error"?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 px-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-10 w-full max-w-[450px]",children:[c.jsx("div",{className:"flex items-center justify-center w-20 h-20 mx-auto mb-6 bg-red-50 rounded-full",children:c.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),c.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Authentication Failed"}),c.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:t||"We couldn't sign you in. Please try again."}),c.jsx("button",{onClick:R,className:"bg-[#8929fe] text-white font-medium py-3 px-6 rounded-lg hover:bg-[#7620e0] transition-colors",children:"Try Again"})]})]})}):c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 px-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-10 w-full max-w-[450px]",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-[70px] h-[70px] mx-auto mb-4 rounded-full flex items-center justify-center",children:c.jsx("img",{src:ig,alt:"Quadrant Technologies Logo",className:"rounded-full w-full h-full object-cover"})}),c.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Welcome to Quadrant Technologies"}),c.jsx("p",{className:"text-gray-600",children:"Sign in with your Microsoft account to continue"})]}),c.jsx("button",{onClick:I,disabled:n==="loading",className:"w-full bg-[#8929fe] text-white py-4 px-5 rounded-lg font-medium flex items-center justify-center gap-3 hover:bg-[#7620e0] transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:n==="loading"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Signing you in..."]}):c.jsxs(c.Fragment,{children:[c.jsx(D,{}),"Sign in with Microsoft"]})}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("p",{className:"text-xs text-gray-500",children:"By signing in, you agree to our terms of service and privacy policy."})})]})})};class jo extends Error{constructor(e,t){const r=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=r}}class ag extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Lr extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class mj extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=r}}class gj extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=r}}class xj extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=r}}class a1 extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class yj extends Error{constructor(e,t){const r=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=r}}class iS{constructor(e,t,r){this.statusCode=e,this.statusText=t,this.content=r}}class Eh{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var ae;(function(n){n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None"})(ae||(ae={}));class fl{constructor(){}log(e,t){}}fl.instance=new fl;const vj="8.0.7";class an{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,r){if(!(e in t))throw new Error(`Unknown ${r} value: ${e}.`)}}class Lt{static get isBrowser(){return!Lt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Lt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Lt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function pl(n,e){let t="";return zo(n)?(t=`Binary data of length ${n.byteLength}`,e&&(t+=`. Content: '${wj(n)}'`)):typeof n=="string"&&(t=`String data of length ${n.length}`,e&&(t+=`. Content: '${n}'`)),t}function wj(n){const e=new Uint8Array(n);let t="";return e.forEach(r=>{const o=r<16?"0":"";t+=`0x${o}${r.toString(16)} `}),t.substr(0,t.length-1)}function zo(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}async function aS(n,e,t,r,o,a){const l={},[d,h]=Oi();l[d]=h,n.log(ae.Trace,`(${e} transport) sending data. ${pl(o,a.logMessageContent)}.`);const f=zo(o)?"arraybuffer":"text",p=await t.post(r,{content:o,headers:{...l,...a.headers},responseType:f,timeout:a.timeout,withCredentials:a.withCredentials});n.log(ae.Trace,`(${e} transport) request complete. Response status: ${p.statusCode}.`)}function Cj(n){return n===void 0?new Vd(ae.Information):n===null?fl.instance:n.log!==void 0?n:new Vd(n)}class bj{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}}class Vd{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const r=`[${new Date().toISOString()}] ${ae[e]}: ${t}`;switch(e){case ae.Critical:case ae.Error:this.out.error(r);break;case ae.Warning:this.out.warn(r);break;case ae.Information:this.out.info(r);break;default:this.out.log(r);break}}}}function Oi(){let n="X-SignalR-User-Agent";return Lt.isNode&&(n="User-Agent"),[n,Ej(vj,Sj(),Tj(),kj())]}function Ej(n,e,t,r){let o="Microsoft SignalR/";const a=n.split(".");return o+=`${a[0]}.${a[1]}`,o+=` (${n}; `,e&&e!==""?o+=`${e}; `:o+="Unknown OS; ",o+=`${t}`,r?o+=`; ${r}`:o+="; Unknown Runtime Version",o+=")",o}function Sj(){if(Lt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function kj(){if(Lt.isNode)return process.versions.node}function Tj(){return Lt.isNode?"NodeJS":"Browser"}function D0(n){return n.stack?n.stack:n.message?n.message:`${n}`}function Aj(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class _j extends Eh{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||Lt.isNode){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(t("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=t("node-fetch"):this._fetchType=fetch,this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Aj());if(typeof AbortController>"u"){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Lr;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let r;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),r=new Lr});let o=null;if(e.timeout){const h=e.timeout;o=setTimeout(()=>{t.abort(),this._logger.log(ae.Warning,"Timeout from HTTP request."),r=new ag},h)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},zo(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let a;try{a=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(h){throw r||(this._logger.log(ae.Warning,`Error from HTTP request. ${h}.`),h)}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!a.ok){const h=await l1(a,"text");throw new jo(h||a.statusText,a.status)}const d=await l1(a,e.responseType);return new iS(a.status,a.statusText,d)}getCookieString(e){let t="";return Lt.isNode&&this._jar&&this._jar.getCookies(e,(r,o)=>t=o.join("; ")),t}}function l1(n,e){let t;switch(e){case"arraybuffer":t=n.arrayBuffer();break;case"text":t=n.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=n.text();break}return t}class Nj extends Eh{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Lr):e.method?e.url?new Promise((t,r)=>{const o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(zo(e.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const a=e.headers;a&&Object.keys(a).forEach(l=>{o.setRequestHeader(l,a[l])}),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),r(new Lr)}),e.timeout&&(o.timeout=e.timeout),o.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?t(new iS(o.status,o.statusText,o.response||o.responseText)):r(new jo(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(ae.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),r(new jo(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(ae.Warning,"Timeout from HTTP request."),r(new ag)},o.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Ij extends Eh{constructor(e){if(super(),typeof fetch<"u"||Lt.isNode)this._httpClient=new _j(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new Nj(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Lr):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class fr{static write(e){return`${e}${fr.RecordSeparator}`}static parse(e){if(e[e.length-1]!==fr.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(fr.RecordSeparator);return t.pop(),t}}fr.RecordSeparatorCode=30;fr.RecordSeparator=String.fromCharCode(fr.RecordSeparatorCode);class Rj{writeHandshakeRequest(e){return fr.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,r;if(zo(e)){const d=new Uint8Array(e),h=d.indexOf(fr.RecordSeparatorCode);if(h===-1)throw new Error("Message is incomplete.");const f=h+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(d.slice(0,f))),r=d.byteLength>f?d.slice(f).buffer:null}else{const d=e,h=d.indexOf(fr.RecordSeparator);if(h===-1)throw new Error("Message is incomplete.");const f=h+1;t=d.substring(0,f),r=d.length>f?d.substring(f):null}const o=fr.parse(t),a=JSON.parse(o[0]);if(a.type)throw new Error("Expected a handshake response from the server.");return[r,a]}}var et;(function(n){n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n[n.Ack=8]="Ack",n[n.Sequence=9]="Sequence"})(et||(et={}));class Dj{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new bj(this,e)}}class Pj{constructor(e,t,r){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=r}async _send(e){const t=this._protocol.writeMessage(e);let r=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let o=()=>{},a=()=>{};zo(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(r=new Promise((l,d)=>{o=l,a=d})),this._messages.push(new jj(t,this._totalMessageCount,o,a))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await r}_ack(e){let t=-1;for(let r=0;r<this._messages.length;r++){const o=this._messages[r];if(o._id<=e.sequenceId)t=r,zo(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}t!==-1&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==et.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:et.Sequence,sequenceId:e}));const t=this._messages;for(const r of t)await this._connection.send(r._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case et.Invocation:case et.StreamItem:case et.Completion:case et.StreamInvocation:case et.CancelInvocation:return!0;case et.Close:case et.Sequence:case et.Ping:case et.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:et.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class jj{constructor(e,t,r,o){this._message=e,this._id=t,this._resolver=r,this._rejector=o}}const Mj=30*1e3,Oj=15*1e3,Fj=1e5;var Rt;(function(n){n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting"})(Rt||(Rt={}));class lg{static create(e,t,r,o,a,l,d){return new lg(e,t,r,o,a,l,d)}constructor(e,t,r,o,a,l,d){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(ae.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},an.isRequired(e,"connection"),an.isRequired(t,"logger"),an.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=a??Mj,this.keepAliveIntervalInMilliseconds=l??Oj,this._statefulReconnectBufferSize=d??Fj,this._logger=t,this._protocol=r,this.connection=e,this._reconnectPolicy=o,this._handshakeProtocol=new Rj,this.connection.onreceive=h=>this._processIncomingData(h),this.connection.onclose=h=>this._connectionClosed(h),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Rt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:et.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==Rt.Disconnected&&this._connectionState!==Rt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Rt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Rt.Connecting,this._logger.log(ae.Debug,"Starting HubConnection.");try{await this._startInternal(),Lt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Rt.Connected,this._connectionStarted=!0,this._logger.log(ae.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=Rt.Disconnected,this._logger.log(ae.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((t,r)=>{this._handshakeResolver=t,this._handshakeRejecter=r});await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const r={protocol:this._protocol.name,version:t};if(this._logger.log(ae.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(r)),this._logger.log(ae.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Pj(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(t){throw this._logger.log(ae.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===Rt.Disconnected)return this._logger.log(ae.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Rt.Disconnecting)return this._logger.log(ae.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=Rt.Disconnecting,this._logger.log(ae.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(ae.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===Rt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Lr("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[r,o]=this._replaceStreamingParams(t),a=this._createStreamInvocation(e,t,o);let l;const d=new Dj;return d.cancelCallback=()=>{const h=this._createCancelInvocation(a.invocationId);return delete this._callbacks[a.invocationId],l.then(()=>this._sendWithProtocol(h))},this._callbacks[a.invocationId]=(h,f)=>{if(f){d.error(f);return}else h&&(h.type===et.Completion?h.error?d.error(new Error(h.error)):d.complete():d.next(h.item))},l=this._sendWithProtocol(a).catch(h=>{d.error(h),delete this._callbacks[a.invocationId]}),this._launchStreams(r,l),d}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[r,o]=this._replaceStreamingParams(t),a=this._sendWithProtocol(this._createInvocation(e,t,!0,o));return this._launchStreams(r,a),a}invoke(e,...t){const[r,o]=this._replaceStreamingParams(t),a=this._createInvocation(e,t,!1,o);return new Promise((d,h)=>{this._callbacks[a.invocationId]=(p,y)=>{if(y){h(y);return}else p&&(p.type===et.Completion?p.error?h(new Error(p.error)):d(p.result):h(new Error(`Unexpected message type: ${p.type}`)))};const f=this._sendWithProtocol(a).catch(p=>{h(p),delete this._callbacks[a.invocationId]});this._launchStreams(r,f)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const r=this._methods[e];if(r)if(t){const o=r.indexOf(t);o!==-1&&(r.splice(o,1),r.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const r of t)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(r)))switch(r.type){case et.Invocation:this._invokeClientMethod(r).catch(o=>{this._logger.log(ae.Error,`Invoke client method threw error: ${D0(o)}`)});break;case et.StreamItem:case et.Completion:{const o=this._callbacks[r.invocationId];if(o){r.type===et.Completion&&delete this._callbacks[r.invocationId];try{o(r)}catch(a){this._logger.log(ae.Error,`Stream callback threw error: ${D0(a)}`)}}break}case et.Ping:break;case et.Close:{this._logger.log(ae.Information,"Close message received from server.");const o=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case et.Ack:this._messageBuffer&&this._messageBuffer._ack(r);break;case et.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(r);break;default:this._logger.log(ae.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,r;try{[r,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(o){const a="Error parsing handshake response: "+o;this._logger.log(ae.Error,a);const l=new Error(a);throw this._handshakeRejecter(l),l}if(t.error){const o="Server returned handshake error: "+t.error;this._logger.log(ae.Error,o);const a=new Error(o);throw this._handshakeRejecter(a),a}else this._logger.log(ae.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Rt.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),r=this._methods[t];if(!r){this._logger.log(ae.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(ae.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const o=r.slice(),a=!!e.invocationId;let l,d,h;for(const f of o)try{const p=l;l=await f.apply(this,e.arguments),a&&l&&p&&(this._logger.log(ae.Error,`Multiple results provided for '${t}'. Sending error to server.`),h=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),d=void 0}catch(p){d=p,this._logger.log(ae.Error,`A callback for the method '${t}' threw error '${p}'.`)}h?await this._sendWithProtocol(h):a?(d?h=this._createCompletionMessage(e.invocationId,`${d}`,null):l!==void 0?h=this._createCompletionMessage(e.invocationId,null,l):(this._logger.log(ae.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),h=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(h)):l&&this._logger.log(ae.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(ae.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Lr("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Rt.Disconnecting?this._completeClose(e):this._connectionState===Rt.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===Rt.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=Rt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),Lt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(ae.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let r=0,o=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),a=this._getNextRetryDelay(r++,0,o);if(a===null){this._logger.log(ae.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=Rt.Reconnecting,e?this._logger.log(ae.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(ae.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(l=>l.apply(this,[e]))}catch(l){this._logger.log(ae.Error,`An onreconnecting callback called with error '${e}' threw error '${l}'.`)}if(this._connectionState!==Rt.Reconnecting){this._logger.log(ae.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;a!==null;){if(this._logger.log(ae.Information,`Reconnect attempt number ${r} will start in ${a} ms.`),await new Promise(l=>{this._reconnectDelayHandle=setTimeout(l,a)}),this._reconnectDelayHandle=void 0,this._connectionState!==Rt.Reconnecting){this._logger.log(ae.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Rt.Connected,this._logger.log(ae.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(l=>l.apply(this,[this.connection.connectionId]))}catch(l){this._logger.log(ae.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${l}'.`)}return}catch(l){if(this._logger.log(ae.Information,`Reconnect attempt failed because of error '${l}'.`),this._connectionState!==Rt.Reconnecting){this._logger.log(ae.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===Rt.Disconnecting&&this._completeClose();return}o=l instanceof Error?l:new Error(l.toString()),a=this._getNextRetryDelay(r++,Date.now()-t,o)}}this._logger.log(ae.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:r})}catch(o){return this._logger.log(ae.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${o}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach(r=>{const o=t[r];try{o(null,e)}catch(a){this._logger.log(ae.Error,`Stream 'error' callback called with '${e}' threw error: ${D0(a)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,r,o){if(r)return o.length!==0?{arguments:t,streamIds:o,target:e,type:et.Invocation}:{arguments:t,target:e,type:et.Invocation};{const a=this._invocationId;return this._invocationId++,o.length!==0?{arguments:t,invocationId:a.toString(),streamIds:o,target:e,type:et.Invocation}:{arguments:t,invocationId:a.toString(),target:e,type:et.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(const r in e)e[r].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:o=>{let a;o instanceof Error?a=o.message:o&&o.toString?a=o.toString():a="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,a)))},next:o=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,o)))}})}}_replaceStreamingParams(e){const t=[],r=[];for(let o=0;o<e.length;o++){const a=e[o];if(this._isObservable(a)){const l=this._invocationId;this._invocationId++,t[l]=a,r.push(l.toString()),e.splice(o,1)}}return[t,r]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,r){const o=this._invocationId;return this._invocationId++,r.length!==0?{arguments:t,invocationId:o.toString(),streamIds:r,target:e,type:et.StreamInvocation}:{arguments:t,invocationId:o.toString(),target:e,type:et.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:et.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:et.StreamItem}}_createCompletionMessage(e,t,r){return t?{error:t,invocationId:e,type:et.Completion}:{invocationId:e,result:r,type:et.Completion}}_createCloseMessage(){return{type:et.Close}}}const Bj=[0,2e3,1e4,3e4,null];class c1{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Bj}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Mo{}Mo.Authorization="Authorization";Mo.Cookie="Cookie";class Lj extends Eh{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const r=await this._innerClient.send(e);return t&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):r}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Mo.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Mo.Authorization]&&delete e.headers[Mo.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var un;(function(n){n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling"})(un||(un={}));var Mn;(function(n){n[n.Text=1]="Text",n[n.Binary=2]="Binary"})(Mn||(Mn={}));let Hj=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class u1{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,r){this._httpClient=e,this._logger=t,this._pollAbort=new Hj,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(an.isRequired(e,"url"),an.isRequired(t,"transferFormat"),an.isIn(t,Mn,"transferFormat"),this._url=e,this._logger.log(ae.Trace,"(LongPolling transport) Connecting."),t===Mn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,o]=Oi(),a={[r]:o,...this._options.headers},l={abortSignal:this._pollAbort.signal,headers:a,timeout:1e5,withCredentials:this._options.withCredentials};t===Mn.Binary&&(l.responseType="arraybuffer");const d=`${e}&_=${Date.now()}`;this._logger.log(ae.Trace,`(LongPolling transport) polling: ${d}.`);const h=await this._httpClient.get(d,l);h.statusCode!==200?(this._logger.log(ae.Error,`(LongPolling transport) Unexpected response code: ${h.statusCode}.`),this._closeError=new jo(h.statusText||"",h.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,l)}async _poll(e,t){try{for(;this._running;)try{const r=`${e}&_=${Date.now()}`;this._logger.log(ae.Trace,`(LongPolling transport) polling: ${r}.`);const o=await this._httpClient.get(r,t);o.statusCode===204?(this._logger.log(ae.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):o.statusCode!==200?(this._logger.log(ae.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new jo(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(ae.Trace,`(LongPolling transport) data received. ${pl(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(ae.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof ag?this._logger.log(ae.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(ae.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(ae.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?aS(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(ae.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(ae.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,r]=Oi();e[t]=r;const o={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let a;try{await this._httpClient.delete(this._url,o)}catch(l){a=l}a?a instanceof jo&&(a.statusCode===404?this._logger.log(ae.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(ae.Trace,`(LongPolling transport) Error sending a DELETE request: ${a}`)):this._logger.log(ae.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(ae.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(ae.Trace,e),this.onclose(this._closeError)}}}class Uj{constructor(e,t,r,o){this._httpClient=e,this._accessToken=t,this._logger=r,this._options=o,this.onreceive=null,this.onclose=null}async connect(e,t){return an.isRequired(e,"url"),an.isRequired(t,"transferFormat"),an.isIn(t,Mn,"transferFormat"),this._logger.log(ae.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,o)=>{let a=!1;if(t!==Mn.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let l;if(Lt.isBrowser||Lt.isWebWorker)l=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const d=this._httpClient.getCookieString(e),h={};h.Cookie=d;const[f,p]=Oi();h[f]=p,l=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...h,...this._options.headers}})}try{l.onmessage=d=>{if(this.onreceive)try{this._logger.log(ae.Trace,`(SSE transport) data received. ${pl(d.data,this._options.logMessageContent)}.`),this.onreceive(d.data)}catch(h){this._close(h);return}},l.onerror=d=>{a?this._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},l.onopen=()=>{this._logger.log(ae.Information,`SSE connected to ${this._url}`),this._eventSource=l,a=!0,r()}}catch(d){o(d);return}})}async send(e){return this._eventSource?aS(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class $j{constructor(e,t,r,o,a,l){this._logger=r,this._accessTokenFactory=t,this._logMessageContent=o,this._webSocketConstructor=a,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=l}async connect(e,t){an.isRequired(e,"url"),an.isRequired(t,"transferFormat"),an.isIn(t,Mn,"transferFormat"),this._logger.log(ae.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=await this._accessTokenFactory()),new Promise((o,a)=>{e=e.replace(/^http/,"ws");let l;const d=this._httpClient.getCookieString(e);let h=!1;if(Lt.isNode||Lt.isReactNative){const f={},[p,y]=Oi();f[p]=y,r&&(f[Mo.Authorization]=`Bearer ${r}`),d&&(f[Mo.Cookie]=d),l=new this._webSocketConstructor(e,void 0,{headers:{...f,...this._headers}})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);l||(l=new this._webSocketConstructor(e)),t===Mn.Binary&&(l.binaryType="arraybuffer"),l.onopen=f=>{this._logger.log(ae.Information,`WebSocket connected to ${e}.`),this._webSocket=l,h=!0,o()},l.onerror=f=>{let p=null;typeof ErrorEvent<"u"&&f instanceof ErrorEvent?p=f.error:p="There was an error with the transport",this._logger.log(ae.Information,`(WebSockets transport) ${p}.`)},l.onmessage=f=>{if(this._logger.log(ae.Trace,`(WebSockets transport) data received. ${pl(f.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(f.data)}catch(p){this._close(p);return}},l.onclose=f=>{if(h)this._close(f);else{let p=null;typeof ErrorEvent<"u"&&f instanceof ErrorEvent?p=f.error:p="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",a(new Error(p))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(ae.Trace,`(WebSockets transport) sending data. ${pl(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(ae.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const d1=100;class zj{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,an.isRequired(e,"url"),this._logger=Cj(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let r=null,o=null;if(Lt.isNode&&typeof require<"u"){const a=typeof __webpack_require__=="function"?__non_webpack_require__:require;r=a("ws"),o=a("eventsource")}!Lt.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:Lt.isNode&&!t.WebSocket&&r&&(t.WebSocket=r),!Lt.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:Lt.isNode&&!t.EventSource&&typeof o<"u"&&(t.EventSource=o),this._httpClient=new Lj(t.httpClient||new Ij(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||Mn.Binary,an.isIn(e,Mn,"transferFormat"),this._logger.log(ae.Debug,`Starting connection with transfer format '${Mn[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(ae.Error,t),await this._stopPromise,Promise.reject(new Lr(t))}else if(this._connectionState!=="Connected"){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(ae.Error,t),Promise.reject(new Lr(t))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new cg(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(ae.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(ae.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(ae.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(ae.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===un.WebSockets)this.transport=this._constructTransport(un.WebSockets),await this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,o=0;do{if(r=await this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Lr("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(t=r.url),r.accessToken){const a=r.accessToken;this._accessTokenFactory=()=>a,this._httpClient._accessToken=a,this._httpClient._accessTokenFactory=void 0}o++}while(r.url&&o<d1);if(o===d1&&r.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,r,e)}this.transport instanceof u1&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(ae.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(ae.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}}async _getNegotiationResponse(e){const t={},[r,o]=Oi();t[r]=o;const a=this._resolveNegotiateUrl(e);this._logger.log(ae.Debug,`Sending negotiation request: ${a}.`);try{const l=await this._httpClient.post(a,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(l.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${l.statusCode}'`));const d=JSON.parse(l.content);return(!d.negotiateVersion||d.negotiateVersion<1)&&(d.connectionToken=d.connectionId),d.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new a1("Client didn't negotiate Stateful Reconnect but the server did.")):d}catch(l){let d="Failed to complete negotiation with the server: "+l;return l instanceof jo&&l.statusCode===404&&(d=d+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(ae.Error,d),Promise.reject(new a1(d))}}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}async _createTransport(e,t,r,o){let a=this._createConnectUrl(e,r.connectionToken);if(this._isITransport(t)){this._logger.log(ae.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(a,o),this.connectionId=r.connectionId;return}const l=[],d=r.availableTransports||[];let h=r;for(const f of d){const p=this._resolveTransportOrError(f,t,o,(h==null?void 0:h.useStatefulReconnect)===!0);if(p instanceof Error)l.push(`${f.transport} failed:`),l.push(p);else if(this._isITransport(p)){if(this.transport=p,!h){try{h=await this._getNegotiationResponse(e)}catch(y){return Promise.reject(y)}a=this._createConnectUrl(e,h.connectionToken)}try{await this._startTransport(a,o),this.connectionId=h.connectionId;return}catch(y){if(this._logger.log(ae.Error,`Failed to start the transport '${f.transport}': ${y}`),h=void 0,l.push(new xj(`${f.transport} failed: ${y}`,un[f.transport])),this._connectionState!=="Connecting"){const x="Failed to select transport before stop() was called.";return this._logger.log(ae.Debug,x),Promise.reject(new Lr(x))}}}}return l.length>0?Promise.reject(new yj(`Unable to connect to the server with any of the available transports. ${l.join(" ")}`,l)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case un.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new $j(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case un.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Uj(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case un.LongPolling:return new u1(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async r=>{let o=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{o=!0}else{this._stopConnection(r);return}o&&this._stopConnection(r)}:this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(e,t)}_resolveTransportOrError(e,t,r,o){const a=un[e.transport];if(a==null)return this._logger.log(ae.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(Vj(t,a))if(e.transferFormats.map(d=>Mn[d]).indexOf(r)>=0){if(a===un.WebSockets&&!this._options.WebSocket||a===un.ServerSentEvents&&!this._options.EventSource)return this._logger.log(ae.Debug,`Skipping transport '${un[a]}' because it is not supported in your environment.'`),new mj(`'${un[a]}' is not supported in your environment.`,a);this._logger.log(ae.Debug,`Selecting transport '${un[a]}'.`);try{return this.features.reconnect=a===un.WebSockets?o:void 0,this._constructTransport(a)}catch(d){return d}}else return this._logger.log(ae.Debug,`Skipping transport '${un[a]}' because it does not support the requested transfer format '${Mn[r]}'.`),new Error(`'${un[a]}' does not support ${Mn[r]}.`);else return this._logger.log(ae.Debug,`Skipping transport '${un[a]}' because it was disabled by the client.`),new gj(`'${un[a]}' is disabled by the client.`,a)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(ae.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(ae.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(ae.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(ae.Error,`Connection disconnected with error '${e}'.`):this._logger.log(ae.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(ae.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(ae.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!Lt.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(ae.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const r=new URLSearchParams(t.searchParams);return r.has("negotiateVersion")||r.append("negotiateVersion",this._negotiateVersion.toString()),r.has("useStatefulReconnect")?r.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&r.append("useStatefulReconnect","true"),t.search=r.toString(),t.toString()}}function Vj(n,e){return!n||(e&n)!==0}class cg{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Xc,this._transportResult=new Xc,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Xc),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Xc;const e=this._transportResult;this._transportResult=void 0;const t=typeof this._buffer[0]=="string"?this._buffer.join(""):cg._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(r){e.reject(r)}}}static _concatBuffers(e){const t=e.map(a=>a.byteLength).reduce((a,l)=>a+l),r=new Uint8Array(t);let o=0;for(const a of e)r.set(new Uint8Array(a),o),o+=a.byteLength;return r.buffer}}class Xc{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const Kj="json";class qj{constructor(){this.name=Kj,this.version=2,this.transferFormat=Mn.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=fl.instance);const r=fr.parse(e),o=[];for(const a of r){const l=JSON.parse(a);if(typeof l.type!="number")throw new Error("Invalid payload.");switch(l.type){case et.Invocation:this._isInvocationMessage(l);break;case et.StreamItem:this._isStreamItemMessage(l);break;case et.Completion:this._isCompletionMessage(l);break;case et.Ping:break;case et.Close:break;case et.Ack:this._isAckMessage(l);break;case et.Sequence:this._isSequenceMessage(l);break;default:t.log(ae.Information,"Unknown message type '"+l.type+"' ignored.");continue}o.push(l)}return o}writeMessage(e){return fr.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}}const Wj={trace:ae.Trace,debug:ae.Debug,info:ae.Information,information:ae.Information,warn:ae.Warning,warning:ae.Warning,error:ae.Error,critical:ae.Critical,none:ae.None};function Gj(n){const e=Wj[n.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${n}`)}class Yj{configureLogging(e){if(an.isRequired(e,"logging"),Qj(e))this.logger=e;else if(typeof e=="string"){const t=Gj(e);this.logger=new Vd(t)}else this.logger=new Vd(e);return this}withUrl(e,t){return an.isRequired(e,"url"),an.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...t}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return an.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new c1(e):this.reconnectPolicy=e:this.reconnectPolicy=new c1,this}withServerTimeout(e){return an.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return an.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e==null?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new zj(this.url,e);return lg.create(t,this.logger||fl.instance,this.protocol||new qj,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Qj(n){return n.log!==void 0}function Tr({onClick:n,children:e}){return c.jsx("div",{children:c.jsx("button",{onClick:n,className:`inline-flex items-center justify-center px-3 py-2\r
             bg-[#8F00FF] text-white text-sm font-medium rounded-full \r
             transition-colors duration-200 hover:bg-opacity-80`,children:e})})}/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),h1=n=>{const e=Xj(n);return e.charAt(0).toUpperCase()+e.slice(1)},lS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Zj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=T.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:l,...d},h)=>T.createElement("svg",{ref:h,...e8,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:lS("lucide",o),...!a&&!Zj(d)&&{"aria-hidden":"true"},...d},[...l.map(([f,p])=>T.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(n,e)=>{const t=T.forwardRef(({className:r,...o},a)=>T.createElement(t8,{ref:a,iconNode:e,className:lS(`lucide-${Jj(h1(n))}`,`lucide-${n}`,r),...o}));return t.displayName=h1(n),t};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],r8=Xe("activity",n8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],cS=Xe("align-left",s8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],uS=Xe("arrow-left",o8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Wa=Xe("arrow-right",i8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],l8=Xe("badge-plus",a8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ua=Xe("bell",c8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],d8=Xe("calendar-range",u8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ss=Xe("calendar",h8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zc=Xe("chart-column",f8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],f1=Xe("chart-no-axes-column",p8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Nl=Xe("chevron-down",m8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Sh=Xe("chevron-left",g8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Yi=Xe("chevron-right",x8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Cs=Xe("circle-alert",y8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_i=Xe("circle-check-big",v8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],C8=Xe("circle-check",w8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],eu=Xe("circle-x",b8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Fn=Xe("clock",E8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k8=Xe("eye",S8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],p1=Xe("file-text",T8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Tp=Xe("funnel",A8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],N8=Xe("git-branch",_8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],P0=Xe("inbox",I8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]],D8=Xe("kanban",R8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ug=Xe("link",P8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],M8=Xe("list",j8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],F8=Xe("lock",O8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],L8=Xe("log-out",B8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],dS=Xe("menu",H8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],m1=Xe("message-circle",U8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],g1=Xe("message-square",$8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V8=Xe("plus",z8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],x1=Xe("refresh-cw",K8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],W8=Xe("save",q8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dg=Xe("search",G8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ap=Xe("send",Y8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],J8=Xe("settings",Q8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],hS=Xe("square-pen",X8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],j0=Xe("target",Z8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_p=Xe("trash-2",e6);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],n6=Xe("trending-up",t6);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],s6=Xe("triangle-alert",r6);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ks=Xe("user",o6);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ao=Xe("users",i6);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yn=Xe("x",a6);function l6({onSearch:n,placeholder:e="Search...",className:t=""}){const[r,o]=T.useState(""),a=l=>{o(l.target.value),n(l.target.value)};return c.jsxs("div",{className:`relative ${t}`,children:[c.jsx("span",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:c.jsx(dg,{className:"w-4 h-4 text-gray-400"})}),c.jsx("input",{type:"text",value:r,onChange:a,placeholder:e,className:`w-full pl-9 pr-3 py-1.5 text-sm border border-gray-300 rounded-full\r
          text-gray-700 focus:outline-none focus:ring-1 focus:ring-purple-400 transition duration-200`})]})}function c6({task:n,dependencyTasks:e,dependentTasks:t,handleDependencyItemClick:r}){const o=l=>l?new Date(l).toISOString().split("T")[0]:"No date";console.log(t);const a=l=>{switch(l){case"Completed":return"bg-green-100 text-green-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Not Started":return"bg-gray-100 text-gray-800";case"Accepted":return"bg-purple-100 text-purple-800";case"Pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(cS,{className:"w-4 h-4 text-electric-violet mr-2"}),c.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"Description"})]}),c.jsx("div",{className:"pl-2",children:c.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:(n==null?void 0:n.description)||"This task needs to be completed according to the project requirements."})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(ug,{className:"w-4 h-4 text-electric-violet mr-2"}),c.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"Dependencies"})]}),c.jsxs("div",{className:"pl-2 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"This task depends on:"}),e&&e.length>0?e.map((l,d)=>{var h,f;return c.jsx("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-100 mb-2 cursor-pointer hover:bg-blue-100",onClick:()=>l&&r(l),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Wa,{className:"w-4 h-4 text-blue-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-blue-800",children:((h=l==null?void 0:l.request)==null?void 0:h.taskName)||"Unnamed Task"}),c.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[c.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${a(l==null?void 0:l.status)}`,children:["Status: ",(l==null?void 0:l.status)||"Unknown"]}),c.jsxs("span",{className:"text-xs text-gray-500",children:["Date: ",o((f=l==null?void 0:l.request)==null?void 0:f.requestedDate)]})]})]})]})},(l==null?void 0:l.id)||d)}):c.jsx("div",{className:"text-sm text-gray-500",children:"No dependencies"})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tasks dependent on this:"}),t&&t.length>0?t.map((l,d)=>{var h,f;return c.jsx("div",{className:"bg-purple-50 p-3 rounded-md border border-purple-100 mb-2 cursor-pointer hover:bg-purple-100",onClick:()=>l&&r(l),children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Wa,{className:"w-4 h-4 text-purple-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-purple-800",children:((h=l==null?void 0:l.request)==null?void 0:h.taskName)||"Unnamed Task"}),c.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[c.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${a(l==null?void 0:l.status)}`,children:["Status: ",(l==null?void 0:l.status)||"Unknown"]}),c.jsxs("span",{className:"text-xs text-gray-500",children:["Date: ",o((f=l==null?void 0:l.request)==null?void 0:f.requestedDate)]})]})]})]})},(l==null?void 0:l.id)||d)}):c.jsx("div",{className:"text-sm text-gray-500",children:"No tasks depend on this"})]})]})]})]})}function fS({progress:n,isOvertime:e,dueDate:t,status:r}){const o=new Date,a=new Date(t);o.setHours(0,0,0,0),a.setHours(0,0,0,0);const l=o>a,d=r==="Completed";let h="bg-red-500";e?h="bg-black":n>=70?h="bg-green-500":n>=30&&(h="bg-yellow-500");let f=d?"100%":`${n}%`,p="text-gray-700";return d||(l&&e||l?(f="OVERDUE",p="text-red-500 animate-blink"):e&&(f="OVER TIME",p="text-red-500 animate-blink")),c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsx("div",{className:`text-xs ${p} font-medium mb-1`,children:f}),c.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5",children:c.jsx("div",{className:`${h} h-2.5 rounded-full transition-all duration-300`,style:{width:`${d?100:n}%`}})})]})}const pS=document.createElement("style");pS.innerHTML=`
  .animate-blink {
    animation: blink 1s infinite;
  }
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }
`;document.head.appendChild(pS);function mS({taskOrStep:n}){const e=parseFloat(n.estimatedHours);return c.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[c.jsx(Fn,{className:"w-4 h-4 mr-1 text-blue-600"}),c.jsxs("span",{className:"font-medium",children:[n.completedHours||0,"/",e||0," hours"]})]})}function u6({step:n,taskId:e,setShowSubtaskModal:t,setEditingStepId:r,setStepForm:o,onDeleteSubtask:a}){const{acquireToken:l}=vn(),[d,h]=T.useState(null),f=n.status==="In Progress",p="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/SubTask",y=b=>{if(b.status==="Completed")return{progress:100,isOvertime:!1};if(!b.estimatedHours)return{progress:0,isOvertime:!1};const k=parseFloat(b.completedHours||0),I=parseFloat(b.estimatedHours),R=k>I;let D;return k===I&&b.status!=="Completed"?D=90:D=Math.min(100,Math.round(k/I*100)),{progress:D,isOvertime:R}},x=async()=>{try{const b=await l("api");if(!b)throw new Error("Token acquisition failed");return{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}}}catch(b){throw console.error("Error acquiring token:",b),b}},C=b=>{h(d===b?null:b)},w=b=>b?new Date(b).toISOString().split("T")[0]:"",E=async(b,k)=>{var I,R;try{const D=await x();await Ze.delete(`${p}/${k}`,D),a&&a(b,k),alert("Subtask deleted successfully.")}catch(D){console.error("Error deleting subtask:",D),alert("Failed to delete subtask: "+(((R=(I=D.response)==null?void 0:I.data)==null?void 0:R.message)||D.message))}},{progress:S,isOvertime:A}=y(n);return c.jsxs("div",{className:"grid grid-cols-8 py-2 px-4 bg-gray-50 border-b border-gray-200 hover:bg-gray-100 transition-colors",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:`font-medium text-gray-800 text-base ${n.status==="Completed"?"line-through text-gray-500":""}`,children:n.name}),n.description&&c.jsxs("button",{onClick:b=>{b.stopPropagation(),C(n.id)},className:"text-xs text-gray-500 flex items-center hover:text-electric-violet",children:[c.jsx(cS,{className:"w-3 h-3 mr-1"}),"Description"]}),d===n.id&&n.description&&c.jsx("div",{className:"mt-1 text-xs text-gray-600",children:n.description})]})}),c.jsx("div",{className:"text-sm text-gray-700 flex items-center",children:w(n.startDate)}),c.jsx("div",{className:"text-sm text-gray-700 flex items-center",children:w(n.dueDate)}),c.jsx("div",{className:"flex items-center",children:c.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${h6(n.priority)}`,children:n.priority})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${d6(n.status)}`,children:n.status})}),c.jsx("div",{className:"flex items-center",children:c.jsx(fS,{progress:S,isOvertime:A,dueDate:n.dueDate,status:n.status})}),c.jsx("div",{className:"flex items-center",children:c.jsx(mS,{taskOrStep:n})}),c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:async b=>{var k,I;b.stopPropagation();try{const R=await x(),j=(await Ze.get(`${p}/${n.id}`,R)).data;t(e),r(n.id),o({name:j.subTaskName||j.name||"",description:j.description||"",startDate:w(j.startDate),dueDate:w(j.dueDate),date:w(j.datetime||j.dueDate),priority:j.priority||"Medium",status:j.status||"Not Started",estimatedHours:j.estimatedHours?j.estimatedHours.toString():"1",todayEffort:j.workedHours?j.workedHours.toString():"",completedHours:j.completedHours?j.completedHours.toString():""})}catch(R){console.error("Error fetching subtask:",R),alert("Failed to load subtask data: "+(((I=(k=R.response)==null?void 0:k.data)==null?void 0:I.message)||R.message))}},className:"p-1 hover:bg-gray-200 rounded transition-colors",children:c.jsx(hS,{className:"w-3 h-3 text-gray-500"})}),c.jsx("button",{onClick:b=>{if(b.stopPropagation(),f){alert("Cannot delete a subtask that is In Progress.");return}window.confirm("Are you sure you want to delete this subtask?")&&E(e,n.id)},className:`p-1 rounded transition-colors ${f?"opacity-50 cursor-not-allowed":"hover:bg-gray-200"}`,disabled:f,title:f?"Cannot delete In Progress subtask":"Delete subtask",children:c.jsx(_p,{className:"w-3 h-3 text-gray-500"})})]})]})}const d6=n=>{switch(n){case"Completed":return"bg-green-100 text-green-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Not Started":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},h6=n=>{switch(n){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};function f6({task:n,isExpanded:e,toggleTaskExpand:t,dependencyTasks:r,dependentTasks:o,handleDependencyItemClick:a,openEditTaskModal:l,deleteTask:d,setShowSubtaskModal:h,setEditingStepId:f,setStepForm:p,setShowDependencyRequestForm:y,setDependencyTaskId:x,setDependencyStepId:C,onDeleteSubtask:w,setTaskList:E}){const{acquireToken:S}=vn(),[A,b]=T.useState(!1),[k,I]=T.useState(!1),[R,D]=T.useState(""),[j,M]=T.useState(null),[U,P]=T.useState(!1),L=T.useRef(null),$=n.status==="Completed",z=n.status==="Not Started",ne=n.hasSubtask==="Yes",oe="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task",he=async()=>{try{const se=await S("api");if(!se)throw new Error("Token acquisition failed");return{headers:{Authorization:`Bearer ${se}`,"Content-Type":"application/json"}}}catch(se){throw console.error("Error acquiring token:",se),se}},K=se=>{if(se.status==="Completed")return{progress:100,isOvertime:!1};if(se.steps&&se.steps.length>0&&se.steps.every(it=>it.status==="Completed"))return{progress:100,isOvertime:!1};if(!se.estimatedHours)return{progress:0,isOvertime:!1};const we=parseFloat(se.completedHours||0),ke=parseFloat(se.estimatedHours),Le=we>ke;let Te;return we===ke&&se.status!=="Completed"?Te=90:Te=Math.min(100,Math.round(we/ke*100)),{progress:Te,isOvertime:Le}},B=se=>!se||se.length===0?n.status:se.some(we=>we.status==="In Progress")?"In Progress":se.every(we=>we.status==="Completed")?"Completed":se.every(we=>we.status==="Not Started")?"Not Started":"In Progress";T.useEffect(()=>{if(n.steps&&n.steps.length>0&&!$){console.log("TaskRow useEffect triggered for task:",n.id,"Steps:",n.steps);const se=B(n.steps);se!==n.status&&(console.log(`Task ${n.id} status changing from ${n.status} to ${se}`),E(ke=>ke.map(Le=>Le.id.toString()===n.id.toString()?{...Le,status:se}:{...Le})),(async()=>{var ke,Le,Te,ze,it,bt;try{const mt=await he();await Ze.patch(`${oe}/UpdateTask`,{TaskId:n.id,Status:se,Priority:n.priority,WorkedHours:0,UpdateDate:new Date().toISOString(),HasSubtask:n.hasSubtask},mt),console.log(`Task ${n.id} status updated to ${se} in backend`)}catch(mt){console.error("Error updating task status:",{message:mt.message,status:(ke=mt.response)==null?void 0:ke.status,data:(Le=mt.response)==null?void 0:Le.data,headers:(Te=mt.response)==null?void 0:Te.headers}),alert(`Failed to update task status: ${((ze=mt.response)==null?void 0:ze.status)||""} ${((bt=(it=mt.response)==null?void 0:it.data)==null?void 0:bt.message)||mt.message}. Please check permissions or try again. The status has been updated locally.`)}})())}},[n.steps,n.status,n.id,E,S,$]);const Q=r,ee=o,_=()=>{!$&&n.id&&ne?(console.log("Opening subtask modal with taskId:",n.id,"hasSubtask:",n.hasSubtask),h(n.id),f(null),p({name:"",description:"",startDate:"",dueDate:"",date:"",priority:"Medium",status:"Not Started",estimatedHours:"",todayEffort:"",completedHours:""})):console.error("Cannot open subtask modal: Invalid taskId, task is completed, or cannot add subtasks",{id:n.id,status:n.status,canAddSubtasks:ne})},F=se=>{if(se.stopPropagation(),z){const ke=n.taskName.length>13?`${n.taskName.substring(0,10)}...`:n.taskName;M({id:n.id,name:ke,fullName:n.taskName}),I(!0)}},Y=async()=>{if(j){P(!0);try{const se=j.name;await d(j.id),I(!1),M(null),P(!1),setTimeout(()=>{D(se),b(!0),toast.success(`Task "${se}" deleted successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},200)}catch(se){console.error("Error deleting task:",se),P(!1),toast.error("Failed to delete task. Please try again.",{position:"top-right",autoClose:3e3})}}},W=()=>{I(!1),M(null)};T.useEffect(()=>(A&&(L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{b(!1),D("")},3e3)),()=>{L.current&&(clearTimeout(L.current),L.current=null)}),[A]),T.useEffect(()=>()=>{L.current&&clearTimeout(L.current)},[]);const{progress:ce,isOvertime:pe}=K(n),Ee=13,Z=n.taskName.length>Ee?`${n.taskName.substring(0,Ee-3)}...`:n.taskName;return c.jsxs("div",{className:"relative border-b border-gray-200",children:[k&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(_p,{className:"w-5 h-5 text-red-600"})}),c.jsx("div",{className:"ml-3",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Task"})})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete the task"," ",c.jsxs("span",{className:"font-semibold text-gray-900",title:j==null?void 0:j.fullName,children:['"',j==null?void 0:j.name,'"']}),"? This action cannot be undone."]})}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:W,disabled:U,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:Y,disabled:U,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:U?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete Task"})]})]})}),A&&R&&c.jsx("div",{className:"fixed top-4 right-4 bg-green-600 text-white p-4 rounded-lg shadow-lg z-50 animate-slide-in",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 mr-3",children:c.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-sm font-bold",children:""})})}),c.jsxs("span",{children:['Task "',R,'" deleted successfully!']})]}),c.jsx("button",{onClick:()=>{b(!1),D(""),L.current&&(clearTimeout(L.current),L.current=null)},className:"ml-4 text-white hover:text-gray-200 font-bold text-lg",title:"Close alert",children:""})]})}),c.jsxs("div",{className:"grid grid-cols-8 py-4 px-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:se=>{se.stopPropagation(),t(n.id)},className:"text-gray-500 hover:text-electric-violet transition-colors flex-shrink-0",children:e?c.jsx(Nl,{className:"w-5 h-5"}):c.jsx(Yi,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:`font-medium text-gray-800 text-base ${e?"font-semibold":""}`,title:n.taskName,children:Z}),n.steps&&n.steps.length>0&&c.jsxs("span",{className:"text-xs text-gray-600 font-medium",children:[n.steps.length," subtask",n.steps.length!==1?"s":""]})]})]}),c.jsx("div",{className:"text-sm text-gray-700 flex items-center",children:new Date(n.startDate).toISOString().split("T")[0]}),c.jsx("div",{className:"text-sm text-gray-700 flex items-center",children:new Date(n.dueDate).toISOString().split("T")[0]}),c.jsx("div",{className:"flex items-center",children:c.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${p6(n.priority)}`,children:n.priority})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${m6(n.status)}`,children:n.status})}),c.jsx("div",{className:"flex items-center",children:c.jsx(fS,{progress:ce,isOvertime:pe,dueDate:n.dueDate,status:n.status})}),c.jsx("div",{className:"flex items-center",children:c.jsx(mS,{taskOrStep:n})}),c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:se=>{se.stopPropagation(),$||(x(n.id),C(null),y(!0))},className:`p-1 rounded transition-colors ${$?"opacity-50 cursor-not-allowed":"hover:bg-gray-200"}`,disabled:$,title:$?"Cannot add dependency to completed task":"Add dependency",children:c.jsx(ug,{className:"w-4 h-4 text-blue-500"})}),c.jsx("button",{onClick:se=>{se.stopPropagation(),$||l(n)},className:`p-1 rounded transition-colors ${$?"opacity-50 cursor-not-allowed":"hover:bg-gray-200"}`,disabled:$,title:$?"Cannot edit completed task":"Edit task",children:c.jsx(hS,{className:"w-4 h-4 text-blue-500"})}),c.jsx("button",{onClick:F,className:`p-1 rounded transition-colors ${z?"hover:bg-gray-200":"opacity-50 cursor-not-allowed"}`,disabled:!z,title:z?"Delete task":"Cannot delete task unless not started",children:c.jsx(_p,{className:"w-4 h-4 text-red-500"})}),c.jsx("button",{onClick:se=>{se.stopPropagation(),!$&&ne&&_()},className:`p-1 rounded transition-colors ${$||!ne?"opacity-50 cursor-not-allowed":"hover:bg-gray-200"}`,disabled:$||!ne,title:$?"Cannot add subtask to completed task":ne?"Add subtask":"Cannot add subtasks to this task",children:c.jsx(V8,{className:"w-4 h-4 text-green-800"})})]})]}),e&&c.jsxs("div",{className:"pl-8 pr-4 pb-4",children:[n.steps&&n.steps.length>0&&c.jsx("div",{className:"mb-4",children:n.steps.map(se=>c.jsx(u6,{step:se,taskId:n.id,setShowSubtaskModal:h,setEditingStepId:f,setStepForm:p,onDeleteSubtask:w},se.id))}),c.jsx(c6,{task:n,dependencyTasks:Q,dependentTasks:ee,handleDependencyItemClick:a})]}),c.jsx("style",{jsx:!0,children:`
                .animate-slide-in {
                    animation: slideIn 0.3s ease-out;
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `})]})}function p6(n){switch(n){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function m6(n){switch(n){case"Completed":return"bg-green-100 text-green-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Not Started":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function g6({taskId:n,editingStepId:e,stepForm:t,setStepForm:r,onClose:o,onSave:a}){var w;const{acquireToken:l}=vn(),[d,h]=T.useState(null),[f,p]=T.useState(!1);T.useEffect(()=>{e||r({name:"",description:"",startDate:"",dueDate:"",priority:"Medium",status:"Not Started",estimatedHours:"1",todayEffort:"",completedHours:""}),console.log("SubtaskModal opened with taskId:",n,"stepForm:",t)},[e,r,n]);const y=E=>E?new Date(E).toISOString():"",x=T.useCallback(async()=>{var b,k,I,R,D,j,M,U;if(f)return;if(p(!0),h(null),!((b=t.name)!=null&&b.trim())){h("Subtask Name is required"),p(!1);return}if(!e&&!t.dueDate){h("Due Date is required"),p(!1);return}if(e&&!t.date){h("Date is required"),p(!1);return}if(t.todayEffort&&parseFloat(t.todayEffort)<0){h("Today's Efforts cannot be negative"),p(!1);return}if(t.estimatedHours&&parseFloat(t.estimatedHours)<=0){h("Estimated Hours must be greater than 0"),p(!1);return}if(!e&&!t.estimatedHours){h("Estimated Hours is required"),p(!1);return}if(t.status==="Not Started"&&t.completedHours&&parseFloat(t.completedHours)>0){h('Subtasks with "Not Started" status cannot have completed hours'),p(!1);return}const E=t.status&&["Not Started","In Progress","Completed"].includes(t.status)?t.status:"Not Started",S=t.priority&&["High","Medium","Low"].includes(t.priority)?t.priority:"Medium",A=parseInt(n);if(!n||isNaN(A)){console.error("Invalid taskId:",n),h("Invalid task ID. Please ensure the task is properly selected."),p(!1);return}try{const P={subTaskName:t.name.trim(),status:E,description:t.description||"",priority:S,taskItemId:A,estimatedHours:parseFloat(t.estimatedHours)||1,workedHours:parseFloat(t.todayEffort)||0,...e?{datetime:y(t.date)}:{startDate:y(t.startDate),dueDate:y(t.dueDate)}};console.log("Sending payload:",P);const L=await l("api");if(!L){h("Failed to get authentication token. Please try logging in again."),p(!1);return}const $={"Content-Type":"application/json",Accept:"*/*",Authorization:`Bearer ${L}`};let z=e;e?await Ze.put(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/SubTask/${e}`,P,{headers:$}):z=(await Ze.post("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/SubTask",P,{headers:$})).data.id,h(null),a(A,z,{...t,status:E,priority:S,estimatedHours:parseFloat(t.estimatedHours)||1,dueDate:e?t.date:t.dueDate}),o()}catch(P){console.error("Error saving subtask:",{endpoint:e?`/api/SubTask/${e} (PUT)`:"/api/SubTask (POST)",error:(k=P.response)==null?void 0:k.data,status:(I=P.response)==null?void 0:I.status,message:P.message}),h(((R=P.response)==null?void 0:R.status)===401?"Authentication failed. Please log in again.":((D=P.response)==null?void 0:D.status)===403?"You do not have permission to perform this action.":((j=P.response)==null?void 0:j.status)===404?"Task or subtask not found. Please try again or contact support.":((U=(M=P.response)==null?void 0:M.data)==null?void 0:U.message)||"Failed to save subtask. Please check the input data or server logs.")}finally{p(!1)}},[t,n,e,a,o,l,f]),C=t.status==="Not Started"?["Not Started","In Progress","Completed"]:["In Progress","Completed"];return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h5",{className:"text-lg font-medium text-gray-800",children:e?"Edit Subtask":"Add New Subtask"}),c.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-200 rounded-full",disabled:f,children:c.jsx(yn,{className:"w-5 h-5 text-gray-600"})})]}),d&&c.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded-md",children:d}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs text-gray-600",children:["Name ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",className:`w-full px-3 py-2 border ${!((w=t.name)!=null&&w.trim())&&d?"border-red-500":"border-gray-300"} rounded-md focus:outline-none ${e?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-electric-violet"}`,value:t.name||"",onChange:E=>!e&&r({...t,name:E.target.value}),disabled:e||f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Description"}),c.jsx("textarea",{className:`w-full px-3 py-2 border border-gray-300 rounded-md ${e?"bg-gray-100 cursor-not-allowed":"focus:outline-none focus:ring-2 focus:ring-electric-violet"}`,value:t.description||"",onChange:E=>!e&&r({...t,description:E.target.value}),disabled:e||f})]}),e?c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs text-gray-600",children:["Date ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",className:`w-full px-3 py-2 border ${!t.date&&d?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-electric-violet`,value:t.date||t.dueDate||"",onChange:E=>r({...t,date:E.target.value}),disabled:f,required:!0})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs text-gray-600",children:["Start Date ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",className:`w-full px-3 py-2 border ${!t.startDate&&d?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-electric-violet`,value:t.startDate||"",onChange:E=>r({...t,startDate:E.target.value}),disabled:f,required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs text-gray-600",children:["Due Date ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",className:`w-full px-3 py-2 border ${!t.dueDate&&d?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-electric-violet`,value:t.dueDate||"",onChange:E=>r({...t,dueDate:E.target.value}),disabled:f,required:!0})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Priority"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-electric-violet",value:t.priority||"Medium",onChange:E=>r({...t,priority:E.target.value}),disabled:f,children:[c.jsx("option",{value:"High",children:"High"}),c.jsx("option",{value:"Medium",children:"Medium"}),c.jsx("option",{value:"Low",children:"Low"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Status"}),c.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-electric-violet",value:t.status||"Not Started",onChange:E=>r({...t,status:E.target.value}),disabled:f,children:C.map(E=>c.jsx("option",{value:E,children:E},E))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-xs text-gray-600",children:["Estimated Hours ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",min:"0.5",step:"0.5",className:`w-full px-3 py-2 border ${!t.estimatedHours&&d?"border-red-500":"border-gray-300"} rounded-md focus:outline-none ${e?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-electric-violet"}`,value:t.estimatedHours||"",onChange:E=>!e&&r({...t,estimatedHours:E.target.value}),disabled:e||f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Today's Efforts"}),c.jsx("input",{type:"number",min:"0",step:"0.5",className:`w-full px-3 py-2 border ${t.todayEffort&&parseFloat(t.todayEffort)<0&&d?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-electric-violet`,value:t.todayEffort||"",onChange:E=>r({...t,todayEffort:E.target.value}),disabled:f})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Completed Hours"}),c.jsx("input",{type:"number",min:"0",step:"0.5",className:`w-full px-3 py-2 border ${t.status==="Not Started"&&t.completedHours&&parseFloat(t.completedHours)>0&&d?"border-red-500":"border-gray-300"} rounded-md bg-gray-100 cursor-not-allowed`,value:t.completedHours||"",disabled:!0})]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[c.jsx("button",{onClick:x,className:`px-4 py-2 bg-electric-violet text-white rounded-md hover:bg-purple-700 ${f?"opacity-50 cursor-not-allowed":""}`,disabled:f,children:e?"Save":"Add Subtask"}),c.jsx("button",{onClick:o,className:`px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 ${f?"opacity-50 cursor-not-allowed":""}`,disabled:f,children:"Cancel"})]})]})})}const gS=({taskId:n,stepId:e,taskList:t,onClose:r,onSave:o})=>{const{users:a,loading:l,error:d}=oS(),{isAuthenticated:h,isLoading:f,user:p,login:y}=vn();Gi();const[x,C]=T.useState({taskName:"",targetUser:"",requestedTask:"",description:"",priority:"medium",estimatedImpact:""}),[w,E]=T.useState(!1),[S,A]=T.useState({}),[b,k]=T.useState(null),[I,R]=T.useState(""),[D,j]=T.useState([]),[M,U]=T.useState(!1),[P,L]=T.useState(!1),[$,z]=T.useState(!1),ne=T.useRef(null);T.useEffect(()=>{const _=F=>{ne.current&&!ne.current.contains(F.target)&&U(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),T.useEffect(()=>{if(!I.trim()||!h||f||l||!a.length){j([]),U(!1),L(!1),z(!1);return}const _=I.toLowerCase(),F=a.filter(W=>{var ce;return((ce=W.email)==null?void 0:ce.toLowerCase().includes(_))||W.name&&W.name.toLowerCase().includes(_)});console.debug("Filtered suggestions:",F),j(F),U(F.length>0);const Y=a.find(W=>{var ce;return((ce=W.email)==null?void 0:ce.toLowerCase())===_||W.name&&W.name.toLowerCase()===_});if(z(!!Y),I.trim()&&F.length===0){const W=setTimeout(()=>{L(!0)},500);return()=>clearTimeout(W)}else L(!1)},[I,h,f,l,a]);const oe=()=>{const _={};return x.taskName.trim()||(_.taskName="Task name is required"),x.targetUser.trim()||(_.targetUser="Target user is required"),x.requestedTask.trim()||(_.requestedTask="Requested task name is required"),x.description.trim()||(_.description="Description is required"),x.targetUser.trim()&&!$&&(_.targetUser="Please select a valid user from the suggestions"),A(_),Object.keys(_).length===0},he=async()=>{var F,Y,W,ce,pe,Ee;if(!$&&x.targetUser.trim()){A({...S,targetUser:"Please select a valid user from the suggestions"});return}if(!oe())return;k(null);const _={TaskName:x.taskName,TargetUser:x.targetUser,RequestedTask:x.requestedTask,Description:x.description,Priority:x.priority,EstimatedImpact:x.estimatedImpact||null,UserId:p==null?void 0:p.id,TaskId:n};try{const Z=await X4(_);E(!0),setTimeout(()=>{E(!1),C({taskName:"",targetUser:"",requestedTask:"",description:"",priority:"medium",estimatedImpact:""}),R(""),j([]),A({}),L(!1),z(!1),o==null||o(n,e,{dependsOnTaskId:n,assignedTo:x.targetUser,notes:x.description}),r==null||r()},2e3)}catch(Z){k(((F=Z.response)==null?void 0:F.status)===401?"Session expired. Please log in again.":((W=(Y=Z.response)==null?void 0:Y.data)==null?void 0:W.message)||"An error occurred while sending the request."),console.error("Error submitting request:",{message:Z.message,status:(ce=Z.response)==null?void 0:ce.status,data:(pe=Z.response)==null?void 0:pe.data}),((Ee=Z.response)==null?void 0:Ee.status)===401&&setTimeout(()=>y(),2e3)}},K=()=>{C({taskName:"",targetUser:"",requestedTask:"",description:"",priority:"medium",estimatedImpact:""}),R(""),j([]),A({}),k(null),U(!1),L(!1),z(!1)},B=_=>{C({...x,targetUser:_.email}),R(_.email),U(!1),L(!1),z(!0),A({...S,targetUser:""})},Q=_=>{const F=_.target.value;R(F),C({...x,targetUser:F}),P&&L(!1),S.targetUser&&A({...S,targetUser:""})},ee=_=>`
    w-full px-3 py-2 rounded-lg border transition-all duration-200
    ${S[_]?"border-red-400 focus:border-red-500":"border-gray-300 focus:border-purple-600 focus:ring-1 focus:ring-purple-200"}
    focus:outline-none placeholder-gray-400 bg-white
  `;return f||l?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md relative p-6 text-center",children:c.jsx("div",{className:"text-gray-500",children:"Loading..."})})}):h?d?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md relative p-6 text-center",children:[c.jsxs("div",{className:"text-red-500 mb-4",children:["Error loading users: ",d]}),c.jsx("button",{onClick:r,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md relative max-h-[90vh] overflow-y-auto",children:w?c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(_i,{className:"w-8 h-8 text-green-600"})}),c.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Request Sent"}),c.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Your request has been sent successfully."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[c.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Dependency Request"}),c.jsx("button",{onClick:r,className:"text-gray-600 hover:text-gray-800",children:c.jsx(yn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[b&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-3 rounded",children:c.jsx("p",{className:"text-red-700 text-sm",children:b})}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[c.jsx(p1,{className:"w-4 h-4 mr-2 text-purple-600"}),"Task Name"]}),c.jsx("input",{type:"text",value:x.taskName,onChange:_=>C({...x,taskName:_.target.value}),className:ee("taskName"),placeholder:"e.g., Frontend User Dashboard"}),S.taskName&&c.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[c.jsx(yn,{className:"w-3 h-3 mr-1"}),S.taskName]})]}),c.jsxs("div",{className:"relative",ref:ne,children:[c.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[c.jsx(ks,{className:"w-4 h-4 mr-2 text-purple-600"}),"Target User"]}),c.jsx("input",{type:"text",value:I,onChange:Q,onFocus:()=>U(D.length>0),className:ee("targetUser"),placeholder:"e.g., jane.smith@company.com"}),M&&D.length>0&&c.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-200 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",children:D.map((_,F)=>c.jsxs("li",{onClick:()=>B(_),className:"px-3 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-700 cursor-pointer",children:[c.jsx("span",{className:"font-medium",children:_.name||"Unknown"})," (",_.email,")"]},F))}),P&&I.trim()&&c.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[c.jsx(yn,{className:"w-3 h-3 mr-1"}),"User not found. Please select from the suggestions."]}),S.targetUser&&c.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[c.jsx(yn,{className:"w-3 h-3 mr-1"}),S.targetUser]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[c.jsx(p1,{className:"w-4 h-4 mr-2 text-purple-600"}),"Requested Task"]}),c.jsx("input",{type:"text",value:x.requestedTask,onChange:_=>C({...x,requestedTask:_.target.value}),className:ee("requestedTask"),placeholder:"e.g., User Authentication API"}),S.requestedTask&&c.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[c.jsx(yn,{className:"w-3 h-3 mr-1"}),S.requestedTask]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:"Priority Level"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["low","medium","high"].map(_=>c.jsx("button",{type:"button",onClick:()=>C({...x,priority:_}),className:`px-3 py-2 rounded border text-sm font-medium transition-all duration-200 ${x.priority===_?"border-purple-600 bg-purple-50 text-purple-700":"border-gray-300 bg-white text-gray-600 hover:border-purple-300"}`,children:_.charAt(0).toUpperCase()+_.slice(1)},_))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[c.jsx(g1,{className:"w-4 h-4 mr-2 text-purple-600"}),"Description"]}),c.jsx("textarea",{value:x.description,onChange:_=>C({...x,description:_.target.value}),className:ee("description"),rows:3,placeholder:"Explain what you need and why..."}),S.description&&c.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[c.jsx(yn,{className:"w-3 h-3 mr-1"}),S.description]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-1",children:[c.jsx(g1,{className:"w-4 h-4 mr-2 text-purple-600"}),"Estimated Impact (Optional)"]}),c.jsx("textarea",{value:x.estimatedImpact,onChange:_=>C({...x,estimatedImpact:_.target.value}),className:ee("estimatedImpact"),rows:2,placeholder:"How will this dependency affect your timeline?"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsxs("button",{onClick:he,disabled:x.targetUser.trim()&&!$,className:`flex-1 font-medium py-2 px-4 rounded transition-all duration-200 flex items-center justify-center ${x.targetUser.trim()&&!$?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,children:[c.jsx(Ap,{className:"w-4 h-4 mr-2"}),"Send Request"]}),c.jsx("button",{onClick:K,className:"px-4 py-2 border border-gray-300 text-gray-600 rounded hover:bg-gray-50 transition-all duration-200",children:"Reset"})]}),c.jsx("div",{className:"mt-4 bg-purple-50 border-l-4 border-purple-600 p-3 rounded",children:c.jsxs("p",{className:"text-xs text-purple-700",children:[c.jsx("strong",{children:"How it works:"})," Your request will be sent to the target user who can link it to an existing task, create a new task, or decline. You'll be notified of their decision."]})})]})]})})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md relative p-6 text-center",children:[c.jsx("div",{className:"text-gray-500 mb-4",children:"Please log in to access this form."}),c.jsx("button",{onClick:()=>y(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:"Log In"})]})})};function x6({tasks:n,onClose:e}){const t=r=>r?new Date(r).toLocaleDateString():"N/A";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 bg-gradient-to-r from-green-50 to-teal-50",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(_i,{className:"w-6 h-6 text-green-500 mr-3"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Accepted Dependency"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Approved Task"})]})]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",title:"Close","aria-label":"Close",children:c.jsx(yn,{className:"w-5 h-5 text-gray-600"})})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("div",{className:"flex items-center justify-center mb-4",children:c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(_i,{className:"w-6 h-6 text-green-600"})})}),c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-1",children:"Accepted Dependent Task"}),c.jsx("p",{className:"text-sm text-gray-600",children:"The following task has been approved as a dependency for your request."})]}),n&&Object.keys(n).length>0?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 mb-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Task Summary"}),c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Task:"}),c.jsx("span",{className:"text-gray-800 font-medium",children:n.taskName||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Status:"}),c.jsx("span",{className:"text-gray-800",children:n.status||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Estimated Hours:"}),c.jsx("span",{className:"text-gray-800",children:n.estimatedHours||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Due Date:"}),c.jsx("span",{className:"text-gray-800",children:t(n.dueDate)})]})]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("div",{className:"bg-white p-2 rounded border border-gray-200 text-sm text-gray-800 h-20 overflow-y-auto leading-snug",children:n.description||"No description provided"})]})]}):c.jsx("div",{className:"text-sm text-gray-600 text-center",children:"No accepted dependent task found."})]}),c.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Close"})})})]})})}function y6({onClose:n,dependencyInfo:e}){const t=r=>r?new Date(r).toLocaleDateString():"N/A";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gradient-to-r from-yellow-50 to-orange-50",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Cs,{className:"w-6 h-6 text-yellow-500 mr-3"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Dependency Status"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]})]}),c.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",title:"Close",children:c.jsx(yn,{className:"w-5 h-5 text-gray-600"})})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:c.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx(Fn,{className:"w-8 h-8 text-yellow-600"})})}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Dependency Request Pending"}),c.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Your dependency request has been submitted and is awaiting approval. You will be notified once the request has been reviewed and accepted."})]}),e&&c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Request Details"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[e.taskName&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Task:"}),c.jsx("span",{className:"text-gray-800 font-medium",children:e.taskName})]}),e.requestedDate&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Requested:"}),c.jsx("span",{className:"text-gray-800",children:t(e.requestedDate)})]}),e.notes&&c.jsxs("div",{className:"mt-3",children:[c.jsx("span",{className:"text-gray-600 block mb-1",children:"Notes:"}),c.jsx("p",{className:"text-gray-800 text-xs bg-white p-2 rounded border",children:e.notes})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Status Timeline"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Request Submitted"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3 animate-pulse"}),c.jsx("span",{className:"text-sm text-gray-800 font-medium",children:"Pending Review"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full mr-3"}),c.jsx("span",{className:"text-sm text-gray-400",children:"Awaiting Approval"})]})]})]})]}),c.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Close"})})})]})})}function v6({paginationData:n,onPageChange:e}){if(!n||n.totalPages<=1)return null;const{pageNumber:t,totalPages:r,totalCount:o,pageSize:a}=n,l=(t-1)*a+1,d=Math.min(t*a,o),h=()=>{const f=[];if(r<=5)for(let y=1;y<=r;y++)f.push(y);else{const y=Math.floor(2.5);let x=Math.max(1,t-y),C=Math.min(r,x+5-1);C-x<4&&(x=Math.max(1,C-5+1)),x>1&&(f.push(1),x>2&&f.push("..."));for(let w=x;w<=C;w++)f.push(w);C<r&&(C<r-1&&f.push("..."),f.push(r))}return f};return c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6",children:[c.jsxs("div",{className:"flex justify-between flex-1 sm:hidden",children:[c.jsx("button",{onClick:()=>e(t-1),disabled:t<=1,className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),c.jsx("button",{onClick:()=>e(t+1),disabled:t>=r,className:"relative inline-flex items-center px-4 py-2 ml-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),c.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",c.jsx("span",{className:"font-medium",children:l})," to"," ",c.jsx("span",{className:"font-medium",children:d})," of"," ",c.jsx("span",{className:"font-medium",children:o})," results"]})}),c.jsx("div",{children:c.jsxs("nav",{className:"inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[c.jsxs("button",{onClick:()=>e(t-1),disabled:t<=1,className:"relative inline-flex items-center px-2 py-2 text-gray-400 bg-white border border-gray-300 rounded-l-md hover:bg-gray-50 hover:text-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("span",{className:"sr-only",children:"Previous"}),c.jsx(Sh,{className:"w-5 h-5","aria-hidden":"true"})]}),h().map((f,p)=>f==="..."?c.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300",children:"..."},p):c.jsx("button",{onClick:()=>e(f),className:`relative inline-flex items-center px-4 py-2 text-sm font-medium border ${f===t?"z-10 bg-[#48019F] border-[#48019F] text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 hover:text-gray-700"}`,children:f},f)),c.jsxs("button",{onClick:()=>e(t+1),disabled:t>=r,className:"relative inline-flex items-center px-2 py-2 text-gray-400 bg-white border border-gray-300 rounded-r-md hover:bg-gray-50 hover:text-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("span",{className:"sr-only",children:"Next"}),c.jsx(Yi,{className:"w-5 h-5","aria-hidden":"true"})]})]})})]})]})}function w6({taskList:n,setTaskList:e,openEditTaskModal:t,onTaskUpdate:r,paginationData:o,onPageChange:a}){const{acquireToken:l}=vn(),[d,h]=T.useState(new Set),[f,p]=T.useState(null),[y,x]=T.useState(!1),[C,w]=T.useState(null),[E,S]=T.useState(null),[A,b]=T.useState(null),[k,I]=T.useState(new Map),[R,D]=T.useState(new Map),[j,M]=T.useState(!1),[U,P]=T.useState([]),[L,$]=T.useState(!1),[z,ne]=T.useState(!1),[oe,he]=T.useState({name:"",description:"",startDate:"",dueDate:"",date:"",priority:"Medium",status:"Not Started",estimatedHours:"",todayEffort:"",completedHours:""}),K="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task";T.useEffect(()=>{if(!z&&n.length===0&&o&&o.totalPages>0&&o.currentPage>1){console.log("No tasks on current page, navigating to previous page",{currentPage:o.currentPage,totalPages:o.totalPages,taskListLength:n.length}),ne(!0);const Z=Math.min(o.currentPage-1,o.totalPages),se=Math.max(1,Z);setTimeout(()=>{a(se),ne(!1)},100)}},[n.length,o,a,z]);const B=async()=>{try{const Z=await l("api");if(!Z)throw new Error("Token acquisition failed");return{headers:{Authorization:`Bearer ${Z}`,"Content-Type":"application/json"}}}catch(Z){throw console.error("Error acquiring token:",Z),Z}},Q=async Z=>{try{const[se,we]=await Promise.all([xn.get(`/Dependency/GetDependencyRequests/${Z}`),xn.get(`/Dependency/GetDependentTasks/${Z}`)]);console.log(se.data),console.log(we.data),I(ke=>new Map(ke).set(Z.toString(),se.data||[])),D(ke=>new Map(ke).set(Z.toString(),we.data||[])),h(ke=>{const Le=new Set(ke),Te=Z.toString();return Le.has(Te)?Le.delete(Te):Le.add(Te),Le})}catch(se){console.error("Error fetching task dependencies:",se),I(we=>new Map(we).set(Z.toString(),[])),D(we=>new Map(we).set(Z.toString(),[]))}},ee=async Z=>{try{if(Z.status==="Accepted"){const se=await xn.get(`/Dependency/GetDependentAcceptedTasks/${Z.request.dependencyTaskId}`);P(se.data||[]),M(!0),$(!1)}else Z.status==="Pending"?($(!0),M(!1)):alert("Dependency Has Been Rejected")}catch(se){console.error("Error fetching dependent accepted tasks:",se),$(!0),M(!1)}},_=async Z=>{var se,we;try{const ke=await B();await Ze.delete(`${K}/${Z}`,ke),e(Le=>Le.filter(Te=>Te&&Te.id&&Te.id.toString()!==Z.toString())),r(),console.log("Task deleted successfully:",Z)}catch(ke){console.error("Error deleting task:",ke),alert("Failed to delete task: "+(((we=(se=ke.response)==null?void 0:se.data)==null?void 0:we.message)||ke.message))}},F=(Z,se,we)=>{const ke=parseFloat(we.estimatedHours);console.log("Adding subtask:",{taskId:Z,stepId:se,formData:we,estimatedHours:ke}),e(Le=>Le.map(Te=>Te&&Te.id&&Te.id.toString()===Z.toString()?{...Te,steps:[...Te.steps||[],{id:se,name:we.name,description:we.description,startDate:we.startDate,dueDate:we.dueDate,status:we.status,estimatedHours:ke,todayEffort:parseFloat(we.todayEffort)||0,completedHours:parseFloat(we.completedHours)||0,taskItemId:parseInt(Z),priority:we.priority}]}:Te).filter(Te=>Te&&Te.id)),h(Le=>new Set(Le).add(Z.toString())),p(null),b(null),he({name:"",description:"",startDate:"",dueDate:"",date:"",priority:"Medium",status:"Not Started",estimatedHours:"",todayEffort:"",completedHours:""}),r()},Y=(Z,se,we)=>{const ke=parseFloat(we.estimatedHours);console.log("Updating subtask:",{taskId:Z,stepId:se,formData:we,estimatedHours:ke}),e(Le=>Le.map(Te=>Te&&Te.id&&Te.id.toString()===Z.toString()?{...Te,steps:Te.steps.map(ze=>ze.id.toString()===se.toString()?{...ze,name:we.name,description:we.description,startDate:we.startDate,dueDate:we.dueDate||we.date,priority:we.priority,status:we.status,estimatedHours:ke,todayEffort:parseFloat(we.todayEffort)||0,completedHours:parseFloat(we.completedHours)||0}:ze)}:Te).filter(Te=>Te&&Te.id)),p(null),b(null),he({name:"",description:"",startDate:"",dueDate:"",date:"",priority:"Medium",status:"Not Started",estimatedHours:"",todayEffort:"",completedHours:""}),r()},W=(Z,se)=>{console.log("Deleting subtask:",{taskId:Z,stepId:se}),e(we=>we.map(ke=>ke&&ke.id&&ke.id.toString()===Z.toString()?{...ke,steps:ke.steps.filter(Le=>Le.id.toString()!==se.toString())}:ke).filter(ke=>ke&&ke.id)),r()},ce=async(Z,se,we)=>{try{const ke=await B();await Ze.post("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Dependency",{taskId:Z,subTaskId:se,dependsOnTaskId:we.dependsOnTaskId,assignedTo:we.assignedTo,notes:we.notes},ke),await Q(Z),r()}catch(ke){console.error("Error adding dependency:",ke)}},Ee=z?"Navigating to previous page...":o&&o.totalPages===0?"No tasks to display":n.length===0?"Loading tasks...":null;return c.jsxs(c.Fragment,{children:[j&&c.jsx(x6,{tasks:U,onClose:()=>M(!1)}),L&&c.jsx(y6,{onClose:()=>$(!1)}),y&&c.jsx(gS,{taskId:C,stepId:E,taskList:n,onClose:()=>x(!1),onSave:ce}),c.jsxs("div",{className:"border border-gray-200 rounded-md",children:[c.jsxs("div",{className:"grid grid-cols-8 py-2 px-4 bg-gray-100 border-b border-gray-200 font-medium text-gray-700",children:[c.jsx("div",{children:"Task Name"}),c.jsx("div",{children:"Start Date"}),c.jsx("div",{children:"Due Date"}),c.jsx("div",{children:"Priority"}),c.jsx("div",{children:"Status"}),c.jsx("div",{children:"Progress"}),c.jsx("div",{children:"Effort"}),c.jsx("div",{className:"text-right pr-2",children:"Actions"})]}),Ee?c.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:Ee}):n.filter(Z=>Z&&Z.id).map(Z=>c.jsx(f6,{task:Z,isExpanded:d.has(Z.id.toString()),toggleTaskExpand:Q,dependencyTasks:k.get(Z.id.toString())||[],dependentTasks:R.get(Z.id.toString())||[],handleDependencyItemClick:ee,openEditTaskModal:t,deleteTask:_,setShowSubtaskModal:p,setEditingStepId:b,setStepForm:he,setShowDependencyRequestForm:x,setDependencyTaskId:w,setDependencyStepId:S,onDeleteSubtask:W,setTaskList:e},Z.id))]}),c.jsx(v6,{paginationData:o,onPageChange:a}),f&&c.jsx(g6,{taskId:f,editingStepId:A,stepForm:oe,setStepForm:he,onClose:()=>{p(null),b(null),he({name:"",description:"",startDate:"",dueDate:"",date:"",priority:"Medium",status:"Not Started",estimatedHours:"",todayEffort:"",completedHours:""})},onSave:(Z,se,we)=>{se?Y(Z,se,we):F(Z,se,we)}})]})}function xS({isOpen:n,onClose:e,onAddTask:t,taskToEdit:r,makeAuthenticatedRequest:o,dependencyTaskId:a}){const{acquireToken:l,user:d}=vn(),h=new Date().toISOString().split("T")[0],f={taskId:0,taskName:"",priority:"Medium",status:"Not Started",description:"",startDate:h,dueDate:h,estimatedHours:0,completedHours:"",updateDate:h,todayEffort:0,dependencyTaskId:a||null,createdBy:(d==null?void 0:d.id)||null,hasSubtask:"No"},[p,y]=T.useState(f),[x,C]=T.useState(null);T.useEffect(()=>{var k,I;n&&(y(r?{taskId:r.id||r.Id||0,taskName:r.taskName||r.TaskName||"",priority:r.priority||r.Priority||"Medium",status:r.status||r.Status||"Not Started",description:r.description||r.Description||"",startDate:((k=r.startDate||r.StartDate)==null?void 0:k.split("T")[0])||h,dueDate:((I=r.dueDate||r.DueDate)==null?void 0:I.split("T")[0])||h,estimatedHours:(r.estimatedHours||r.EstimatedHours||"").toString(),completedHours:(r.completedHours||r.CompletedHours||"").toString(),updateDate:h,todayEffort:0,dependencyTaskId:a||null,createdBy:(d==null?void 0:d.id)||null,hasSubtask:r.hasSubtask||"No"}:{...f,dependencyTaskId:a,createdBy:(d==null?void 0:d.id)||null}),C(null))},[n,r,a,d==null?void 0:d.id]);const w=k=>{const{name:I,value:R}=k.target;r&&(I==="taskName"||I==="description"||I==="estimatedHours")||I!=="completedHours"&&y(D=>({...D,[I]:R}))},E=k=>k?new Date(k).toISOString():null,S=()=>r&&p.startDate||h,A=async()=>{var k,I,R,D,j,M,U,P,L,$;if(!p.taskName.trim()){C("Task Name is required");return}if(!r&&!p.dueDate){C("Due Date is required");return}if(p.hasSubtask==="No"&&(!p.estimatedHours||parseFloat(p.estimatedHours)<=0)){C("Estimated Hours must be greater than 0 when no subtasks are selected");return}if(r&&!p.updateDate){C("Date is required for updating task");return}if(p.hasSubtask==="No"&&p.todayEffort&&parseFloat(p.todayEffort)<0){C("Today's Effort cannot be negative");return}if(p.status==="Not Started"&&p.todayEffort&&parseFloat(p.todayEffort)>0){C(`Tasks with "Not Started" status cannot have Today's Effort`);return}if(p.status==="Not Started"&&p.completedHours&&parseFloat(p.completedHours)>0){C('Tasks with "Not Started" status cannot have completed hours');return}try{if(r){const z={taskId:p.taskId,status:p.status,updateDate:E(p.updateDate),workedHours:parseFloat(p.todayEffort)||0,priority:p.priority,hasSubtask:p.hasSubtask,completedHours:p.status==="Completed"?parseFloat(p.estimatedHours)||0:parseFloat(p.completedHours)||0};if(console.log("Updating task with payload:",z),o)await o("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task/UpdateTask","PATCH",z);else{const ne=await l("api");if(!ne){C("Failed to get authentication token. Please try logging in again.");return}const oe={"Content-Type":"application/json",Accept:"*/*",Authorization:`Bearer ${ne}`};await Ze.patch("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task/UpdateTask",z,{headers:oe})}}else{const z={TaskName:p.taskName,Priority:p.priority,Status:p.status,Description:p.description||"",StartDate:E(p.startDate),DueDate:E(p.dueDate),EstimatedHours:parseFloat(p.estimatedHours)||0,CompletedHours:p.status==="Completed"?parseFloat(p.estimatedHours)||0:parseFloat(p.completedHours)||0,DependencyTaskId:p.dependencyTaskId||null,CreatedBy:p.createdBy||null,WorkedHours:parseFloat(p.todayEffort)||0,HasSubtask:p.hasSubtask};console.log("Creating task with payload:",z);let ne;if(o)a&&a>0?ne=await o("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/DependencyTask","POST",z):ne=await o("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task","POST",z);else{const he=await l("api");if(!he){C("Failed to get authentication token. Please try logging in again.");return}const K={"Content-Type":"application/json",Accept:"*/*",Authorization:`Bearer ${he}`},B=a&&a>0?"https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/DependencyTask":"https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task";ne=await Ze.post(B,z,{headers:K})}console.log("Task creation response:",JSON.stringify(ne,null,2)),((k=ne==null?void 0:ne.data)==null?void 0:k.id)||((I=ne==null?void 0:ne.data)==null?void 0:I.Id)||((R=ne==null?void 0:ne.data)==null?void 0:R.taskId)||(ne==null?void 0:ne.id)||(ne==null?void 0:ne.Id)||(ne==null?void 0:ne.taskId)||console.warn("Task ID not found in response, proceeding anyway")}t(),e()}catch(z){console.error("Error saving task:",{endpoint:r?"/api/Task/UpdateTask":a&&a>0?"/api/User/DependencyTask":"/api/Task",error:(D=z.response)==null?void 0:D.data,status:(j=z.response)==null?void 0:j.status,message:z.message}),C(((M=z.response)==null?void 0:M.status)===401?"Authentication failed. Please log in again.":((U=z.response)==null?void 0:U.status)===403?"You do not have permission to perform this action.":((P=z.response)==null?void 0:P.status)===404?"Task not found. Please try again or contact support.":(($=(L=z.response)==null?void 0:L.data)==null?void 0:$.message)||"Failed to save task. Please check the input data or server logs.")}},b=p.status==="Not Started"?["Not Started","In Progress","Completed"]:["In Progress","Completed"];return n?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 px-4 py-3 bg-violet-50",children:[c.jsx("h2",{className:"text-lg font-semibold text-violet-700",children:r?"Edit Task":"Add New Task"}),c.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:c.jsx(yn,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:"px-4 py-4 max-h-[70vh] overflow-y-auto",children:[x&&c.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded-md",children:x}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Task Name ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"taskName",value:p.taskName,onChange:w,className:`w-full px-3 py-2 border ${!p.taskName.trim()&&x?"border-red-500":"border-gray-300"} rounded-md ${r?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-violet-500"}`,placeholder:"Enter task name",disabled:r,required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),c.jsx("select",{name:"status",value:p.status,onChange:w,className:`w-full px-3 py-2 border border-gray-300 rounded-md ${p.hasSubtask==="Yes"?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-violet-500"}`,disabled:p.hasSubtask==="Yes",children:b.map(k=>c.jsx("option",{value:k,children:k},k))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),c.jsxs("select",{name:"priority",value:p.priority,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-violet-500",children:[c.jsx("option",{value:"Low",children:"Low"}),c.jsx("option",{value:"Medium",children:"Medium"}),c.jsx("option",{value:"High",children:"High"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Has Subtask"}),c.jsxs("select",{name:"hasSubtask",value:p.hasSubtask,onChange:w,className:`w-full px-3 py-2 border border-gray-300 rounded-md ${p.hasSubtask==="Yes"?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-violet-500"}`,disabled:p.hasSubtask==="Yes",children:[c.jsx("option",{value:"No",children:"No"}),c.jsx("option",{value:"Yes",children:"Yes"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{name:"description",value:p.description,onChange:w,className:`w-full px-3 py-2 border border-gray-300 rounded-md ${r?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-violet-500"}`,rows:"2",placeholder:"Enter task description",disabled:r})]}),!r&&c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Date ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",name:"startDate",value:p.startDate,onChange:w,className:`w-full px-3 py-2 border ${!p.startDate&&x?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-violet-500`,required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Due Date ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",name:"dueDate",value:p.dueDate,onChange:w,className:`w-full px-3 py-2 border ${!p.dueDate&&x?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-violet-500`,required:!0})]})]}),r&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",name:"updateDate",value:p.updateDate,onChange:w,min:S(),className:`w-full px-3 py-2 border ${!p.updateDate&&x?"border-red-500":"border-gray-300"} rounded-md focus:ring-2 focus:ring-violet-500`,required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Est. Hours ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"number",name:"estimatedHours",value:p.estimatedHours,onChange:w,min:"0.5",step:"0.5",className:`w-full px-3 py-2 border ${p.hasSubtask==="No"&&(!p.estimatedHours||parseFloat(p.estimatedHours)<=0)&&x?"border-red-500":"border-gray-300"} rounded-md ${r||p.hasSubtask==="Yes"?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-violet-500"}`,placeholder:"0.0",disabled:r||p.hasSubtask==="Yes",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Today's Efforts"}),c.jsx("input",{type:"number",name:"todayEffort",value:p.todayEffort,onChange:w,min:"0",step:"0.5",className:`w-full px-3 py-2 border ${p.status==="Not Started"&&p.todayEffort&&parseFloat(p.todayEffort)>0&&x?"border-red-500":"border-gray-300"} rounded-md ${p.hasSubtask==="Yes"?"bg-gray-100 cursor-not-allowed":"focus:ring-2 focus:ring-violet-500"}`,placeholder:"0.0",disabled:p.hasSubtask==="Yes"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Invested"}),c.jsx("input",{type:"number",name:"completedHours",value:p.completedHours,onChange:w,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 bg-gray-100 cursor-not-allowed rounded-md",placeholder:"0.0",min:"0",step:"0.5"})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 px-4 py-3 bg-gray-50 flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),c.jsxs("button",{type:"button",onClick:A,className:"flex items-center px-4 py-2 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-md hover:from-violet-700 hover:to-purple-700 transition-colors",children:[c.jsx(W8,{className:"mr-1 h-4 w-4"}),r?"Update Task":"Save Task"]})]})]})}):null}function C6({onFilterChange:n,onClose:e}){const{acquireToken:t}=vn(),[r,o]=T.useState(""),[a,l]=T.useState(""),[d,h]=T.useState(""),[f,p]=T.useState(""),y="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task/GetAllTasks",x=b=>{if(!b)return"";try{const[k,I,R]=b.split("-");return`${R}-${I}-${k}`}catch{return console.error("Invalid date format:",b),""}},C=b=>{if(!b)return"";try{const[k,I,R]=b.split("-");return`${R}-${I}-${k}`}catch{return console.error("Invalid date format:",b),""}},w=async()=>{try{const b=await t("api");if(!b)throw new Error("Token acquisition failed");return{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}}}catch(b){throw console.error("Error acquiring token:",b),b}},E=async()=>{var b,k;try{const I=await w(),R={priority:r||null,status:a||null,startDate:d?C(d):null,dueDate:f?C(f):null,pageNumber:1,pageSize:5},D=await Ze.get(y,{...I,params:R});n({tasks:D.data.data,filters:{priority:r,status:a,startDate:d,dueDate:f}}),console.log("Filtered tasks:",D.data.data)}catch(I){console.error("Error applying filters:",{message:I.message,status:(b=I.response)==null?void 0:b.status,data:(k=I.response)==null?void 0:k.data}),alert("Failed to apply filters. Please try again.")}},S=async()=>{await E(),e()},A=async()=>{var b,k;o(""),l(""),h(""),p("");try{const I=await w(),R=await Ze.get(y,{...I,params:{pageNumber:1,pageSize:5}});n({tasks:R.data.data,filters:{priority:"",status:"",startDate:"",dueDate:""}})}catch(I){console.error("Error clearing filters:",{message:I.message,status:(b=I.response)==null?void 0:b.status,data:(k=I.response)==null?void 0:k.data}),alert("Failed to clear filters. Please try again.")}e()};return c.jsxs("div",{className:"p-4 bg-gray-100 rounded-md shadow-md w-64 absolute top-[10] right-[10%] z-50",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Filter Tasks"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Priority"}),c.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",value:r,onChange:b=>o(b.target.value),children:[c.jsx("option",{value:"",children:"All Priorities"}),c.jsx("option",{value:"Low",children:"Low"}),c.jsx("option",{value:"Medium",children:"Medium"}),c.jsx("option",{value:"High",children:"High"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Status"}),c.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",value:a,onChange:b=>l(b.target.value),children:[c.jsx("option",{value:"",children:"All Status"}),c.jsx("option",{value:"Not Started",children:"Not Started"}),c.jsx("option",{value:"In Progress",children:"In Progress"}),c.jsx("option",{value:"Completed",children:"Completed"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Start Date"}),c.jsx("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",value:C(d),onChange:b=>h(x(b.target.value))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Due Date"}),c.jsx("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",value:C(f),onChange:b=>p(x(b.target.value))})]})]}),c.jsxs("div",{className:"mt-4 flex gap-4",children:[c.jsx(Tr,{onClick:A,children:"Clear"}),c.jsx(Tr,{onClick:S,children:"Apply"})]})]})}const b6=({tasks:n})=>{const{acquireToken:e,isAuthenticated:t,isInitialized:r,isLoading:o,user:a}=vn(),[l,d]=T.useState("month"),[h,f]=T.useState(new Date),[p,y]=T.useState(new Date().getMonth()+1),[x,C]=T.useState([]),[w,E]=T.useState(n||[]),[S,A]=T.useState(!1),[b,k]=T.useState(null),I=T.useRef(null);T.useEffect(()=>{tS(e)},[e]),T.useEffect(()=>{let K;if(l==="week"){const B=new Date(h.getFullYear(),0,1),Q=B.getDay()===1?B:new Date(B.setDate(B.getDate()+(8-B.getDay()))),ee=Math.floor((h-Q)/(1e3*60*60*24));K=Math.max(1,Math.min(53,Math.floor(ee/7)+1))}else l==="month"?K=h.getMonth()+1:l==="quarter"&&(K=Math.floor(h.getMonth()/3)+1);y(K)},[l,h]);const R=K=>{let B;if(K==="week"){const Q=new Date(h.getFullYear(),0,1),ee=Q.getDay()===1?Q:new Date(Q.setDate(Q.getDate()+(8-Q.getDay()))),_=Math.floor((h-ee)/(1e3*60*60*24));B=Math.max(1,Math.min(53,Math.floor(_/7)+1))}else K==="month"?B=h.getMonth()+1:K==="quarter"&&(B=Math.floor(h.getMonth()/3)+1);y(B),d(K)},D=async()=>{var K,B;if(!(a!=null&&a.id)){k("User ID not available"),A(!1);return}A(!0),k(null);try{const Q=await xn.get("/ManagerDashboard/filtered",{params:{userId:a.id,viewMode:l,number:p,currentDate:h.toISOString()}}),ee=Array.isArray(Q.data)?Q.data:Q.data.tasks||[],_=[...ee,...(n||[]).filter(F=>!ee.some(Y=>Y.id===F.id))];E(_)}catch(Q){console.error("Error fetching tasks:",Q),k(`Failed to fetch tasks: ${((B=(K=Q.response)==null?void 0:K.data)==null?void 0:B.message)||Q.message}`),E(n||[])}finally{A(!1)}};T.useEffect(()=>{t&&r&&(a!=null&&a.id)&&D()},[t,r,a==null?void 0:a.id,l,p,h]);const j=()=>{const K=[],B=h.getFullYear();if(l==="week"){let Q=new Date(B,0,1);Q.getDay()!==1&&Q.setDate(Q.getDate()+(8-Q.getDay())),Q.setDate(Q.getDate()+(p-1)*7);const ee=new Date(Q);ee.setDate(ee.getDate()+6),ee.getFullYear()>B&&ee.setFullYear(B,11,31);for(let _=new Date(Q);_<=ee;_.setDate(_.getDate()+1))K.push(new Date(_))}else if(l==="month"){const Q=new Date(B,p-1,1),ee=new Date(B,p,0);for(let _=new Date(Q);_<=ee;_.setDate(_.getDate()+1))K.push(new Date(_))}else if(l==="quarter"){const Q=(p-1)*3,ee=new Date(B,Q,1),_=new Date(B,Q+3,0);for(let F=new Date(ee);F<=_;F.setDate(F.getDate()+1))K.push(new Date(F))}return K},M=(K,B="day")=>B==="month"?K.toLocaleString("default",{month:"short"}):B==="full"?K.toLocaleString("default",{month:"short",day:"numeric",year:"numeric"}):B==="weekday"?K.toLocaleString("default",{weekday:"short"}):K.getDate(),U=K=>{const B=new Date;return K.getDate()===B.getDate()&&K.getMonth()===B.getMonth()&&K.getFullYear()===B.getFullYear()},P=K=>{const B=K.getDay();return B===0||B===6},L=K=>{let B=p,Q=new Date(h);l==="week"?(B=K==="next"?Math.min(p+1,53):Math.max(p-1,1),Q.setDate(Q.getDate()+(K==="next"?7:-7))):l==="month"?(B=K==="next"?Math.min(p+1,12):Math.max(p-1,1),Q.setMonth(Q.getMonth()+(K==="next"?1:-1))):l==="quarter"&&(B=K==="next"?Math.min(p+1,4):Math.max(p-1,1),Q.setMonth(Q.getMonth()+(K==="next"?3:-3))),y(B),f(Q)},$=K=>{const B=parseInt(K.target.value);if(!isNaN(B))if(l==="week"&&B>=1&&B<=53){y(B);const Q=new Date(h.getFullYear(),0,1),ee=Q.getDay()===1?Q:new Date(Q.setDate(Q.getDate()+(8-Q.getDay()))),_=new Date(ee);_.setDate(_.getDate()+(B-1)*7),f(_)}else l==="month"&&B>=1&&B<=12?(y(B),f(new Date(h.getFullYear(),B-1,1))):l==="quarter"&&B>=1&&B<=4&&(y(B),f(new Date(h.getFullYear(),(B-1)*3,1)))},z=K=>{if(!K)return console.warn("No date input provided"),null;try{let B;if(typeof K=="string")B=new Date(K);else if(K instanceof Date)B=new Date(K);else return console.warn(`Invalid date input type: ${typeof K}`,K),null;return isNaN(B.getTime())?(console.warn(`Failed to parse date: ${K}`),null):B}catch(B){return console.error("Error parsing date:",K,B),null}};T.useEffect(()=>{if(!w||w.length===0){C([]);return}const K=j();if(K.length===0)return;const B=K[0],Q=K[K.length-1],ee=w.map((_,F)=>{try{const Y=_.startDate||_.start_date||_.startDateTime||_.createdAt,W=_.dueDate||_.endDate||_.due_date||_.end_date||_.deadline,ce=z(Y),pe=z(W);if(!ce||!pe)return console.warn(`Task "${_.taskName||_.title||`Task ${F}`}" has invalid dates:`,{start:Y,end:W}),null;if(pe<B||ce>Q)return null;const Ee=1e3*60*60*24,Z=Math.ceil((Q-B)/Ee)+1,se=Math.floor((ce-B)/Ee),we=Math.floor((pe-B)/Ee),ke=Math.max(0,se),Le=Math.min(Z-1,we),Te=Math.max(1,Le-ke+1);let ze="bg-gray-300";const it=(_.status||"").toLowerCase();return it==="completed"||it==="done"||it==="finished"?ze="bg-green-500":it==="in-progress"||it==="In Progress"||it==="active"?ze="bg-yellow-500":it==="overdue"||new Date>pe&&it!=="completed"?ze="bg-red-500":(it==="blocked"||it==="on-hold")&&(ze="bg-gray-500"),{id:_.id||`task-${F}`,name:_.taskName||_.title||`Task ${F+1}`,description:_.description||"",assignedTo:_.assignedTo||_.assigned_to||_.assignee,status:_.status||"not-started",priority:_.priority||"medium",startDate:ce,dueDate:pe,left:ke,width:Te,color:ze,originalTask:_}}catch(Y){return console.error("Error processing task:",_,Y),null}}).filter(Boolean);C(ee),I.current&&!S&&setTimeout(()=>{const _=new Date,F=K.findIndex(Y=>Y.getDate()===_.getDate()&&Y.getMonth()===_.getMonth()&&Y.getFullYear()===_.getFullYear());if(F>=0){const Y=l==="week"?window.innerWidth/7:40,W=I.current.clientWidth,ce=Math.max(0,F*Y-W/2);I.current.scrollLeft=ce}},100)},[w,h,l,p,S]);const ne=()=>{const K=h.getFullYear();if(l==="week"){let B=new Date(K,0,1);B.getDay()!==1&&B.setDate(B.getDate()+(8-B.getDay())),B.setDate(B.getDate()+(p-1)*7);const Q=new Date(B);return Q.setDate(Q.getDate()+6),Q.getFullYear()>K&&Q.setFullYear(K,11,31),`${B.toLocaleDateString()} - ${Q.toLocaleDateString()}`}else{if(l==="month")return new Date(K,p-1).toLocaleString("default",{month:"long",year:"numeric"});if(l==="quarter")return`Q${p} ${K}`}},oe=l==="week"?Math.max(20,window.innerWidth/7):40;if(!t)return c.jsxs("div",{className:"py-12 text-center text-gray-500",children:[c.jsx(Ss,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-lg font-medium",children:"Please log in to view the Gantt chart."})]});if(o||!r)return c.jsxs("div",{className:"py-12 text-center text-gray-500",children:[c.jsx(x1,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 animate-spin"}),c.jsx("p",{className:"text-lg font-medium",children:"Loading authentication..."})]});const he=j();return c.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Task Timeline"}),c.jsx("p",{className:"text-sm text-gray-600",children:ne()})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex bg-gray-100 rounded-md p-1",children:["week","month","quarter"].map(K=>c.jsx("button",{className:`px-3 py-1 text-sm rounded-md capitalize ${l===K?"bg-white shadow-sm":"text-gray-600 hover:text-gray-800"}`,onClick:()=>R(K),children:K},K))}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"number",value:p,onChange:$,className:"w-16 p-1 border rounded text-sm",min:"1",max:l==="week"?53:l==="month"?12:4,placeholder:l==="week"?"Week":l==="month"?"Month":"Quarter"}),c.jsx(Tr,{variant:"outline",className:"p-1 h-8 w-8",onClick:()=>L("prev"),title:"Previous period",children:c.jsx(Sh,{className:"w-4 h-4"})}),c.jsx(Tr,{variant:"outline",className:"p-1 h-8 w-8",onClick:()=>f(new Date),title:"Go to today",children:c.jsx("span",{children:"Today"})}),c.jsx(Tr,{variant:"outline",className:"p-1 h-8 w-8",onClick:()=>L("next"),title:"Next period",children:c.jsx(Yi,{className:"w-4 h-4"})})]})]})]}),b&&c.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md flex items-center",children:[c.jsx(Cs,{className:"w-4 h-4 text-red-500 mr-2"}),c.jsx("span",{className:"text-sm text-red-700",children:b})]}),S&&c.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md flex items-center",children:[c.jsx(x1,{className:"w-4 h-4 text-blue-500 mr-2 animate-spin"}),c.jsx("span",{className:"text-sm text-blue-700",children:"Loading tasks..."})]}),c.jsx("div",{className:"overflow-hidden border border-gray-200 rounded-md",children:c.jsxs("div",{ref:I,className:"overflow-x-auto overflow-y-auto",style:{maxHeight:"calc(100vh - 300px)",minHeight:"400px"},children:[c.jsx("div",{className:"flex border-b border-gray-200 sticky top-0 bg-gray-100 z-10",style:{minWidth:`${he.length*oe}px`},children:c.jsx("div",{className:"flex",style:{minWidth:`${he.length*oe}px`},children:he.map((K,B)=>{const Q=B>0?he[B-1]:null,ee=B===0||Q&&K.getMonth()!==Q.getMonth();return c.jsxs("div",{className:`flex flex-col items-center justify-center border-r border-gray-200 ${P(K)?"bg-gray-50":""} ${U(K)?"bg-blue-50 border-blue-200":""}`,style:{width:`${oe}px`,minWidth:`${oe}px`},children:[ee&&c.jsxs("div",{className:"text-xs text-gray-600 font-medium w-full text-center border-b border-gray-200 py-1",children:[M(K,"month")," ",K.getFullYear()]}),c.jsxs("div",{className:"flex flex-col items-center py-2 px-1",children:[c.jsx("span",{className:`text-xs ${U(K)?"font-bold text-blue-600":"text-gray-700"}`,children:M(K,"day")}),c.jsx("span",{className:"text-xs text-gray-500",children:M(K,"weekday")})]})]},B)})})}),c.jsx("div",{children:x.length>0?x.map((K,B)=>c.jsx("div",{className:"flex border-b border-gray-200 hover:bg-gray-50 group",children:c.jsxs("div",{className:"flex relative",style:{height:"80px"},children:[he.map((Q,ee)=>c.jsx("div",{className:`border-r border-gray-200 ${P(Q)?"bg-gray-50":""} ${U(Q)?"bg-blue-50":""}`,style:{width:`${oe}px`,minWidth:`${oe}px`}},ee)),c.jsx("div",{className:`absolute top-1/2 transform -translate-y-1/2 h-6 rounded-md ${K.color} 
                        shadow-sm flex items-center px-2 group-hover:shadow-md transition-shadow
                        ${K.width*oe>100?"justify-start":"justify-center"}`,style:{left:`${K.left*oe+2}px`,width:`${Math.max(20,K.width*oe-4)}px`},title:`${K.name}
Description: ${K.description}
Start: ${M(K.startDate,"full")}
End: ${M(K.dueDate,"full")}
Status: ${K.status}`,children:K.width*oe>20&&c.jsx("span",{className:"text-gray-800 text-xs truncate font-medium",children:K.name})})]})},K.id)):S?null:c.jsxs("div",{className:"py-12 text-center text-gray-500",children:[c.jsx(Ss,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-lg font-medium",children:"No tasks found"}),c.jsx("p",{className:"text-sm",children:"No tasks are scheduled in this time period"})]})})]})}),c.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-6 text-xs",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-sm mr-1"}),c.jsx("span",{children:"Not Started"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-sm mr-1"}),c.jsx("span",{children:"In Progress"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-sm mr-1"}),c.jsx("span",{children:"Completed"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-sm mr-1"}),c.jsx("span",{children:"Overdue"})]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",x.length," of ",w.length," tasks"]})]})]})},E6=({onBack:n})=>{const{user:e,acquireToken:t,isAuthenticated:r,isInitialized:o,isLoading:a}=vn();oS(),T.useState({todaysFocus:!1,overdue:!1,waiting:!1,dependent:!1});const[l,d]=T.useState({toDo:0,inProgress:0,completed:0,waiting:0,overdue:0}),[h,f]=T.useState([]),[p,y]=T.useState([]),[x,C]=T.useState([]),[w,E]=T.useState([]),[S,A]=T.useState([]),[b,k]=T.useState(null);T.useEffect(()=>{tS(t)},[t]),T.useEffect(()=>{(async()=>{var P,L;if(!(!r||!o))try{const $=await xn.get("/FocusBoard/TaskStats");d($.data);const z=await xn.get("/FocusBoard/TodaysFocus");f(z.data);const ne=await xn.get("/FocusBoard/Overdue");y(ne.data);const oe=await xn.get("/FocusBoard/Waiting");C(oe.data);const he=await xn.get(`/FocusBoard/${e.id}`);E(he.data);const K=await xn.get(`/FocusBoard/DependentTasks/${e.id}`);A(K.data),k(null)}catch($){console.error("Error fetching focus board data:",$),k("Failed to load focus board data: "+(((L=(P=$.response)==null?void 0:P.data)==null?void 0:L.message)||$.message))}})()},[r,o,e]);const I=U=>{if(!U)return"No date";try{const P=new Date(U);if(isNaN(P.getTime()))return"Invalid date";const L=new Date,$=new Date(L);$.setDate($.getDate()+1);const z=new Date(L);z.setDate(z.getDate()-1);const ne=new Date(P.getFullYear(),P.getMonth(),P.getDate()),oe=new Date(L.getFullYear(),L.getMonth(),L.getDate()),he=new Date($.getFullYear(),$.getMonth(),$.getDate()),K=new Date(z.getFullYear(),z.getMonth(),z.getDate());return ne.getTime()===oe.getTime()?"Today":ne.getTime()===he.getTime()?"Tomorrow":ne.getTime()===K.getTime()?"Yesterday":P.toLocaleDateString("en-US",{month:"short",day:"numeric",year:P.getFullYear()!==L.getFullYear()?"numeric":void 0})}catch(P){return console.error("Date formatting error:",P),"Invalid date"}},R=U=>{const P=new Date,L=new Date(U),$=P-L,z=Math.ceil($/(1e3*60*60*24));return z>0?z:0},D=U=>{switch(U){case"To Do":case"Not Started":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-purple-100 text-purple-800";case"Completed":return"bg-green-100 text-green-800";case"Waiting":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},j=({task:U,isOverdue:P=!1,bgClass:L="bg-gray-50 border-gray-100",textClass:$="text-gray-500",isTodaysFocus:z=!1})=>{const ne=I(U.dueDate),oe=P&&U.dueDate?R(U.dueDate):0;return c.jsx("div",{className:`border rounded-lg p-4 ${L}`,children:c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[c.jsx("span",{className:"font-medium text-gray-900 truncate",children:U.taskName}),U.assignedTo&&c.jsxs("span",{className:"flex items-center text-xs text-gray-600 whitespace-nowrap",children:[c.jsx(ks,{className:"w-3 h-3 mr-1"}),U.assignedTo]})]}),c.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${D(U.status)}`,children:U.status}),!z&&c.jsxs("div",{className:`text-sm ${$} flex items-center font-medium flex-shrink-0`,children:[c.jsx(Fn,{className:"w-4 h-4 mr-1"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"whitespace-nowrap",children:ne}),P&&oe>0&&ne!=="Today"&&c.jsxs("div",{className:"text-xs text-red-600 font-semibold whitespace-nowrap",children:[oe," day",oe!==1?"s":""," late"]})]})]})]})]})})},M=({title:U,icon:P,tasks:L,sectionKey:$,bgClass:z="bg-gray-50 border-gray-100",textClass:ne="text-gray-500",isOverdue:oe=!1,isTodaysFocus:he=!1})=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("div",{className:"flex items-center",children:[P,c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:U}),L.length>0&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded-full",children:L.length})]})}),L.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsxs("div",{className:"text-sm",children:["No ",U.toLowerCase()," at the moment"]})}):c.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6"},children:L.map(K=>c.jsx(j,{task:K,isOverdue:oe,bgClass:z,textClass:ne,isTodaysFocus:he},K.id))})]});return r?a||!o?c.jsx("div",{className:"min-h-screen bg-gray-50 p-6 text-center",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsx("div",{className:"w-12 h-12 mx-auto mb-3 border-4 border-gray-300 border-t-violet-600 rounded-full animate-spin"}),c.jsx("p",{className:"text-lg font-medium",children:"Loading authentication..."})]})}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Focus Board"}),c.jsxs(Tr,{onClick:n,className:"flex items-center gap-1.5",children:[c.jsx(uS,{className:"w-4 h-4"}),"Go Back to Home"]})]}),b&&c.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded-md",children:b}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Task Status Overview"})}),c.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-800",children:l.toDo}),c.jsx("div",{className:"text-blue-600 text-sm font-medium",children:"TO DO"})]}),c.jsxs("div",{className:"bg-violet-50 border border-violet-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-2xl font-bold text-violet-800",children:l.inProgress}),c.jsx("div",{className:"text-violet-600 text-sm font-medium",children:"In Progress"})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-2xl font-bold text-green-800",children:l.completed}),c.jsx("div",{className:"text-green-600 text-sm font-medium",children:"Completed"})]}),c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:l.waiting}),c.jsx("div",{className:"text-yellow-600 text-sm font-medium",children:"Waiting"})]}),c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsx("div",{className:"text-2xl font-bold text-red-800",children:l.overdue}),c.jsx("div",{className:"text-red-600 text-sm font-medium",children:"Overdue"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[c.jsx(M,{title:"Today's Focus",icon:c.jsx(Ss,{className:"w-5 h-5 text-violet-600 mr-2"}),tasks:h,sectionKey:"todaysFocus",isTodaysFocus:!0}),c.jsx(M,{title:"Overdue Tasks",icon:c.jsx(Cs,{className:"w-5 h-5 text-red-600 mr-2"}),tasks:p,sectionKey:"overdue",bgClass:"bg-red-50 border-red-100",textClass:"text-red-600",isOverdue:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[c.jsx(M,{title:"Tasks on Hold",icon:c.jsx(Fn,{className:"w-5 h-5 text-yellow-600 mr-2"}),tasks:w,sectionKey:"waiting"}),c.jsx(M,{title:"Tasks Relying on You",icon:c.jsx(ks,{className:"w-5 h-5 text-violet-600 mr-2"}),tasks:S,sectionKey:"dependent",bgClass:"bg-violet-50 border-violet-100",textClass:"text-violet-700"})]})]}),c.jsx("style",{jsx:!0,children:`
        .scrollbar-thin::-webkit-scrollbar {
          width: 6px;
        }
        .scrollbar-thin::-webkit-scrollbar-track {
          background: #f3f4f6;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 3px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
      `})]}):c.jsx("div",{className:"min-h-screen bg-gray-50 p-6 text-center",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsx(Ss,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),c.jsx("p",{className:"text-lg font-medium",children:"Please log in to view the Focus Board."})]})})},S6=({request:n,handleLinkToExistingTask:e})=>{const[t,r]=T.useState(!1),[o,a]=T.useState([]),[l,d]=T.useState(!1),[h,f]=T.useState(null),[p,y]=T.useState(""),[x,C]=T.useState(1),[w,E]=T.useState(!1),[S,A]=T.useState(null),b=5,{acquireToken:k}=vn();T.useEffect(()=>{t&&(async()=>{var he,K;d(!0),f(null);try{const B=await k("api"),Q=await Ze.get("https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task/inprogress-tasks",{headers:{Authorization:`Bearer ${B}`}}),_=(Array.isArray(Q.data)?Q.data:[]).filter(F=>F.taskName).sort((F,Y)=>F.taskName.localeCompare(Y.taskName));a(_)}catch(B){f("Failed to load tasks: "+(((K=(he=B.response)==null?void 0:he.data)==null?void 0:K.message)||B.message)),a([])}finally{d(!1)}})()},[k,t]);const I=()=>r(!0),R=()=>{r(!1),y(""),C(1)},D=()=>{E(!1),A(null)},j=async()=>{try{const oe=await k("api");await e(n,S),R(),D()}catch(oe){console.error("Failed to link task:",oe),f("Failed to link task. Please try again.")}},M=o.filter(oe=>oe.taskName.toLowerCase().includes(p.toLowerCase())),U=x*b,P=U-b,L=M.slice(P,U),$=Math.ceil(M.length/b),z=()=>{x<$&&C(x+1)},ne=()=>{x>1&&C(x-1)};return c.jsxs(c.Fragment,{children:[c.jsxs("button",{type:"button",onClick:I,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-violet-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:[c.jsx(ug,{size:16,className:"mr-1"}),"Link to Task",c.jsx(Nl,{size:16,className:"ml-1"})]}),t&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Select Task to Link"}),c.jsx("button",{onClick:R,className:"text-gray-600 hover:text-violet-800 focus:outline-none focus:ring-2 focus:ring-violet-500 rounded-full p-1",children:c.jsx(yn,{size:20})})]}),c.jsx("div",{className:"px-4 py-2",children:c.jsx("input",{type:"text",placeholder:"Search tasks...",value:p,onChange:oe=>y(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500"})}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l&&c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-600 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading tasks..."})]}),h&&c.jsx("div",{className:"text-center py-4 text-red-600",children:h}),!l&&!h&&M.length===0&&c.jsx("div",{className:"text-center py-4 text-gray-600",children:"No tasks available"}),!l&&!h&&M.length>0&&c.jsx("div",{className:"space-y-2",children:L.map(oe=>c.jsx("button",{onClick:()=>{A(oe.id),E(!0)},className:`w-full text-left px-4 py-2 text-sm text-gray-700 rounded-md transition-colors
                        ${S===oe.id?"bg-violet-100 border-violet-300":"hover:bg-violet-50"}
                        focus:outline-none focus:ring-2 focus:ring-violet-500 focus:bg-violet-100`,children:oe.taskName},oe.id))})]}),$>1&&c.jsxs("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[c.jsxs("button",{onClick:ne,disabled:x===1,className:"flex items-center px-3 py-1 text-sm text-gray-700 bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-violet-100 focus:outline-none focus:ring-2 focus:ring-violet-500",children:[c.jsx(Sh,{size:16,className:"mr-1"}),"Previous"]}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",x," of ",$]}),c.jsxs("button",{onClick:z,disabled:x===$,className:"flex items-center px-3 py-1 text-sm text-gray-700 bg-gray-100 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-violet-100 focus:outline-none focus:ring-2 focus:ring-violet-500",children:["Next",c.jsx(Yi,{size:16,className:"ml-1"})]})]})]})}),w&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Task Link"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to link this task to the request?"}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:D,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-violet-500",children:"No"}),c.jsx("button",{onClick:j,className:"px-4 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-500",children:"Yes"})]})]})})]})},yS=()=>{const[n,e]=T.useState("incoming"),[t,r]=T.useState([]),[o,a]=T.useState([]),[l,d]=T.useState(!1);T.useState("john.doe");const[h,f]=T.useState(!1),[p,y]=T.useState(!1),{isAuthenticated:x,isLoading:C,user:w,acquireToken:E}=vn(),[S,A]=T.useState(!1),[b,k]=T.useState(null),[I,R]=T.useState(0),[D,j]=T.useState(null),[M,U]=T.useState(null),[P,L]=T.useState(null),[$,z]=T.useState(""),[ne,oe]=T.useState(""),[he,K]=T.useState("all"),[B,Q]=T.useState("all"),[ee,_]=T.useState(!1),[F,Y]=T.useState(0),[W,ce]=T.useState(!1),pe=lo(),Ee=async()=>{try{const G=await E("api");if(!G)throw new Error("Token acquisition failed or required interaction");return{headers:{Authorization:`Bearer ${G}`,"Content-Type":"application/json"}}}catch(G){throw console.error("Error acquiring token:",G),G}};T.useEffect(()=>{(async()=>{try{console.log("Starting to fetch encryption keys...");try{const ge=await Gi();if(console.log("Keys fetched:",ge),ge&&ge.aesKey&&ge.aesIV)j(ge.aesKey),U(ge.aesIV),console.log("Keys set successfully");else throw new Error("Invalid keys structure")}catch(ge){console.error("Failed to fetch encryption keys:",ge),L(ge.message)}if(d(!0),!(w!=null&&w.id)){console.error("User ID missing"),d(!1);return}}catch(ge){console.error("Error in fetchData:",ge),d(!1)}})()},[w==null?void 0:w.id]),T.useEffect(()=>{(async()=>{d(!0);try{const ge=await Ee(),Be=await Ze.get(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/Income/${w.id}`,ge);console.log("Incoming requests response:",Be.data);const Ue=Be.data.sort((qe,Pe)=>{var lt,rt,yt,Xt;const ut={pending:1,approved:2,rejected:3,accepted:4},He=ut[(lt=qe.status)==null?void 0:lt.toLowerCase()]-ut[(rt=Pe.status)==null?void 0:rt.toLowerCase()];if(He!==0)return He;const We={high:1,medium:2,low:3};return We[(yt=qe.priority)==null?void 0:yt.toLowerCase()]-We[(Xt=Pe.priority)==null?void 0:Xt.toLowerCase()]});r(Ue)}catch(ge){console.error("Error fetching incoming requests:",ge)}finally{d(!1)}})()},[w==null?void 0:w.id]),T.useEffect(()=>{(async()=>{d(!0);try{const ge=await Ee(),Be=await Ze.get(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/${w.id}`,ge);console.log("Outgoing requests response:",Be.data);const Ue=Be.data.sort((qe,Pe)=>{var He,We;const ut={high:1,medium:2,low:3};return ut[(He=qe.priority)==null?void 0:He.toLowerCase()]-ut[(We=Pe.priority)==null?void 0:We.toLowerCase()]});a(Ue)}catch(ge){console.error("Error fetching outgoing requests:",ge)}finally{d(!1)}})()},[w==null?void 0:w.id]);const Z=async(G,ge)=>{var Be,Ue,qe,Pe;if(ge.stopPropagation(),!W){ce(!0);try{const ut=await Ee();console.log("Rejecting dependency for task ID:",G.dependencyTaskId,"Request:",G),await Ze.post(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Dependency/RejectDependency/${G.dependencyTaskId}`,{},ut),console.log(`Dependency ${G.dependencyTaskId} rejected successfully`),r(lt=>lt.map(rt=>rt.dependencyTaskId===G.dependencyTaskId?{...rt,status:"rejected"}:rt));const We=(await Ze.get(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/Income/${w.id}`,ut)).data.sort((lt,rt)=>{var fn,Kt,Cn,Hn;const yt={pending:1,approved:2,rejected:3,accepted:4},Xt=yt[(fn=lt.status)==null?void 0:fn.toLowerCase()]-yt[(Kt=rt.status)==null?void 0:Kt.toLowerCase()];if(Xt!==0)return Xt;const _t={high:1,medium:2,low:3};return _t[(Cn=lt.priority)==null?void 0:Cn.toLowerCase()]-_t[(Hn=rt.priority)==null?void 0:Hn.toLowerCase()]});r(We),alert("Request rejected successfully"),_(!1)}catch(ut){console.error("Error rejecting dependency:",ut,"Response:",(Be=ut.response)==null?void 0:Be.data);const He=((Ue=ut.response)==null?void 0:Ue.status)===500?`Server error occurred (JSON Exception). Please check if dependency ID ${G.dependencyTaskId} is valid or contact support.`:((Pe=(qe=ut.response)==null?void 0:qe.data)==null?void 0:Pe.message)||ut.message||"Unable to reject request. Please try again.";alert(`Failed to reject request: ${He}`);try{const We=await Ee(),rt=(await Ze.get(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/Income/${w.id}`,We)).data.sort((yt,Xt)=>{var Cn,Hn,Gr,Gn;const _t={pending:1,approved:2,rejected:3,accepted:4},fn=_t[(Cn=yt.status)==null?void 0:Cn.toLowerCase()]-_t[(Hn=Xt.status)==null?void 0:Hn.toLowerCase()];if(fn!==0)return fn;const Kt={high:1,medium:2,low:3};return Kt[(Gr=yt.priority)==null?void 0:Gr.toLowerCase()]-Kt[(Gn=Xt.priority)==null?void 0:Gn.toLowerCase()]});r(rt)}catch(We){console.error("Error refetching requests after failed rejection:",We),alert("Failed to refresh requests. Please reload the page.")}}finally{ce(!1)}}},se=(G,ge)=>{ge.stopPropagation(),R(G.dependencyTaskId),k(G),A(!0),_(!1)},we=()=>{A(!1),k(null)},ke=async()=>{if(b)try{const G=await Ee();await Ze.put(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/${b.id}`,{status:"approved"},G);const Be=(await Ze.get(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/Income/${w.id}`,G)).data.sort((Ue,qe)=>{var We,lt,rt,yt;const Pe={pending:1,approved:2,rejected:3,accepted:4},ut=Pe[(We=Ue.status)==null?void 0:We.toLowerCase()]-Pe[(lt=qe.status)==null?void 0:lt.toLowerCase()];if(ut!==0)return ut;const He={high:1,medium:2,low:3};return He[(rt=Ue.priority)==null?void 0:rt.toLowerCase()]-He[(yt=qe.priority)==null?void 0:yt.toLowerCase()]});r(Be),alert("Request status updated to approved")}catch(G){console.error("Error updating request status:",G),alert("Request has been Accepted")}we()},Le=async(G,ge)=>{var Be,Ue;try{const qe=await Ee(),Pe=typeof ge=="string"?ge:ge.id;console.log(`Linking request ${G.dependencyTaskId} to task ${ge}`),await Ze.patch(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task/link/${ge}/${G.dependencyTaskId}`,qe),alert(`Successfully linked to task #${Pe}`);const He=(await Ze.get(`https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/Income/${w.id}`,qe)).data.sort((We,lt)=>{var _t,fn,Kt,Cn;const rt={pending:1,approved:2,rejected:3,accepted:4},yt=rt[(_t=We.status)==null?void 0:_t.toLowerCase()]-rt[(fn=lt.status)==null?void 0:fn.toLowerCase()];if(yt!==0)return yt;const Xt={high:1,medium:2,low:3};return Xt[(Kt=We.priority)==null?void 0:Kt.toLowerCase()]-Xt[(Cn=lt.priority)==null?void 0:Cn.toLowerCase()]});r(He),_(!1)}catch(qe){console.error("Error linking task:",qe),alert("Failed to link task: "+(((Ue=(Be=qe.response)==null?void 0:Be.data)==null?void 0:Ue.message)||qe.message||"Please try again."))}},Te=()=>{f(!1)},ze=(G,ge,Be)=>{a(Ue=>[{id:Date.now(),taskName:Be.notes,requestedTask:Be.notes,description:Be.notes,priority:"medium",status:"pending",targetUser:Be.assignedTo,createdAt:new Date().toISOString(),estimatedImpact:"To be determined",fromEmail:w.email||"unknown@example.com",toEmail:Be.assignedToEmail||"unknown@example.com"},...Ue]),alert("Dependency request sent successfully!")},it=G=>{switch(G==null?void 0:G.toLowerCase()){case"high":return"bg-red-50 text-red-700 border-red-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-600 border-gray-200"}},bt=G=>{switch(G==null?void 0:G.toLowerCase()){case"pending":return"bg-blue-50 text-blue-700 border-blue-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"accepted":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-600 border-gray-200"}},mt=G=>{switch(G==null?void 0:G.toLowerCase()){case"pending":return c.jsx(Fn,{className:"w-3 h-3"});case"approved":return c.jsx(_i,{className:"w-3 h-3"});case"rejected":return c.jsx(eu,{className:"w-3 h-3"});case"accepted":return c.jsx(_i,{className:"w-3 h-3"});default:return c.jsx(Fn,{className:"w-3 h-3"})}},Ln=G=>{if(!G||typeof G!="string")return console.warn("Invalid or missing dateString:",G),"N/A";const ge=new Date(G);return isNaN(ge.getTime())?(console.warn("Invalid date parsed from:",G),"N/A"):ge.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},$t=G=>G.replace(/\(Quadrant Technologies\)/g,"").trim(),Et=(G,ge)=>{let Be=G;return ge&&(Be=Be.filter(Ue=>Ue.taskName.toLowerCase().includes(ge.toLowerCase())||$t(Fr(Ue.name,D,M)).toLowerCase().includes(ge.toLowerCase()))),he!=="all"&&(Be=Be.filter(Ue=>Ue.status.toLowerCase()===he)),B!=="all"&&(Be=Be.filter(Ue=>Ue.priority.toLowerCase()===B)),Be},At=(G,ge)=>{k(G),Y(ge),_(!0)},zt=G=>{G.stopPropagation(),Y(ge=>ge>0?ge-1:Vt.length-1),k(Vt[F>0?F-1:Vt.length-1])},Dt=G=>{G.stopPropagation(),Y(ge=>ge<Vt.length-1?ge+1:0),k(Vt[F<Vt.length-1?F+1:0])},_n=({request:G,type:ge,onClose:Be,onPrev:Ue,onNext:qe})=>{var He,We,lt;const Pe=ge==="incoming",ut=rt=>{rt.stopPropagation()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md sm:max-w-lg md:max-w-xl overflow-hidden relative",children:[c.jsx("button",{onClick:Be,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-1 transition-colors","aria-label":"Close modal",children:c.jsx(eu,{className:"w-6 h-6"})}),c.jsx("button",{onClick:Ue,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-900 bg-white rounded-full p-2 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed z-10",disabled:W,"aria-label":"Previous request",children:c.jsx(Sh,{className:"w-6 h-6"})}),c.jsx("button",{onClick:qe,className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-900 bg-white rounded-full p-2 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed z-10",disabled:W,"aria-label":"Next request",children:c.jsx(Yi,{className:"w-6 h-6"})}),c.jsxs("div",{className:"p-6 sm:p-8 pl-16 sm:pl-20 pr-12 sm:pr-14",children:[c.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 truncate",title:G.taskName||"Untitled Request",children:G.taskName||"Untitled Request"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[c.jsx(ks,{className:"w-5 h-5 text-gray-500"}),c.jsx("span",{className:"font-medium",children:Pe?`From: ${$t(Fr(G.name,D,M))||"Unknown"}`:`To: ${$t(Fr(G.name,D,M))||"Unknown"}`})]}),c.jsxs("div",{className:"flex flex-wrap gap-6 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ss,{className:"w-5 h-5 text-gray-500"}),c.jsx("span",{children:Ln(G.createdAt||G.requestedDate)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Fn,{className:"w-5 h-5 text-gray-500"}),c.jsx("span",{children:G.estimatedImpact||"N/A"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${it(G.priority)}`,children:((He=G.priority)==null?void 0:He.toUpperCase())||"N/A"}),c.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full border ${bt(G.status)}`,children:[mt(G.status),((We=G.status)==null?void 0:We.toUpperCase())||"N/A"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Requested Task:"}),c.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:G.requestedTask||"No task details provided"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Description:"}),c.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:G.description||"No description available"})]})]}),Pe&&((lt=G.status)==null?void 0:lt.toLowerCase())==="pending"&&c.jsxs("div",{className:"flex flex-wrap gap-3 pt-4",onClick:ut,children:[c.jsxs("button",{onClick:rt=>se(G,rt),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:W,children:[c.jsx(_i,{className:"w-4 h-4"}),"Accept"]}),c.jsx(S6,{request:G,handleLinkToExistingTask:Le,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:W}),c.jsxs("button",{onClick:rt=>Z(G,rt),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed",disabled:W,children:[W?c.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c.jsx(eu,{className:"w-4 h-4"}),W?"Rejecting...":"Reject"]})]})]})]})]})})},gr=({request:G,type:ge,index:Be})=>{var qe,Pe;const Ue=ge==="incoming";return c.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 overflow-hidden cursor-pointer min-h-[150px] min-w-[300px] max-w-[400px]",onClick:()=>At(G,Be),children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate flex-1",title:G.taskName,children:G.taskName||"Untitled Request"}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-2",children:[c.jsx(ks,{className:"w-4 h-4"}),c.jsx("span",{children:Ue?`From: ${$t(Fr(G.name,D,M))||"Unknown"}`:`To: ${$t(Fr(G.name,D,M))||"Unknown"}`})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${it(G.priority)}`,children:((qe=G.priority)==null?void 0:qe.toUpperCase())||"N/A"}),c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full border ${bt(G.status)}`,children:[mt(G.status),((Pe=G.status)==null?void 0:Pe.toUpperCase())||"N/A"]})]})]}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ss,{className:"w-4 h-4"}),Ln(G.createdAt||G.requestedDate)]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Fn,{className:"w-4 h-4"}),G.estimatedImpact||"N/A"]})]})]})})},dn=({type:G})=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[G==="incoming"?c.jsx(P0,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}):c.jsx(Ap,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:G==="incoming"?"No incoming requests":"No outgoing requests"}),c.jsx("p",{className:"text-gray-600 mb-6",children:G==="incoming"?"You don't have any dependency requests at the moment.":"You haven't sent any dependency requests yet."})]}),hn=n==="incoming"?t:o,Pt=n==="incoming"?$:ne,Vt=Et(hn,Pt),Ce=Vt.filter(G=>{var ge;return((ge=G.status)==null?void 0:ge.toLowerCase())==="pending"}).length;return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"max-w-full mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dependency Requests"})}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsx(Tr,{onClick:()=>{y(!0),pe("/admin")},disabled:p,className:`flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 transition-colors border border-gray-200 ${p?"opacity-50 cursor-not-allowed":""}`,children:p?c.jsxs("span",{className:"flex items-center",children:[c.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Navigating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(uS,{className:"w-4 h-4"}),"Back to Home"]})})})]}),c.jsx("div",{className:"w-full flex flex-col gap-4 mb-8 px-4",children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 w-full",children:[c.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:[c.jsxs("button",{onClick:()=>e("incoming"),className:`min-w-[200px] flex items-center gap-2 px-4 py-2 rounded-md font-medium text-sm transition-colors ${n==="incoming"?"bg-indigo-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[c.jsx(P0,{className:"w-4 h-4"}),"Incoming (",Et(t,$).length,")"]}),c.jsxs("button",{onClick:()=>e("outgoing"),className:`min-w-[200px] flex items-center gap-2 px-4 py-2 rounded-md font-medium text-sm transition-colors ${n==="outgoing"?"bg-indigo-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[c.jsx(Ap,{className:"w-4 h-4"}),"My Requests (",Et(o,ne).length,")"]})]}),c.jsxs("div",{className:"flex flex-wrap flex-grow justify-end items-center gap-4",children:[c.jsxs("div",{className:"relative flex-grow min-w-[250px] max-w-[400px]",children:[c.jsx(dg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Search requests...",value:Pt,onChange:G=>{n==="incoming"?z(G.target.value):oe(G.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),c.jsxs("select",{value:he,onChange:G=>K(G.target.value),className:"min-w-[180px] px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",children:[c.jsx("option",{value:"all",children:"All Status"}),c.jsx("option",{value:"pending",children:"Pending"}),c.jsx("option",{value:"rejected",children:"Rejected"}),c.jsx("option",{value:"accepted",children:"Accepted"})]}),c.jsxs("select",{value:B,onChange:G=>Q(G.target.value),className:"min-w-[180px] px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",children:[c.jsx("option",{value:"all",children:"All Priority"}),c.jsx("option",{value:"high",children:"High"}),c.jsx("option",{value:"medium",children:"Medium"}),c.jsx("option",{value:"low",children:"Low"})]})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Vt.length})]}),c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(P0,{className:"w-4 h-4 text-blue-600"})})]})}),c.jsx("div",{className:"bg-green-100 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),c.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:Ce})]}),c.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:c.jsx(Fn,{className:"w-4 h-4 text-yellow-600"})})]})}),c.jsx("div",{className:"bg-yellow-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Rejected"}),c.jsx("p",{className:"text-2xl font-semibold text-red-600",children:Vt.filter(G=>{var ge;return((ge=G.status)==null?void 0:ge.toLowerCase())==="rejected"}).length})]}),c.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(eu,{className:"w-4 h-4 text-red-600"})})]})}),c.jsx("div",{className:"bg-pink-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"High Priority"}),c.jsx("p",{className:"text-2xl font-semibold text-red-600",children:Vt.filter(G=>{var ge;return((ge=G.priority)==null?void 0:ge.toLowerCase())==="high"}).length})]}),c.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx(Cs,{className:"w-4 h-4 text-red-600"})})]})})]}),l?c.jsx("div",{className:"flex justify-center items-center py-20",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):c.jsx("div",{children:Vt.length===0?c.jsx(dn,{type:n}):c.jsx("div",{className:"max-h-[600px] overflow-y-auto pr-2",children:c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 items-start",children:Vt.map((G,ge)=>c.jsx(gr,{request:G,type:n,index:ge},G.id))})})}),ee&&b&&c.jsx(_n,{request:b,type:n,onClose:()=>_(!1),onPrev:zt,onNext:Dt}),h&&c.jsx(gS,{taskId:null,stepId:null,taskList:[],onClose:Te,onSave:ze}),S&&c.jsx(xS,{isOpen:S,onClose:we,onAddTask:ke,taskToEdit:null,dependencyTaskId:I})]})})},vS=6e4,hg=36e5,y1=Symbol.for("constructDateFrom");function kh(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&y1 in n?n[y1](e):n instanceof Date?new n.constructor(e):new Date(e)}function Kd(n,e){return kh(n,n)}function k6(n,e,t){const r=Kd(n);return isNaN(e)?kh(n,NaN):(r.setDate(r.getDate()+e),r)}function T6(n,e,t){return kh(n,+Kd(n)+e)}function A6(n,e,t){return T6(n,e*hg)}function tu(n,e,t){return k6(n,-e)}function _6(n,e){const t=()=>kh(e==null?void 0:e.in,NaN),o=D6(n);let a;if(o.date){const f=P6(o.date,2);a=j6(f.restDateString,f.year)}if(!a||isNaN(+a))return t();const l=+a;let d=0,h;if(o.time&&(d=M6(o.time),isNaN(d)))return t();if(o.timezone){if(h=O6(o.timezone),isNaN(h))return t()}else{const f=new Date(l+d),p=Kd(0);return p.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),p.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),p}return Kd(l+d+h)}const nu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},N6=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,I6=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,R6=/^([+-])(\d{2})(?::?(\d{2}))?$/;function D6(n){const e={},t=n.split(nu.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],nu.timeZoneDelimiter.test(e.date)&&(e.date=n.split(nu.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const o=nu.timezone.exec(r);o?(e.time=r.replace(o[1],""),e.timezone=o[1]):e.time=r}return e}function P6(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?o:a*100,restDateString:n.slice((r[1]||r[2]).length)}}function j6(n,e){if(e===null)return new Date(NaN);const t=n.match(N6);if(!t)return new Date(NaN);const r=!!t[4],o=Fa(t[1]),a=Fa(t[2])-1,l=Fa(t[3]),d=Fa(t[4]),h=Fa(t[5])-1;if(r)return U6(e,d,h)?F6(e,d,h):new Date(NaN);{const f=new Date(0);return!L6(e,a,l)||!H6(e,o)?new Date(NaN):(f.setUTCFullYear(e,a,Math.max(o,l)),f)}}function Fa(n){return n?parseInt(n):1}function M6(n){const e=n.match(I6);if(!e)return NaN;const t=M0(e[1]),r=M0(e[2]),o=M0(e[3]);return $6(t,r,o)?t*hg+r*vS+o*1e3:NaN}function M0(n){return n&&parseFloat(n.replace(",","."))||0}function O6(n){if(n==="Z")return 0;const e=n.match(R6);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return z6(r,o)?t*(r*hg+o*vS):NaN}function F6(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const o=r.getUTCDay()||7,a=(e-1)*7+t+1-o;return r.setUTCDate(r.getUTCDate()+a),r}const B6=[31,null,31,30,31,30,31,31,30,31,30,31];function wS(n){return n%400===0||n%4===0&&n%100!==0}function L6(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(B6[e]||(wS(n)?29:28))}function H6(n,e){return e>=1&&e<=(wS(n)?366:365)}function U6(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function $6(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function z6(n,e){return e>=0&&e<=59}function v1(){const n=lo(),[e,t]=T.useState([]),[r,o]=T.useState([]),[a,l]=T.useState(!1),[d,h]=T.useState(!1),[f,p]=T.useState(null),[y,x]=T.useState(""),[C,w]=T.useState("list"),[E,S]=T.useState({priority:"",status:"",startDate:"",dueDate:"",assignedTo:"",hasSubtasks:null,searchTerm:""}),[A,b]=T.useState(0),[k,I]=T.useState(0),[R,D]=T.useState(1),[j,M]=T.useState({totalCount:0,pageNumber:1,pageSize:5,totalPages:1,hasPreviousPage:!1,hasNextPage:!1}),U=5,[P,L]=T.useState([]),[$,z]=T.useState([]),[ne,oe]=T.useState([]),[he,K]=T.useState(!1),[B,Q]=T.useState(!1),[ee,_]=T.useState(0),[F,Y]=T.useState(!1),[W,ce]=T.useState(null),[pe,Ee]=T.useState({}),[Z,se]=T.useState(new Set),[we,ke]=T.useState([]),[Le,Te]=T.useState(!1),[ze,it]=T.useState(!1),[bt,mt]=T.useState(null),[Ln,$t]=T.useState(!1),[Et,At]=T.useState(()=>{const ie=localStorage.getItem("notificationSettings");return ie?JSON.parse(ie):{soundEnabled:!0,toastDuration:5e3}}),[zt,Dt]=T.useState(null),[_n,gr]=T.useState(null),[dn,hn]=T.useState(null),[Pt,Vt]=T.useState(!1),Ce=T.useRef(null),G=T.useRef(null),ge=T.useRef(null),{acquireToken:Be,isAuthenticated:Ue,isLoading:qe,user:Pe}=vn(),ut="https://https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Task",He="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/SubTask",We="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Feedback",lt="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/User/user1",rt="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api/Encryption/keys",yt="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net",Xt=ie=>{At(ie),localStorage.setItem("notificationSettings",JSON.stringify(ie))};T.useEffect(()=>{(async()=>{try{console.log("Starting to fetch encryption keys...");try{const ue=await Gi();if(console.log("Keys fetched:",ue),ue&&ue.aesKey&&ue.aesIV)Dt(ue.aesKey),gr(ue.aesIV),console.log("Keys set successfully");else throw new Error("Invalid keys structure")}catch(ue){console.error("Failed to fetch encryption keys:",ue),hn(ue.message)}if(!(Pe!=null&&Pe.id)){console.error("User ID missing");return}}catch(ue){console.error("Error in fetchData:",ue)}})()},[Pe==null?void 0:Pe.id]);const _t=async(ie,ue="GET",Ae=null,je=null)=>{var Ne;try{const xe=await Be("api");if(!xe)throw new Error("Failed to acquire authentication token");const Se={method:ue,url:ie,headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"}};return Ae&&["POST","PUT","PATCH"].includes(ue)&&(Se.data=Ae),je&&(Se.params=Object.fromEntries(Object.entries(je).filter(([Ge,vt])=>vt!==null&&vt!==""&&vt!==void 0))),(await Ze(Se)).data}catch(xe){throw console.error(`Error in request to ${ie}:`,xe),((Ne=xe.response)==null?void 0:Ne.status)===401?new Error("Authentication failed. Please try logging in again."):xe}},fn=async ie=>{if(!ie)return console.warn("No managerId provided"),"Unknown Managerss";if(pe[ie])return console.log("Using cached manager name for ID:",ie,pe[ie]),pe[ie];if(!Pt)return console.warn("Encryption keys not fetched, isKeysFetched:",Pt,"keyError:",dn),dn?"Unknown Manager":"Fetching...";try{const ue=await _t(`${lt}/${ie}`);console.log("Manager API response:",JSON.stringify(ue,null,2));const Ae=xe=>xe?typeof xe=="string"?xe:typeof xe=="object"?xe.fullName||xe.name||xe.Name||xe.username||(xe.first&&xe.last?`${xe.first} ${xe.last}`:null):null:null;let je;if(Array.isArray(ue)?(console.log("Response is an array, checking first element:",ue[0]),je=Ae(ue[0])):je=Ae(ue),!je)throw console.error("No name field found in response:",ue),new Error("No name field in response");console.log("Encrypted name:",je);const Ne=Fr(je,zt,_n);return console.log("Decrypted name:",Ne),Ee(xe=>({...xe,[ie]:Ne})),Ne}catch(ue){return console.error(`Error fetching/decrypting manager name for ID ${ie}:`,ue),Ee(Ae=>({...Ae,[ie]:"Unknown Manager"})),"Unknown Manager"}},Kt=async()=>{if(!(!Ue||!(Pe!=null&&Pe.id)||!Pt)){Y(!0),ce(null);try{const ie=await _t(`${We}/${Pe.id}`);if(!Array.isArray(ie))throw new Error("Invalid response format: expected array");console.log("Notifications response:",ie);const ue=tu(new Date,60),Ne=(await Promise.all(ie.map(async xe=>{console.log("Processing notification with managerId:",xe.managerId);const Se=new Date(xe.sentAt);return isNaN(Se)?null:{...xe,managerName:await fn(xe.managerId),isRead:xe.isRead||!1,sentAt:Se.toISOString()}}))).filter(xe=>xe!==null).filter(xe=>new Date(xe.sentAt)>=ue).sort((xe,Se)=>new Date(Se.sentAt)-new Date(xe.sentAt));L(Ne.filter(xe=>!xe.isRead)),z(Ne),_(Ne.filter(xe=>!xe.isRead).length),ke(Ne.filter(xe=>!xe.isRead).slice(0,3))}catch(ie){console.error("Error fetching notifications:",ie),ce("Unable to load notifications. Please check your connection and try again."),L([]),z([]),_(0),ke([])}Y(!1)}},Cn=ie=>{try{const ue=_6(ie);if(isNaN(ue))return"Invalid date";const Ae=A6(ue,5.5),je=new Date,Ne=(je-Ae)/(1e3*60*60);return Ne<1?"Just now":Ne<24?`${Math.floor(Ne)}h ago`:Ne<48?"Yesterday":Ae.toLocaleDateString("en-US",{month:"short",day:"numeric",...Ae.getFullYear()!==je.getFullYear()&&{year:"numeric"}})}catch(ue){return console.error("Error parsing date:",ie,ue),"Invalid date"}},Hn=()=>{if(!Et.soundEnabled)return;new Audio("/assets/notification-sound.wav").play().catch(ue=>console.warn("Audio play failed:",ue))},Gr=ie=>{const ue=document.getElementById(`task-${ie}`);ue&&(ue.scrollIntoView({behavior:"smooth",block:"center"}),ue.classList.add("bg-yellow-100"),setTimeout(()=>ue.classList.remove("bg-yellow-100"),2e3))},Gn=async()=>{var Ae;if(((Ae=ge.current)==null?void 0:Ae.state)===Rt.Connected)return;const ie=5,ue=2e3;for(let je=1;je<=ie;je++)try{const Ne=await Be("api");if(!Ne)throw new Error("Failed to acquire authentication token");ge.current=new Yj().withUrl(`${yt}/feedbackHub`,{accessTokenFactory:()=>Ne}).configureLogging(ae.Information).withAutomaticReconnect([0,2e3,1e4,3e4]).build(),ge.current.on("newFeedback",async xe=>{if(!Pt){oe(St=>[...St,xe]);return}const Se=tu(new Date,60),pt=new Date(xe.sentAt);if(pt<Se)return;const Ge=await fn(xe.managerId),vt={...xe,managerName:Ge,isRead:!1,sentAt:pt.toISOString()};L(St=>[vt,...St.filter(Zt=>Zt.id!==vt.id)]),z(St=>[vt,...St.filter(Zt=>Zt.id!==vt.id)].sort((Zt,jh)=>new Date(jh.sentAt)-new Date(Zt.sentAt))),_(St=>St+1),ke(St=>[vt,...St.filter(Zt=>Zt.id!==vt.id).slice(0,2)].filter(Zt=>!Zt.isRead)),$t(!0),setTimeout(()=>$t(!1),2e3),Hn()}),ge.current.on("bulkFeedback",async xe=>{if(!Pt){oe(Ge=>[...Ge,...xe.filter(vt=>vt.userId===Pe.id)]);return}const Se=tu(new Date,60),pt=await Promise.all(xe.filter(Ge=>Ge.userId===Pe.id&&new Date(Ge.sentAt)>=Se).map(async Ge=>({...Ge,managerName:await fn(Ge.managerId),isRead:Ge.isRead||!1,sentAt:new Date(Ge.sentAt).toISOString()})));L(Ge=>[...pt,...Ge.filter(St=>!pt.some(Un=>Un.id===St.id))].sort((St,Un)=>new Date(Un.sentAt)-new Date(St.sentAt)).filter(St=>!St.isRead)),z(Ge=>[...pt,...Ge.filter(St=>!pt.some(Un=>Un.id===St.id))].sort((St,Un)=>new Date(Un.sentAt)-new Date(St.sentAt))),_(Ge=>Ge+pt.filter(vt=>!vt.isRead).length),ke(Ge=>[...pt.filter(St=>!St.isRead).slice(0,3-Ge.length),...Ge].slice(0,3).filter(St=>!St.isRead)),$t(!0),setTimeout(()=>$t(!1),2e3),Hn()}),ge.current.onclose(()=>{ce("Real-time updates are unavailable. Notifications will update periodically.")}),ge.current.onreconnected(async()=>{await ge.current.invoke("JoinUser",Pe.id),ce(null)}),await ge.current.start(),await ge.current.invoke("JoinUser",Pe.id);return}catch(Ne){if(console.error(`Attempt ${je} failed to initialize SignalR:`,Ne),je<ie){const xe=ue*Math.pow(2,je-1);await new Promise(Se=>setTimeout(Se,xe))}else ce("Real-time updates are unavailable. Notifications will update periodically.")}},or=async ie=>{try{L(ue=>{const Ae=ue.find(Ne=>Ne.id===ie);if(!Ae)return ue;const je=ue.filter(Ne=>Ne.id!==ie);return z(Ne=>[{...Ae,isRead:!0},...Ne.filter(Se=>Se.id!==ie)].sort((Se,pt)=>new Date(pt.sentAt)-new Date(Se.sentAt))),je}),ke(ue=>ue.filter(Ae=>Ae.id!==ie)),_(ue=>Math.max(0,ue-1)),se(ue=>new Set(ue).add(ie)),await _t(`${We}/${ie}/read`,"PUT"),setTimeout(()=>{se(ue=>{const Ae=new Set(ue);return Ae.delete(ie),Ae})},600)}catch(ue){console.error("Error marking notification as read:",ue),ce("Failed to mark notification as read. Please try again."),await Kt()}},Gt=async()=>{try{L([]),z(ie=>ie.map(ue=>({...ue,isRead:!0}))),ke([]),_(0),se(new Set(P.map(ie=>ie.id))),await _t(`${We}/user/${Pe.id}/read-all`,"PUT"),setTimeout(()=>{se(new Set),K(!1)},600)}catch(ie){console.error("Error marking all as read:",ie),ce("Failed to mark all notifications as read. Please try again."),await Kt()}};T.useEffect(()=>{if(!Ue||!(Pe!=null&&Pe.id)){console.warn("Skipping initialization: not authenticated or missing user ID");return}(async()=>{var Ae,je,Ne,xe;Y(!0);for(let Se=1;Se<=5;Se++)try{console.log(`Attempt ${Se} to fetch encryption keys from: ${rt}`);const pt=await Be("api");if(!pt)throw new Error("Failed to acquire authentication token");const Ge=await Ze.get(rt,{headers:{Authorization:`Bearer ${pt}`,"Content-Type":"application/json"}});if(console.log("Encryption keys response:",Ge.data),(Ae=Ge.data)!=null&&Ae.aesKey&&((je=Ge.data)!=null&&je.aesIV)){Dt(Ge.data.aesKey),gr(Ge.data.aesIV),hn(null),Vt(!0);break}else throw new Error("Invalid keys structure: missing aesKey or aesIV")}catch(pt){if(console.error(`Attempt ${Se} failed to fetch encryption keys:`,{message:pt.message,response:(Ne=pt.response)==null?void 0:Ne.data,status:(xe=pt.response)==null?void 0:xe.status}),hn("Failed to fetch encryption keys"),Se<5){const Ge=2e3*Math.pow(2,Se-1);console.log(`Retrying in ${Ge}ms...`),await new Promise(vt=>setTimeout(vt,Ge))}else console.error("All retries failed to fetch encryption keys."),hn("Unable to fetch encryption keys. Notifications may display incomplete information.")}Pt&&await Kt(),await Gn(),Y(!1)})();const ue=setInterval(async()=>{Pt&&await Kt()},W?3e4:6e4);return()=>{ge.current&&(ge.current.stop(),ge.current=null),clearInterval(ue)}},[Ue,Pe==null?void 0:Pe.id,Pt,W]),T.useEffect(()=>{Pt&&ne.length>0&&(async()=>{const ue=tu(new Date,60),Ae=await Promise.all(ne.filter(je=>new Date(je.sentAt)>=ue).map(async je=>({...je,managerName:await fn(je.managerId),isRead:je.isRead||!1,sentAt:new Date(je.sentAt).toISOString()})));L(je=>[...Ae,...je.filter(xe=>!Ae.some(Se=>Se.id===xe.id))].sort((xe,Se)=>new Date(Se.sentAt)-new Date(xe.sentAt)).filter(xe=>!xe.isRead)),z(je=>[...Ae,...je.filter(xe=>!Ae.some(Se=>Se.id===xe.id))].sort((xe,Se)=>new Date(Se.sentAt)-new Date(xe.sentAt))),_(je=>je+Ae.filter(Ne=>!Ne.isRead).length),ke(je=>[...Ae.filter(xe=>!xe.isRead).slice(0,3-je.length),...je].slice(0,3).filter(xe=>!xe.isRead)),$t(!0),setTimeout(()=>$t(!1),2e3),Hn(),oe([])})()},[Pt,ne]),T.useEffect(()=>{const ie=Ae=>{G.current&&!G.current.contains(Ae.target)&&!Ae.target.closest('[aria-label="Toggle notifications"]')&&!Ae.target.closest(".settings-modal")&&!Ae.target.closest(".notification-modal")&&!Ce.current.contains(Ae.target)&&(K(!1),Q(!1),Te(!1),it(!1),l(!1))},ue=Ae=>{Ae.key==="Escape"&&(K(!1),Q(!1),Te(!1),it(!1),l(!1))};return(he||Le||ze||a)&&(document.addEventListener("click",ie),document.addEventListener("keydown",ue)),()=>{document.removeEventListener("click",ie),document.removeEventListener("keydown",ue)}},[he,Le,ze,a]),T.useEffect(()=>{if(we.length===0)return;const ie=we.map((ue,Ae)=>ue.isRead||ue.paused?null:setTimeout(()=>{ke(je=>je.filter(Ne=>Ne.id!==ue.id))},Et.toastDuration+Ae*500));return()=>ie.forEach(ue=>ue&&clearTimeout(ue))},[we,Et]),T.useEffect(()=>{if(he&&!B&&P.length>0&&ee===0&&Z.size===0){const ie=setTimeout(()=>K(!1),1e3);return()=>clearTimeout(ie)}},[P,ee,he,Z,B]);const ir=ie=>{if(!ie)return null;try{const[ue,Ae,je]=ie.split("-");return`${je}-${Ae}-${ue}`}catch{return console.error("Invalid date format:",ie),null}};T.useEffect(()=>{if(!Ue||qe||!(Pe!=null&&Pe.id)){console.warn("Skipping fetchTasksAndSubtasks: not authenticated, loading, or missing user ID",{isAuthenticated:Ue,isLoading:qe,userId:Pe==null?void 0:Pe.id});return}(async()=>{try{const ue={pageNumber:R,pageSize:U,priority:E.priority||null,status:E.status||null,startDate:ir(E.startDate)||null,dueDate:ir(E.dueDate)||null,searchTerm:y.trim()||E.searchTerm.trim()||null,assignedTo:E.assignedTo||null,hasSubtasks:E.hasSubtasks||null};console.log("Fetching tasks with params:",ue);const Ae=await _t(`${ut}/GetAllTasks`,"GET",null,ue);if(!Ae||!Ae.data||!Array.isArray(Ae.data))throw new Error("Invalid response format: data is missing or not an array");Ae.pagination||(console.warn("Pagination data missing in response, using default pagination"),Ae.pagination={totalCount:Ae.data.length,pageNumber:R,pageSize:U,totalPages:Math.ceil(Ae.data.length/U),hasPreviousPage:R>1,hasNextPage:Ae.data.length===U});let je=Ae.data.map((xe,Se)=>xe?{...xe,id:xe.id||xe.Id||xe.taskId||xe.TaskId||`temp-${Math.random()}`,taskName:xe.taskName||xe.TaskName||"",steps:[],subTasksCount:xe.subTasksCount||0}:(console.warn(`Task at index ${Se} is null or undefined`),null)).filter(xe=>xe!==null),Ne=[];try{const xe=await _t(He);Array.isArray(xe)?Ne=xe.map((Se,pt)=>{var Ge,vt;return!Se||typeof Se!="object"?(console.warn(`Subtask at index ${pt} is invalid:`,Se),null):{id:(Se.Id||Se.id||Se.subtaskId||Se.subTaskId||`temp-${Math.random()}`).toString(),name:Se.SubTaskName||Se.subTaskName||Se.subtaskName||Se.sub_task_name||"",description:Se.Description||Se.description||Se.subTaskDescription||"",startDate:((Ge=Se.StartDate||Se.startDate||Se.start_date)==null?void 0:Ge.split("T")[0])||"",dueDate:((vt=Se.DueDate||Se.dueDate||Se.due_date)==null?void 0:vt.split("T")[0])||"",status:Se.Status||Se.status||Se.subTaskStatus||"Not Started",estimatedHours:parseFloat(Se.EstimatedHours||Se.estimatedHours||Se.estimated_hours||0),completedHours:parseFloat(Se.CompletedHours||Se.completedHours||Se.completed_hours||0),completed:(Se.Status||Se.status||Se.subTaskStatus)==="Completed",priority:Se.Priority||Se.priority||"Medium",taskId:Se.TaskItemId||Se.taskItemId||Se.taskId||Se.task_item_id||null}}).filter(Se=>Se!==null):console.warn("Subtask data is not an array:",xe)}catch(xe){console.warn("Subtask endpoint failed, continuing with tasks only:",xe.message)}je=je.map((xe,Se)=>{if(!xe)return console.warn(`Processed task at index ${Se} is null`),null;const pt=Ne.filter(Ge=>(Ge==null?void 0:Ge.taskId)&&Ge.taskId.toString()===xe.id.toString());return{...xe,steps:pt,subTasksCount:pt.length,estimatedHours:pt.reduce((Ge,vt)=>Ge+(parseFloat(vt.estimatedHours)||0),0)||xe.estimatedHours||0,completedHours:pt.reduce((Ge,vt)=>Ge+(parseFloat(vt.completedHours)||0),0)||xe.completedHours||0,status:pt.length>0&&pt.every(Ge=>Ge.status==="Completed")?"Completed":xe.status||"Not Started"}}).filter(xe=>xe!==null),je.length===0&&console.warn("No valid tasks after processing"),t(je),o(je),M(Ae.pagination)}catch(ue){console.error("Error fetching tasks:",ue,{currentPage:R,filterParams:{pageNumber:R,pageSize:U,priority:E.priority,status:E.status,startDate:E.startDate,dueDate:E.dueDate,searchTerm:y||E.searchTerm,assignedTo:E.assignedTo,hasSubtasks:E.hasSubtasks}}),alert(`Failed to load tasks for page ${R}: ${ue.message||"Please try again."}`),t([]),o([]),M({totalCount:0,pageNumber:1,pageSize:U,totalPages:1,hasPreviousPage:!1,hasNextPage:!1})}})()},[k,Ue,qe,Pe==null?void 0:Pe.id,R,y]);const Yr=()=>{p(null),h(!0)},Is=()=>{h(!1),p(null)},Wo=async ie=>{try{t(ue=>[ie,...ue]),o(ue=>[ie,...ue]),D(1),I(ue=>ue+1)}catch(ue){console.error("Error handling new task:",ue),alert("Failed to add task: "+(ue.message||"Please try again."))}},Zi=ie=>{const ue=ie.trim();x(ue),S(Ae=>({...Ae,searchTerm:ue})),D(1),I(Ae=>Ae+1)},Ih=({tasks:ie,filters:ue})=>{const Ae={...E,...ue};S(Ae),o(ie||[]),D(1);const je=Object.values(Ae).filter(Ne=>Ne!==null&&Ne!==""&&!(Array.isArray(Ne)&&Ne.length===0)).length;b(je)},jl=()=>{S({priority:"",status:"",startDate:"",dueDate:"",assignedTo:"",hasSubtasks:null,searchTerm:""}),b(0),x(""),D(1),I(ue=>ue+1),l(!1)},Rh=()=>{l(ie=>!ie)},xr=ie=>{w(ie)},Ml=()=>{n("/admin/dependency")},Ol=ie=>{p(ie),h(!0)},Dh=ie=>{D(ie),window.scrollTo({top:0,behavior:"smooth"})},Fl=(ie=>ie.filter(ue=>ue&&ue.id).map(ue=>{if(!ue.startDate||!ue.dueDate){const Ae=new Date,je=new Date;return je.setDate(Ae.getDate()+7),{...ue,startDate:ue.startDate||Ae.toISOString().split("T")[0],dueDate:ue.dueDate||je.toISOString().split("T")[0]}}return ue}))(r);return qe?c.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:c.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:c.jsx("div",{className:"text-gray-500",children:"Loading..."})})}):Ue?c.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[c.jsx("style",{children:`
          @keyframes fade-in {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          .animate-fade-in {
            animation: fade-in 0.3s ease-out;
          }
          @keyframes slide-in-right {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
          }
          .animate-slide-in-right {
            animation: slide-in-right 0.3s ease-out;
          }
        `}),dn&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 p-4 rounded-lg mb-4",children:dn}),W&&c.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 p-4 rounded-lg mb-4",children:[W,c.jsx("button",{onClick:async()=>{ce(null),await Gn(),Pt&&await Kt()},className:"ml-4 text-sm text-purple-600 hover:text-purple-800 font-medium",children:"Retry Now"})]}),Le&&bt&&c.jsx("div",{className:"notification-modal fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-200 p-6 w-full max-w-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Notification Details"}),c.jsx("button",{onClick:()=>{or(bt.id),Te(!1)},className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(yn,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[c.jsx(ks,{className:"w-4 h-4 text-purple-600"}),c.jsxs("span",{className:"font-medium",children:["From: ",bt.managerName]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[c.jsx(Fn,{className:"w-4 h-4 text-purple-600"}),c.jsxs("span",{children:["Sent: ",Cn(bt.sentAt)]})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:c.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:bt.message})})]}),bt.taskId&&c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:()=>{Gr(bt.taskId),or(bt.id),Te(!1),K(!1),Q(!1),w("list")},className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105","aria-label":"Go to task",children:"Go to Task"})})]})}),ze&&c.jsx("div",{className:"settings-modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[60] w-full max-w-md",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notification Settings"}),c.jsx("button",{onClick:()=>it(!1),className:"text-gray-500 hover:text-gray-700",children:c.jsx(yn,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[c.jsx("input",{type:"checkbox",checked:Et.soundEnabled,onChange:ie=>Xt({...Et,soundEnabled:ie.target.checked}),className:"h-4 w-4 text-purple-600"}),"Enable Notification Sound"]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"text-sm text-gray-600",children:"Toast Duration"}),c.jsxs("select",{value:Et.toastDuration,onChange:ie=>Xt({...Et,toastDuration:parseInt(ie.target.value)}),className:"mt-1 w-full border border-gray-300 rounded-lg p-1.5 text-sm",children:[c.jsx("option",{value:3e3,children:"3 seconds"}),c.jsx("option",{value:5e3,children:"5 seconds"}),c.jsx("option",{value:1e4,children:"10 seconds"})]})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:()=>it(!1),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm hover:bg-purple-700",children:"Save"})})]})}),c.jsx("div",{className:"fixed bottom-6 right-6 z-50 space-y-3",children:we.map((ie,ue)=>c.jsx("div",{className:`relative bg-white border border-gray-200 rounded-xl shadow-lg p-4 max-w-sm transform transition-all duration-300 ease-in-out ${Z.has(ie.id)?"opacity-0 translate-x-full":"opacity-100 translate-x-0"} hover:shadow-xl group animate-slide-in-right`,style:{marginBottom:`${ue*.75}rem`},onMouseEnter:()=>{ke(Ae=>Ae.map(je=>je.id===ie.id?{...je,paused:!0}:je))},onMouseLeave:()=>{ke(Ae=>Ae.map(je=>je.id===ie.id?{...je,paused:!1}:je))},children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${ie.isRead?"bg-gray-100":"bg-purple-100"}`,children:c.jsx(m1,{className:`w-5 h-5 ${ie.isRead?"text-gray-600":"text-purple-600"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[c.jsx(ks,{className:"w-4 h-4"}),c.jsx("span",{className:"font-medium",children:ie.managerName})]}),c.jsx("span",{className:"text-xs text-gray-500",children:Cn(ie.sentAt)})]}),c.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:ie.message}),!ie.isRead&&c.jsxs("div",{className:"mt-2 flex gap-2",children:[c.jsx("button",{onClick:()=>{mt(ie),Te(!0)},className:"text-xs text-purple-600 hover:text-purple-800 font-medium",children:"View"}),c.jsx("button",{onClick:()=>or(ie.id),className:"text-xs text-gray-500 hover:text-gray-700 font-medium",children:"Dismiss"})]})]}),c.jsx("button",{onClick:()=>or(ie.id),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(yn,{className:"w-4 h-4"})})]})},ie.id))}),he&&c.jsxs("div",{className:"fixed inset-0 z-[50]",children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 backdrop-blur-sm transition-opacity duration-300",onClick:()=>{K(!1),Q(!1)}}),c.jsx("div",{ref:G,className:"fixed right-0 top-0 h-full w-80 bg-white shadow-2xl transform transition-transform duration-300 ease-in-out translate-x-0",children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"p-4 bg-purple-50 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ua,{className:"h-5 w-5 text-purple-600"}),c.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:B?"Notification History":"Notifications"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>it(!0),className:"text-sm text-purple-600 hover:text-purple-800",children:"Settings"}),c.jsx("button",{onClick:()=>{K(!1),Q(!1)},className:"p-1 text-gray-500 hover:text-gray-700 rounded-full","aria-label":"Close notifications",children:c.jsx(yn,{className:"h-5 w-5"})})]})]}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B?`${$.length} total`:`${P.length} total, ${ee} unread`})]}),c.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center gap-2",children:[c.jsx("button",{onClick:()=>Q(!B),className:"text-sm text-purple-600 hover:text-purple-800 font-medium flex items-center gap-1",children:B?c.jsxs(c.Fragment,{children:[c.jsx(Ua,{className:"h-4 w-4"}),"Back to Notifications"]}):c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6h4m6 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"View History"]})}),!B&&ee>0&&c.jsxs("button",{onClick:Gt,className:"text-sm text-purple-600 hover:text-purple-800 font-medium flex items-center gap-1",children:[c.jsx(C8,{className:"h-4 w-4"}),"Mark all as read"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:F?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-purple-500 border-t-transparent mb-4"}),c.jsx("p",{className:"text-sm font-medium",children:"Loading notifications..."})]}):W?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[c.jsx(yn,{className:"h-8 w-8 text-red-500 mb-2"}),c.jsx("p",{className:"text-sm text-red-600 mb-4",children:W}),c.jsx("button",{onClick:async()=>{ce(null),await Gn(),Pt&&await Kt()},className:"px-4 py-1.5 bg-purple-600 text-white rounded-lg text-sm hover:bg-purple-700",children:"Retry Now"})]}):(B?$:P).length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[c.jsx(Ua,{className:"h-8 w-8 text-gray-400 mb-2"}),c.jsx("p",{className:"text-sm text-gray-500",children:B?"No notification history":"No notifications to show"})]}):c.jsx("div",{className:"p-4 space-y-3",children:(B?$:P).map(ie=>c.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-300 cursor-pointer ${ie.isRead?"border-gray-200 bg-white":"border-purple-200 bg-purple-50 hover:bg-purple-100"} ${Z.has(ie.id)?"opacity-0 translate-y-4":""}`,onClick:()=>{mt(ie),Te(!0),ie.isRead||or(ie.id)},children:[!ie.isRead&&c.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-purple-600 rounded-full animate-pulse"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${ie.isRead?"bg-gray-100":"bg-purple-100"}`,children:c.jsx(m1,{className:`w-4 h-4 ${ie.isRead?"text-gray-600":"text-purple-600"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-1",children:[c.jsx(ks,{className:"w-3 h-3"}),c.jsx("span",{children:ie.managerName})]}),c.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:ie.message})]}),c.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Cn(ie.sentAt)})]}),!B&&!ie.isRead&&c.jsxs("div",{className:"mt-2 flex gap-2",children:[c.jsxs("button",{onClick:ue=>{ue.stopPropagation(),mt(ie),Te(!0)},className:"text-xs text-purple-600 hover:text-purple-800 font-medium flex items-center gap-1",children:[c.jsx(k8,{className:"w-3 h-3"}),"View"]}),c.jsx("button",{onClick:ue=>{ue.stopPropagation(),or(ie.id)},className:"text-xs text-gray-500 hover:text-gray-700 font-medium",children:"Dismiss"})]})]})]})]},ie.id))})}),c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsxs("button",{onClick:Kt,className:"w-full flex items-center justify-center gap-2 py-2 text-sm text-purple-600 hover:text-purple-800 hover:bg-purple-100 rounded-lg",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]})})]}),C!=="focus"&&C!=="dependencies"&&c.jsxs("div",{className:"flex flex-wrap md:flex-nowrap justify-between items-center gap-4 mb-4",children:[c.jsxs("div",{className:"flex gap-3 flex-shrink-0 order-last md:order-first",children:[c.jsxs("button",{className:`px-3 py-1.5 text-sm rounded-md flex items-center gap-1.5 ${C==="list"?"bg-white shadow-sm":"text-gray-600"}`,onClick:()=>xr("list"),children:[c.jsx(M8,{className:"w-4 h-4"}),"List"]}),c.jsxs("button",{className:`px-3 py-1.5 text-sm rounded-md flex items-center gap-1.5 ${C==="gantt"?"bg-white shadow-sm":"text-gray-600"}`,onClick:()=>xr("gantt"),children:[c.jsx(d8,{className:"w-4 h-4"}),"Timeline"]})]}),c.jsx("div",{className:"flex-grow min-w-[200px] md:max-w-md",children:c.jsx(l6,{placeholder:"Search tasks by name or description...",onSearch:Zi,className:"w-full"})}),c.jsxs("div",{className:"flex gap-3 flex-shrink-0 items-center justify-end flex-wrap",children:[c.jsx("div",{className:"relative",children:c.jsxs("button",{onClick:ie=>{ie.stopPropagation(),K(ue=>!ue),Q(!1)},className:`relative p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-100 rounded-full transition-colors ${Ln?"animate-pulse":""}`,"aria-label":"Toggle notifications",children:[c.jsx(Ua,{className:"h-6 w-6"}),ee>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-purple-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:ee>9?"9+":ee})]})}),c.jsxs(Tr,{onClick:()=>xr("focus"),className:"flex items-center gap-1.5 whitespace-nowrap",children:[c.jsx(D8,{className:"w-4 h-4"}),"Focus Board"]}),c.jsxs(Tr,{onClick:Ml,className:"flex items-center gap-1.5 whitespace-nowrap",children:[c.jsx(N8,{className:"w-4 h-4"}),"Dependency Requests"]}),c.jsxs("div",{className:"relative",children:[c.jsx(Tr,{ref:Ce,onClick:()=>{A>0?jl():Rh()},className:"flex items-center gap-1.5 min-w-[110px] justify-center whitespace-nowrap",style:{transition:"width 0.2s ease"},children:A>0?c.jsxs(c.Fragment,{children:[c.jsx(Tp,{className:"w-4 h-4"}),"Clear Filter",c.jsx("span",{className:"bg-white text-purple-600 text-xs px-1.5 py-0.5 rounded-full border border-current",children:A})]}):c.jsxs(c.Fragment,{children:[c.jsx(Tp,{className:"w-4 h-4"}),"Filter"]})}),a&&c.jsx(C6,{onFilterChange:Ih,onClose:()=>l(!1)})]}),c.jsxs(Tr,{onClick:Yr,className:"flex items-center gap-1.5 whitespace-nowrap",children:[c.jsx(l8,{className:"w-4 h-4"}),"Add Task"]})]})]}),C==="dependencies"&&c.jsx(yS,{}),C==="focus"&&c.jsx(E6,{tasks:r,onBack:()=>xr("list")}),C==="gantt"&&c.jsx(b6,{tasks:Fl}),c.jsx(xS,{isOpen:d,onClose:Is,onAddTask:Wo,taskToEdit:f,makeAuthenticatedRequest:_t,dependencyTaskId:0}),C==="list"&&e.length>0&&r.length>0&&c.jsx(w6,{taskList:r,setTaskList:t,openEditTaskModal:Ol,onTaskUpdate:()=>I(ie=>ie+1),makeAuthenticatedRequest:_t,paginationData:j,onPageChange:Dh}),C==="list"&&e.length===0&&c.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:c.jsx("div",{className:"text-gray-500",children:"No tasks available"})}),C==="list"&&e.length>0&&r.length===0&&c.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[c.jsx("div",{className:"text-gray-500 mb-2",children:"No tasks match your current filters or search query"}),(A>0||y)&&c.jsx(Tr,{onClick:jl,className:"mt-2",children:"Clear All Filters and Search"})]})]}):c.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:c.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:c.jsx("div",{className:"text-gray-500",children:"Please log in to view tasks"})})})}const V6=()=>{const{isAuthenticated:n}=vn();return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-purple-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg overflow-hidden",children:c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("div",{className:"h-16 w-16 bg-[#8929fe] opacity-20 rounded-full flex items-center justify-center",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-[#8929fe]",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})}),c.jsxs("div",{className:"mt-6 text-center",children:[c.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",children:"404"}),c.jsx("p",{className:"text-xl font-semibold text-gray-700 mt-2",children:"Page Not Found"}),c.jsx("p",{className:"mt-3 text-base text-gray-500",children:"The page you're looking for doesn't exist or has been moved."})]}),c.jsx("div",{className:"mt-8 flex justify-center",children:c.jsx(rm,{to:n?"/dashboard":"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-[#8929fe] hover:bg-[#7620e0] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8929fe]",children:n?"Back to Dashboard":"Back to Login"})})]})})})},CS=({message:n="Loading...",size:e="medium"})=>{const t={small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12"};return c.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[c.jsx("div",{className:`animate-spin rounded-full border-t-2 border-b-2 border-[#8929fe] ${t[e]}`}),n&&c.jsx("p",{className:"mt-4 text-gray-600 text-center",children:n})]})},O0=({requiredRole:n})=>{const{isAuthenticated:e,authState:t,isInitialized:r,hasRole:o,error:a,retry:l}=vn();return console.log("ProtectedRoute Check:",{isAuthenticated:e,authState:t,isInitialized:r,requiredRole:n,error:a}),!r||t==="loading"?c.jsx(CS,{message:"Verifying access..."}):a&&t==="error"?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md text-center",children:[c.jsx("div",{className:"text-red-600 text-xl font-semibold mb-4",children:"Authentication Error"}),c.jsx("p",{className:"text-gray-600 mb-6",children:a}),c.jsxs("div",{className:"space-x-3",children:[c.jsx("button",{onClick:l,className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:"Try Again"}),c.jsx("button",{onClick:()=>window.location.href="/login",className:"bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:"Login Again"})]})]})}):e?n&&!o(n)?(console.log(`ProtectedRoute: Access denied for role ${n}`),c.jsx(Rv,{to:"/unauthorized",replace:!0})):(console.log("ProtectedRoute: Access granted"),c.jsx(O_,{})):(console.log("ProtectedRoute: Redirecting to login - not authenticated"),c.jsx(Rv,{to:"/login",replace:!0}))},K6=()=>{var A;const[n,e]=T.useState(!1),[t,r]=T.useState(!1);T.useState([]);const o=T.useRef(null),a=lo(),l=cs(),{user:d,logout:h,getPrimaryRole:f,hasRole:p,isLoading:y}=vn();T.useEffect(()=>{const b=k=>{o.current&&!o.current.contains(k.target)&&e(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const x=()=>{const b=[];return p("admin")&&b.push({label:"User Management",path:"/admin",roles:["admin"]}),p("manager")&&b.push({label:"Manager Dashboard",path:"/manager",roles:["manager","admin"]}),b.filter(k=>k.roles.some(I=>p(I)))},C=async()=>{try{await h()}catch(b){console.error("Logout failed:",b),window.location.href="/login"}},w=b=>{a(b),r(!1),e(!1)},E=()=>{if(!(d!=null&&d.name))return"U";const b=d.name.split(" ");return b.length>=2?`${b[0][0]}${b[b.length-1][0]}`.toUpperCase():d.name.charAt(0).toUpperCase()},S=()=>{switch(f()){case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";default:return"bg-green-100 text-green-800"}};return y?c.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}),c.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded animate-pulse hidden sm:block"})]}),c.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})]})})}):c.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("img",{src:ig,alt:"Quadrant Technologies",className:"w-8 h-8 rounded-full object-cover"}),c.jsx("div",{className:"hidden sm:block",children:c.jsx("p",{className:"text-lg text-gray-900 font-bold",children:"Quadrant Technologies"})})]})}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:()=>r(!t),className:"md:hidden p-2 text-gray-400 hover:text-gray-600",children:t?c.jsx(yn,{className:"w-5 h-5"}):c.jsx(dS,{className:"w-5 h-5"})}),c.jsxs("div",{className:"relative",ref:o,children:[c.jsxs("button",{onClick:()=>e(!n),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx("div",{className:"w-8 h-8 bg-[#8929fe] text-white rounded-full flex items-center justify-center text-sm font-medium",children:E()}),c.jsx("div",{className:"hidden sm:block text-left",children:c.jsx("p",{className:"text-sm font-medium text-gray-900",children:((A=d==null?void 0:d.name)==null?void 0:A.split(" (")[0])||"User"})}),c.jsx(Nl,{className:"w-4 h-4 text-gray-400"})]}),n&&c.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[c.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-[#8929fe] text-white rounded-full flex items-center justify-center font-medium",children:E()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(d==null?void 0:d.name)||"User"}),c.jsx("p",{className:"text-xs text-gray-500 truncate",children:d==null?void 0:d.email}),c.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full mt-1 ${S()}`,children:f()})]})]})}),c.jsx("div",{className:"py-2",children:x().slice(0,4).map(b=>c.jsxs("button",{onClick:()=>w(b.path),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[c.jsx(ks,{className:"w-4 h-4"}),c.jsx("span",{children:b.label})]},b.path))}),c.jsx("div",{className:"border-t border-gray-100 py-2",children:c.jsxs("button",{onClick:C,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[c.jsx(L8,{className:"w-4 h-4"}),c.jsx("span",{children:"Sign Out"})]})})]})]})]})]}),t&&c.jsx("div",{className:"md:hidden border-t border-gray-200 py-4",children:c.jsxs("div",{className:"space-y-2",children:[x().map(b=>c.jsx("button",{onClick:()=>w(b.path),className:`block w-full text-left px-4 py-2 text-sm rounded-lg transition-colors ${l.pathname===b.path?"bg-[#8929fe] text-white":"text-gray-700 hover:bg-gray-50"}`,children:b.label},b.path)),c.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:c.jsx("button",{onClick:C,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:"Sign Out"})})]})})]})})},fg=T.createContext({});function pg(n){const e=T.useRef(null);return e.current===null&&(e.current=n()),e.current}const mg=typeof window<"u",bS=mg?T.useLayoutEffect:T.useEffect,Th=T.createContext(null);function gg(n,e){n.indexOf(e)===-1&&n.push(e)}function xg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const _s=(n,e,t)=>t>e?e:t<n?n:t;let qd=()=>{};const Ns={},ES=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function SS(n){return typeof n=="object"&&n!==null}const kS=n=>/^0[^.\s]+$/u.test(n);function yg(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ar=n=>n,q6=(n,e)=>t=>e(n(t)),Il=(...n)=>n.reduce(q6),ml=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class vg{constructor(){this.subscriptions=[]}add(e){return gg(this.subscriptions,e),()=>xg(this.subscriptions,e)}notify(e,t,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,r);else for(let a=0;a<o;a++){const l=this.subscriptions[a];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const is=n=>n*1e3,as=n=>n/1e3;function TS(n,e){return e?n*(1e3/e):0}const AS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,W6=1e-7,G6=12;function Y6(n,e,t,r,o){let a,l,d=0;do l=e+(t-e)/2,a=AS(l,r,o)-n,a>0?t=l:e=l;while(Math.abs(a)>W6&&++d<G6);return l}function Rl(n,e,t,r){if(n===e&&t===r)return Ar;const o=a=>Y6(a,0,1,n,t);return a=>a===0||a===1?a:AS(o(a),e,r)}const _S=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,NS=n=>e=>1-n(1-e),IS=Rl(.33,1.53,.69,.99),wg=NS(IS),RS=_S(wg),DS=n=>(n*=2)<1?.5*wg(n):.5*(2-Math.pow(2,-10*(n-1))),Cg=n=>1-Math.sin(Math.acos(n)),PS=NS(Cg),jS=_S(Cg),Q6=Rl(.42,0,1,1),J6=Rl(0,0,.58,1),MS=Rl(.42,0,.58,1),X6=n=>Array.isArray(n)&&typeof n[0]!="number",OS=n=>Array.isArray(n)&&typeof n[0]=="number",w1={linear:Ar,easeIn:Q6,easeInOut:MS,easeOut:J6,circIn:Cg,circInOut:jS,circOut:PS,backIn:wg,backInOut:RS,backOut:IS,anticipate:DS},Z6=n=>typeof n=="string",C1=n=>{if(OS(n)){qd(n.length===4);const[e,t,r,o]=n;return Rl(e,t,r,o)}else if(Z6(n))return qd(w1[n]!==void 0),w1[n];return n},ru=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function e3(n,e){let t=new Set,r=new Set,o=!1,a=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(f.schedule(p),n()),p(d)}const f={schedule:(p,y=!1,x=!1)=>{const w=x&&o?t:r;return y&&l.add(p),w.has(p)||w.add(p),p},cancel:p=>{r.delete(p),l.delete(p)},process:p=>{if(d=p,o){a=!0;return}o=!0,[t,r]=[r,t],t.forEach(h),t.clear(),o=!1,a&&(a=!1,f.process(p))}};return f}const t3=40;function FS(n,e){let t=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=ru.reduce((k,I)=>(k[I]=e3(a),k),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:p,update:y,preRender:x,render:C,postRender:w}=l,E=()=>{const k=Ns.useManualTiming?o.timestamp:performance.now();t=!1,Ns.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(k-o.timestamp,t3),1)),o.timestamp=k,o.isProcessing=!0,d.process(o),h.process(o),f.process(o),p.process(o),y.process(o),x.process(o),C.process(o),w.process(o),o.isProcessing=!1,t&&e&&(r=!1,n(E))},S=()=>{t=!0,r=!0,o.isProcessing||n(E)};return{schedule:ru.reduce((k,I)=>{const R=l[I];return k[I]=(D,j=!1,M=!1)=>(t||S(),R.schedule(D,j,M)),k},{}),cancel:k=>{for(let I=0;I<ru.length;I++)l[ru[I]].cancel(k)},state:o,steps:l}}const{schedule:Ut,cancel:io,state:kn,steps:F0}=FS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ar,!0);let Xu;function n3(){Xu=void 0}const nr={now:()=>(Xu===void 0&&nr.set(kn.isProcessing||Ns.useManualTiming?kn.timestamp:performance.now()),Xu),set:n=>{Xu=n,queueMicrotask(n3)}},BS=n=>e=>typeof e=="string"&&e.startsWith(n),bg=BS("--"),r3=BS("var(--"),Eg=n=>r3(n)?s3.test(n.split("/*")[0].trim()):!1,s3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qi={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},gl={...Qi,transform:n=>_s(0,1,n)},su={...Qi,default:1},Ga=n=>Math.round(n*1e5)/1e5,Sg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function o3(n){return n==null}const i3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kg=(n,e)=>t=>!!(typeof t=="string"&&i3.test(t)&&t.startsWith(n)||e&&!o3(t)&&Object.prototype.hasOwnProperty.call(t,e)),LS=(n,e,t)=>r=>{if(typeof r!="string")return r;const[o,a,l,d]=r.match(Sg);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},a3=n=>_s(0,255,n),B0={...Qi,transform:n=>Math.round(a3(n))},Io={test:kg("rgb","red"),parse:LS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+B0.transform(n)+", "+B0.transform(e)+", "+B0.transform(t)+", "+Ga(gl.transform(r))+")"};function l3(n){let e="",t="",r="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Np={test:kg("#"),parse:l3,transform:Io.transform},Dl=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Js=Dl("deg"),ls=Dl("%"),Ye=Dl("px"),c3=Dl("vh"),u3=Dl("vw"),b1={...ls,parse:n=>ls.parse(n)/100,transform:n=>ls.transform(n*100)},wi={test:kg("hsl","hue"),parse:LS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+ls.transform(Ga(e))+", "+ls.transform(Ga(t))+", "+Ga(gl.transform(r))+")"},on={test:n=>Io.test(n)||Np.test(n)||wi.test(n),parse:n=>Io.test(n)?Io.parse(n):wi.test(n)?wi.parse(n):Np.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Io.transform(n):wi.transform(n),getAnimatableNone:n=>{const e=on.parse(n);return e.alpha=0,on.transform(e)}},d3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function h3(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Sg))==null?void 0:e.length)||0)+(((t=n.match(d3))==null?void 0:t.length)||0)>0}const HS="number",US="color",f3="var",p3="var(",E1="${}",m3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xl(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},o=[];let a=0;const d=e.replace(m3,h=>(on.test(h)?(r.color.push(a),o.push(US),t.push(on.parse(h))):h.startsWith(p3)?(r.var.push(a),o.push(f3),t.push(h)):(r.number.push(a),o.push(HS),t.push(parseFloat(h))),++a,E1)).split(E1);return{values:t,split:d,indexes:r,types:o}}function $S(n){return xl(n).values}function zS(n){const{split:e,types:t}=xl(n),r=e.length;return o=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],o[l]!==void 0){const d=t[l];d===HS?a+=Ga(o[l]):d===US?a+=on.transform(o[l]):a+=o[l]}return a}}const g3=n=>typeof n=="number"?0:on.test(n)?on.getAnimatableNone(n):n;function x3(n){const e=$S(n);return zS(n)(e.map(g3))}const ao={test:h3,parse:$S,createTransformer:zS,getAnimatableNone:x3};function L0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function y3({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let o=0,a=0,l=0;if(!e)o=a=l=t;else{const d=t<.5?t*(1+e):t+e-t*e,h=2*t-d;o=L0(h,d,n+1/3),a=L0(h,d,n),l=L0(h,d,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Wd(n,e){return t=>t>0?e:n}const Ht=(n,e,t)=>n+(e-n)*t,H0=(n,e,t)=>{const r=n*n,o=t*(e*e-r)+r;return o<0?0:Math.sqrt(o)},v3=[Np,Io,wi],w3=n=>v3.find(e=>e.test(n));function S1(n){const e=w3(n);if(!e)return!1;let t=e.parse(n);return e===wi&&(t=y3(t)),t}const k1=(n,e)=>{const t=S1(n),r=S1(e);if(!t||!r)return Wd(n,e);const o={...t};return a=>(o.red=H0(t.red,r.red,a),o.green=H0(t.green,r.green,a),o.blue=H0(t.blue,r.blue,a),o.alpha=Ht(t.alpha,r.alpha,a),Io.transform(o))},Ip=new Set(["none","hidden"]);function C3(n,e){return Ip.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function b3(n,e){return t=>Ht(n,e,t)}function Tg(n){return typeof n=="number"?b3:typeof n=="string"?Eg(n)?Wd:on.test(n)?k1:k3:Array.isArray(n)?VS:typeof n=="object"?on.test(n)?k1:E3:Wd}function VS(n,e){const t=[...n],r=t.length,o=n.map((a,l)=>Tg(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)t[l]=o[l](a);return t}}function E3(n,e){const t={...n,...e},r={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(r[o]=Tg(n[o])(n[o],e[o]));return o=>{for(const a in r)t[a]=r[a](o);return t}}function S3(n,e){const t=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],l=n.indexes[a][r[a]],d=n.values[l]??0;t[o]=d,r[a]++}return t}const k3=(n,e)=>{const t=ao.createTransformer(e),r=xl(n),o=xl(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?Ip.has(n)&&!o.values.length||Ip.has(e)&&!r.values.length?C3(n,e):Il(VS(S3(r,o),o.values),t):Wd(n,e)};function KS(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ht(n,e,t):Tg(n)(n,e)}const T3=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Ut.update(e,t),stop:()=>io(e),now:()=>kn.isProcessing?kn.timestamp:nr.now()}},qS=(n,e,t=10)=>{let r="";const o=Math.max(Math.round(e/t),2);for(let a=0;a<o;a++)r+=Math.round(n(a/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gd=2e4;function Ag(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Gd;)e+=t,r=n.next(e);return e>=Gd?1/0:e}function A3(n,e=100,t){const r=t({...n,keyframes:[0,e]}),o=Math.min(Ag(r),Gd);return{type:"keyframes",ease:a=>r.next(o*a).value/e,duration:as(o)}}const _3=5;function WS(n,e,t){const r=Math.max(e-_3,0);return TS(t-n(r),e-r)}const Wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},U0=.001;function N3({duration:n=Wt.duration,bounce:e=Wt.bounce,velocity:t=Wt.velocity,mass:r=Wt.mass}){let o,a,l=1-e;l=_s(Wt.minDamping,Wt.maxDamping,l),n=_s(Wt.minDuration,Wt.maxDuration,as(n)),l<1?(o=f=>{const p=f*l,y=p*n,x=p-t,C=Rp(f,l),w=Math.exp(-y);return U0-x/C*w},a=f=>{const y=f*l*n,x=y*t+t,C=Math.pow(l,2)*Math.pow(f,2)*n,w=Math.exp(-y),E=Rp(Math.pow(f,2),l);return(-o(f)+U0>0?-1:1)*((x-C)*w)/E}):(o=f=>{const p=Math.exp(-f*n),y=(f-t)*n+1;return-U0+p*y},a=f=>{const p=Math.exp(-f*n),y=(t-f)*(n*n);return p*y});const d=5/n,h=R3(o,a,d);if(n=is(n),isNaN(h))return{stiffness:Wt.stiffness,damping:Wt.damping,duration:n};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:n}}}const I3=12;function R3(n,e,t){let r=t;for(let o=1;o<I3;o++)r=r-n(r)/e(r);return r}function Rp(n,e){return n*Math.sqrt(1-e*e)}const D3=["duration","bounce"],P3=["stiffness","damping","mass"];function T1(n,e){return e.some(t=>n[t]!==void 0)}function j3(n){let e={velocity:Wt.velocity,stiffness:Wt.stiffness,damping:Wt.damping,mass:Wt.mass,isResolvedFromDuration:!1,...n};if(!T1(n,P3)&&T1(n,D3))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),o=r*r,a=2*_s(.05,1,1-(n.bounce||0))*Math.sqrt(o);e={...e,mass:Wt.mass,stiffness:o,damping:a}}else{const t=N3(n);e={...e,...t,mass:Wt.mass},e.isResolvedFromDuration=!0}return e}function Yd(n=Wt.visualDuration,e=Wt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:o}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],d={done:!1,value:a},{stiffness:h,damping:f,mass:p,duration:y,velocity:x,isResolvedFromDuration:C}=j3({...t,velocity:-as(t.velocity||0)}),w=x||0,E=f/(2*Math.sqrt(h*p)),S=l-a,A=as(Math.sqrt(h/p)),b=Math.abs(S)<5;r||(r=b?Wt.restSpeed.granular:Wt.restSpeed.default),o||(o=b?Wt.restDelta.granular:Wt.restDelta.default);let k;if(E<1){const R=Rp(A,E);k=D=>{const j=Math.exp(-E*A*D);return l-j*((w+E*A*S)/R*Math.sin(R*D)+S*Math.cos(R*D))}}else if(E===1)k=R=>l-Math.exp(-A*R)*(S+(w+A*S)*R);else{const R=A*Math.sqrt(E*E-1);k=D=>{const j=Math.exp(-E*A*D),M=Math.min(R*D,300);return l-j*((w+E*A*S)*Math.sinh(M)+R*S*Math.cosh(M))/R}}const I={calculatedDuration:C&&y||null,next:R=>{const D=k(R);if(C)d.done=R>=y;else{let j=R===0?w:0;E<1&&(j=R===0?is(w):WS(k,R,D));const M=Math.abs(j)<=r,U=Math.abs(l-D)<=o;d.done=M&&U}return d.value=d.done?l:D,d},toString:()=>{const R=Math.min(Ag(I),Gd),D=qS(j=>I.next(R*j).value,R,30);return R+"ms "+D},toTransition:()=>{}};return I}Yd.applyToOptions=n=>{const e=A3(n,100,Yd);return n.ease=e.ease,n.duration=is(e.duration),n.type="keyframes",n};function Dp({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:h,restDelta:f=.5,restSpeed:p}){const y=n[0],x={done:!1,value:y},C=M=>d!==void 0&&M<d||h!==void 0&&M>h,w=M=>d===void 0?h:h===void 0||Math.abs(d-M)<Math.abs(h-M)?d:h;let E=t*e;const S=y+E,A=l===void 0?S:l(S);A!==S&&(E=A-y);const b=M=>-E*Math.exp(-M/r),k=M=>A+b(M),I=M=>{const U=b(M),P=k(M);x.done=Math.abs(U)<=f,x.value=x.done?A:P};let R,D;const j=M=>{C(x.value)&&(R=M,D=Yd({keyframes:[x.value,w(x.value)],velocity:WS(k,M,x.value),damping:o,stiffness:a,restDelta:f,restSpeed:p}))};return j(0),{calculatedDuration:null,next:M=>{let U=!1;return!D&&R===void 0&&(U=!0,I(M),j(M)),R!==void 0&&M>=R?D.next(M-R):(!U&&I(M),x)}}}function M3(n,e,t){const r=[],o=t||Ns.mix||KS,a=n.length-1;for(let l=0;l<a;l++){let d=o(n[l],n[l+1]);if(e){const h=Array.isArray(e)?e[l]||Ar:e;d=Il(h,d)}r.push(d)}return r}function O3(n,e,{clamp:t=!0,ease:r,mixer:o}={}){const a=n.length;if(qd(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const d=M3(e,r,o),h=d.length,f=p=>{if(l&&p<n[0])return e[0];let y=0;if(h>1)for(;y<n.length-2&&!(p<n[y+1]);y++);const x=ml(n[y],n[y+1],p);return d[y](x)};return t?p=>f(_s(n[0],n[a-1],p)):f}function F3(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const o=ml(0,e,r);n.push(Ht(t,1,o))}}function B3(n){const e=[0];return F3(e,n.length-1),e}function L3(n,e){return n.map(t=>t*e)}function H3(n,e){return n.map(()=>e||MS).splice(0,n.length-1)}function Ya({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const o=X6(r)?r.map(C1):C1(r),a={done:!1,value:e[0]},l=L3(t&&t.length===e.length?t:B3(e),n),d=O3(l,e,{ease:Array.isArray(o)?o:H3(e,o)});return{calculatedDuration:n,next:h=>(a.value=d(h),a.done=h>=n,a)}}const U3=n=>n!==null;function _g(n,{repeat:e,repeatType:t="loop"},r,o=1){const a=n.filter(U3),d=o<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!d||r===void 0?a[d]:r}const $3={decay:Dp,inertia:Dp,tween:Ya,keyframes:Ya,spring:Yd};function GS(n){typeof n.type=="string"&&(n.type=$3[n.type])}class Ng{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const z3=n=>n/100;class Ig extends Ng{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:t}=this.options;t&&t.updatedAt!==nr.now()&&this.tick(nr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;GS(e);const{type:t=Ya,repeat:r=0,repeatDelay:o=0,repeatType:a,velocity:l=0}=e;let{keyframes:d}=e;const h=t||Ya;h!==Ya&&typeof d[0]!="number"&&(this.mixKeyframes=Il(z3,KS(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});a==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=Ag(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:o,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:y,repeatType:x,repeatDelay:C,type:w,onUpdate:E,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const A=this.currentTime-f*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?A<0:A>o;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let k=this.currentTime,I=r;if(y){const M=Math.min(this.currentTime,o)/d;let U=Math.floor(M),P=M%1;!P&&M>=1&&(P=1),P===1&&U--,U=Math.min(U,y+1),!!(U%2)&&(x==="reverse"?(P=1-P,C&&(P-=C/d)):x==="mirror"&&(I=l)),k=_s(0,1,P)*d}const R=b?{done:!1,value:p[0]}:I.next(k);a&&(R.value=a(R.value));let{done:D}=R;!b&&h!==null&&(D=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return j&&w!==Dp&&(R.value=_g(p,this.options,S,this.speed)),E&&E(R.value),j&&this.finish(),R}then(e,t){return this.finished.then(e,t)}get duration(){return as(this.calculatedDuration)}get time(){return as(this.currentTime)}set time(e){var t;e=is(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(nr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=as(this.currentTime))}play(){var o,a;if(this.isStopped)return;const{driver:e=T3,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(a=(o=this.options).onPlay)==null||a.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(nr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function V3(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ro=n=>n*180/Math.PI,Pp=n=>{const e=Ro(Math.atan2(n[1],n[0]));return jp(e)},K3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Pp,rotateZ:Pp,skewX:n=>Ro(Math.atan(n[1])),skewY:n=>Ro(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},jp=n=>(n=n%360,n<0&&(n+=360),n),A1=Pp,_1=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),N1=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),q3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_1,scaleY:N1,scale:n=>(_1(n)+N1(n))/2,rotateX:n=>jp(Ro(Math.atan2(n[6],n[5]))),rotateY:n=>jp(Ro(Math.atan2(-n[2],n[0]))),rotateZ:A1,rotate:A1,skewX:n=>Ro(Math.atan(n[4])),skewY:n=>Ro(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Mp(n){return n.includes("scale")?1:0}function Op(n,e){if(!n||n==="none")return Mp(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(t)r=q3,o=t;else{const d=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=K3,o=d}if(!o)return Mp(e);const a=r[e],l=o[1].split(",").map(G3);return typeof a=="function"?a(l):l[a]}const W3=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Op(t,e)};function G3(n){return parseFloat(n.trim())}const Ji=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xi=new Set(Ji),I1=n=>n===Qi||n===Ye,Y3=new Set(["x","y","z"]),Q3=Ji.filter(n=>!Y3.has(n));function J3(n){const e=[];return Q3.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Oo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Op(e,"x"),y:(n,{transform:e})=>Op(e,"y")};Oo.translateX=Oo.x;Oo.translateY=Oo.y;const Fo=new Set;let Fp=!1,Bp=!1,Lp=!1;function YS(){if(Bp){const n=Array.from(Fo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const o=J3(r);o.length&&(t.set(r,o),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const o=t.get(r);o&&o.forEach(([a,l])=>{var d;(d=r.getValue(a))==null||d.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Bp=!1,Fp=!1,Fo.forEach(n=>n.complete(Lp)),Fo.clear()}function QS(){Fo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Bp=!0)})}function X3(){Lp=!0,QS(),YS(),Lp=!1}class Rg{constructor(e,t,r,o,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=o,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Fo.add(this),Fp||(Fp=!0,Ut.read(QS),Ut.resolveKeyframes(YS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:o}=this;if(e[0]===null){const a=o==null?void 0:o.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const d=r.readValue(t,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),o&&a===void 0&&o.set(e[0])}V3(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fo.delete(this)}cancel(){this.state==="scheduled"&&(Fo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z3=n=>n.startsWith("--");function eM(n,e,t){Z3(e)?n.style.setProperty(e,t):n.style[e]=t}const tM=yg(()=>window.ScrollTimeline!==void 0),nM={};function rM(n,e){const t=yg(n);return()=>nM[e]??t()}const JS=rM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$a=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,R1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$a([0,.65,.55,1]),circOut:$a([.55,0,1,.45]),backIn:$a([.31,.01,.66,-.59]),backOut:$a([.33,1.53,.69,.99])};function XS(n,e){if(n)return typeof n=="function"?JS()?qS(n,e):"ease-out":OS(n)?$a(n):Array.isArray(n)?n.map(t=>XS(t,e)||R1.easeOut):R1[n]}function sM(n,e,t,{delay:r=0,duration:o=300,repeat:a=0,repeatType:l="loop",ease:d="easeOut",times:h}={},f=void 0){const p={[e]:t};h&&(p.offset=h);const y=XS(d,o);Array.isArray(y)&&(p.easing=y);const x={delay:r,duration:o,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),n.animate(p,x)}function ZS(n){return typeof n=="function"&&"applyToOptions"in n}function oM({type:n,...e}){return ZS(n)&&JS()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class iM extends Ng{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:o,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,qd(typeof e.type!="string");const f=oM(e);this.animation=sM(t,r,o,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=_g(o,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(p):eM(t,r,p),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return as(Number(e))}get time(){return as(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=is(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&tM()?(this.animation.timeline=e,Ar):t(this)}}const ek={anticipate:DS,backInOut:RS,circInOut:jS};function aM(n){return n in ek}function lM(n){typeof n.ease=="string"&&aM(n.ease)&&(n.ease=ek[n.ease])}const D1=10;class cM extends iM{constructor(e){lM(e),GS(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:o,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const d=new Ig({...l,autoplay:!1}),h=is(this.finishedTime??this.time);t.setWithVelocity(d.sample(h-D1).value,d.sample(h).value,D1),d.stop()}}const P1=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ao.test(n)||n==="0")&&!n.startsWith("url("));function uM(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function dM(n,e,t,r){const o=n[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=P1(o,e),d=P1(a,e);return!l||!d?!1:uM(n)||(t==="spring"||ZS(t))&&r}function Dg(n){return SS(n)&&"offsetHeight"in n}const hM=new Set(["opacity","clipPath","filter","transform"]),fM=yg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function pM(n){var f;const{motionValue:e,name:t,repeatDelay:r,repeatType:o,damping:a,type:l}=n;if(!Dg((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return fM()&&t&&hM.has(t)&&(t!=="transform"||!h)&&!d&&!r&&o!=="mirror"&&a!==0&&l!=="inertia"}const mM=40;class gM extends Ng{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",keyframes:d,name:h,motionValue:f,element:p,...y}){var w;super(),this.stop=()=>{var E,S;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=nr.now();const x={autoplay:e,delay:t,type:r,repeat:o,repeatDelay:a,repeatType:l,name:h,motionValue:f,element:p,...y},C=(p==null?void 0:p.KeyframeResolver)||Rg;this.keyframeResolver=new C(d,(E,S,A)=>this.onKeyframesResolved(E,S,x,!A),h,f,p),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,t,r,o){this.keyframeResolver=void 0;const{name:a,type:l,velocity:d,delay:h,isHandoff:f,onUpdate:p}=r;this.resolvedAt=nr.now(),dM(e,a,l,d)||((Ns.instantAnimations||!h)&&(p==null||p(_g(e,r,t))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>mM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},C=!f&&pM(x)?new cM({...x,element:x.motionValue.owner.current}):new Ig(x);C.finished.then(()=>this.notifyFinished()).catch(Ar),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),X3()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const xM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yM(n){const e=xM.exec(n);if(!e)return[,];const[,t,r,o]=e;return[`--${t??r}`,o]}function tk(n,e,t=1){const[r,o]=yM(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return ES(l)?parseFloat(l):l}return Eg(o)?tk(o,e,t+1):o}function Pg(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const nk=new Set(["width","height","top","left","right","bottom",...Ji]),vM={test:n=>n==="auto",parse:n=>n},rk=n=>e=>e.test(n),sk=[Qi,Ye,ls,Js,u3,c3,vM],j1=n=>sk.find(rk(n));function wM(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||kS(n):!0}const CM=new Set(["brightness","contrast","saturate","opacity"]);function bM(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Sg)||[];if(!r)return n;const o=t.replace(r,"");let a=CM.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+o+")"}const EM=/\b([a-z-]*)\(.*?\)/gu,Hp={...ao,getAnimatableNone:n=>{const e=n.match(EM);return e?e.map(bM).join(" "):n}},M1={...Qi,transform:Math.round},SM={rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:su,scaleX:su,scaleY:su,scaleZ:su,skew:Js,skewX:Js,skewY:Js,distance:Ye,translateX:Ye,translateY:Ye,translateZ:Ye,x:Ye,y:Ye,z:Ye,perspective:Ye,transformPerspective:Ye,opacity:gl,originX:b1,originY:b1,originZ:Ye},jg={borderWidth:Ye,borderTopWidth:Ye,borderRightWidth:Ye,borderBottomWidth:Ye,borderLeftWidth:Ye,borderRadius:Ye,radius:Ye,borderTopLeftRadius:Ye,borderTopRightRadius:Ye,borderBottomRightRadius:Ye,borderBottomLeftRadius:Ye,width:Ye,maxWidth:Ye,height:Ye,maxHeight:Ye,top:Ye,right:Ye,bottom:Ye,left:Ye,padding:Ye,paddingTop:Ye,paddingRight:Ye,paddingBottom:Ye,paddingLeft:Ye,margin:Ye,marginTop:Ye,marginRight:Ye,marginBottom:Ye,marginLeft:Ye,backgroundPositionX:Ye,backgroundPositionY:Ye,...SM,zIndex:M1,fillOpacity:gl,strokeOpacity:gl,numOctaves:M1},kM={...jg,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:Hp,WebkitFilter:Hp},ok=n=>kM[n];function ik(n,e){let t=ok(n);return t!==Hp&&(t=ao),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const TM=new Set(["auto","none","0"]);function AM(n,e,t){let r=0,o;for(;r<n.length&&!o;){const a=n[r];typeof a=="string"&&!TM.has(a)&&xl(a).values.length&&(o=n[r]),r++}if(o&&t)for(const a of e)n[a]=ik(t,o)}class _M extends Rg{constructor(e,t,r,o,a){super(e,t,r,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),Eg(f))){const p=tk(f,t.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!nk.has(r)||e.length!==2)return;const[o,a]=e,l=j1(o),d=j1(a);if(l!==d)if(I1(l)&&I1(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else Oo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let o=0;o<e.length;o++)(e[o]===null||wM(e[o]))&&r.push(o);r.length&&AM(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Oo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const o=t[t.length-1];o!==void 0&&e.getValue(r,o).jump(o,!1)}measureEndState(){var d;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const o=e.getValue(t);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=Oo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function NM(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const o=document.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}const ak=(n,e)=>e&&typeof n=="number"?e.transform(n):n,O1=30,IM=n=>!isNaN(parseFloat(n));class RM{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var l,d;const a=nr.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty();o&&((d=this.events.renderRequest)==null||d.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=nr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new vg);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ut.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>O1)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,O1);return TS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fi(n,e){return new RM(n,e)}const{schedule:Mg,cancel:FF}=FS(queueMicrotask,!1),Mr={x:!1,y:!1};function lk(){return Mr.x||Mr.y}function DM(n){return n==="x"||n==="y"?Mr[n]?null:(Mr[n]=!0,()=>{Mr[n]=!1}):Mr.x||Mr.y?null:(Mr.x=Mr.y=!0,()=>{Mr.x=Mr.y=!1})}function ck(n,e){const t=NM(n),r=new AbortController,o={passive:!0,...e,signal:r.signal};return[t,o,()=>r.abort()]}function F1(n){return!(n.pointerType==="touch"||lk())}function PM(n,e,t={}){const[r,o,a]=ck(n,t),l=d=>{if(!F1(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const p=y=>{F1(y)&&(f(y),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,o)};return r.forEach(d=>{d.addEventListener("pointerenter",l,o)}),a}const uk=(n,e)=>e?n===e?!0:uk(n,e.parentElement):!1,Og=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,jM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function MM(n){return jM.has(n.tagName)||n.tabIndex!==-1}const Zu=new WeakSet;function B1(n){return e=>{e.key==="Enter"&&n(e)}}function $0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const OM=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=B1(()=>{if(Zu.has(t))return;$0(t,"down");const o=B1(()=>{$0(t,"up")}),a=()=>$0(t,"cancel");t.addEventListener("keyup",o,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function L1(n){return Og(n)&&!lk()}function FM(n,e,t={}){const[r,o,a]=ck(n,t),l=d=>{const h=d.currentTarget;if(!L1(d))return;Zu.add(h);const f=e(h,d),p=(C,w)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),Zu.has(h)&&Zu.delete(h),L1(C)&&typeof f=="function"&&f(C,{success:w})},y=C=>{p(C,h===window||h===document||t.useGlobalTarget||uk(h,C.target))},x=C=>{p(C,!1)};window.addEventListener("pointerup",y,o),window.addEventListener("pointercancel",x,o)};return r.forEach(d=>{(t.useGlobalTarget?window:d).addEventListener("pointerdown",l,o),Dg(d)&&(d.addEventListener("focus",f=>OM(f,o)),!MM(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),a}function dk(n){return SS(n)&&"ownerSVGElement"in n}function BM(n){return dk(n)&&n.tagName==="svg"}const Bn=n=>!!(n&&n.getVelocity),LM=[...sk,on,ao],HM=n=>LM.find(rk(n)),Fg=T.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class UM extends T.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,o=Dg(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=o-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $M({children:n,isPresent:e,anchorX:t}){const r=T.useId(),o=T.useRef(null),a=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=T.useContext(Fg);return T.useInsertionEffect(()=>{const{width:d,height:h,top:f,left:p,right:y}=a.current;if(e||!o.current||!d||!h)return;const x=t==="left"?`left: ${p}`:`right: ${y}`;o.current.dataset.motionPopId=r;const C=document.createElement("style");return l&&(C.nonce=l),document.head.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(C)&&document.head.removeChild(C)}},[e]),c.jsx(UM,{isPresent:e,childRef:o,sizeRef:a,children:T.cloneElement(n,{ref:o})})}const zM=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:l,anchorX:d})=>{const h=pg(VM),f=T.useId();let p=!0,y=T.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:t,custom:o,onExitComplete:x=>{h.set(x,!0);for(const C of h.values())if(!C)return;r&&r()},register:x=>(h.set(x,!1),()=>h.delete(x))}),[t,h,r]);return a&&p&&(y={...y}),T.useMemo(()=>{h.forEach((x,C)=>h.set(C,!1))},[t]),T.useEffect(()=>{!t&&!h.size&&r&&r()},[t]),l==="popLayout"&&(n=c.jsx($M,{isPresent:t,anchorX:d,children:n})),c.jsx(Th.Provider,{value:y,children:n})};function VM(){return new Map}function hk(n=!0){const e=T.useContext(Th);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:o}=e,a=T.useId();T.useEffect(()=>{if(n)return o(a)},[n]);const l=T.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,l]:[!0]}const ou=n=>n.key||"";function H1(n){const e=[];return T.Children.forEach(n,t=>{T.isValidElement(t)&&e.push(t)}),e}const Qa=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:a="sync",propagate:l=!1,anchorX:d="left"})=>{const[h,f]=hk(l),p=T.useMemo(()=>H1(n),[n]),y=l&&!h?[]:p.map(ou),x=T.useRef(!0),C=T.useRef(p),w=pg(()=>new Map),[E,S]=T.useState(p),[A,b]=T.useState(p);bS(()=>{x.current=!1,C.current=p;for(let R=0;R<A.length;R++){const D=ou(A[R]);y.includes(D)?w.delete(D):w.get(D)!==!0&&w.set(D,!1)}},[A,y.length,y.join("-")]);const k=[];if(p!==E){let R=[...p];for(let D=0;D<A.length;D++){const j=A[D],M=ou(j);y.includes(M)||(R.splice(D,0,j),k.push(j))}return a==="wait"&&k.length&&(R=k),b(H1(R)),S(p),null}const{forceRender:I}=T.useContext(fg);return c.jsx(c.Fragment,{children:A.map(R=>{const D=ou(R),j=l&&!h?!1:p===A||y.includes(D),M=()=>{if(w.has(D))w.set(D,!0);else return;let U=!0;w.forEach(P=>{P||(U=!1)}),U&&(I==null||I(),b(C.current),l&&(f==null||f()),r&&r())};return c.jsx(zM,{isPresent:j,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:o,mode:a,onExitComplete:j?void 0:M,anchorX:d,children:R},D)})})},fk=T.createContext({strict:!1}),U1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bi={};for(const n in U1)Bi[n]={isEnabled:e=>U1[n].some(t=>!!e[t])};function KM(n){for(const e in n)Bi[e]={...Bi[e],...n[e]}}const qM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qd(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||qM.has(n)}let pk=n=>!Qd(n);function WM(n){typeof n=="function"&&(pk=e=>e.startsWith("on")?!Qd(e):n(e))}try{WM(require("@emotion/is-prop-valid").default)}catch{}function GM(n,e,t){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(pk(o)||t===!0&&Qd(o)||!e&&!Qd(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}function YM(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,o)=>o==="create"?n:(e.has(o)||e.set(o,n(o)),e.get(o))})}const Ah=T.createContext({});function _h(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function yl(n){return typeof n=="string"||Array.isArray(n)}const Bg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lg=["initial",...Bg];function Nh(n){return _h(n.animate)||Lg.some(e=>yl(n[e]))}function mk(n){return!!(Nh(n)||n.variants)}function QM(n,e){if(Nh(n)){const{initial:t,animate:r}=n;return{initial:t===!1||yl(t)?t:void 0,animate:yl(r)?r:void 0}}return n.inherit!==!1?e:{}}function JM(n){const{initial:e,animate:t}=QM(n,T.useContext(Ah));return T.useMemo(()=>({initial:e,animate:t}),[$1(e),$1(t)])}function $1(n){return Array.isArray(n)?n.join(" "):n}const XM=Symbol.for("motionComponentSymbol");function Ci(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function ZM(n,e,t){return T.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ci(t)&&(t.current=r))},[e])}const Hg=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eO="framerAppearId",gk="data-"+Hg(eO),xk=T.createContext({});function tO(n,e,t,r,o){var E,S;const{visualElement:a}=T.useContext(Ah),l=T.useContext(fk),d=T.useContext(Th),h=T.useContext(Fg).reducedMotion,f=T.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:a,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,y=T.useContext(xk);p&&!p.projection&&o&&(p.type==="html"||p.type==="svg")&&nO(f.current,t,o,y);const x=T.useRef(!1);T.useInsertionEffect(()=>{p&&x.current&&p.update(t,d)});const C=t[gk],w=T.useRef(!!C&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,C))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,C)));return bS(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Mg.render(p.render),w.current&&p.animationState&&p.animationState.animateChanges())}),T.useEffect(()=>{p&&(!w.current&&p.animationState&&p.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)==null||A.call(window,C)}),w.current=!1))}),p}function nO(n,e,t,r){const{layoutId:o,layout:a,drag:l,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:yk(n.parent)),n.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!l||d&&Ci(d),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:h,layoutRoot:f})}function yk(n){if(n)return n.options.allowProjection!==!1?n.projection:yk(n.parent)}function rO({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:o}){n&&KM(n);function a(d,h){let f;const p={...T.useContext(Fg),...d,layoutId:sO(d)},{isStatic:y}=p,x=JM(d),C=r(d,y);if(!y&&mg){oO();const w=iO(p);f=w.MeasureLayout,x.visualElement=tO(o,C,p,e,w.ProjectionNode)}return c.jsxs(Ah.Provider,{value:x,children:[f&&x.visualElement?c.jsx(f,{visualElement:x.visualElement,...p}):null,t(o,d,ZM(C,x.visualElement,h),C,y,x.visualElement)]})}a.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const l=T.forwardRef(a);return l[XM]=o,l}function sO({layoutId:n}){const e=T.useContext(fg).id;return e&&n!==void 0?e+"-"+n:n}function oO(n,e){T.useContext(fk).strict}function iO(n){const{drag:e,layout:t}=Bi;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const vl={};function aO(n){for(const e in n)vl[e]=n[e],bg(e)&&(vl[e].isCSSVariable=!0)}function vk(n,{layout:e,layoutId:t}){return Xi.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!vl[n]||n==="opacity")}const lO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cO=Ji.length;function uO(n,e,t){let r="",o=!0;for(let a=0;a<cO;a++){const l=Ji[a],d=n[l];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(l.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||t){const f=ak(d,jg[l]);if(!h){o=!1;const p=lO[l]||l;r+=`${p}(${f}) `}t&&(e[l]=f)}}return r=r.trim(),t?r=t(e,o?"":r):o&&(r="none"),r}function Ug(n,e,t){const{style:r,vars:o,transformOrigin:a}=n;let l=!1,d=!1;for(const h in e){const f=e[h];if(Xi.has(h)){l=!0;continue}else if(bg(h)){o[h]=f;continue}else{const p=ak(f,jg[h]);h.startsWith("origin")?(d=!0,a[h]=p):r[h]=p}}if(e.transform||(l||t?r.transform=uO(e,n.transform,t):r.transform&&(r.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:p=0}=a;r.transformOrigin=`${h} ${f} ${p}`}}const $g=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wk(n,e,t){for(const r in e)!Bn(e[r])&&!vk(r,t)&&(n[r]=e[r])}function dO({transformTemplate:n},e){return T.useMemo(()=>{const t=$g();return Ug(t,e,n),Object.assign({},t.vars,t.style)},[e])}function hO(n,e){const t=n.style||{},r={};return wk(r,t,n),Object.assign(r,dO(n,e)),r}function fO(n,e){const t={},r=hO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const pO={offset:"stroke-dashoffset",array:"stroke-dasharray"},mO={offset:"strokeDashoffset",array:"strokeDasharray"};function gO(n,e,t=1,r=0,o=!0){n.pathLength=1;const a=o?pO:mO;n[a.offset]=Ye.transform(-r);const l=Ye.transform(e),d=Ye.transform(t);n[a.array]=`${l} ${d}`}function Ck(n,{attrX:e,attrY:t,attrScale:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...d},h,f,p){if(Ug(n,d,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),o!==void 0&&gO(y,o,a,l,!1)}const bk=()=>({...$g(),attrs:{}}),Ek=n=>typeof n=="string"&&n.toLowerCase()==="svg";function xO(n,e,t,r){const o=T.useMemo(()=>{const a=bk();return Ck(a,e,Ek(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};wk(a,n.style,n),o.style={...a,...o.style}}return o}const yO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zg(n){return typeof n!="string"||n.includes("-")?!1:!!(yO.indexOf(n)>-1||/[A-Z]/u.test(n))}function vO(n=!1){return(t,r,o,{latestValues:a},l)=>{const h=(zg(t)?xO:fO)(r,a,l,t),f=GM(r,typeof t=="string",n),p=t!==T.Fragment?{...f,...h,ref:o}:{},{children:y}=r,x=T.useMemo(()=>Bn(y)?y.get():y,[y]);return T.createElement(t,{...p,children:x})}}function z1(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Vg(n,e,t,r){if(typeof e=="function"){const[o,a]=z1(r);e=e(t!==void 0?t:n.custom,o,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[o,a]=z1(r);e=e(t!==void 0?t:n.custom,o,a)}return e}function ed(n){return Bn(n)?n.get():n}function wO({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,o){return{latestValues:CO(t,r,o,n),renderState:e()}}const Sk=n=>(e,t)=>{const r=T.useContext(Ah),o=T.useContext(Th),a=()=>wO(n,e,r,o);return t?a():pg(a)};function CO(n,e,t,r){const o={},a=r(n,{});for(const x in a)o[x]=ed(a[x]);let{initial:l,animate:d}=n;const h=Nh(n),f=mk(n);e&&f&&!h&&n.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let p=t?t.initial===!1:!1;p=p||l===!1;const y=p?d:l;if(y&&typeof y!="boolean"&&!_h(y)){const x=Array.isArray(y)?y:[y];for(let C=0;C<x.length;C++){const w=Vg(n,x[C]);if(w){const{transitionEnd:E,transition:S,...A}=w;for(const b in A){let k=A[b];if(Array.isArray(k)){const I=p?k.length-1:0;k=k[I]}k!==null&&(o[b]=k)}for(const b in E)o[b]=E[b]}}}return o}function Kg(n,e,t){var a;const{style:r}=n,o={};for(const l in r)(Bn(r[l])||e.style&&Bn(e.style[l])||vk(l,n)||((a=t==null?void 0:t.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(o[l]=r[l]);return o}const bO={useVisualState:Sk({scrapeMotionValuesFromProps:Kg,createRenderState:$g})};function kk(n,e,t){const r=Kg(n,e,t);for(const o in n)if(Bn(n[o])||Bn(e[o])){const a=Ji.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[a]=n[o]}return r}const EO={useVisualState:Sk({scrapeMotionValuesFromProps:kk,createRenderState:bk})};function SO(n,e){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const l={...zg(r)?EO:bO,preloadedFeatures:n,useRender:vO(o),createVisualElement:e,Component:r};return rO(l)}}function wl(n,e,t){const r=n.getProps();return Vg(r,e,t!==void 0?t:r.custom,n)}const Up=n=>Array.isArray(n);function kO(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Fi(t))}function TO(n){return Up(n)?n[n.length-1]||0:n}function AO(n,e){const t=wl(n,e);let{transitionEnd:r={},transition:o={},...a}=t||{};a={...a,...r};for(const l in a){const d=TO(a[l]);kO(n,l,d)}}function _O(n){return!!(Bn(n)&&n.add)}function $p(n,e){const t=n.getValue("willChange");if(_O(t))return t.add(e);if(!t&&Ns.WillChange){const r=new Ns.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function Tk(n){return n.props[gk]}const NO=n=>n!==null;function IO(n,{repeat:e,repeatType:t="loop"},r){const o=n.filter(NO),a=e&&t!=="loop"&&e%2===1?0:o.length-1;return o[a]}const RO={type:"spring",stiffness:500,damping:25,restSpeed:10},DO=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),PO={type:"keyframes",duration:.8},jO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MO=(n,{keyframes:e})=>e.length>2?PO:Xi.has(n)?n.startsWith("scale")?DO(e[1]):RO:jO;function OO({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:l,repeatDelay:d,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const qg=(n,e,t,r={},o,a)=>l=>{const d=Pg(r,n)||{},h=d.delay||r.delay||0;let{elapsed:f=0}=r;f=f-is(h);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:n,motionValue:e,element:a?void 0:o};OO(d)||Object.assign(p,MO(n,p)),p.duration&&(p.duration=is(p.duration)),p.repeatDelay&&(p.repeatDelay=is(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(y=!0)),(Ns.instantAnimations||Ns.skipAnimations)&&(y=!0,p.duration=0,p.delay=0),p.allowFlatten=!d.type&&!d.ease,y&&!a&&e.get()!==void 0){const x=IO(p.keyframes,d);if(x!==void 0){Ut.update(()=>{p.onUpdate(x),p.onComplete()});return}}return d.isSync?new Ig(p):new gM(p)};function FO({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Ak(n,e,{delay:t=0,transitionOverride:r,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...d}=e;r&&(a=r);const h=[],f=o&&n.animationState&&n.animationState.getState()[o];for(const p in d){const y=n.getValue(p,n.latestValues[p]??null),x=d[p];if(x===void 0||f&&FO(f,p))continue;const C={delay:t,...Pg(a||{},p)},w=y.get();if(w!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===w&&!C.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const A=Tk(n);if(A){const b=window.MotionHandoffAnimation(A,p,Ut);b!==null&&(C.startTime=b,E=!0)}}$p(n,p),y.start(qg(p,y,x,n.shouldReduceMotion&&nk.has(p)?{type:!1}:C,n,E));const S=y.animation;S&&h.push(S)}return l&&Promise.all(h).then(()=>{Ut.update(()=>{l&&AO(n,l)})}),h}function zp(n,e,t={}){var h;const r=wl(n,e,t.type==="exit"?(h=n.presenceContext)==null?void 0:h.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(Ak(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:x}=o;return BO(n,e,p+f,y,x,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,p]=d==="beforeChildren"?[a,l]:[l,a];return f().then(()=>p())}else return Promise.all([a(),l(t.delay)])}function BO(n,e,t=0,r=0,o=1,a){const l=[],d=(n.variantChildren.size-1)*r,h=o===1?(f=0)=>f*r:(f=0)=>d-f*r;return Array.from(n.variantChildren).sort(LO).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(zp(f,e,{...a,delay:t+h(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function LO(n,e){return n.sortNodePosition(e)}function HO(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(a=>zp(n,a,t));r=Promise.all(o)}else if(typeof e=="string")r=zp(n,e,t);else{const o=typeof e=="function"?wl(n,e,t.custom):e;r=Promise.all(Ak(n,o,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function _k(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const UO=Lg.length;function Nk(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Nk(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<UO;t++){const r=Lg[t],o=n.props[r];(yl(o)||o===!1)&&(e[r]=o)}return e}const $O=[...Bg].reverse(),zO=Bg.length;function VO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>HO(n,t,r)))}function KO(n){let e=VO(n),t=V1(),r=!0;const o=h=>(f,p)=>{var x;const y=wl(n,p,h==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:C,transitionEnd:w,...E}=y;f={...f,...E,...w}}return f};function a(h){e=h(n)}function l(h){const{props:f}=n,p=Nk(n.parent)||{},y=[],x=new Set;let C={},w=1/0;for(let S=0;S<zO;S++){const A=$O[S],b=t[A],k=f[A]!==void 0?f[A]:p[A],I=yl(k),R=A===h?b.isActive:null;R===!1&&(w=S);let D=k===p[A]&&k!==f[A]&&I;if(D&&r&&n.manuallyAnimateOnMount&&(D=!1),b.protectedKeys={...C},!b.isActive&&R===null||!k&&!b.prevProp||_h(k)||typeof k=="boolean")continue;const j=qO(b.prevProp,k);let M=j||A===h&&b.isActive&&!D&&I||S>w&&I,U=!1;const P=Array.isArray(k)?k:[k];let L=P.reduce(o(A),{});R===!1&&(L={});const{prevResolvedValues:$={}}=b,z={...$,...L},ne=K=>{M=!0,x.has(K)&&(U=!0,x.delete(K)),b.needsAnimating[K]=!0;const B=n.getValue(K);B&&(B.liveStyle=!1)};for(const K in z){const B=L[K],Q=$[K];if(C.hasOwnProperty(K))continue;let ee=!1;Up(B)&&Up(Q)?ee=!_k(B,Q):ee=B!==Q,ee?B!=null?ne(K):x.add(K):B!==void 0&&x.has(K)?ne(K):b.protectedKeys[K]=!0}b.prevProp=k,b.prevResolvedValues=L,b.isActive&&(C={...C,...L}),r&&n.blockInitialAnimation&&(M=!1),M&&(!(D&&j)||U)&&y.push(...P.map(K=>({animation:K,options:{type:A}})))}if(x.size){const S={};if(typeof f.initial!="boolean"){const A=wl(n,Array.isArray(f.initial)?f.initial[0]:f.initial);A&&A.transition&&(S.transition=A.transition)}x.forEach(A=>{const b=n.getBaseTarget(A),k=n.getValue(A);k&&(k.liveStyle=!0),S[A]=b??null}),y.push({animation:S})}let E=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(y):Promise.resolve()}function d(h,f){var y;if(t[h].isActive===f)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(x=>{var C;return(C=x.animationState)==null?void 0:C.setActive(h,f)}),t[h].isActive=f;const p=l(h);for(const x in t)t[x].protectedKeys={};return p}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>t,reset:()=>{t=V1(),r=!0}}}function qO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!_k(e,n):!1}function So(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function V1(){return{animate:So(!0),whileInView:So(),whileHover:So(),whileTap:So(),whileDrag:So(),whileFocus:So(),exit:So()}}class uo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class WO extends uo{constructor(e){super(e),e.animationState||(e.animationState=KO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_h(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let GO=0;class YO extends uo{constructor(){super(...arguments),this.id=GO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e);t&&!e&&o.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const QO={animation:{Feature:WO},exit:{Feature:YO}};function Cl(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Pl(n){return{point:{x:n.pageX,y:n.pageY}}}const JO=n=>e=>Og(e)&&n(e,Pl(e));function Ja(n,e,t,r){return Cl(n,e,JO(t),r)}function Ik({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function XO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function ZO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const Rk=1e-4,e5=1-Rk,t5=1+Rk,Dk=.01,n5=0-Dk,r5=0+Dk;function qn(n){return n.max-n.min}function s5(n,e,t){return Math.abs(n-e)<=t}function K1(n,e,t,r=.5){n.origin=r,n.originPoint=Ht(e.min,e.max,n.origin),n.scale=qn(t)/qn(e),n.translate=Ht(t.min,t.max,n.origin)-n.originPoint,(n.scale>=e5&&n.scale<=t5||isNaN(n.scale))&&(n.scale=1),(n.translate>=n5&&n.translate<=r5||isNaN(n.translate))&&(n.translate=0)}function Xa(n,e,t,r){K1(n.x,e.x,t.x,r?r.originX:void 0),K1(n.y,e.y,t.y,r?r.originY:void 0)}function q1(n,e,t){n.min=t.min+e.min,n.max=n.min+qn(e)}function o5(n,e,t){q1(n.x,e.x,t.x),q1(n.y,e.y,t.y)}function W1(n,e,t){n.min=e.min-t.min,n.max=n.min+qn(e)}function Za(n,e,t){W1(n.x,e.x,t.x),W1(n.y,e.y,t.y)}const G1=()=>({translate:0,scale:1,origin:0,originPoint:0}),bi=()=>({x:G1(),y:G1()}),Y1=()=>({min:0,max:0}),Qt=()=>({x:Y1(),y:Y1()});function kr(n){return[n("x"),n("y")]}function z0(n){return n===void 0||n===1}function Vp({scale:n,scaleX:e,scaleY:t}){return!z0(n)||!z0(e)||!z0(t)}function To(n){return Vp(n)||Pk(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Pk(n){return Q1(n.x)||Q1(n.y)}function Q1(n){return n&&n!=="0%"}function Jd(n,e,t){const r=n-t,o=e*r;return t+o}function J1(n,e,t,r,o){return o!==void 0&&(n=Jd(n,o,r)),Jd(n,t,r)+e}function Kp(n,e=0,t=1,r,o){n.min=J1(n.min,e,t,r,o),n.max=J1(n.max,e,t,r,o)}function jk(n,{x:e,y:t}){Kp(n.x,e.translate,e.scale,e.originPoint),Kp(n.y,t.translate,t.scale,t.originPoint)}const X1=.999999999999,Z1=1.0000000000001;function i5(n,e,t,r=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,l;for(let d=0;d<o;d++){a=t[d],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Si(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,jk(n,l)),r&&To(a.latestValues)&&Si(n,a.latestValues))}e.x<Z1&&e.x>X1&&(e.x=1),e.y<Z1&&e.y>X1&&(e.y=1)}function Ei(n,e){n.min=n.min+e,n.max=n.max+e}function eC(n,e,t,r,o=.5){const a=Ht(n.min,n.max,o);Kp(n,e,t,a,r)}function Si(n,e){eC(n.x,e.x,e.scaleX,e.scale,e.originX),eC(n.y,e.y,e.scaleY,e.scale,e.originY)}function Mk(n,e){return Ik(ZO(n.getBoundingClientRect(),e))}function a5(n,e,t){const r=Mk(n,t),{scroll:o}=e;return o&&(Ei(r.x,o.offset.x),Ei(r.y,o.offset.y)),r}const Ok=({current:n})=>n?n.ownerDocument.defaultView:null,tC=(n,e)=>Math.abs(n-e);function l5(n,e){const t=tC(n.x,e.x),r=tC(n.y,e.y);return Math.sqrt(t**2+r**2)}class Fk{constructor(e,t,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=K0(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,C=l5(y.offset,{x:0,y:0})>=3;if(!x&&!C)return;const{point:w}=y,{timestamp:E}=kn;this.history.push({...w,timestamp:E});const{onStart:S,onMove:A}=this.handlers;x||(S&&S(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=V0(x,this.transformPagePoint),Ut.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:C,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=K0(y.type==="pointercancel"?this.lastMoveEventInfo:V0(x,this.transformPagePoint),this.history);this.startEvent&&C&&C(y,S),w&&w(y,S)},!Og(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=o||window;const l=Pl(e),d=V0(l,this.transformPagePoint),{point:h}=d,{timestamp:f}=kn;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=t;p&&p(e,K0(d,this.history)),this.removeListeners=Il(Ja(this.contextWindow,"pointermove",this.handlePointerMove),Ja(this.contextWindow,"pointerup",this.handlePointerUp),Ja(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function V0(n,e){return e?{point:e(n.point)}:n}function nC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function K0({point:n},e){return{point:n,delta:nC(n,Bk(e)),offset:nC(n,c5(e)),velocity:u5(e,.1)}}function c5(n){return n[0]}function Bk(n){return n[n.length-1]}function u5(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const o=Bk(n);for(;t>=0&&(r=n[t],!(o.timestamp-r.timestamp>is(e)));)t--;if(!r)return{x:0,y:0};const a=as(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function d5(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Ht(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Ht(t,n,r.max):Math.min(n,t)),n}function rC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function h5(n,{top:e,left:t,bottom:r,right:o}){return{x:rC(n.x,t,o),y:rC(n.y,e,r)}}function sC(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function f5(n,e){return{x:sC(n.x,e.x),y:sC(n.y,e.y)}}function p5(n,e){let t=.5;const r=qn(n),o=qn(e);return o>r?t=ml(e.min,e.max-r,n.min):r>o&&(t=ml(n.min,n.max-o,e.min)),_s(0,1,t)}function m5(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const qp=.35;function g5(n=qp){return n===!1?n=0:n===!0&&(n=qp),{x:oC(n,"left","right"),y:oC(n,"top","bottom")}}function oC(n,e,t){return{min:iC(n,e),max:iC(n,t)}}function iC(n,e){return typeof n=="number"?n:n[e]||0}const x5=new WeakMap;class y5{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Pl(p).point)},a=(p,y)=>{const{drag:x,dragPropagation:C,onDragStart:w}=this.getProps();if(x&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DM(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kr(S=>{let A=this.getAxisMotionValue(S).get()||0;if(ls.test(A)){const{projection:b}=this.visualElement;if(b&&b.layout){const k=b.layout.layoutBox[S];k&&(A=qn(k)*(parseFloat(A)/100))}}this.originPoint[S]=A}),w&&Ut.postRender(()=>w(p,y)),$p(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},l=(p,y)=>{const{dragPropagation:x,dragDirectionLock:C,onDirectionLock:w,onDrag:E}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:S}=y;if(C&&this.currentDirection===null){this.currentDirection=v5(S),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",y.point,S),this.updateAxis("y",y.point,S),this.visualElement.render(),E&&E(p,y)},d=(p,y)=>this.stop(p,y),h=()=>kr(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)==null?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new Fk(e,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:Ok(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ut.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:o}=this.getProps();if(!r||!iu(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=d5(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,o=this.constraints;e&&Ci(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=h5(r.layoutBox,e):this.constraints=!1,this.elastic=g5(t),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=m5(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ci(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=a5(r,o.root,this.visualElement.getTransformPagePoint());let l=f5(o.layout.layoutBox,a);if(t){const d=t(XO(l));this.hasMutatedConstraints=!!d,d&&(l=Ik(d))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=kr(p=>{if(!iu(p,t,this.currentDirection))return;let y=h[p]||{};l&&(y={min:0,max:0});const x=o?200:1e6,C=o?40:1e7,w={type:"inertia",velocity:r?e[p]:0,bounceStiffness:x,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(p,w)});return Promise.all(f).then(d)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return $p(this.visualElement,e),r.start(qg(e,r,0,t,this.visualElement,!1))}stopAnimation(){kr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),o=r[t];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){kr(t=>{const{drag:r}=this.getProps();if(!iu(t,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:l,max:d}=o.layout.layoutBox[t];a.set(e[t]-Ht(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ci(t)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};kr(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const h=d.get();o[l]=p5({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kr(l=>{if(!iu(l,e,null))return;const d=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];d.set(Ht(h,f,o[l]))})}addListeners(){if(!this.visualElement.current)return;x5.set(this.visualElement,this);const e=this.visualElement.current,t=Ja(e,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Ci(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Ut.read(r);const l=Cl(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(kr(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=h[p].translate,y.set(y.get()+h[p].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:l=qp,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function iu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function v5(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class w5 extends uo{constructor(e){super(e),this.removeGroupControls=Ar,this.removeListeners=Ar,this.controls=new y5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ar}unmount(){this.removeGroupControls(),this.removeListeners()}}const aC=n=>(e,t)=>{n&&Ut.postRender(()=>n(e,t))};class C5 extends uo{constructor(){super(...arguments),this.removePointerDownListener=Ar}onPointerDown(e){this.session=new Fk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ok(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:aC(e),onStart:aC(t),onMove:r,onEnd:(a,l)=>{delete this.session,o&&Ut.postRender(()=>o(a,l))}}}mount(){this.removePointerDownListener=Ja(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const td={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ba={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ye.test(n))n=parseFloat(n);else return n;const t=lC(n,e.target.x),r=lC(n,e.target.y);return`${t}% ${r}%`}},b5={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,o=ao.parse(n);if(o.length>5)return r;const a=ao.createTransformer(n),l=typeof o[0]!="number"?1:0,d=t.x.scale*e.x,h=t.y.scale*e.y;o[0+l]/=d,o[1+l]/=h;const f=Ht(d,h,.5);return typeof o[2+l]=="number"&&(o[2+l]/=f),typeof o[3+l]=="number"&&(o[3+l]/=f),a(o)}};class E5 extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=e;aO(S5),a&&(t.group&&t.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),td.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:o,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,o||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Ut.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Mg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Lk(n){const[e,t]=hk(),r=T.useContext(fg);return c.jsx(E5,{...n,layoutGroup:r,switchLayoutGroup:T.useContext(xk),isPresent:e,safeToRemove:t})}const S5={borderRadius:{...Ba,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ba,borderTopRightRadius:Ba,borderBottomLeftRadius:Ba,borderBottomRightRadius:Ba,boxShadow:b5};function k5(n,e,t){const r=Bn(n)?n:Fi(n);return r.start(qg("",r,e,t)),r.animation}const T5=(n,e)=>n.depth-e.depth;class A5{constructor(){this.children=[],this.isDirty=!1}add(e){gg(this.children,e),this.isDirty=!0}remove(e){xg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(T5),this.isDirty=!1,this.children.forEach(e)}}function _5(n,e){const t=nr.now(),r=({timestamp:o})=>{const a=o-t;a>=e&&(io(r),n(a-e))};return Ut.setup(r,!0),()=>io(r)}const Hk=["TopLeft","TopRight","BottomLeft","BottomRight"],N5=Hk.length,cC=n=>typeof n=="string"?parseFloat(n):n,uC=n=>typeof n=="number"||Ye.test(n);function I5(n,e,t,r,o,a){o?(n.opacity=Ht(0,t.opacity??1,R5(r)),n.opacityExit=Ht(e.opacity??1,0,D5(r))):a&&(n.opacity=Ht(e.opacity??1,t.opacity??1,r));for(let l=0;l<N5;l++){const d=`border${Hk[l]}Radius`;let h=dC(e,d),f=dC(t,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||uC(h)===uC(f)?(n[d]=Math.max(Ht(cC(h),cC(f),r),0),(ls.test(f)||ls.test(h))&&(n[d]+="%")):n[d]=f}(e.rotate||t.rotate)&&(n.rotate=Ht(e.rotate||0,t.rotate||0,r))}function dC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const R5=Uk(0,.5,PS),D5=Uk(.5,.95,Ar);function Uk(n,e,t){return r=>r<n?0:r>e?1:t(ml(n,e,r))}function hC(n,e){n.min=e.min,n.max=e.max}function Sr(n,e){hC(n.x,e.x),hC(n.y,e.y)}function fC(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function pC(n,e,t,r,o){return n-=e,n=Jd(n,1/t,r),o!==void 0&&(n=Jd(n,1/o,r)),n}function P5(n,e=0,t=1,r=.5,o,a=n,l=n){if(ls.test(e)&&(e=parseFloat(e),e=Ht(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=Ht(a.min,a.max,r);n===a&&(d-=e),n.min=pC(n.min,e,t,d,o),n.max=pC(n.max,e,t,d,o)}function mC(n,e,[t,r,o],a,l){P5(n,e[t],e[r],e[o],e.scale,a,l)}const j5=["x","scaleX","originX"],M5=["y","scaleY","originY"];function gC(n,e,t,r){mC(n.x,e,j5,t?t.x:void 0,r?r.x:void 0),mC(n.y,e,M5,t?t.y:void 0,r?r.y:void 0)}function xC(n){return n.translate===0&&n.scale===1}function $k(n){return xC(n.x)&&xC(n.y)}function yC(n,e){return n.min===e.min&&n.max===e.max}function O5(n,e){return yC(n.x,e.x)&&yC(n.y,e.y)}function vC(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function zk(n,e){return vC(n.x,e.x)&&vC(n.y,e.y)}function wC(n){return qn(n.x)/qn(n.y)}function CC(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class F5{constructor(){this.members=[]}add(e){gg(this.members,e),e.scheduleRender()}remove(e){if(xg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let r;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function B5(n,e,t){let r="";const o=n.x.translate/e.x,a=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((o||a||l)&&(r=`translate3d(${o}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:x,skewX:C,skewY:w}=t;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),C&&(r+=`skewX(${C}deg) `),w&&(r+=`skewY(${w}deg) `)}const d=n.x.scale*e.x,h=n.y.scale*e.y;return(d!==1||h!==1)&&(r+=`scale(${d}, ${h})`),r||"none"}const q0=["","X","Y","Z"],L5={visibility:"hidden"},H5=1e3;let U5=0;function W0(n,e,t,r){const{latestValues:o}=e;o[n]&&(t[n]=o[n],e.setStaticValue(n,0),r&&(r[n]=0))}function Vk(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Tk(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:o,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ut,!(o||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&Vk(r)}function Kk({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(l={},d=e==null?void 0:e()){this.id=U5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(V5),this.nodes.forEach(Y5),this.nodes.forEach(Q5),this.nodes.forEach(K5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new A5)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new vg),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const h=this.eventHandlers.get(l);h&&h.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=dk(l)&&!BM(l),this.instance=l;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),n){let p;const y=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=_5(y,250),td.hasAnimatedSinceResize&&(td.hasAnimatedSinceResize=!1,this.nodes.forEach(EC))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||tF,{onLayoutAnimationStart:E,onLayoutAnimationComplete:S}=f.getProps(),A=!this.targetLayout||!zk(this.targetLayout,C),b=!y&&x;if(this.options.layoutRoot||this.resumeFrom||b||y&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Pg(w,"layout"),onPlay:E,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(p,b)}else y||EC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J5),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bC);return}this.isUpdating||this.nodes.forEach(W5),this.isUpdating=!1,this.nodes.forEach(G5),this.nodes.forEach($5),this.nodes.forEach(z5),this.clearAllSnapshots();const d=nr.now();kn.delta=_s(0,1e3/60,d-kn.timestamp),kn.timestamp=d,kn.isProcessing=!0,F0.update.process(kn),F0.preRender.process(kn),F0.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Mg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(q5),this.sharedNodes.forEach(X5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ut.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ut.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qn(this.snapshot.measuredBox.x)&&!qn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!$k(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(d||To(this.latestValues)||p)&&(o(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return l&&(h=this.removeTransform(h)),nF(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return Qt();const d=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(rF))){const{scroll:p}=this.root;p&&(Ei(d.x,p.offset.x),Ei(d.y,p.offset.y))}return d}removeElementScroll(l){var h;const d=Qt();if(Sr(d,l),(h=this.scroll)!=null&&h.wasRoot)return d;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:y,options:x}=p;p!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Sr(d,l),Ei(d.x,y.offset.x),Ei(d.y,y.offset.y))}return d}applyTransform(l,d=!1){const h=Qt();Sr(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Si(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),To(p.latestValues)&&Si(h,p.latestValues)}return To(this.latestValues)&&Si(h,this.latestValues),h}removeTransform(l){const d=Qt();Sr(d,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!To(f.latestValues))continue;Vp(f.latestValues)&&f.updateSnapshot();const p=Qt(),y=f.measurePageBox();Sr(p,y),gC(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return To(this.latestValues)&&gC(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=kn.timestamp,!this.targetDelta&&!this.relativeTarget){const C=this.getClosestProjectingParent();C&&C.layout&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Za(this.relativeTargetOrigin,this.layout.layoutBox,C.layout.layoutBox),Sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Qt(),this.targetWithTransforms=Qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Sr(this.target,this.layout.layoutBox),jk(this.target,this.targetDelta)):Sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const C=this.getClosestProjectingParent();C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Za(this.relativeTargetOrigin,this.target,C.target),Sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Vp(this.parent.latestValues)||Pk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Sr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;i5(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Qt());const{target:C}=l;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fC(this.prevProjectionDelta.x,this.projectionDelta.x),fC(this.prevProjectionDelta.y,this.projectionDelta.y)),Xa(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!CC(this.projectionDelta.x,this.prevProjectionDelta.x)||!CC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bi(),this.projectionDelta=bi(),this.projectionDeltaWithTransform=bi()}setAnimationOrigin(l,d=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},y=bi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=Qt(),C=h?h.source:void 0,w=this.layout?this.layout.source:void 0,E=C!==w,S=this.getStack(),A=!S||S.members.length<=1,b=!!(E&&!A&&this.options.crossfade===!0&&!this.path.some(eF));this.animationProgress=0;let k;this.mixTargetDelta=I=>{const R=I/1e3;SC(y.x,l.x,R),SC(y.y,l.y,R),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Za(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Z5(this.relativeTarget,this.relativeTargetOrigin,x,R),k&&O5(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Qt()),Sr(k,this.relativeTarget)),E&&(this.animationValues=p,I5(p,f,this.latestValues,R,b,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var d,h,f;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ut.update(()=>{td.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Fi(0)),this.currentAnimation=k5(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),l.onUpdate&&l.onUpdate(p)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(H5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:p}=l;if(!(!d||!h||!f)){if(this!==l&&this.layout&&f&&qk(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Qt();const y=qn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const x=qn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+x}Sr(d,h),Si(d,p),Xa(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new F5),this.sharedNodes.get(l).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var d;const{layoutId:l}=this.options;return l?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:l}=this.options;return l?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&W0("z",l,f,this.animationValues);for(let p=0;p<q0.length;p++)W0(`rotate${q0[p]}`,l,f,this.animationValues),W0(`skew${q0[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return L5;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=ed(l==null?void 0:l.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=ed(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!To(this.latestValues)&&(C.transform=h?h({},""):"none",this.hasProjected=!1),C}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=B5(this.projectionDeltaWithTransform,this.treeScale,p),h&&(d.transform=h(p,d.transform));const{x:y,y:x}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,f.animationValues?d.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const C in vl){if(p[C]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:S}=vl[C],A=d.transform==="none"?p[C]:w(p[C],f);if(E){const b=E.length;for(let k=0;k<b;k++)d[E[k]]=A}else S?this.options.visualElement.renderState.vars[C]=A:d[C]=A}return this.options.layoutId&&(d.pointerEvents=f===this?ed(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(bC),this.root.sharedNodes.clear()}}}function $5(n){n.updateLayout()}function z5(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:a}=n.options,l=e.source!==n.layout.source;a==="size"?kr(y=>{const x=l?e.measuredBox[y]:e.layoutBox[y],C=qn(x);x.min=r[y].min,x.max=x.min+C}):qk(a,e.layoutBox,r)&&kr(y=>{const x=l?e.measuredBox[y]:e.layoutBox[y],C=qn(r[y]);x.max=x.min+C,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+C)});const d=bi();Xa(d,r,e.layoutBox);const h=bi();l?Xa(h,n.applyTransform(o,!0),e.measuredBox):Xa(h,r,e.layoutBox);const f=!$k(d);let p=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:C}=y;if(x&&C){const w=Qt();Za(w,e.layoutBox,x.layoutBox);const E=Qt();Za(E,r,C.layoutBox),zk(w,E)||(p=!0),y.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=w,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:h,layoutDelta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function V5(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function K5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function q5(n){n.clearSnapshot()}function bC(n){n.clearMeasurements()}function W5(n){n.isLayoutDirty=!1}function G5(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function EC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Y5(n){n.resolveTargetDelta()}function Q5(n){n.calcProjection()}function J5(n){n.resetSkewAndRotation()}function X5(n){n.removeLeadSnapshot()}function SC(n,e,t){n.translate=Ht(e.translate,0,t),n.scale=Ht(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function kC(n,e,t,r){n.min=Ht(e.min,t.min,r),n.max=Ht(e.max,t.max,r)}function Z5(n,e,t,r){kC(n.x,e.x,t.x,r),kC(n.y,e.y,t.y,r)}function eF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const tF={duration:.45,ease:[.4,0,.1,1]},TC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),AC=TC("applewebkit/")&&!TC("chrome/")?Math.round:Ar;function _C(n){n.min=AC(n.min),n.max=AC(n.max)}function nF(n){_C(n.x),_C(n.y)}function qk(n,e,t){return n==="position"||n==="preserve-aspect"&&!s5(wC(e),wC(t),.2)}function rF(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const sF=Kk({attachResizeListener:(n,e)=>Cl(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),G0={current:void 0},Wk=Kk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!G0.current){const n=new sF({});n.mount(window),n.setOptions({layoutScroll:!0}),G0.current=n}return G0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),oF={pan:{Feature:C5},drag:{Feature:w5,ProjectionNode:Wk,MeasureLayout:Lk}};function NC(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const o="onHover"+t,a=r[o];a&&Ut.postRender(()=>a(e,Pl(e)))}class iF extends uo{mount(){const{current:e}=this.node;e&&(this.unmount=PM(e,(t,r)=>(NC(this.node,r,"Start"),o=>NC(this.node,o,"End"))))}unmount(){}}class aF extends uo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Il(Cl(this.node.current,"focus",()=>this.onFocus()),Cl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function IC(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const o="onTap"+(t==="End"?"":t),a=r[o];a&&Ut.postRender(()=>a(e,Pl(e)))}class lF extends uo{mount(){const{current:e}=this.node;e&&(this.unmount=FM(e,(t,r)=>(IC(this.node,r,"Start"),(o,{success:a})=>IC(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Wp=new WeakMap,Y0=new WeakMap,cF=n=>{const e=Wp.get(n.target);e&&e(n)},uF=n=>{n.forEach(cF)};function dF({root:n,...e}){const t=n||document;Y0.has(t)||Y0.set(t,{});const r=Y0.get(t),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(uF,{root:n,...e})),r[o]}function hF(n,e,t){const r=dF(e);return Wp.set(n,t),r.observe(n),()=>{Wp.delete(n),r.unobserve(n)}}const fF={some:0,all:1};class pF extends uo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:o="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:fF[o]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),x=f?p:y;x&&x(h)};return hF(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(mF(e,t))&&this.startObserver()}unmount(){}}function mF({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const gF={inView:{Feature:pF},tap:{Feature:lF},focus:{Feature:aF},hover:{Feature:iF}},xF={layout:{ProjectionNode:Wk,MeasureLayout:Lk}},Gp={current:null},Gk={current:!1};function yF(){if(Gk.current=!0,!!mg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gp.current=n.matches;n.addListener(e),e()}else Gp.current=!1}const vF=new WeakMap;function wF(n,e,t){for(const r in e){const o=e[r],a=t[r];if(Bn(o))n.addValue(r,o);else if(Bn(a))n.addValue(r,Fi(o,{owner:n}));else if(a!==o)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(o):l.hasAnimated||l.set(o)}else{const l=n.getStaticValue(r);n.addValue(r,Fi(l!==void 0?l:o,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const RC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class CF{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=nr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Ut.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=Nh(t),this.isVariantNode=mk(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const C=y[x];h[x]!==void 0&&Bn(C)&&C.set(h[x],!1)}}mount(e){this.current=e,vF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Gk.current||yF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Xi.has(e);r&&this.onBindTransform&&this.onBindTransform();const o=t.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Ut.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bi){const t=Bi[e];if(!t)continue;const{isEnabled:r,Feature:o}=t;if(!this.features[e]&&o&&r(this.props)&&(this.features[e]=new o(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<RC.length;r++){const o=RC[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,l=e[a];l&&(this.propEventSubscriptions[o]=this.on(o,l))}this.prevMotionValues=wF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Fi(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ES(r)||kS(r))?r=parseFloat(r):!HM(r)&&ao.test(t)&&(r=ik(e,t)),this.setBaseTarget(e,Bn(r)?r.get():r)),Bn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=Vg(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Bn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new vg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Yk extends CF{constructor(){super(...arguments),this.KeyframeResolver=_M}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Qk(n,{style:e,vars:t},r,o){Object.assign(n.style,e,o&&o.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}function bF(n){return window.getComputedStyle(n)}class EF extends Yk{constructor(){super(...arguments),this.type="html",this.renderInstance=Qk}readValueFromInstance(e,t){var r;if(Xi.has(t))return(r=this.projection)!=null&&r.isProjecting?Mp(t):W3(e,t);{const o=bF(e),a=(bg(t)?o.getPropertyValue(t):o[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Mk(e,t)}build(e,t,r){Ug(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Kg(e,t,r)}}const Jk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SF(n,e,t,r){Qk(n,e,void 0,r);for(const o in e.attrs)n.setAttribute(Jk.has(o)?o:Hg(o),e.attrs[o])}class kF extends Yk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Xi.has(t)){const r=ok(t);return r&&r.default||0}return t=Jk.has(t)?t:Hg(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return kk(e,t,r)}build(e,t,r){Ck(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,o){SF(e,t,r,o)}mount(e){this.isSVGTag=Ek(e.tagName),super.mount(e)}}const TF=(n,e)=>zg(n)?new kF(e):new EF(e,{allowProjection:n!==T.Fragment}),AF=SO({...QO,...gF,...oF,...xF},TF),ht=YM(AF),Wg="https://qtrackly-awd6egbkg8dbaeex.centralindia-01.azurewebsites.net/api",_F=`${Wg}/Task/alltaskforPerformance`,au=`${Wg}/User/all`,Q0=`${Wg}/ManagerDashboard`,NF=()=>{const[n,e]=T.useState(!0),[t,r]=T.useState(!1),[o,a]=T.useState({id:"manager123",name:"Manager User"});return{isAuthenticated:n,isLoading:t,user:o,acquireToken:async()=>"mock-token"}},Qs=async(n,e="GET",t=null,r)=>{try{const a={Authorization:`Bearer ${await r()}`,"Content-Type":"application/json"},l={method:e,headers:a,...t&&{body:JSON.stringify(t)}},d=await fetch(n,l);if(!d.ok)throw new Error(`API request failed: ${d.status}`);return await d.json()}catch(o){throw console.error("API request error:",o),o}},IF=(n,e)=>{const t=new Date(n,e+1,0).getDate();return Math.ceil(t/7)},RF=(n,e,t)=>{const r=(t-1)*7+1,o=new Date(n,e,r),a=new Date(n,e,r+6),l=new Date(n,e+1,0).getDate();a.getDate()>l&&a.setDate(l);const d={month:"short",day:"numeric"},h=o.toLocaleDateString("en-US",d),f=a.toLocaleDateString("en-US",d);return`${h} - ${f}, ${n}`},DF=()=>{const n=new Date,e=n.getFullYear(),t=n.getMonth(),r=Math.ceil(n.getDate()/7),[o,a]=T.useState(!0),[l,d]=T.useState("timesheets"),[h,f]=T.useState(!0);T.useState("all"),T.useState(!1);const[p,y]=T.useState("All Departments"),[x,C]=T.useState("All Sub-Departments"),[w,E]=T.useState("All Managers"),[S,A]=T.useState("Weekly"),[b,k]=T.useState(e),[I,R]=T.useState(t),[D,j]=T.useState(r),[M,U]=T.useState(""),[P,L]=T.useState([]),[$,z]=T.useState([]),[ne,oe]=T.useState([]),[he,K]=T.useState([]),[B,Q]=T.useState([]),[ee,_]=T.useState({}),[F,Y]=T.useState(!1),[W,ce]=T.useState(null),[pe,Ee]=T.useState(["All Departments"]),[Z,se]=T.useState(["All Sub-Departments"]),[we,ke]=T.useState(["All Managers"]),{acquireToken:Le,isAuthenticated:Te,isLoading:ze,user:it}=NF(),bt=Array.from({length:10},(Ce,G)=>e-5+G),mt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ln=[{id:"timesheets",label:"Timesheets",icon:Fn},{id:"metrics",label:"Performance Metrics",icon:Zc},{id:"charts",label:"Analytics Charts",icon:r8},{id:"reports",label:"Reports",icon:j0}],$t=Array.from({length:IF(b,I)},(Ce,G)=>`Week ${G+1}`);T.useEffect(()=>{(async()=>{if(!(!Te||ze))try{const G=await Qs(au,"GET",null,Le),ge=["All Departments",...new Set(G.map(qe=>qe.department).filter(Boolean))],Be=["All Managers",...new Set(G.map(qe=>qe.manager).filter(Boolean))],Ue=["All Sub-Departments",...new Set(G.map(qe=>qe.subDepartment).filter(Boolean))];Ee(ge),ke(Be),se(Ue)}catch(G){console.error("Error fetching filter options:",G),ce(G.message)}})()},[Te,ze,Le]),T.useEffect(()=>{(async()=>{if(p==="All Departments"){try{const G=await Qs(au,"GET",null,Le);se(["All Sub-Departments",...new Set(G.map(ge=>ge.subDepartment).filter(Boolean))]),C("All Sub-Departments")}catch(G){console.error("Error fetching all sub-departments:",G)}return}try{const G=await Qs(au,"GET",null,Le),ge=["All Sub-Departments",...new Set(G.filter(Be=>Be.department===p).map(Be=>Be.subDepartment).filter(Boolean))];se(ge),ge.includes(x)||C("All Sub-Departments")}catch(G){console.error("Error fetching sub-departments:",G),ce(G.message)}})()},[p,Le]);const Et=T.useCallback(async()=>{if(!(!Te||ze)){Y(!0),ce(null);try{const Ce=new URLSearchParams({year:b,month:I+1,...S==="Weekly"&&{week:D},...p!=="All Departments"&&{department:p},...x!=="All Sub-Departments"&&{subDepartment:x},...w!=="All Managers"&&{manager:w}}).toString();let G;S==="Weekly"?(G=await Qs(`${Q0}/weekly?${Ce}`,"GET",null,Le),L(G||[]),z([]),oe([])):S==="Monthly"?(G=await Qs(`${Q0}/monthly?${Ce}`,"GET",null,Le),z(G||[]),L([]),oe([])):S==="Yearly"&&(G=await Qs(`${Q0}/yearly?${Ce}`,"GET",null,Le),oe(G||[]),L([]),z([]))}catch(Ce){console.error("Error fetching timesheet data:",Ce),ce(Ce.message)}finally{Y(!1)}}},[Te,ze,Le,b,I,D,p,x,w,S]),At=T.useCallback(async()=>{if(!(!Te||ze)){Y(!0),ce(null);try{const Ce=new URLSearchParams({year:b,month:I+1,...S==="Weekly"&&{week:D},...p!=="All Departments"&&{department:p},...x!=="All Sub-Departments"&&{subDepartment:x},...w!=="All Managers"&&{manager:w}}).toString(),G=`${au}?${Ce}`,Be=(await Qs(G,"GET",null,Le)).reduce((He,We)=>(He[We.userId]={name:We.name,department:We.department,subDepartment:We.subDepartment,manager:We.manager},He),{}),Ue=`${_F}?${Ce}`,qe=await Qs(Ue,"GET",null,Le);_(Be),Q(qe||[]);const Pe={};(qe||[]).forEach(He=>{var _t;const We=He.createdBy;Pe[We]||(Pe[We]={userId:We,name:((_t=Be[We])==null?void 0:_t.name)||`User ${We.slice(0,8)}`,estimatedHours:0,actualHours:0,onTime:0,totalTasks:0,overdue:0});const lt=Pe[We];lt.estimatedHours+=He.estimatedHours||0,lt.actualHours+=He.completedHours||0,lt.totalTasks+=1;const rt=new Date(He.dueDate),yt=new Date;He.status!=="Completed"&&rt<yt?lt.overdue+=1:lt.onTime+=1});const ut=Object.values(Pe).filter(He=>!M||He.name.toLowerCase().includes(M.toLowerCase())).map(He=>{const We=He.totalTasks?He.onTime/He.totalTasks*100:0,lt=He.totalTasks?He.actualHours/He.totalTasks:0,rt=He.actualHours-He.estimatedHours;return{userId:He.userId,name:He.name,onTimePercentage:We.toFixed(0),avgTaskTime:lt.toFixed(1),estimatedHours:He.estimatedHours,actualHours:He.actualHours,variance:rt,overdue:He.overdue,totalTasks:He.totalTasks}});K(ut)}catch(Ce){ce(Ce.message),console.error("Error fetching performance data:",Ce)}finally{Y(!1)}}},[Te,ze,Le,b,I,D,p,x,w,M,S]);T.useEffect(()=>{const Ce=setTimeout(()=>{l==="timesheets"?Et():At()},300);return()=>clearTimeout(Ce)},[S,b,I,D,p,x,w,Te,ze,l,At,Et]);const zt=()=>{if(l==="timesheets"){let Ce=[];S==="Weekly"?Ce=P:S==="Monthly"?Ce=$:S==="Yearly"&&(Ce=ne);const G=Ce.length,ge=Ce.reduce((Be,Ue)=>Be+(Ue.totalHours||Ue.total||0),0);return[{label:"Total Users",value:G.toString(),change:"",icon:Ao,color:"text-blue-600",bg:"bg-blue-50"},{label:"Total Hours",value:ge.toFixed(1),change:"",icon:Fn,color:"text-purple-600",bg:"bg-purple-50"},{label:"Active Projects",value:"12",change:"+2",icon:j0,color:"text-green-600",bg:"bg-green-50"},{label:"Pending Tasks",value:"8",change:"-3",icon:Cs,color:"text-red-600",bg:"bg-red-50"}]}else{const Ce=he.length,G=he.length?(he.reduce((Ue,qe)=>Ue+parseInt(qe.onTimePercentage),0)/he.length).toFixed(0):0,ge=he.reduce((Ue,qe)=>Ue+qe.actualHours,0),Be=he.reduce((Ue,qe)=>Ue+qe.overdue,0);return[{label:"Total Users",value:Ce.toString(),change:"",icon:Ao,color:"text-blue-600",bg:"bg-blue-50"},{label:"Avg Performance",value:`${G}%`,change:"",icon:n6,color:"text-green-600",bg:"bg-green-50"},{label:"Total Hours",value:ge.toFixed(1),change:"",icon:Fn,color:"text-purple-600",bg:"bg-purple-50"},{label:"Overdue Tasks",value:Be.toString(),change:"",icon:Cs,color:"text-red-600",bg:"bg-red-50"}]}},Dt=({value:Ce,options:G,onChange:ge,icon:Be,placeholder:Ue,className:qe})=>{const[Pe,ut]=T.useState(!1);return c.jsxs("div",{className:`relative ${qe}`,children:[c.jsxs("button",{onClick:()=>ut(!Pe),className:"w-full flex items-center justify-between px-3 py-2 bg-white border border-gray-300 rounded-lg hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[Be&&c.jsx(Be,{size:16,className:"text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:Ce||Ue})]}),c.jsx(Nl,{size:16,className:`text-gray-400 transform transition-transform ${Pe?"rotate-180":""}`})]}),c.jsx(Qa,{children:Pe&&c.jsx(ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:G.map((He,We)=>c.jsx("button",{onClick:()=>{ge(He),ut(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-100 ${Ce===He?"bg-violet-50 text-violet-600":"text-gray-700"} ${We===0?"rounded-t-lg":""} ${We===G.length-1?"rounded-b-lg":""}`,children:He},We))})})]})},_n=()=>{const Ce=zt();return c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Ce.map((G,ge)=>{const Be=G.icon;return c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:ge*.1},className:`${G.bg} rounded-xl p-6 border border-gray-200`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:G.label}),c.jsx("p",{className:`text-2xl font-bold ${G.color} mt-2`,children:G.value}),G.change&&c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[c.jsx("span",{className:`${G.change.startsWith("+")?"text-green-600":"text-red-600"}`,children:G.change})," ","from last period"]})]}),c.jsx(Be,{className:`h-8 w-8 ${G.color}`})]})},G.label)})})},gr=()=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weekly Timesheet Data"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:RF(b,I,D)})]}),F?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-violet-600"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading weekly data..."})]}):W?c.jsxs("div",{className:"p-8 text-center text-red-600",children:[c.jsx(Cs,{className:"h-8 w-8 mx-auto mb-2"}),c.jsxs("p",{children:["Error loading data: ",W]})]}):P.length===0?c.jsxs("div",{className:"p-8 text-center text-gray-500",children:[c.jsx(Fn,{className:"h-8 w-8 mx-auto mb-2"}),c.jsx("p",{children:"No timesheet data available for this week"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monday"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tuesday"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wednesday"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thursday"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Friday"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.filter(Ce=>{var G;return!M||((G=Ce.name)==null?void 0:G.toLowerCase().includes(M.toLowerCase()))}).map((Ce,G)=>c.jsxs(ht.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:G*.1},className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ce.name})}),c.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Ce.monday||0}),c.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Ce.tuesday||0}),c.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Ce.wednesday||0}),c.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Ce.thursday||0}),c.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Ce.friday||0}),c.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium text-gray-900",children:Ce.total||Ce.totalHours||0})]},Ce.id||Ce.userId||G))})]})})]}),dn=()=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Metrics"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Individual performance data"})]}),F?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-violet-600"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading performance data..."})]}):W?c.jsxs("div",{className:"p-8 text-center text-red-600",children:[c.jsx(Cs,{className:"h-8 w-8 mx-auto mb-2"}),c.jsxs("p",{children:["Error loading data: ",W]})]}):he.length===0?c.jsxs("div",{className:"p-8 text-center text-gray-500",children:[c.jsx(Zc,{className:"h-8 w-8 mx-auto mb-2"}),c.jsx("p",{children:"No performance data available"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion %"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Time"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Est. Hours"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actual Hours"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variance"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overdue"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:he.filter(Ce=>!M||Ce.name.toLowerCase().includes(M.toLowerCase())).map((Ce,G)=>c.jsxs(ht.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:G*.1},className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ce.name})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${parseInt(Ce.onTimePercentage)>=90?"bg-green-100 text-green-800":parseInt(Ce.onTimePercentage)>=80?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Ce.onTimePercentage,"%"]})}),c.jsxs("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:[Ce.avgTaskTime,"h"]}),c.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Ce.estimatedHours}),c.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900",children:Ce.actualHours}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsxs("span",{className:`text-sm font-medium ${Ce.variance<0?"text-green-600":"text-red-600"}`,children:[Ce.variance>0?"+":"",Ce.variance]})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("span",{className:"text-sm text-gray-900",children:Ce.overdue}),Ce.overdue>0&&c.jsx(s6,{className:"ml-1 h-4 w-4 text-red-500"})]})})]},Ce.userId))})]})})]}),hn=()=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics Charts"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Performance visualization"})]})}),c.jsx("div",{className:"h-80 bg-gradient-to-br from-violet-50 to-purple-50 rounded-lg flex items-center justify-center border-2 border-dashed border-violet-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Zc,{className:"mx-auto h-12 w-12 text-violet-400 mb-4"}),c.jsx("p",{className:"text-violet-600 font-medium",children:"Interactive Charts"}),c.jsx("p",{className:"text-sm text-violet-500 mt-2",children:"Performance analytics charts would render here"}),c.jsxs("p",{className:"text-xs text-violet-400 mt-1",children:["Data: ",he.length," users, ",B.length," tasks"]})]})})]}),Pt=()=>{switch(l){case"timesheets":return c.jsxs("div",{className:"space-y-6",children:[c.jsx(_n,{}),c.jsx(gr,{})]});case"metrics":return c.jsxs("div",{className:"space-y-6",children:[c.jsx(_n,{}),c.jsx(dn,{})]});case"charts":return c.jsxs("div",{className:"space-y-6",children:[c.jsx(_n,{}),c.jsx(hn,{})]});case"reports":return c.jsxs("div",{className:"space-y-6",children:[c.jsx(_n,{}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[c.jsx(j0,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Reports"}),c.jsx("p",{className:"text-gray-600",children:"Generated reports and analytics would be shown here."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Total data points: ",B.length," tasks"]})]})]});default:return null}},Vt=Ce=>{A(Ce),Ce==="Weekly"?(k(e),R(t),j(r)):Ce==="Monthly"?(k(e),R(t)):Ce==="Yearly"&&k(e)};return ze?c.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-violet-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading dashboard..."})]}):Te?c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsxs(ht.div,{initial:!1,animate:{width:o?280:80},transition:{duration:.3,ease:"easeInOut"},className:"bg-white border-r border-gray-200 shadow-sm flex flex-col",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(ht.div,{initial:!1,animate:{opacity:o?1:0},transition:{duration:.2},className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-violet-600 rounded-lg flex items-center justify-center",children:c.jsx(Zc,{className:"h-5 w-5 text-white"})}),o&&c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Manager Dashboard"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Performance Analytics"})]})]}),c.jsx("button",{onClick:()=>a(!o),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:o?c.jsx(yn,{size:18}):c.jsx(dS,{size:18})})]})}),c.jsx("div",{className:"flex-1 p-4",children:c.jsx("nav",{className:"space-y-2",children:Ln.map(Ce=>{const G=Ce.icon;return c.jsxs(ht.button,{onClick:()=>d(Ce.id),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors text-left ${l===Ce.id?"bg-violet-600 text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsx(G,{size:20}),o&&c.jsx("span",{className:"font-medium",children:Ce.label})]},Ce.id)})})}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsxs(ht.button,{className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors text-left text-gray-600 hover:bg-gray-100",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsx(J8,{size:20}),o&&c.jsx("span",{className:"font-medium",children:"Settings"})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[c.jsx(ht.div,{className:"bg-white border-b border-gray-200 shadow-sm",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.4},children:c.jsxs("div",{className:"px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 capitalize",children:l.replace("_"," ")}),c.jsxs(ht.button,{onClick:()=>f(!h),className:"flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:[c.jsx(Tp,{size:16}),"Filters",c.jsx(Yi,{size:16,className:`transform transition-transform ${h?"rotate-90":""}`})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors relative",children:[c.jsx(Ua,{size:20,className:"text-gray-600"}),c.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:"3"})]}),c.jsx("div",{className:"w-8 h-8 bg-violet-600 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-sm font-medium",children:"M"})})]})]}),c.jsx(Qa,{children:h&&c.jsx(ht.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),c.jsx(Dt,{value:p,options:pe,onChange:y,icon:Ao})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub-Department"}),c.jsx(Dt,{value:x,options:Z,onChange:C,icon:Ao})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager"}),c.jsx(Dt,{value:w,options:we,onChange:E,icon:Ao})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"View Type"}),c.jsx(Dt,{value:S,options:["Weekly","Monthly","Yearly"],onChange:Vt,icon:Fn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),c.jsx(Dt,{value:b,options:bt,onChange:k,icon:Ss})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),c.jsxs("div",{className:"relative",children:[c.jsx(dg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),c.jsx("input",{type:"text",placeholder:"Search users...",value:M,onChange:Ce=>U(Ce.target.value),className:"w-full pl-10 pr-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500 text-sm"})]})]})]}),(S==="Weekly"||S==="Monthly")&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),c.jsx(Dt,{value:mt[I],options:mt,onChange:Ce=>R(mt.indexOf(Ce)),icon:Ss})]}),S==="Weekly"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Week"}),c.jsx(Dt,{value:`Week ${D}`,options:$t,onChange:Ce=>j(parseInt(Ce.split(" ")[1])),icon:Ss})]})]})]})})})]})}),c.jsx("div",{className:"flex-1 overflow-auto",children:c.jsx("div",{className:"p-6",children:c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:Pt()},l)})})]})]}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center max-w-md",children:[c.jsx(Cs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Required"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to view the manager dashboard."}),c.jsx("button",{className:"px-6 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors",onClick:()=>window.location.href="/login",children:"Sign In"})]})})},PF=()=>{const{isAuthenticated:n,isInitialized:e,authState:t,getPrimaryRole:r}=vn(),o=lo(),[a,l]=T.useState(!1),[d,h]=T.useState(0),[f,p]=T.useState(0),y=T.useMemo(()=>["Streamline Tasks, Boost Productivity","Track Dependencies with Ease","Gain Insights with Performance Metrics","Manage Workloads with Timesheets"],[]),x=T.useMemo(()=>[{title:"Effortless Task Management",description:"Create, assign, and track tasks with seamless dependency management.",image:"https://via.placeholder.com/1920x600/6B46C1/FFFFFF?text=Task+Management",color:"from-violet-600 to-purple-600"},{title:"Real-Time Performance Insights",description:"Monitor team performance with detailed metrics and analytics.",image:"https://via.placeholder.com/1920x600/3182CE/FFFFFF?text=Performance+Insights",color:"from-blue-600 to-cyan-600"},{title:"Optimized Timesheet Tracking",description:"Plan and visualize workloads with intuitive timesheet tools.",image:"https://via.placeholder.com/1920x600/319795/FFFFFF?text=Timesheet+Tracking",color:"from-green-600 to-teal-600"}],[]),C=T.useMemo(()=>Array.from({length:20},()=>({x:Math.random()*100,y:Math.random()*100,scale:Math.random()*.5+.5,delay:Math.random()*2})),[]);T.useEffect(()=>{const A=setInterval(()=>{h(b=>(b+1)%y.length)},4e3);return()=>clearInterval(A)},[y.length]),T.useEffect(()=>{const A=setInterval(()=>{p(b=>(b+1)%x.length)},6e3);return()=>clearInterval(A)},[x.length]),T.useEffect(()=>{if(n&&e&&t==="authenticated"){const A=r(),k={admin:"/admin",manager:"/manager",user:"/admin"}[A]||"/dashboard";o(k,{replace:!0})}},[n,e,t,r,o]);const w=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.4 3H3v8.4h8.4V3z",fill:"#F25022"}),c.jsx("path",{d:"M21 3h-8.4v8.4H21V3z",fill:"#7FBA00"}),c.jsx("path",{d:"M11.4 12.6H3V21h8.4v-8.4z",fill:"#00A4EF"}),c.jsx("path",{d:"M21 12.6h-8.4V21H21v-8.4z",fill:"#FFB900"})]}),E=T.useMemo(()=>[{icon:c.jsx(Ao,{className:"w-10 h-10 text-white"}),title:"Task & Dependency Management",description:"Effortlessly create, assign, and track tasks with dependency management for seamless project workflows, powered by QTrackly.",color:"from-violet-600 to-purple-600"},{icon:c.jsx(f1,{className:"w-10 h-10 text-white"}),title:"Performance Insights",description:"Monitor team performance with real-time metrics on task completion, hours logged, and overdue tasks.",color:"from-blue-600 to-cyan-600"},{icon:c.jsx(Fn,{className:"w-10 h-10 text-white"}),title:"Timesheet Tracking",description:"Visualize weekly, monthly, and yearly timesheets to optimize workloads and resource planning.",color:"from-green-600 to-teal-600"},{icon:c.jsx(F8,{className:"w-10 h-10 text-white"}),title:"Enterprise Security",description:"Secure your data with AES encryption and role-based access control for safe collaboration.",color:"from-purple-600 to-pink-600"}],[]),S=T.useMemo(()=>[{title:"Create and Manage Tasks",description:"Easily create tasks, assign them to team members, and track progress with a user-friendly interface, ensuring projects stay on schedule.",icon:c.jsx(Ao,{className:"w-10 h-10 text-white"}),color:"from-violet-600 to-purple-600"},{title:"Track Task Dependencies",description:"Manage dependencies between tasks to streamline workflows, ensuring teams stay aligned and delays are minimized.",icon:c.jsx(Wa,{className:"w-10 h-10 text-white"}),color:"from-blue-600 to-cyan-600"},{title:"Analyze Workload and Performance",description:"Use timesheets and real-time analytics to monitor team performance, optimize resource allocation, and gain actionable insights.",icon:c.jsx(f1,{className:"w-10 h-10 text-white"}),color:"from-green-600 to-teal-600"}],[]);return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-gray-50 to-purple-50 overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[c.jsx(ht.div,{className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.2,.3,.2]},transition:{duration:5,repeat:1/0,repeatType:"reverse"}}),c.jsx(ht.div,{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-br from-blue-400/20 to-cyan-400/20 rounded-full blur-3xl",animate:{scale:[1,1.15,1],opacity:[.2,.25,.2]},transition:{duration:6,repeat:1/0,repeatType:"reverse",delay:1}})]}),c.jsxs(ht.nav,{className:"relative z-20 bg-white/90 backdrop-blur-lg shadow-lg border-b border-violet-100 py-4 px-4 sm:px-6 lg:px-8",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},children:[c.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3 group",children:[c.jsx(ht.img,{src:ig,alt:"QTrackly Logo",className:"w-12 h-12 rounded-full object-cover shadow-md",whileHover:{scale:1.1,rotate:10},transition:{duration:.3}}),c.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:"QTrackly"})]}),c.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[c.jsx("a",{href:"#features",className:"text-gray-600 hover:text-violet-600 transition-colors",children:"Features"}),c.jsx("a",{href:"#how-it-works",className:"text-gray-600 hover:text-violet-600 transition-colors",children:"How It Works"}),c.jsx("a",{href:"#testimonials",className:"text-gray-600 hover:text-violet-600 transition-colors",children:"Testimonials"}),c.jsxs("button",{onClick:()=>o("/login"),className:"px-4 py-2 bg-violet-600 text-white rounded-full hover:bg-violet-700 transition-all flex items-center gap-2",children:[c.jsx(w,{}),"Sign In"]})]}),c.jsx("button",{className:"md:hidden text-gray-600 hover:text-violet-600",onClick:()=>l(A=>!A),"aria-label":a?"Close menu":"Open menu",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}),c.jsx(Qa,{children:a&&c.jsxs(ht.div,{className:"md:hidden bg-white/90 backdrop-blur-lg px-4 py-4",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[c.jsx("a",{href:"#features",className:"block py-2 text-gray-600 hover:text-violet-600 transition-colors",children:"Features"}),c.jsx("a",{href:"#how-it-works",className:"block py-2 text-gray-600 hover:text-violet-600 transition-colors",children:"How It Works"}),c.jsx("a",{href:"#testimonials",className:"block py-2 text-gray-600 hover:text-violet-600 transition-colors",children:"Testimonials"}),c.jsx("button",{onClick:()=>o("/login"),className:"block py-2 px-4 bg-violet-600 text-white rounded-full hover:bg-violet-700 transition-all w-full text-left",children:"Sign In"})]})})]}),c.jsxs(ht.section,{className:"relative z-10 py-20 sm:py-32 px-4 sm:px-6 lg:px-8 flex items-center justify-center overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[c.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[c.jsx(Qa,{initial:!1,children:c.jsx(ht.div,{className:"absolute inset-0 w-full h-full",initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.8,ease:"easeInOut"},children:c.jsxs("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${x[f].image})`},children:[c.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${x[f].color} opacity-70`}),c.jsx("div",{className:"absolute inset-0 pointer-events-none",children:C.map((A,b)=>c.jsx(ht.div,{className:"absolute",style:{left:`${A.x}%`,top:`${A.y}%`,width:"8px",height:"8px",backgroundColor:"white",borderRadius:"50%",boxShadow:"0 0 8px rgba(255, 255, 255, 0.8)"},animate:{scale:[A.scale,A.scale*1.5,A.scale],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,repeatType:"reverse",delay:A.delay,ease:"easeInOut"}},b))})]})},f)}),c.jsx("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center gap-2",children:x.map((A,b)=>c.jsx("button",{onClick:()=>p(b),className:`w-3 h-3 rounded-full transition-all duration-300 ${f===b?"bg-white scale-125":"bg-white/50 hover:bg-white/80"}`,"aria-label":`Go to banner ${b+1}`},b))})]}),c.jsxs("div",{className:"relative text-center max-w-4xl mx-auto",children:[c.jsx(ht.h1,{className:"text-4xl sm:text-5xl md:text-6xl font-bold text-white mb-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.2},children:x[f].title}),c.jsx(Qa,{mode:"wait",children:c.jsx(ht.p,{className:"text-xl sm:text-2xl text-white mb-10 max-w-lg mx-auto",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},children:x[f].description},d)}),c.jsxs(ht.div,{className:"flex justify-center gap-4 flex-wrap",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.4},children:[c.jsxs("button",{onClick:()=>o("/login"),className:"px-6 py-3 bg-white text-violet-600 rounded-full flex items-center gap-2 hover:bg-gray-100 transition-all shadow-md hover:shadow-lg","aria-label":"Sign in with Microsoft",children:[c.jsx(w,{}),"Get Started with Microsoft",c.jsx(Wa,{className:"w-5 h-5"})]}),c.jsx("a",{href:"#features",className:"px-6 py-3 border border-white text-white rounded-full hover:bg-white/10 transition-all shadow-md hover:shadow-lg",children:"Explore Features"})]})]})]}),c.jsxs("section",{id:"features",className:"relative z-10 py-20 px-4 sm:px-6 lg:px-8 bg-white/50",children:[c.jsxs(ht.h2,{className:"text-3xl md:text-4xl font-bold text-center text-gray-900 mb-12",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5},viewport:{once:!0},children:["Discover the Power of"," ",c.jsx("span",{className:"bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:"QTrackly"})]}),c.jsx("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:E.map((A,b)=>c.jsxs(ht.div,{className:"relative bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all border border-violet-100",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:b*.1},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},viewport:{once:!0},children:[c.jsx("div",{className:`w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br ${A.color} flex items-center justify-center shadow-md`,children:A.icon}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3 text-center",children:A.title}),c.jsx("p",{className:"text-gray-600 text-center",children:A.description})]},b))})]}),c.jsxs("section",{id:"how-it-works",className:"relative z-10 bg-gradient-to-r from-violet-900 to-purple-900 py-16 px-4 sm:px-6 lg:px-8",children:[c.jsxs(ht.h2,{className:"text-3xl md:text-4xl font-bold text-center text-white mb-12",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5},viewport:{once:!0},children:["How"," ",c.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"QTrackly"})," ","Works"]}),c.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-3 gap-8",children:S.map((A,b)=>c.jsxs(ht.div,{className:"relative bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all border border-violet-200/20",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:b*.1},whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.2)"},viewport:{once:!0},children:[c.jsx("div",{className:`w-12 h-12 mx-auto mb-4 rounded-full bg-gradient-to-br ${A.color} flex items-center justify-center shadow-md`,children:A.icon}),c.jsx("h3",{className:"text-lg font-semibold text-white mb-2 text-center",children:A.title}),c.jsx("p",{className:"text-violet-100 text-sm text-center",children:A.description})]},b))})]}),c.jsxs("section",{id:"testimonials",className:"relative z-10 py-20 px-4 sm:px-6 lg:px-8 bg-violet-50",children:[c.jsxs(ht.h2,{className:"text-3xl md:text-4xl font-bold text-center text-gray-900 mb-12",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5},viewport:{once:!0},children:["What Our Users Say About"," ",c.jsx("span",{className:"bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:"QTrackly"})]}),c.jsx("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8",children:[{quote:"QTracklys dependency tracking has streamlined our project workflows like never before.",author:"",role:"Project Manager"},{quote:"The performance insights help me keep my team on track and address bottlenecks early.",author:"",role:"Team Lead"},{quote:"Timesheet tracking makes workload planning effortless and transparent.",author:"",role:"Product Owner"}].map((A,b)=>c.jsxs(ht.div,{className:"bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:b*.1},whileHover:{scale:1.05},viewport:{once:!0},children:[c.jsxs("p",{className:"text-gray-600 italic mb-4",children:['"',A.quote,'"']}),c.jsx("p",{className:"text-gray-900 font-semibold",children:A.author}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]},b))})]}),c.jsxs(ht.section,{className:"relative z-10 bg-gradient-to-r from-violet-600 to-purple-600 py-20 px-4 sm:px-6 lg:px-8 text-center",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5},viewport:{once:!0},children:[c.jsx(ht.h2,{className:"text-3xl md:text-4xl font-bold text-white mb-6",initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:.2},viewport:{once:!0},children:"Ready to Transform Your Workflow with QTrackly?"}),c.jsx(ht.p,{className:"text-lg text-violet-100 mb-8 max-w-2xl mx-auto",initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:.4},viewport:{once:!0},children:"Join thousands of teams optimizing tasks, dependencies, and performance with QTracklys intuitive platform."}),c.jsx(ht.div,{initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:.6},viewport:{once:!0},children:c.jsxs("button",{onClick:()=>o("/login"),className:"px-8 py-4 bg-white text-violet-600 rounded-full flex items-center gap-2 mx-auto hover:bg-gray-100 transition-all shadow-md hover:shadow-lg",children:[c.jsx(w,{}),"Start Free Trial",c.jsx(Wa,{className:"w-5 h-5"})]})})]}),c.jsx("footer",{className:"relative z-10 bg-white/90 backdrop-blur-md py-8 px-4 sm:px-6 lg:px-8 border-t border-violet-100",children:c.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:" 2025 QTrackly. Empowering teams with smarter task management."}),c.jsxs("div",{className:"flex justify-center gap-6 text-sm",children:[c.jsx("a",{href:"/terms",className:"text-gray-600 hover:text-violet-600 transition-colors",children:"Terms of Service"}),c.jsx("a",{href:"/privacy",className:"text-gray-600 hover:text-violet-600 transition-colors",children:"Privacy Policy"}),c.jsx("a",{href:"/contact",className:"text-gray-600 hover:text-violet-600 transition-colors",children:"Contact Us"})]})]})})]})},jF=()=>{const n=lo(),e=cs(),{isAuthenticated:t,acquireToken:r,user:o,getPrimaryRole:a,logout:l}=vn(),[d,h]=T.useState(""),[f,p]=T.useState(""),[y,x]=T.useState(""),[C,w]=T.useState(!1),[E,S]=T.useState(!1),[A,b]=T.useState(!1),[k,I]=T.useState(!1),[R,D]=T.useState(null),[j,M]=T.useState(!0),[U,P]=T.useState([]),[L,$]=T.useState([]),[z,ne]=T.useState([]),[oe,he]=T.useState(null),[K,B]=T.useState(null);T.useEffect(()=>{window.history.replaceState(null,"",e.pathname),window.history.pushState(null,"",e.pathname);const ce=Ee=>{Ee.preventDefault(),window.confirm("Are you sure you want to leave? You will be logged out for security purposes.")?Y():window.history.pushState(null,"",e.pathname)};window.addEventListener("popstate",ce);const pe=Ee=>(Ee.preventDefault(),Ee.returnValue="Department selection is required. Are you sure you want to leave?",Ee.returnValue);return window.addEventListener("beforeunload",pe),()=>{window.removeEventListener("popstate",ce),window.removeEventListener("beforeunload",pe)}},[e.pathname]),T.useEffect(()=>{(async()=>{var pe;if(!t){D("Please log in to continue."),n("/login");return}M(!0),D(null);try{const Ee=await r("api"),Z=await Gi();he(Z.aesKey),B(Z.aesIV),console.log("Fetching departments"),P(["BBU-Warangal","BBU-Hyderabad"])}catch(Ee){console.error("Error fetching initial options:",Ee),((pe=Ee.response)==null?void 0:pe.status)===401?(D("Session expired. Please log in again."),n("/login")):(D("Failed to load department options. Using default options."),P(["BBU-Warangal","BBU-Hyderabad"]))}finally{M(!1)}})()},[t,r,n]),T.useEffect(()=>{(async()=>{if(!(!d||!t||!oe||!K))try{const pe=await r("api");console.log("Fetching sub-departments for department:",d),$(["Development","Sales","Finance"])}catch(pe){console.error("Error fetching sub-departments:",pe),D("Failed to load sub-department options. Using default options."),$(["Development","Sales","Finance"])}})()},[d,t,r,oe,K]),T.useEffect(()=>{(async()=>{if(!(!f||!t||!oe||!K))try{const pe=await r("api");console.log("Fetching managers for sub-department:",f);const Z=(await xn.get("/User/managers",{headers:{Authorization:`Bearer ${pe}`},params:{subDepartment:f}})).data.map(se=>{try{const ke=Fr(se.name,oe,K).replace(" (Quadrant Technologies)","");return ke&&typeof ke=="string"?ke:null}catch(we){return console.error(`Error decrypting name for user ${se.userId}:`,we),null}}).filter(se=>se!=null).sort();ne(Z),console.log("Decrypted manager names:",Z)}catch(pe){console.error("Error fetching managers:",pe),D("Failed to load manager options."),ne([])}})()},[f,t,r,oe,K]);const Q=ce=>{h(ce),w(!1),p(""),x("")},ee=ce=>{p(ce),S(!1),x("")},_=ce=>{x(ce),b(!1)},F=async()=>{var ce;if(!d||!f||!y){D("Please select all required fields.");return}I(!0),D(null);try{const pe={department:d,subDepartment:f,manager:y};localStorage.setItem("userDepartmentData",JSON.stringify(pe)),localStorage.setItem("departmentSelectionCompleted","true");const Ee=await r("api");await xn.post(`/User/${o==null?void 0:o.id}/department`,pe,{headers:{Authorization:`Bearer ${Ee}`}}),console.log("Department selection saved:",pe);const Z=a(),we={admin:"/admin",manager:"/manager",user:"/tasks"}[Z]||"/dashboard";window.removeEventListener("beforeunload",()=>{}),n(we,{replace:!0})}catch(pe){console.error("Error saving department selection:",pe),D(((ce=pe.response)==null?void 0:ce.status)===401?"Authentication failed. Please log in again.":"Failed to save department selection. Please try again.")}finally{I(!1)}},Y=async()=>{console.log("User wants to go back - logging out for security");try{window.removeEventListener("beforeunload",()=>{}),await l(),n("/login",{replace:!0})}catch(ce){console.error("Error during logout:",ce),n("/login",{replace:!0})}},W=({isOpen:ce,toggle:pe,selected:Ee,placeholder:Z,options:se,onSelect:we,disabled:ke=!1,ariaLabel:Le})=>{const Te=Array.isArray(se)?se:[];return Array.isArray(se)?se.some(ze=>typeof ze!="string")&&console.warn("DropdownButton: 'options' contains non-string values",se):console.warn("DropdownButton: 'options' prop is not an array",se),c.jsxs("div",{className:"relative w-full",children:[c.jsx("button",{onClick:pe,disabled:ke,"aria-label":Le,"aria-expanded":ce,className:`w-full px-4 py-3 text-left bg-white border border-violet-300 rounded-lg shadow-sm hover:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors ${ke?"bg-gray-50 text-gray-400 cursor-not-allowed":"cursor-pointer"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:Ee?"text-gray-900":"text-gray-500",children:Ee||Z}),c.jsx(Nl,{className:`w-5 h-5 transition-transform ${ce?"rotate-180":""} ${ke?"text-gray-300":"text-gray-400"}`})]})}),ce&&!ke&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-violet-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",role:"listbox",children:c.jsx("div",{className:"py-1",children:Te.length>0?Te.map((ze,it)=>c.jsx("button",{onClick:()=>we(ze),className:"w-full px-4 py-2 text-left text-gray-700 hover:bg-violet-50 hover:text-violet-700 focus:outline-none focus:bg-violet-50 focus:text-violet-700 transition-colors",role:"option","aria-selected":Ee===ze,children:ze},it)):c.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No options available"})})})]})};return c.jsxs("div",{className:"max-w-2xl mx-auto p-8 bg-violet-50 min-h-screen",children:[c.jsx("style",{children:`
          /* Ensure dropdown transitions are smooth and don't affect layout */
          .dropdown-container {
            transition: all 0.2s ease-in-out;
          }
          /* Prevent layout shifts during dropdown open/close */
          .dropdown-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
          }
        `}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-violet-100 min-h-[450px] flex flex-col",children:[c.jsx("h1",{className:"text-2xl font-bold text-violet-800 mb-2 text-center",children:"Welcome! Complete Your Profile"}),c.jsx("p",{className:"text-gray-600 text-center mb-8",children:"Please select your department information to get started"}),R&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:R}),j?c.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600",children:"Loading options..."}):c.jsxs("div",{className:"space-y-6 flex-1 dropdown-container",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Department ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(W,{isOpen:C,toggle:()=>w(!C),selected:d,placeholder:"Select Department",options:U,onSelect:Q,ariaLabel:"Select Department"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sub-Department ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(W,{isOpen:E,toggle:()=>S(!E),selected:f,placeholder:"Select Sub-Department",options:L,onSelect:ee,disabled:!d,ariaLabel:"Select Sub-Department"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Manager ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(W,{isOpen:A,toggle:()=>b(!A),selected:y,placeholder:"Select Manager",options:z,onSelect:_,disabled:!f,ariaLabel:"Select Manager"})]})]}),d&&c.jsxs("div",{className:"mt-6 p-4 bg-violet-50 rounded-lg border border-violet-200",children:[c.jsx("h3",{className:"font-semibold text-violet-800 mb-2",children:"Current Selection:"}),c.jsxs("div",{className:"space-y-1 text-sm text-violet-700",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Department:"})," ",d]}),f&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Sub-Department:"})," ",f]}),y&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Manager:"})," ",y]})]})]}),c.jsxs("div",{className:"mt-8 flex justify-between",children:[c.jsx("button",{onClick:Y,className:"px-6 py-3 rounded-lg font-medium bg-gray-600 text-white hover:bg-gray-700 transition-all","aria-label":"Go back to login",children:"Back to Login"}),c.jsx("button",{onClick:F,disabled:!d||!f||!y||k||j,className:`px-6 py-3 rounded-lg font-medium transition-all flex items-center space-x-2 ${d&&f&&y&&!k&&!j?"bg-violet-600 hover:bg-violet-700 text-white shadow-md hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Continue to User View",children:k?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}):c.jsx("span",{children:"Complete Setup"})})]})]})]})};function MF(){const[n,e]=T.useState(!1),[t,r]=T.useState(null);if(T.useEffect(()=>{(async()=>{var l;try{await _0.initialize();const d=await _0.handleRedirectPromise();d&&(console.log("Authentication redirect handled successfully"),console.log("Token claims:",d.idTokenClaims),console.log("Roles in token:",((l=d.idTokenClaims)==null?void 0:l.roles)||"No roles found")),e(!0)}catch(d){console.error("MSAL initialization failed:",d),r(d.message)}})()},[]),!n)return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-purple-100 flex items-center justify-center",children:t?c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md text-center",children:[c.jsx("div",{className:"text-red-600 text-xl font-semibold mb-4",children:"Authentication Error"}),c.jsx("p",{className:"text-gray-600 mb-4",children:t}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:"Retry"})]}):c.jsx(CS,{message:"Initializing authentication..."})});const o=({children:a})=>c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-purple-100",children:[c.jsx(K6,{}),c.jsx("main",{children:a})]});return c.jsx(pD,{instance:_0,children:c.jsx(Q4,{children:c.jsx(fj,{children:c.jsx(l2,{children:c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-purple-100",children:c.jsxs(B_,{children:[c.jsx(dr,{path:"/login",element:c.jsx(pj,{})}),c.jsx(dr,{path:"/department-selector",element:c.jsx(jF,{})}),c.jsx(dr,{path:"/",element:c.jsx(PF,{})}),c.jsx(dr,{element:c.jsx(O0,{requiredRole:"user"}),children:c.jsx(dr,{path:"/tasks",element:c.jsx(o,{children:c.jsx(v1,{})})})}),c.jsx(dr,{element:c.jsx(O0,{requiredRole:"manager"}),children:c.jsx(dr,{path:"/manager",element:c.jsx(o,{children:c.jsx(DF,{})})})}),c.jsxs(dr,{element:c.jsx(O0,{requiredRole:["admin","user"]}),children:[c.jsx(dr,{path:"/admin",element:c.jsx(o,{children:c.jsx(v1,{})})}),c.jsx(dr,{path:"/admin/dependency",element:c.jsx(o,{children:c.jsx(yS,{})})})]}),c.jsx(dr,{path:"/unauthorized",element:c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md text-center",children:[c.jsx("div",{className:"text-red-600 text-2xl font-bold mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page."}),c.jsx("button",{onClick:()=>window.history.back(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 mr-2",children:"Go Back"}),c.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Dashboard"})]})})}),c.jsx(dr,{path:"*",element:c.jsx(V6,{})})]})})})})})})}KA.createRoot(document.getElementById("root")).render(c.jsx(MF,{}));
